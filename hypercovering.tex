\input{preamble}

% OK, start here.
%
\begin{document}

\title{Hypercoverings}

%\begin{abstract}
%\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
Let $\mathcal{C}$ be a site, see Sites, Definition \ref{sites-definition-site}.
Let $X$ be an object of $\mathcal{C}$.
Given an abelian sheaf $\mathcal{F}$
on $\mathcal{C}$ we would like to compute
its cohomology groups
$$
H^i(X, \mathcal{F}).
$$
According to our general definitions
(insert future reference here)
this cohomology group is computed by
choosing an injective resolution
$$
0 \to \mathcal{F} \to \mathcal{I}^0 \to \mathcal{I}^1 \to \ldots
$$
and setting
$$
H^i(X, \mathcal{F})
=
H^i(
\Gamma(X, \mathcal{I}^0) \to
\Gamma(X, \mathcal{I}^1) \to
\Gamma(X, \mathcal{I}^2)\to \ldots)
$$
We will have to do quite a bit of work to prove that we
may also compute these cohomology groups without
choosing an injective resolution. Also, we will only do this
in case the site $\mathcal{C}$ has fibre products.

\medskip\noindent
A hypercovering in a site is a generalization of a covering.
See \cite[Expose V, Sec. 7]{SGA4}. A hypercovering is a special
case of a simplicial augmentation where one has cohomological
descent, see \cite[Expose Vbis]{SGA4}. A nice manuscript on
cohomological descent is the text by Brian Conrad, see
\url{http://math.stanford.edu/~conrad/papers/hypercover.pdf}.
Brian's text follows the exposition in \cite[Expose Vbis]{SGA4}, and in
particular discusses a more general kind of hypercoverings, such as
proper hypercoverings of schemes used to compute etale cohomology
for example. A proper hypercovering can be seen as a hypercovering
in the category of schemes endowed with a different topology than
the etale topology, but still they can be used to compute the etale
cohomology.





























\section{Hypercoverings}
\label{section-hypercoverings}

\noindent
In order to start we make the following definition.
The letters ``SR'' stand for Semi-Representable.

\begin{definition}
\label{definition-SR}
Let $\mathcal{C}$ be a site with fibre products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
We denote $\text{SR}(\mathcal{C}, X)$ the category with
\begin{enumerate}
\item objects are families of morphisms
$\{U_i \to X\}_{i \in I}$, and
\item morphisms $\{U_i \to X\}_{i \in I} \to
\{V_j \to X\}_{j \in J}$ are given by
a map $\alpha : I \to J$ and for each $i \in I$
a morphism $f_i : U_i \to V_{\alpha(i)}$ over $X$.
\end{enumerate}
\end{definition}

\noindent
This definition is different from the one in
\cite[Expose V, Sec. 7]{SGA4}, but it seems flexible
enough to do all the required arguments.
Note that this is a ``big'' category. We will later
``bound'' the size of the index sets $I$ that we need
and we can then redefine $\text{SR}(\mathcal{C}, X)$ 
to become a category.

\begin{definition}
\label{definition-SR-F}
Let $\mathcal{C}$ be a site with fibre products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
We denote $F$ the functor
\begin{eqnarray*}
F : \text{SR}(\mathcal{C}, X) & \longrightarrow & \text{PSh}(\mathcal{C}) \\
\{U_i \to X\}_{i \in I} & \longmapsto & \coprod\nolimits_{i\in I} h_{U_i}
\end{eqnarray*}
where $h_U$ denotes the representable presheaf associated to
the object $U$.
\end{definition}

\noindent
Given a morphism $U \to X$ we obtain a morphism
$h_U \to h_X$ of representable presheaves.
Thus it makes more sense to think of $F$ as a functor
into the category of presheaves of sets over $h_X$,
namely $\textit{PSh}(\mathcal{C})/h_X$.

\begin{lemma}
\label{lemma-coprod-prod-SR}
Let $\mathcal{C}$ be a site with fibre products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
The category $\text{SR}(\mathcal{C}, X)$ has
coproducts and finite limits. Moreover, the functor $F$ commutes
with coproducts and fibre products, and transforms products
into fibre products over $h_X$. In other words, it commutes
with finite limits when thought of as a functor into
$\textit{PSh}(\mathcal{C})/h_X$.
\end{lemma}

\begin{proof}
It is clear that the coproduct of
$\{U_i \to X\}_{i \in I}$ and $\{V_j \to X\}_{j \in J}$
is $\{U_i \to X\}_{i \in I} \coprod \{V_j \to X\}_{j \in J}$
and similarly for coproducts of
families of families of morphisms with target $X$.
The object $\{X \to X\}$ is a final
object of $\text{SR}(\mathcal{C}, X)$.
Suppose given a morphism
$(\alpha, f_i) : \{U_i \to X\}_{i \in I} \to \{V_j \to X\}_{j \in J}$
and a morphism
$(\beta, g_k) : \{W_k \to X\}_{k \in K} \to \{V_j \to X\}_{j \in J}$.
The fibred product of these morphisms is given by
$$
\{ U_i \times_{f_i, V_j, g_k} W_k \to X \}_{(i,j,k) \in I\times J\times K
\text{ such that } k = \alpha(i) = \beta(j)}
$$
The fibre products exist by the assumption that
$\mathcal{C}$ has fibre products.
Thus $\text{SR}(\mathcal{C}, X)$ has finite limits,
see Categories, Lemma \ref{categories-lemma-finite-limits-exist}.
The statements on the functor $F$ are clear from the constructions
above.
\end{proof}

\begin{definition}
\label{definition-covering-SR}
Let $\mathcal{C}$ be a site with fibred products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
Let $f = (\alpha, f_i) : \{U_i \to X\}_{i \in I} \to \{V_j \to X\}_{j \in J}$
be a morphism in the category $\text{SR}(\mathcal{C}, X)$.
We say that {\it $f$ is a covering} if for every $j \in J$ the
family of morphisms $\{U_i \to V_j\}_{i \in I, \alpha(i) = j}$
is a covering for the site $\mathcal{C}$.
\end{definition}

\noindent
According to the results in the chapter on simplicial methods the
coskelet of a truncated simplicial object of
$\text{SR}(\mathcal{C}, X)$ exists. Hence the following
definition makes sense.

\begin{definition}
\label{definition-hypercovering}
Let $\mathcal{C}$ be a site.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
A {\it hypercovering} of $X$ is a simplicial object
$K$ in the category $\text{SR}(\mathcal{C}, X)$ such that
\begin{enumerate}
\item The object $K_0$ is a covering of $X$ for the site $\mathcal{C}$.
\item For every $n \geq 0$ the canonical morphism
$$
K_{n + 1} \longrightarrow (\text{cosk}_n \text{sk}_n K)_{n + 1}
$$
is a covering in the sense defined above.
\end{enumerate}
\end{definition}

\noindent
Condition (1) makes sense since each object of
$\text{SR}(\mathcal{C}, X)$ is after all a family
of morphisms with target $X$.

\begin{example}
\label{example-cech}
Let $\{U_i \to X\}_{i \in I}$ be a covering of the site $\mathcal{C}$.
Set $K_0 = \{U_i \to X\}_{i \in I}$.
Then $K_0$ is a $0$-truncated simplicial object of
$\text{SR}(\mathcal{C}, X)$. Hence we may form
$$
K = \text{cosk}_0 K_0.
$$
Clearly $K$ passes condition (1) of Definition \ref{definition-hypercovering}.
Since all the morphisms $K_{n + 1} \to (\text{cosk}_n \text{sk}_n K)_{n + 1}$
are isomorphisms it also passes condition (2). Note that
the terms $K_n$ are the usual
$$
K_n = \{
U_{i_0} \times_X U_{i_1} \times_X \ldots \times_X U_{i_n} \to X
\}_{(i_0, i_1, \ldots, i_n) \in I^{n + 1}}
$$
\end{example}

\begin{lemma}
\label{lemma-hypercoverings-set}
Let $\mathcal{C}$ be a site with fibre products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
The collection of all hypercoverings of $X$ forms a set.
\end{lemma}

\begin{proof}
Since $\mathcal{C}$ is a site, the set of all coverings of
$S$ forms a set. Thus we see that the collection
of possible $K_0$ forms a set. Suppose we have shown that
the collection of all possible $K_0, \ldots, K_n$ form
a set. Then it is enough to show that given
$K_0, \ldots, K_n$ the collection of all possible
$K_{n + 1}$ forms a set. And this is clearly true since
we have to choose $K_{n + 1}$ among all possible coverings
of $(\text{cosk}_n \text{sk}_n K)_{n + 1}$.
\end{proof}

\begin{remark}
\label{remark-hypercoverings-really-set}
The lemma does not just say that there is a cofinal
system of choices of hypercoverings that is a set,
but that really the hypercoverings form a set.
\end{remark}

\noindent
The category of presheaves on $\mathcal{C}$ has
finite (co)limits. Hence the functors $\text{cosk}_n$
exists for presheaves of sets.

\begin{lemma}
\label{lemma-hypercovering-F}
Let $\mathcal{C}$ be a site with fibre products.
Let $X \in \text{Ob}(\mathcal{C})$ be an object of $\mathcal{C}$.
Let $K$ be a hypercovering of $X$.
Consider the simplicial object $F(K)$ of $\textit{PSh}(\mathcal{C})$.
\begin{enumerate}
\item The morphism of presheaves $F(K)_0 \to h_X$ becomes
a surjection after sheafification.
\item The morphism
$$
(d^1_0, d^1_1) :
F(K)_1
\longrightarrow
F(K)_0 \times_{h_X} F(K)_0
$$
becomes a surjection after sheafification.
\item For every $n \geq 1$ the morphism
$$
F(K)_{n + 1} \longrightarrow (\text{cosk}_n \text{sk}_n F(K))_{n + 1}
$$
turns into a surjection after sheafification.
\end{enumerate}
\end{lemma}

\begin{proof}
We will use the fact that if
$\{U_i \to U\}_{i \in I}$ is a covering of the site
$\mathcal{C}$, then the morphism
$$
\coprod\nolimits_{i \in I} h_{U_i} \to h_U
$$
becomes surjective after sheafification, see
Sites, Lemma \ref{sites-lemma-covering-surjective-after-sheafification}.
Thus the first assertion follows immediately.

\medskip\noindent
For the second assertion, note that according to
Simplicial \ref{}
the simplicial object $\text{cosk}_0 \text{sk}_0 K$
has terms $K_0 \times \ldots \times K_0$. Thus
according to the definition of a hypercovering we
see that $(d^1_0, d^1_1) : K_1 \to K_0 \times K_0$ is a
covering. Hence (2) follows from the claim above
and the fact that $F$ transforms products into fibred
products over $h_X$.

\medskip\noindent
For the third, we claim that
$\text{cosk}_n \text{sk}_n F(K) =
F(\text{cosk}_n \text{sk}_n K)$ for $n \geq 1$.
To prove this, denote temporarily $F'$ the functor
$\text{SR}(\mathcal{C}, X) \to \text{PSh}(\mathcal{C})/h_X$.
By Lemma \ref{lemma-coprod-prod-SR} the functor
$F'$ commutes with finite limits.
By our description of the $\text{cosk}_n$ functor in 
Simplicial, Section \ref{simplicial-section-skelet}
we see that $\text{cosk}_n \text{sk}_n F'(K) =
F'(\text{cosk}_n \text{sk}_n K)$.
Recall that the category used in the description of
$(\text{cosk}_n U)_m$ in
Simplicial, Lemma \ref{simplicial-lemma-existence-cosk}
is the category $(\Delta/[m])^{opp}_{\leq n}$. It is an
amusing exercise to show that $(\Delta/[m])_{\leq n}$ is
a connected category (see
Categories, \ref{categories-definition-category-connected})
as soon as $n \geq 1$. Hence,
Categories, Lemma \ref{categories-lemma-connected-limit-over-X}
shows that $\text{cosk}_n \text{sk}_n F'(K) =
\text{cosk}_n \text{sk}_n F(K)$. Whence the claim.
Property (2) follows from this, because now we see that
the morphism in (2) is the result of applying the
functor $F$ to a covering as in Definition \ref{definition-covering-SR},
and the result follows from the first fact mentioned
in this proof.
\end{proof}



\section{Acyclicity}
\label{section-acyclicity}

\noindent
Let $\mathcal{C}$ be a site.
For a presheaf of sets $\mathcal{F}$ we denote $\mathbf{Z}_\mathcal{F}$
the presheaf of abelian groups defined by the rule
$$
\mathbf{Z}_\mathcal{F}(U) = \text{free abelian group on }\mathcal{F}(U).
$$
Of course the construction $\mathcal{F} \mapsto \mathbf{Z}_\mathcal{F}$
is a functor and it is left adjoint to the forgetful functor
$\textit{PAb}(\mathcal{C}) \to \textit{PSh}(\mathcal{C})$.
Of course the sheafification $\mathbf{Z}_\mathcal{F}^\#$ is
a sheaf of abelian groups, and the functor
$\mathcal{F} \mapsto \mathbf{Z}_\mathcal{F}^\#$ is a
left adjoint as well.

\begin{definition}
\label{definition-homology}
Let $\mathcal{C}$ be a site.
Let $K$ be a simplicial object of $\text{PSh}(\mathcal{C})$.
By the above we get a simplicial object $\mathbf{Z}_K^\#$ of
$\textit{Ab}(\mathcal{C})$. We can take its associated
complex of abelian presheaves $s(\mathbf{Z}_K^\#)$, see
Simplicial, Section \ref{simplicial-section-complexes}.
The {\it homology of $K$} is the homology of the
complex of abelian sheaves $s(\mathbf{Z}_K^\#)$.
\end{definition}

\noindent
In other words, the {\it $i$th homology $H_i(K)$ of $K$}
is the sheaf of abelian groups $H_i(K) = H_i(s(\mathbf{Z}_K^\#))$.
In this section we worry about the homology in case $K$
is a hypercovering of an object $X$ of $\mathcal{C}$.

\begin{lemma}
\label{lemma-compare-cosk0}
Let $\mathcal{C}$ be a site.
Let $\mathcal{F} \to \mathcal{G}$ be a morphism
of presheaves of sets. Denote $K$ the simplicial
object of $\text{PSh}(\mathcal{C})$ whose $n$th
term is the $(n + 1)$st fibre product of $\mathcal{F}$
over $\mathcal{G}$, see
Simplicial, \ref{simplicial-example-fibre-products-simplicial-object}.
Then, if $\mathcal{F} \to \mathcal{G}$ is surjective after
sheafification, we have
$$
H_i(K) = 
\left\{
\begin{matrix}
0 & \text{if} & i > 0\\
\mathbf{Z}_\mathcal{G}^\# & \text{if} & i = 0
\end{matrix}
\right.
$$
The isomorphism in degree $0$ is given by the
morphsm $H_0(K) \to \mathbf{Z}_\mathcal{G}^\#$
coming from the map $(\mathbf{Z}_K^\#)_0 = 
\mathbf{Z}_\mathcal{F}^\# \to \mathbf{Z}_\mathcal{G}^\#$.
\end{lemma}

\begin{proof}
Let $\mathcal{G}' \subset \mathcal{G}$ be the image of
the morphism $\mathcal{F} \to \mathcal{G}$.
Let $U \in \text{Ob}(\mathcal{C})$. Set
$A = \mathcal{F}(U)$ and $B = \mathcal{G}'(U)$.
Then the simplicial set $K(U)$ is equal to the simplicial
set with $n$-simplices given by
$$
A \times_B A \times_B \ldots \times_B A\ (n + 1 \text{ factors)}.
$$
By Simplicial, Lemma \ref{simplicial-lemma-cosk-minus-one-equivalence}
the morphism $K(U) \to B$ is a homotopy equivalence. Hence
applying the functor ``free abelian group on'' to this
we deduce that
$$
\mathbf{Z}_K(U) \longrightarrow \mathbf{Z}_B
$$
is a homotopy equivalence. Note that $s(\mathbf{Z}_B)$ is
the complex
$$
\ldots \to
\bigoplus\nolimits_{b \in B}\mathbf{Z} \xrightarrow{0}
\bigoplus\nolimits_{b \in B}\mathbf{Z} \xrightarrow{1}
\bigoplus\nolimits_{b \in B}\mathbf{Z} \xrightarrow{0}
\bigoplus\nolimits_{b \in B}\mathbf{Z} \to 0
$$
see Simplicial, Lemma \ref{simplicial-lemma-homology-eilenberg-maclane}.
Thus we see that
$H_i(s(\mathbf{Z}_K(U))) = 0$ for $i > 0$, and
$H_0(s(\mathbf{Z}_K(U))) = \bigoplus_{b \in B}\mathbf{Z}
= \bigoplus_{s \in \mathcal{G}'(U)} \mathbf{Z}$.
These identifications are compatible with restriction
maps.

\medskip\noindent
We conclude that $H_i(s(\mathbf{Z}_K)) = 0$ for $i > 0$ and
$H_0(s(\mathbf{Z}_K)) = \mathbf{Z}_{\mathcal{G}'}$, where here
we compute homology groups in $\textit{PAb}(\mathcal{C})$. Since
sheafification is an exact functor we deduce the result
of the lemma. Namely, the exactness implies
that $H_0(s(\mathbf{Z}_K))^\# = H_0(s(\mathbf{Z}_K^\#))$,
and similarly for other indices.
\end{proof}

\begin{lemma}
\label{lemma-acyclicity}
Let $\mathcal{C}$ be a site.
Let $f : L \to K$ be a morphism of
simplicial objects of $\textit{PSh}(\mathcal{C})$.
Let $n \geq 0$ be an integer.
Assume that
\begin{enumerate}
\item For $i < n$ the morphism $L_i \to K_i$ is an isomorphism.
\item The morphism $L_n \to K_n$ is surjective after sheafification.
\item The canonical map $L \to \text{cosk}_n \text{sk}_n L$ is an isomorphism.
\item The canonical map $K \to \text{cosk}_n \text{sk}_n K$ is an isomorphism.
\end{enumerate}
Then $H_i(f) : H_i(L) \to H_i(K)$ is an isomorphism.
\end{lemma}

\begin{proof}
This proof is exactly the same as the proof of
Lemma \ref{lemma-compare-cosk0} above. Namely,
we first let $K_n' \subset K_n$ be the sub presheaf
which is the image of the map $L_n \to K_n$. Assumption
(2) means that the sheafification of $K_n'$ is equal to
the sheafification of $K_n$. Moreover, since $L_i = K_i$
for all $i < n$ we see that get an $n$-truncated
simplicial presheaf $U$ by taking
$U_0 = L_0 = K_0, \ldots, U_{n - 1} = L_{n - 1} = K_{n - 1}, U_n = K'_n$.
Denote $K' = \text{cosk}_n U$, a simplicial presheaf.
Because we can construct $K'_m$ as a finite limit, and
since sheafification is exact, we see that
$(K'_m)^\# = K_m$. In other words, $(K')^\# = K^\#$.
We conclude, by exactness of sheafification once more,
that $H_i(K) = H_i(K')$. Thus it suffices to prove the lemma
for the morphism $L \to K'$, in other words, we may
assume that $L_n \to K_n$ is a surjective morphism
of {\it presheaves}!

\medskip\noindent
In this case, for any object $U$ of $\mathcal{C}$ we
see that the morphism of simplicial sets
$$
L(U) \longrightarrow K(U)
$$
satisfies all the assumptions of
Simplicial, Lemma \ref{simplicial-lemma-equiv}.
Hence it is a homotopy equivalence, and
thus 
$$
\mathbf{Z}_L(U) \longrightarrow \mathbf{Z}_K(U)
$$
is a homotopy equivalence too. This for all $U$.
The result follows.
\end{proof}

\begin{lemma}
\label{lemma-acyclic-hypercover-sheaves}
Let $\mathcal{C}$ be a site.
Let $K$ be a simplicial presheaf.
Let $\mathcal{G}$ be a presheaf. 
Let $K_0 \to \mathcal{G}$ be a morphism of presheaves.
Suppose that
\begin{enumerate}
\item The morphism of presheaves $K_0 \to \mathcal{G}$ becomes
a surjection after sheafification.
\item The morphism
$$
(d^1_0, d^1_1) :
K_1
\longrightarrow
K_0 \times_{\mathcal{G}} K_0
$$
becomes a surjection after sheafification.
\item For every $n \geq 1$ the morphism
$$
K_{n + 1} \longrightarrow (\text{cosk}_n \text{sk}_n K)_{n + 1}
$$
turns into a surjection after sheafification.
\end{enumerate}
Then $H_i(K) = 0$ for $i > 0$ and
$H_0(K) = \mathbf{Z}_\mathcal{G}^\#$.
\end{lemma}




\begin{lemma}
\label{lemma-hypercovering-acyclic}
Let $\mathcal{C}$ be a site with fibre products.
Let $X$ be an object of 

\end{lemma}

















\section{Covering simplicial objects}
\label{section-making-simplicial}

\noindent
Let $\mathcal{C}$ be a category.
Let $U$ be a simplicial object of $\mathcal{C}$.
Suppose $n\geq 0$, and suppose $\pi : V \to U_n$ is
a representable morphism of $\mathcal{C}$. This
means that the fibre products $V \times_{U_n} W$
exist for all morphisms $W \to U_n$.

\medskip\noindent
For any $k \geq 0$ consider the fibre product over $U_k$
$$
U'_k = \prod\nolimits_{\varphi \in \text{Mor}_\Delta([n],[k])}
V\times_{U_n, U(\varphi)} U_k.
$$
By our assumption on the morphism $V \to U_n$ this fibre product
exists. For any $T \in \text{Ob}(\mathcal{C})$ the set of morphism
$T \to U'_k$ is given by the following formula
$$ 
\{
(f : T \to U_k, (f_\varphi : T \to V)_{\varphi \in \text{Mor}_\Delta([n],[k])})
\mid
\pi \circ f_{\varphi} = U(\varphi) \circ f\ \forall \varphi
\}
$$
For any $\psi : [l] \to [k]$ there is a canonical morphism
$U'_k \to U'_l$ coming from the map $\text{Mor}_\Delta([n],[l])
\to \text{Mor}_\Delta([n],[k]), \varphi \mapsto \varphi \circ \psi$,
the identity map on $V$ and the morphism
$U(\psi) : U_k \to U_l$. In terms of the $T$-valued points
it maps $(f, (f_\varphi)_\varphi)$ to the collection
$(U(\psi) \circ f, (f_{\varphi \circ \psi})_{\varphi})$.

\medskip\noindent
Clearly, this gives rise to a simplicial object $U'$ of
$\mathcal{C}$. The natural morphisms $U'_m \to U_m$ give rise to a
morphism of simplicial objects $U' \to U$. Note that
the morphism $U'_n \to U_n$ factors throught the morphism $V \to U_n$
by projection onto the factor corresponding to $\varphi=\text{id}_{[n]}$.

\begin{lemma}
\label{lemma-construct-new-covers}
Suppose that $U$ and $V\to U_n$ are as above.
The morphism of simplicial objects 
$U' \to U$ constructed above has the following 
properties:
(1) The morphism $U'_n \to U_n$ factors trough $V \to U_n$.
(2) For any $m$ the morphism $U'_m \to U_m$
is a fibre product over $U_m$ of base changes
of the morphism $V \to U_n$.
\end{lemma}


















\section{The general case}

\noindent
Mention how things work more generally, for example if $\mathcal{C}$
does not have the property that coverings consisting of a single map
are cofinal. State the theorem in the correct generality.

\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
