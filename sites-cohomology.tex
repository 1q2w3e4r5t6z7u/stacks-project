\input{preamble}

% OK, start here.
%
\begin{document}

\title{Cohomology on Sites}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this document we work out some topics on cohomology of sheaves.
We work out what happens for sheaves on sites,
allthough often we will simply duplicate the discussion,
the constructions, and the proofs from the topological
case in the case.
Basic references are \cite{SGA4}, \cite{Godement} and \cite{Iversen}.

\section{Topics}
\label{section-topics}

\noindent
Here are some topics that should be discussed in this chapter,
and have not yet been written.
\begin{enumerate}
\item Cohomology of a sheaf of modules on a site is the same
as the cohomology of the underlying abelian sheaf.
\item Hypercohomology on a site.
\item Ext-groups.
\item Ext sheaves.
\item Tor functors.
\item Higher direct images for a morphism of sites.
\item Derived pullback for morphisms between ringed sites.
\item Cup-product.
\item Group cohomology.
\item Comparison of group cohomology and cohomology on $\mathcal{T}_G$.
\item Cech cohomology on sites.
\item Cech to cohomology spectral sequence on sites.
\item Leray Spectral sequence for a morphism between ringed sites.
\item Etc, etc, etc.
\end{enumerate}



\section{Cohomology of sheaves}
\label{section-cohomology-sheaves}

\noindent
Let $\mathcal{C}$ be a site, see
Sites, Definition \ref{sites-definition-site}.
Let $\mathcal{F}$ be a abelian sheaf on $\mathcal{C}$.
We know that the category of abelian sheaves on $\mathcal{C}$
has enough injectives, see
Injectives, Theorem \ref{injectives-theorem-sheaves-injectives}.
Hence we can choose an injective resolution
$\mathcal{F}[0] \to \mathcal{I}^\bullet$.
For any object $X$ of the site $\mathcal{C}$ we define
$$
H^i(X, \mathcal{F}) = H^i(\Gamma(X, \mathcal{I}^\bullet))
$$
to be the {\it $i$th cohomology group of the abelian sheaf
$\mathcal{F}$ over the object $X$}. In other words, these are the
right derived functors of the functor $\mathcal{F} \mapsto \mathcal{F}(U)$.

\medskip\noindent
It sometimes happens that
the site $\mathcal{C}$ does not have a final object. In this
case we define the {\it global sections} of a presheaf
of sets $\mathcal{F}$ over $\mathcal{C}$ to be the set
$$
\Gamma(\mathcal{C}, \mathcal{F}) =
\text{Mor}_{\textit{PSh}(\mathcal{C})}(e, \mathcal{F})
$$
where $e$ is a final object in the category of presheaves on $\mathcal{C}$.
In this case, given an abelian sheaf $\mathcal{F}$ on $\mathcal{C}$,
we define the {\it $i$th cohomology group of $\mathcal{F}$
on $\mathcal{C}$} as follows
$$
H^i(\mathcal{C}, \mathcal{F}) = H^i(\Gamma(\mathcal{C}, \mathcal{I}^\bullet))
$$
in other words, it is the $i$th right derived functor of the
global sections functor.

\medskip\noindent
We want to generalize this discussion just a little bit.
Namely, suppose that $(\mathcal{C}, \mathcal{O})$
is a ringed site. (The case of abelian sheaves will be included
by thinking about the case where $\mathcal{O} = \underline{\mathbf{Z}}$
is the constant sheaf associated to $\mathbf{Z}$.)
By Homology, Remark \ref{homology-remark-big-abelian-category}
there exists a localization functor
$$
j = j_{(\mathcal{C}, \mathcal{O})} :
K^{+}(\textit{Mod}(\mathcal{O}))
\longrightarrow
D^{+}(\textit{Mod}(\mathcal{O})).
$$
To ease notation we are going to write
$$
K^{+}(\mathcal{O}) = K^{+}(\textit{Mod}(\mathcal{O}))
\quad
\text{and}
\quad
D^{+}(\mathcal{O}) = D^{+}(\textit{Mod}(\mathcal{O})).
$$
Given a ring $R$ we similarly write
$$
K^{+}(R) = K^{+}(\text{Mod}(R))
\quad
\text{and}
\quad
D^{+}(R) = D^{+}(\text{Mod}(R))
$$
and we denote $j_R : K^{+}(R) \to D^{+}(R)$ the localization functor.
For any left exact functor $F : \textit{Mod}(\mathcal{O}) \to \mathcal{B}$
into any abelian category $\mathcal{B}$ we will denote $RF$ the
right derived functor constructed in
Homology, Section \ref{homology-section-right-derived-functor}
using the localization functor $j$ just described.
Note that we may think of $RF$ as defined on $\textit{Mod}(\mathcal{O})$,
$\text{Comp}^{+}(\textit{Mod}(\mathcal{O}))$,
$K^{+}(\mathcal{O})$, or $D^{+}(\mathcal{O})$
depending on the situation. In addition, whenever possible
we actually think of $RF$ as a functor into $D^{+}(\mathcal{B})$, see
Homology, Remark \ref{homology-remark-right-derived-functor}.

\medskip\noindent
In particular, we have
$
\Gamma(\mathcal{C}, -) :
\textit{Mod}(\mathcal{O})
\longrightarrow
\text{Mod}(\Gamma(\mathcal{C}, \mathcal{O})
$
which gives rise to
$$
R\Gamma(\mathcal{C}, -) :
D^{+}(\mathcal{O})
\longrightarrow
D^{+}(\Gamma(\mathcal{C}, \mathcal{O}))
$$
and $H^i(\mathcal{C}, -) = R^i\Gamma(\mathcal{C}, -)$.
For any object $X$ of the site $\mathcal{C}$ we have
$
\Gamma(X, -) :
\textit{Mod}(\mathcal{O})
\longrightarrow
\text{Mod}(\mathcal{O}(X))
$
which gives rise to
$$
R\Gamma(X, -) :
D^{+}(\mathcal{O})
\longrightarrow
D^{+}(\mathcal{O}(X))
$$
and $H^i(X, -) = R^i\Gamma(X, -)$.







\section{First cohomology and torsors}
\label{section-h1-torsors}

\begin{definition}
\label{definition-torsor}
Let $\mathcal{C}$ be a site.
Let $\mathcal{G}$ be a sheaf of (possibly non-commutative)
groups on $\mathcal{C}$.
A {\it torsor}, or more precisely a {\it $\mathcal{G}$-torsor}, is a sheaf
of sets $\mathcal{F}$ on $\mathcal{C}$ endowed with an action
$\mathcal{G} \times \mathcal{F} \to \mathcal{F}$ such that
\begin{enumerate}
\item whenever $\mathcal{F}(U)$ is nonempty the action
$\mathcal{G}(U) \times \mathcal{F}(U) \to \mathcal{F}(U)$
is simply transitive, and
\item for every $U \in \text{Ob}(\mathcal{C})$
there exists a covering $\{U_i \to U\}_{i \in I}$ of $U$
such that $\mathcal{F}(U_i)$ is nonempty for all $i \in I$.
\end{enumerate}
A {\it morphism of $\mathcal{G}$-torsors} $\mathcal{F} \to \mathcal{F}'$
is simply a morphism of sheaves of sets compatible with the
$\mathcal{G}$-actions. The {\it trivial $\mathcal{G}$-torsor}
is the sheaf $\mathcal{G}$ endowed with the obvious left
$\mathcal{G}$-action.
\end{definition}

\noindent
It is clear that a morphism of torsors is automatically an isomorphism.

\begin{lemma}
\label{lemma-trivial-torsor}
Let $\mathcal{C}$ be a site.
Let $\mathcal{G}$ be a sheaf of (possibly non-commutative)
groups on $\mathcal{C}$.
A $\mathcal{G}$-torsor $\mathcal{F}$ is trivial if and only if
$\Gamma(\mathcal{C}, \mathcal{F}) \not = \emptyset$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-torsors-h1}
Let $\mathcal{C}$ be a site.
Let $\mathcal{H}$ be an abelian sheaf on $\mathcal{C}$.
There is a canonical bijection between the set of isomorphism
classes of $\mathcal{H}$-torsors and $H^1(\mathcal{C}, \mathcal{H})$.
\end{lemma}

\begin{proof}
Let $\mathcal{F}$ be a $\mathcal{H}$-torsor.
Consider the free abelian sheaf $\mathbf{Z}[\mathcal{F}]$
on $\mathcal{F}$. It is the sheafification of the rule
which associates to $U \in \text{Ob}(\mathcal{C})$ the collection of finite
formal sums $\sum n_i[s_i]$ with $n_i \in \mathbf{Z}$
and $s_i \in \mathcal{F}(U)$. There is a natural map
$$
\sigma : \mathbf{Z}[\mathcal{F}] \longrightarrow \underline{\mathbf{Z}}
$$
which to a local section $\sum n_i[s_i]$ associates $\sum n_i$.
The kernel of $\sigma$ is generated by sections of the form
$[s] - [s']$. There is a canonical map
$a : \text{Ker}(\sigma) \to \mathcal{H}$
which maps $[s] - [s'] \mapsto h$ where $h$ is the local section of
$\mathcal{H}$ such that $h \cdot s = s'$. Consider the push out diagram
$$
\xymatrix{
0 \ar[r] &
\text{Ker}(\sigma) \ar[r] \ar[d]^a &
\mathbf{Z}[\mathcal{F}] \ar[r] \ar[d] &
\underline{\mathbf{Z}} \ar[r] \ar[d] &
0 \\
0 \ar[r] &
\mathcal{H} \ar[r] &
\mathcal{E} \ar[r] & 
\underline{\mathbf{Z}} \ar[r] &
0
}
$$
Here $\mathcal{E}$ is the extension obtained by push out.
From the long exact cohomology sequence associated to the lower
short exact sequence we obtain an element
$\xi = \xi_{\mathcal{F}} \in H^1(\mathcal{C}, \mathcal{H})$
by applying the boundary operator to
$1 \in H^0(\mathcal{C}, \underline{\mathbf{Z}})$.

\medskip\noindent
Conversely, given $\xi \in H^1(\mathcal{C}, \mathcal{H})$ we can associate to
$\xi$ a torsor as follows. Choose an embedding $\mathcal{H} \to \mathcal{I}$
of $\mathcal{H}$ into an injective abelian sheaf $\mathcal{I}$. We set
$\mathcal{Q} = \mathcal{I}/\mathcal{H}$ so that we have a short exact
sequence
$$
\xymatrix{
0 \ar[r] &
\mathcal{H} \ar[r] &
\mathcal{I} \ar[r] & 
\mathcal{Q} \ar[r] &
0
}
$$
The element $\xi$ is the image of a global section
$q \in H^0(\mathcal{C}, \mathcal{Q})$
because $H^1(\mathcal{C}, \mathcal{I}) = 0$ (see
Homology, Lemma \ref{homology-lemma-higher-derived-functors}).
Let $\mathcal{F} \subset \mathcal{I}$ be the subsheaf (of sets) of sections
that map to $q$ in the sheaf $\mathcal{Q}$. It is easy to verify that
$\mathcal{F}$ is a $\mathcal{H}$-torsor.

\medskip\noindent
We omit the verification that the two constructions given
above are mutually inverse.
\end{proof}






\section{First cohomology and extensions}
\label{section-h1-extensions}

\begin{lemma}
\label{lemma-h1-extensions}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $\mathcal{C}$.
There is a canonical bijection
$$
\text{Ext}^1_{\textit{Mod}(\mathcal{O})}(\mathcal{O}, \mathcal{F})
\longrightarrow
H^1(\mathcal{C}, \mathcal{F})
$$
which associates to the extension
$$
0 \to \mathcal{F} \to \mathcal{E} \to \mathcal{O} \to 0
$$
the image of $1 \in \Gamma(\mathcal{C}, \mathcal{O})$ in
$H^1(\mathcal{C}, \mathcal{F})$.
\end{lemma}

\begin{proof}
Let us construct the inverse of the map given in the lemma.
Let $\xi \in H^1(\mathcal{C}, \mathcal{F})$.
Choose an injection $\mathcal{F} \subset \mathcal{I}$ with
$\mathcal{I}$ injective in $\textit{Mod}(\mathcal{O})$.
Set $\mathcal{Q} = \mathcal{I}/\mathcal{F}$.
By the long exact sequence of cohomology, we see that 
$\xi$ is the image of of a section
$\tilde \xi \in \Gamma(\mathcal{C}, \mathcal{Q}) =
\text{Hom}_{\mathcal{O}}(\mathcal{O}, \mathcal{Q})$.
Now, we just form the pullback
$$
\xymatrix{
0 \ar[r] &
\mathcal{F} \ar[r] \ar@{=}[d] &
\mathcal{E} \ar[r] \ar[d] &
\mathcal{O} \ar[r] \ar[d]^{\tilde \xi} &
0 \\
0 \ar[r] &
\mathcal{F} \ar[r] &
\mathcal{I} \ar[r] &
\mathcal{Q} \ar[r] &
0
}
$$
see Homology, Section \ref{homology-section-extensions}.
\end{proof}

\noindent
The following lemma will be superceded by the a more general
lemma later on (insert future reference here).

\begin{lemma}
\label{lemma-h1-mod-ab-agree}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules on $\mathcal{C}$.
Let $\mathcal{F}_{ab}$ denote the underlying sheaf of abelian
groups. Then there is a functorial isomorphism
$$
H^1(\mathcal{C}, \mathcal{F}_{ab})
=
H^1(\mathcal{C}, \mathcal{F})
$$
where the left hand side is cohomology computed in
$\textit{Ab}(\mathcal{C})$ and the right hand side
is cohomology computed in $\textit{Mod}(\mathcal{O})$.
\end{lemma}

\begin{proof}
Let $\underline{\mathbf{Z}}$ denote the constant sheaf
$\mathbf{Z}$. As
$\textit{Ab}(\mathcal{C}) = \textit{Mod}(\underline{\mathbf{Z}})$
we may apply lemma \ref{lemma-h1-extensions}
twice, and it follows that we have to show
$$
\text{Ext}^1_{\textit{Mod}(\mathcal{O})}(\mathcal{O}, \mathcal{F})
=
\text{Ext}^1_{\textit{Mod}(\underline{\mathbf{Z}})}(
\underline{\mathbf{Z}}, \mathcal{F}_{ab}).
$$
Suppose that $0 \to \mathcal{F} \to \mathcal{E} \to \mathcal{O} \to 0$
is an extension in $\textit{Mod}(\mathcal{O})$. Then we can use
the obvious map of abelian sheaves
$1 : \underline{\mathbf{Z}} \to \mathcal{O}$
and pullback to obtain an extension $\mathcal{E}_{ab}$, like so:
$$
\xymatrix{
0 \ar[r] &
\mathcal{F}_{ab} \ar[r] \ar@{=}[d] &
\mathcal{E}_{ab} \ar[r] \ar[d] &
\underline{\mathbf{Z}} \ar[r] \ar[d]^{1} &
0 \\
0 \ar[r] &
\mathcal{F} \ar[r] &
\mathcal{E} \ar[r] &
\mathcal{O} \ar[r] &
0
}
$$
The converse is a little more fun. Suppose that
$0 \to \mathcal{F}_{ab} \to \mathcal{E}_{ab} \to \underline{\mathbf{Z}} \to 0$
is an extension in $\textit{Mod}(\underline{\mathbf{Z}})$.
Since $\underline{\mathbf{Z}}$ is a flat $\underline{\mathbf{Z}}$-module
we see that the sequence
$$
0 \to \mathcal{F}_{Ab} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\to \mathcal{E}_{ab}\otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\to \underline{\mathbf{Z}} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\to 0
$$
is exact, see
Modules on Sites, Lemma \ref{sites-modules-lemma-flat-tor-zero}.
Of course
$\underline{\mathbf{Z}} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
= \mathcal{O}$.
Hence we can push out this via the ($\mathcal{O}$-linear) multiplication map
$\mu : \mathcal{F} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\to \mathcal{F}$ to get an extension of $\mathcal{O}$ by
$\mathcal{F}$, like this
$$
\xymatrix{
0 \ar[r] &
\mathcal{F}_{ab} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\ar[r] \ar[d]^\mu &
\mathcal{E}_{ab} \otimes_{\underline{\mathbf{Z}}} \mathcal{O}
\ar[r] \ar[d] &
\mathcal{O} \ar[r] \ar@{=}[d] &
0 \\
0 \ar[r] &
\mathcal{F} \ar[r] &
\mathcal{E} \ar[r] &
\mathcal{O} \ar[r] &
0
}
$$
which is the desired extension. We omit the verification that these
constructions are mutually inverse.
\end{proof}









\section{Locality of cohomology}
\label{section-locality}

\noindent
The following lemma says there is no ambguity in defining the cohomology
of a sheaf $\mathcal{F}$ over an object of the site.

\begin{lemma}
\label{lemma-cohomology-of-open}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $U$ be an object of $\mathcal{C}$.
\begin{enumerate}
\item If $\mathcal{I}$ is an injective $\mathcal{O}$-module
then $\mathcal{I}|_U$ is an injective $\mathcal{O}_U$-module.
\item For any sheaf of $\mathcal{O}$-modules $\mathcal{F}$ we have
$H^p(U, \mathcal{F}) = H^p(\mathcal{C}/U, \mathcal{F}|_U)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Recall that the functor $j_U^{-1}$ of restriction to $U$ is a right adjoint
to the functor $j_{U!}$ of extension by $0$, see
Modules on sites, Section \ref{sites-modules-section-localization}.
Moreover, $j_{U!}$ is exact. Hence (1) follows from
Homology, Lemma \ref{homology-lemma-adjoint-preserve-injectives}.

\medskip\noindent
By definition $H^p(U, \mathcal{F}) = H^p(\mathcal{I}^\bullet(U))$
where $\mathcal{F} \to \mathcal{I}^\bullet$ is an injective resolution
in $\textit{Mod}(\mathcal{O})$.
By the above we see that $\mathcal{F}|_U \to \mathcal{I}^\bullet|_U$
is an injective resolution in $\textit{Mod}(\mathcal{O}_U)$.
Hence $H^p(U, \mathcal{F}|_U)$ is equal to
$H^p(\mathcal{I}^\bullet|_U(U))$.
Of course $\mathcal{F}(U) = \mathcal{F}|_U(U)$ for
any sheaf $\mathcal{F}$ on $\mathcal{C}$.
Hence the equality in (2).
\end{proof}

\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules.
Let $\varphi : U \to V$ be a morphism of $\mathcal{O}$.
Then there is a canonical {\it restriction mapping}
\begin{equation}
\label{equation-restriction-mapping}
H^n(V, \mathcal{F})
\longrightarrow
H^n(U, \mathcal{F}), \quad
\xi \longmapsto \xi|_U
\end{equation}
functorial in $\mathcal{F}$. Namely, choose any injective
resolution $\mathcal{F} \to \mathcal{I}^\bullet$. The restriction
mappings of the sheaves $\mathcal{I}^p$ give a morphism of complexes
$$
\Gamma(V, \mathcal{I}^\bullet)
\longrightarrow
\Gamma(U, \mathcal{I}^\bullet)
$$
The LHS is a complex representing $R\Gamma(V, \mathcal{F})$
and the RHS is a complex representing $R\Gamma(U, \mathcal{F})$.
We get the map on cohomology groups by applying the functor $H^n$.
As indicated we will use the notation $\xi \mapsto \xi|_U$ to denote this map.
Thus the rule $U \mapsto H^n(U, \mathcal{F})$ is a presheaf of
$\mathcal{O}$-modules. This presheaf is customarily denoted
$\underline{H}^n(\mathcal{F})$. We will give another interpretation 
of this presheaf in Lemma \ref{lemma-include}.

\medskip\noindent
The following lemma says that it is possible to kill higher cohomology
classes by going to a covering.

\begin{lemma}
\label{lemma-kill-cohomology-class-on-covering}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}$-modules.
Let $U$ be an object of $\mathcal{C}$.
Let $n > 0$ and let $\xi \in H^n(U, \mathcal{F})$.
Then there exists a covering $\{U_i \to U\}$ of $\mathcal{C}$
such that $\xi|_{U_i} = 0$ for all $i \in I$.
\end{lemma}

\begin{proof}
Let $\mathcal{F} \to \mathcal{I}^\bullet$ be an injective resolution.
Then
$$
H^n(U, \mathcal{F}) = 
\frac{\text{Ker}(\mathcal{I}^n(U) \to \mathcal{I}^{n + 1}(U))}
{\text{Im}(\mathcal{I}^{n - 1}(U) \to \mathcal{I}^n(U))}.
$$
Pick an element $\tilde \xi \in \mathcal{I}^n(U)$ representing the
cohomology class in the presentation above. Since $\mathcal{I}^\bullet$
is an injective resolution of $\mathcal{F}$ and $n > 0$ we see that
the complex $\mathcal{I}^\bullet$ is exact in degree $n$. Hence
$\text{Im}(\mathcal{I}^{n - 1} \to \mathcal{I}^n) =
\text{Ker}(\mathcal{I}^n \to \mathcal{I}^{n + 1})$ as sheaves.
Since $\tilde \xi$ is a section of the kernel sheaf over $U$
we conclude there exists a covering $\{U_i \to U\}$ of the site
such that $\tilde \xi|_{U_i}$ is the image under $d$ of a section
$\xi_i \in \mathcal{I}^{n - 1}(U_i)$. By our definition of the
restriction $\xi|_{U_i}$ as corresponding to the class of
$\tilde \xi|_{U_i}$ we conclude.
\end{proof}








\section{The Cech complex and Cech cohomology}
\label{section-cech}

\noindent
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target, see
Sites, Definition \ref{sites-definition-family-morphisms-fixed-target}.
Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$.
Set
$$
\check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})
=
\prod\nolimits_{(i_0, \ldots, i_p) \in I^{p + 1}}
\mathcal{F}(U_{i_0} \times_U \ldots \times_U U_{i_p}).
$$
This is an abelian group. For
$s \in \check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})$ we denote
$s_{i_0\ldots i_p}$ its value in the factor
$\mathcal{F}(U_{i_0} \times_U \ldots \times_U U_{i_p})$.
We define
$$
d : \check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})
\longrightarrow
\check{\mathcal{C}}^{p + 1}(\mathcal{U}, \mathcal{F})
$$
by the formula
\begin{align}
\label{equation-d-cech}
d(s)_{i_0\ldots i_{p + 1}}
= \quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad\quad
\\
\sum\nolimits_{j = 0}^{p + 1}
(-1)^j
(U_{i_0} \times_U \ldots \times_U U_{i_{p + 1}}
\longrightarrow
U_{i_0} \times_U \ldots \widehat{U_{i_j}} \ldots \times_U U_{i_{p + 1}})^*
s_{i_0\ldots \hat i_j \ldots i_p} \nonumber
\end{align}
It is straightforward to see that $d \circ d = 0$. In other words
$\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})$ is a complex.

\begin{definition}
\label{definition-cech-complex}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a
family of morphisms with fixed target.
Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$.
The complex $\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})$
is the {\it Cech complex} associated to $\mathcal{F}$ and the
family $\mathcal{U}$. Its cohomology groups
$H^i(\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}))$ are
called the {\it Cech cohomology groups} associated to
$\mathcal{F}$ and $\mathcal{U}$.
They are denoted $\check H^i(\mathcal{U}, \mathcal{F})$.
\end{definition}

\begin{lemma}
\label{lemma-cech-h0}
Let $\mathcal{C}$ be a site.
Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$.
The following are equivalent
\begin{enumerate}
\item $\mathcal{F}$ is an abelian sheaf on $\mathcal{C}$ and
\item for every covering $\mathcal{U} = \{U_i \to U\}_{i \in I}$
of the site $\mathcal{C}$ the natural map
$$
\mathcal{F}(U) \to \check{H}^0(\mathcal{U}, \mathcal{F})
$$
(see Sites, Section \ref{sites-section-sheafification}) is bijective.
\end{enumerate}
\end{lemma}

\begin{proof}
This is true since the sheaf condition is exactly that
$\mathcal{F}(U) \to \check{H}^0(\mathcal{U}, \mathcal{F})$
is bijective for every open covering.
\end{proof}




\section{Cech cohomology as a functor on presheaves}
\label{section-cech-functor}

\noindent
Warning: In this section we work exclusively with abelian presheaves
on a category. The results are completely wrong in the
setting of sheaves and categories of sheaves!

\medskip\noindent
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms with
fixed target.
Let $\mathcal{F}$ be an abelian presheaf on $\mathcal{C}$.
The construction
$$
\mathcal{F} \longmapsto \check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})
$$
is functorial in $\mathcal{F}$. In fact, it is a functor
\begin{equation}
\label{equation-cech-functor}
\check{\mathcal{C}}^\bullet(\mathcal{U}, -) :
\textit{PAb}(\mathcal{C})
\longrightarrow
\text{Comp}^{+}(\text{Mod}(\mathbf{Z}))
\end{equation}
see Homology, Definition \ref{homology-definition-complexes-notation}
for notation. Recall that the category of bounded below complexes
in an abelian category is an abelian category, see
Homology, Lemma \ref{homology-lemma-cat-cochain-abelian}.

\begin{lemma}
\label{lemma-cech-exact-presheaves}
The functor given by Equation (\ref{equation-cech-functor})
is an exact functor (see Homology, Lemma \ref{homology-lemma-exact-functor}).
\end{lemma}

\begin{proof}
For any object $W$ of $\mathcal{C}$ the functor
$\mathcal{F} \mapsto \mathcal{F}(W)$ is an additive exact functor
from $\text{PAb}(\mathcal{C})$ to $\text{Mod}(\mathbf{Z})$.
The terms $\check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})$
of the complex are products of these exact functors and hence exact.
Moreover a sequence of complexes is exact if and only if the sequence
of terms in a given degree is exact. Hence the lemma follows.
\end{proof}

\begin{lemma}
\label{lemma-cech-cohomology-delta-functor-presheaves}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target.
The functors $\mathcal{F} \mapsto \check{H}^n(\mathcal{U}, \mathcal{F})$
form a $\delta$-functor from the abelian category $\textit{PAb}(\mathcal{C})$
to the category of $\mathbf{Z}$-modules (see
Homology, Definition \ref{homology-definition-cohomological-delta-functor}).
\end{lemma}

\begin{proof}
By the previous lemma a short exact sequence of abelian presheaves
$0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$
is turned into a short exact sequence of complexes of
$\mathbf{Z}$-modules. Hence we can use
Homology, Lemma \ref{homology-lemma-long-exact-sequence-cochain}
to get the boundary maps
$\delta_{\mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3} :
\check{H}^n(\mathcal{U}, \mathcal{F}_3) \to 
\check{H}^{n + 1}(\mathcal{U}, \mathcal{F}_1)$
and a corresponding long exact sequence. We omit the verification
that these maps are compatible with maps between short exact
sequences of presheaves.
\end{proof}

\begin{lemma}
\label{lemma-cech-map-into}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target.
Consider the chain complex $\mathbf{Z}_{\mathcal{U}, \bullet}$
of abelian presheaves
$$
\ldots
\to
\bigoplus_{i_0i_1i_2} \mathbf{Z}_{U_{i_0} \times_U U_{i_1} \times_U U_{i_2}}
\to
\bigoplus_{i_0i_1} \mathbf{Z}_{U_{i_0} \times_U U_{i_1}}
\to
\bigoplus_{i_0} \mathbf{Z}_{U_{i_0}}
\to 0 \to \ldots
$$
where the last nonzero term is placed in degree $0$
and where the map
$$
\mathbf{Z}_{U_{i_0} \times_U \ldots \times_u U_{i_{p + 1}}}
\longrightarrow
\mathbf{Z}_{U_{i_0} \times_U
\ldots \widehat{U_{i_j}} \ldots \times_U U_{i_{p + 1}}}
$$
is given by $(-1)^j$ times the canonical map.
Then there is an isomorphism
$$
\text{Hom}_{\textit{PAb}(\mathcal{C})}(\mathbf{Z}_{{U}, \bullet}, \mathcal{F})
=
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})
$$
functorial in $\mathcal{F} \in \text{Ob}(\textit{PAb}(\mathcal{C}))$.
\end{lemma}

\begin{proof}
This is a tautology based on the fact that
\begin{align*}
\text{Hom}_{\textit{PAb}(\mathcal{C})}(
\bigoplus_{i_0 \ldots i_p}
\mathbf{Z}_{U_{i_0} \times_U \ldots \times_U U_{i_p}},
\mathcal{F})
& =
\prod_{i_0 \ldots i_p}
\text{Hom}_{\textit{PAb}(\mathcal{C})}(
\mathbf{Z}_{U_{i_0} \times_U \ldots \times_U U_{i_p}},
\mathcal{F}) \\
& =
\prod_{i_0 \ldots i_p}
\mathcal{F}(U_{i_0} \times_U \ldots \times_U U_{i_p})
\end{align*}
see Modules on Sites, Lemma \ref{sites-modules-lemma-obvious-adjointness}.
\end{proof}

\begin{lemma}
\label{lemma-homology-complex}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target.
The chain complex $\mathbf{Z}_{\mathcal{U}, \bullet}$ of presheaves
of Lemma \ref{lemma-cech-map-into} above is exact in positive
degrees, i.e., the homology presheaves
$H_i(\mathbf{Z}_{\mathcal{U}, \bullet})$ are zero for $i > 0$.
\end{lemma}

\begin{proof}
Let $V$ be an object of $\mathcal{C}$. We have to show that the chain complex
of abelian groups $\mathbf{Z}_{\mathcal{U}, \bullet}(V)$ is exact in
degrees $> 0$. This is the complex
$$
\xymatrix{
\ldots \ar[d] \\
\bigoplus_{i_0i_1i_2}
\mathbf{Z}[
\text{Mor}_{\mathcal{C}}(V, U_{i_0} \times_U U_{i_1} \times_U U_{i_2})
]
\ar[d] \\
\bigoplus_{i_0i_1}
\mathbf{Z}[
\text{Mor}_{\mathcal{C}}(V, U_{i_0} \times_U U_{i_1})
]
\ar[d] \\
\bigoplus_{i_0}
\mathbf{Z}[
\text{Mor}_{\mathcal{C}}(V, U_{i_0})
] \ar[d] \\
0
}
$$
For any morphism $\varphi : V \to U$ denote
$\text{Mor}_\varphi(V, U_i) = \{\varphi_i : V \to U_i \mid 
f_i \circ \varphi_i = \varphi\}$. We will use a similar notation
for $\text{Mor}_\varphi(V, U_{i_0} \times_U \ldots \times_U U_{i_p})$.
Note that composing with the various projection maps between the
fibred products $U_{i_0} \times_U \ldots \times_U U_{i_p}$ preserves
these morphism sets. Hence we see that the complex above
is the same as the complex
$$
\xymatrix{
\ldots \ar[d] \\
\bigoplus_\varphi
\bigoplus_{i_0i_1i_2}
\mathbf{Z}[
\text{Mor}_\varphi(V, U_{i_0} \times_U U_{i_1} \times_U U_{i_2})
]
\ar[d] \\
\bigoplus_\varphi
\bigoplus_{i_0i_1}
\mathbf{Z}[
\text{Mor}_\varphi(V, U_{i_0} \times_U U_{i_1})
]
\ar[d] \\
\bigoplus_\varphi
\bigoplus_{i_0}
\mathbf{Z}[
\text{Mor}_\varphi(V, U_{i_0})
] \ar[d] \\
0
}
$$
Next, we make the remark that we have
$$
\text{Mor}_\varphi(V, U_{i_0} \times_U \ldots \times_U U_{i_p})
=
\text{Mor}_\varphi(V, U_{i_0}) \times \ldots
\times \text{Mor}_\varphi(V, U_{i_p})
$$
Using this and the fact that $\mathbf{Z}[A] \oplus \mathbf{Z}[B] =
\mathbf{Z}[A \coprod B]$ we see that the complex becomes
$$
\xymatrix{
\ldots \ar[d] \\
\bigoplus_\varphi
\mathbf{Z}\left[
\coprod_{i_0i_1i_2}
\text{Mor}_\varphi(V, U_{i_0}) \times \text{Mor}_\varphi(V, U_{i_2})
\right]
\ar[d] \\
\bigoplus_\varphi
\mathbf{Z}\left[
\coprod_{i_0i_1}
\text{Mor}_\varphi(V, U_{i_0}) \times \text{Mor}_\varphi(V, U_{i_1})
\right]
\ar[d] \\
\bigoplus_\varphi
\mathbf{Z}\left[
\coprod_{i_0}
\text{Mor}_\varphi(V, U_{i_0})
\right] \ar[d] \\
0
}
$$
Finally, on setting $S_\varphi = \coprod_{i \in I} \text{Mor}_\varphi(V, U_i)$
we see that we get
$$
\bigoplus\nolimits_\varphi \left(\ldots \to
\mathbf{Z}[S_\varphi \times S_\varphi \times S_\varphi] \to
\mathbf{Z}[S_\varphi \times S_\varphi] \to
\mathbf{Z}[S_\varphi] \to 0 \to \ldots
\right)
$$
Thus we have simplified our task. Namely, it suffices to show that
for any nonempty set $S$ the (extended) complex of free abelian groups
$$
\ldots \to
\mathbf{Z}[S \times S \times S] \to
\mathbf{Z}[S \times S] \to
\mathbf{Z}[S] \xrightarrow{\Sigma} \mathbf{Z} \to 0 \to \ldots
$$
is exact in all degrees. To see this fix an element $s \in S$, and
use the homotopy
$$
n_{(s_0, \ldots, s_p)} \longmapsto n_{(s, s_0, \ldots, s_p)}
$$
with obvious notations.
\end{proof}

\begin{lemma}
\label{lemma-complex-tensored-still-exact}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target.
Let $\mathcal{O}$ be a presheaf of rings on $\mathcal{C}$.
The chain complex
$$
\mathbf{Z}_{\mathcal{U}, \bullet}
\otimes_{p, \mathbf{Z}}
\mathcal{O}
$$
is exact in positive degrees. Here $\mathbf{Z}_{\mathcal{U}, \bullet}$
is the cochain complex of Lemma \ref{lemma-cech-map-into}, and
the tensor product is over the constant presheaf of rings
with value $\mathbf{Z}$.
\end{lemma}

\begin{proof}
Let $V$ be an object of $\mathcal{C}$.
In the proof of Lemma \ref{lemma-homology-complex} we saw that
$\mathbf{Z}_{\mathcal{U}, \bullet}(V)$ is isomorphic as a complex
to a direct sum of complexes which are homotopic to $\mathbf{Z}$
placed in degree zero. Hence also
$\mathbf{Z}_{\mathcal{U}, \bullet}(V) \otimes_\mathbf{Z} \mathcal{O}(V)$
is isomorphic as a complex to a direct sum of complexes which are homotopic
to $\mathcal{O}(V)$ placed in degree zero.
Or you can use
Modules on Sites, Lemma \ref{sites-modules-lemma-flat-resolution-of-flat},
which applies since the presheaves $\mathbf{Z}_{\mathcal{U}, i}$ are flat,
and the proof of Lemma \ref{lemma-homology-complex} shows that
$H_0(\mathbf{Z}_{\mathcal{U}, \bullet})$ is a flat presheaf also.
\end{proof}

\begin{lemma}
\label{lemma-cech-cohomology-derived-presheaves}
Let $\mathcal{C}$ be a category.
Let $\mathcal{U} = \{f_i : U_i \to U\}_{i \in I}$ be a family of morphisms
with fixed target.
The Cech cohomology functors $\check{H}^p(\mathcal{U}, -)$
are canonically isomomorphic as a $\delta$-functor to
the right derived functors of the functor
$$
\check{H}^0(\mathcal{U}, -) :
\textit{PAb}(\mathcal{C})
\longrightarrow
\text{Mod}(\mathbf{Z}).
$$
Moreover, there is a functorial quasi-isomorphism
$$
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})
\longrightarrow 
R\check{H}^0(\mathcal{U}, \mathcal{F})
$$
where the right hand side indicates the derived functor
$R\check{H}^0(\mathcal{U}, -) :
\textit{PAb}(\mathcal{C})
\to
D^{+}(\mathbf{Z})$, see
Homology, Remark \ref{homology-remark-right-derived-functor}.
\end{lemma}

\begin{proof}
Note that the category of abelian presheaves has enough injectives, see
Injectives, Proposition \ref{injectives-proposition-presheaves-injectives}.
Note that $\check{H}^0(\mathcal{U}, -)$ is a left exact functor
from the category of abelian presheaves
to the category of $\mathbf{Z}$-modules.
Hence the derived functor and the right derived fuctor exist,
see Homology, Section \ref{homology-section-right-derived-functor}.

\medskip\noindent
Let $\mathcal{I}$ be a injective abelian presheaf.
In this case the functor
$\text{Hom}_{\textit{PAb}(\mathcal{C})}(-, \mathcal{I})$
is exact on $\textit{PAb}(\mathcal{C})$. By
Lemma \ref{lemma-cech-map-into} we have
$$
\text{Hom}_{\textit{PAb}(\mathcal{C})}(
\mathbf{Z}_{\mathcal{U}, \bullet}, \mathcal{I})
=
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{I}).
$$
By Lemma \ref{lemma-homology-complex} we have that
$\mathbf{Z}_{\mathcal{U}, \bullet}$ is exact in positive degrees.
Hence by the exactness of Hom into $\mathcal{I}$ mentioned above we see
that $\check{H}^i(\mathcal{U}, \mathcal{I}) = 0$ for all
$i > 0$. Thus the $\delta$-functor $(\check{H}^n, \delta)$
(see Lemma \ref{lemma-cech-cohomology-delta-functor-presheaves})
satisfies the assumptions of
Homology, Lemma \ref{homology-lemma-efface-implies-universal},
and hence is a universal $\delta$-functor.

\medskip\noindent
By Homology, Lemma \ref{homology-lemma-higher-derived-functors}
also the sequence $R^i\check{H}^0(\mathcal{U}, -)$
forms a universal $\delta$-functor. By the uniqueness of universal
$\delta$-functors, see
Homology, Lemma \ref{homology-lemma-uniqueness-universal-delta-functor}
we conclude that
$R^i\check{H}^0(\mathcal{U}, -) = \check{H}^i(\mathcal{U}, -)$.
This is enough for most applications
and the reader is suggested to skip the rest of the proof.

\medskip\noindent
Let $\mathcal{F}$ be any abelian presheaf on $\mathcal{C}$.
Choose an injective resolution $\mathcal{F} \to \mathcal{I}^\bullet$
in the category $\textit{PAb}(\mathcal{C})$.
Consider the double complex $A^{\bullet, \bullet}$ with terms
$$
A^{p, q} =
\check{\mathcal{C}}^p(\mathcal{U}, \mathcal{I}^q).
$$
Consider the simple complex $sA^\bullet$ associated to this double
complex. There is a map of complexes
$$
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})
\longrightarrow
sA^\bullet
$$
coming from the maps
$\check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})
\to A^{p, 0} = \check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{I}^0)$
and there is a map of complexes
$$
\check{H}^0(\mathcal{U}, \mathcal{I}^\bullet)
\longrightarrow
sA^\bullet
$$
coming from the maps
$\check{H}^0(\mathcal{U}, \mathcal{I}^q) \to
A^{0, q} = \check{\mathcal{C}}^0(\mathcal{U}, \mathcal{I}^q)$.
Both of these maps are quasi-isomorphisms by an application of
Homology, Lemma \ref{homology-lemma-double-complex-gives-resolution}.
Namely, the columns of the double complex are exact in positive degrees
because the Cech complex as a functor is exact
(Lemma \ref{lemma-cech-exact-presheaves})
and the rows of the double complex are exact in positive degrees
since as we just saw the higher Cech cohomology groups of the injective
presheaves $\mathcal{I}^q$ are zero.
Since quasi-isomorphisms become invertible
in $D^{+}(\mathbf{Z})$ this gives the last displayed morphism
of the lemma. We omit the verification that this morphism is
functorial.
\end{proof}





\section{Cech cohomology and cohomology}
\label{section-cech-cohomology-cohomology}

\begin{lemma}
\label{lemma-injective-trivial-cech}
Let $\mathcal{C}$ be a site.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
Let $\mathcal{I}$ be an injective abelian sheaf, i.e., an injective
object of $\textit{Ab}(\mathcal{C})$.
Then
$$
\check{H}^p(\mathcal{U}, \mathcal{I}) =
\left\{
\begin{matrix}
\mathcal{I}(U) & \text{if} & p = 0 \\
0 & \text{if} & p > 0
\end{matrix}
\right.
$$
\end{lemma}

\begin{proof}
An injective abelian sheaf is also injective as an object in
the category $\textit{PAb}(\mathcal{C})$. We can see this for example since
sheafification is an exact left adjoint to the inclusion functor, and
using Homology, Lemma \ref{homology-lemma-adjoint-preserve-injectives}.
Hence we can apply Lemma \ref{lemma-cech-cohomology-derived-presheaves}
(or its proof) to see the vanishing of higher Cech cohomology group.
For the zeroth see Lemma \ref{lemma-cech-h0}.
\end{proof}

\begin{lemma}
\label{lemma-cech-cohomology}
Let $\mathcal{C}$ be a site.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
There is a transformation
$$
\check{\mathcal{C}}^\bullet(\mathcal{U}, -)
\longrightarrow
R\Gamma(U, -)
$$
of functors
$\textit{Ab}(\mathcal{C}) \to D^{+}(\mathbf{Z})$.
In particular this gives a transformation of functors
$\check{H}^p(U, \mathcal{F}) \to H^p(U, \mathcal{F})$ for
$\mathcal{F}$ ranging over $\textit{Ab}(\mathcal{C})$.
\end{lemma}

\begin{proof}
Let $\mathcal{F}$ be an abelian sheaf. Choose an injective resolution
$\mathcal{F} \to \mathcal{I}^\bullet$. Consider the double complex
$A^{\bullet, \bullet}$ with terms
$A^{p, q} = \check{\mathcal{C}}^p(\mathcal{U}, \mathcal{I}^q)$.
Moreover, consider the associated simple complex
$sA^\bullet$, see
Homology, Definition \ref{homology-definition-associated-simple-complex}.
There is a map of complexes
$$
\alpha :
\Gamma(U, \mathcal{I}^\bullet)
\longrightarrow
sA^\bullet
$$
coming from the maps
$\mathcal{I}^q(U) \to \check{H}^0(\mathcal{U}, \mathcal{I}^q)$
and a map of complexes
$$
\beta :
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})
\longrightarrow
sA^\bullet
$$
coming from the map $\mathcal{F} \to \mathcal{I}^0$.
We can apply
Homology, Lemma \ref{homology-lemma-double-complex-gives-resolution}
to see that $\alpha$ is a quasi-isomorphism.
Namely, Lemma \ref{lemma-injective-trivial-cech} implies that
the $q$th row of the double complex $A^{\bullet, \bullet}$ is a
resolution of $\Gamma(U, \mathcal{I}^q)$.
Hence $\alpha$ becomes invertible in $D^{+}(\mathbf{Z})$ and
the transformation of the lemma is the composition of $\beta$
followed by the inverse of $\alpha$. We omit the verification
that this is functorial.
\end{proof}

\begin{lemma}
\label{lemma-include}
Let $\mathcal{C}$ be a site.
Consider the functor
$i : \textit{Ab}(\mathcal{C}) \to \textit{PAb}(\mathcal{C})$.
It is a left exact functor with right derived functors given by
$$
R^pi(\mathcal{F}) = \underline{H}^p(\mathcal{F}) :
U \longmapsto H^p(U, \mathcal{F})
$$
see discussion in Section \ref{section-locality}.
\end{lemma}

\begin{proof}
It is clear that $i$ is left exact.
Choose an injective resolution $\mathcal{F} \to \mathcal{I}^\bullet$.
By definition $R^pi$ is the $p$th cohomology {\it presheaf}
of the complex $\mathcal{I}^\bullet$. In other words, the
sections of $R^pi(\mathcal{F})$ over an open $U$ are given by
$$
\frac{\text{Ker}(\mathcal{I}^n(U) \to \mathcal{I}^{n + 1}(U))}
{\text{Im}(\mathcal{I}^{n - 1}(U) \to \mathcal{I}^n(U))}.
$$
which is the definition of $H^p(U, \mathcal{F})$.
\end{proof}

\begin{lemma}
\label{lemma-cech-spectral-sequence}
Let $\mathcal{C}$ be a site.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering of $\mathcal{C}$.
For any abelian sheaf $\mathcal{F}$ there
is a spectral sequence $(E_r, d_r)_{r \geq 0}$ with
$$
E_2^{p, q} = \check{H}^p(\mathcal{U}, \underline{H}^q(\mathcal{F}))
$$
converging to $H^{p + q}(U, \mathcal{F})$.
This spectral sequence is functorial in $\mathcal{F}$.
\end{lemma}

\begin{proof}
This is a Grothendieck spectral sequence
(see Homology, Lemma \ref{homology-lemma-grothendieck-spectral-sequence})
for the functors
$$
i :  \textit{Ab}(\mathcal{C}) \to \textit{PAb}(\mathcal{C})
\quad\text{and}\quad
\check{H}^0(\mathcal{U}, - ) : \textit{PAb}(\mathcal{C})
\to \text{Mod}(\mathbf{Z}).
$$
Namely, we have $\check{H}^0(\mathcal{U}, i(\mathcal{F})) = \mathcal{F}(U)$
by Lemma \ref{lemma-cech-h0}. We have that $i(\mathcal{I})$ is 
Cech acyclic by Lemma \ref{lemma-injective-trivial-cech}. And we
have that $\check{H}^p(\mathcal{U}, -) = R^p\check{H}^0(\mathcal{U}, -)$
as functors on $\textit{PAb}(\mathcal{C})$
by Lemma \ref{lemma-cech-cohomology-derived-presheaves}.
Putting everything together gives the lemma.
\end{proof}

\begin{lemma}
\label{lemma-cech-spectral-sequence-application}
Let $\mathcal{C}$ be a site.
Let $\mathcal{U} = \{U_i \to U\}_{i \in I}$ be a covering.
Let $\mathcal{F} \in \text{Ob}(\textit{Ab}(\mathcal{C}))$.
Assume that $H^i(U_{i_0} \times_U \ldots \times_U U_{i_p}, \mathcal{F}) = 0$
for all $i > 0$, all $p \geq 0$ and all $i_0, \ldots, i_p \in I$.
Then $\check{H}^p(\mathcal{U}, \mathcal{F}) = H^p(U, \mathcal{F})$.
\end{lemma}

\begin{proof}
We will use the spectral sequence of
Lemma \ref{lemma-cech-spectral-sequence}.
The assumptions mean that $E_2^{p, q} = 0$ for all $(p, q)$ with
$q \not = 0$. Hence the spectral sequence degenerates at $E_2$
and the result follows.
\end{proof}

\begin{lemma}
\label{lemma-ses-cech-h1}
Let $\mathcal{C}$ be a site.
Let
$$
0 \to \mathcal{F} \to \mathcal{G} \to \mathcal{H} \to 0
$$
be a short exact sequence of abelian sheaves on $\mathcal{C}$.
Let $U$ be an object of $\mathcal{C}$. If there exists a cofinal system
of coverings $\mathcal{U}$ of $U$ such that
$\check{H}^1(\mathcal{U}, \mathcal{F}) = 0$,
then the map $\mathcal{G}(U) \to \mathcal{H}(U)$ is
surjective.
\end{lemma}

\begin{proof}
Take an element $s \in \mathcal{H}(U)$. Choose a covering
$\mathcal{U} = \{U_i \to U\}_{i \in I}$ such that
(a) $\check{H}^1(\mathcal{U}, \mathcal{F}) = 0$ and (b)
$s|_{U_i}$ is the image of a section $s_i \in \mathcal{G}(U_i)$.
Since we can certainly find a covering such that (b) holds
it follows from the assumptions of the lemma that we can find
a covering such that (a) and (b) both hold.
Consider the sections
$$
s_{i_0i_1} =
s_{i_1}|_{U_{i_0} \times_U U_{i_1}} - s_{i_0}|_{U_{i_0} \times_U U_{i_1}}.
$$
Since $s_i$ lifts $s$ we see that
$s_{i_0i_1} \in \mathcal{F}(U_{i_0} \times_U U_{i_1})$.
By the vanishing of $\check{H}^1(\mathcal{U}, \mathcal{F})$ we can
find sections $t_i \in \mathcal{F}(U_i)$ such that
$$
s_{i_0i_1} =
t_{i_1}|_{U_{i_0} \times_U U_{i_1}} - t_{i_0}|_{U_{i_0} \times_U U_{i_1}}.
$$
Then clearly the sections $s_i - t_i$ satsify the sheaf condition
and glue to a section of $\mathcal{G}$ over $U$ which maps to $s$.
Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-cech-vanish-collection}
(Variant of Cohomology, Lemma \ref{cohomology-lemma-cech-vanish}.)
Let $\mathcal{C}$ be a site. Let $\text{Cov}_{\mathcal{C}}$ be the set
of coverings of $\mathcal{C}$ (see
Sites, Definition \ref{sites-definition-site}). Let
$\mathcal{B} \subset \text{Ob}(\mathcal{C})$, and
$\text{Cov} \subset \text{Cov}_{\mathcal{C}}$
be subsets. Let $\mathcal{F}$ be an abelian sheaf on $\mathcal{C}$.
Assume that
\begin{enumerate}
\item For every $\mathcal{U} \in \text{Cov}$, 
$\mathcal{U} = \{U_i \to U\}_{i \in I}$ we have
$U, U_i \in \mathcal{B}$ and every
$U_{i_0} \times_U \ldots \times_U U_{i_p} \in \mathcal{B}$.
\item For every $U \in \mathcal{B}$ the coverings of $U$
occuring in $\text{Cov}$ is a cofinal system of coverings of $U$.
\item For every $\mathcal{U} \in \text{Cov}$ we have
$\check{H}^p(\mathcal{U}, \mathcal{F}) = 0$ for all $p > 0$.
\end{enumerate}
Then $H^p(U, \mathcal{F}) = 0$ for all $p > 0$ and any $U \in \mathcal{B}$.
\end{lemma}

\begin{proof}
Let $\mathcal{F}$ and $\text{Cov}$ be as in the lemma.
We will indicate this by saying ``$\mathcal{F}$ has vanishing higher
Cech cohomology for any $\mathcal{U} \in \text{Cov}$''.
Choose an embedding $\mathcal{F} \to \mathcal{I}$ into an
injective abelian sheaf.
By Lemma \ref{lemma-injective-trivial-cech} $\mathcal{I}$
has vanishing higher Cech cohomology for any $\mathcal{U} \in \text{Cov}$.
Let $\mathcal{Q} = \mathcal{I}/\mathcal{F}$
so that we have a short exact sequence
$$
0 \to \mathcal{F} \to \mathcal{I} \to \mathcal{Q} \to 0.
$$
By Lemma \ref{lemma-ses-cech-h1} and our assumption (2)
this sequence gives rise to an exact sequence
$$
0 \to \mathcal{F}(U) \to \mathcal{I}(U) \to \mathcal{Q}(U) \to 0.
$$
for every $U \in \mathcal{B}$. Hence for any $\mathcal{U} \in \text{Cov}$
we get a short exact sequence of Cech complexes
$$
0 \to
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}) \to
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{I}) \to
\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{Q}) \to 0
$$
since each term in the Cech complex is made up out of a product of
values over elements of $\mathcal{B}$ by assumption (1).
In particular we have a long exact sequence of Cech cohomology
groups for any covering $\mathcal{U} \in \text{Cov}$.
This implies that $\mathcal{Q}$ is also an abelian sheaf
with vanishing higher Cech cohomology for all
$\mathcal{U} \in \text{Cov}$.

\medskip\noindent
Next, we look at the long exact cohomology sequence
$$
\xymatrix{
0 \ar[r] &
H^0(U, \mathcal{F}) \ar[r] &
H^0(U, \mathcal{I}) \ar[r] &
H^0(U, \mathcal{Q}) \ar[lld] \\
&
H^1(U, \mathcal{F}) \ar[r] &
H^1(U, \mathcal{I}) \ar[r] &
H^1(U, \mathcal{Q}) \ar[lld] \\
&
\ldots & \ldots & \dots \\
}
$$
for any $U \in \mathcal{B}$. Since $\mathcal{I}$ is injective we
have $H^n(U, \mathcal{I}) = 0$ for $n > 0$ (see
Homology, Lemma \ref{homology-lemma-higher-derived-functors}).
By the above we see that $H^0(U, \mathcal{I}) \to H^0(U, \mathcal{Q})$
is surjective and hence $H^1(U, \mathcal{F}) = 0$.
Since $\mathcal{F}$ was an arbitrary abelian sheaf with
vanishing higher Cech cohomology for all $\mathcal{U} \in \text{Cov}$
we conclude that also $H^1(U, \mathcal{Q}) = 0$ since $\mathcal{Q}$ is
another of these sheaves (see above). By the long exact sequence this in
turn implies that $H^2(U, \mathcal{F}) = 0$. And so on and so forth.
\end{proof}
















\section{Cohomology of modules}
\label{section-cohomology-modules}

\noindent
Everything that was said for cohomology of abelian sheaves
goes for cohomology of modules, since the two agree.

\begin{lemma}
\label{lemma-cohomology-modules-abelian-agree}
Let $\mathcal{C}$ be a site.
Let $\mathcal{O}$ be a sheaf of rings on $\mathcal{C}$.
Let $\mathcal{F}$ be an $\mathcal{O}$-module, and denote
$\mathcal{F}_{ab}$ the underlying sheaf of abelian groups.
Then we have
$$
H^i(\mathcal{C}, \mathcal{F}_{ab})
=
H^i(\mathcal{C}, \mathcal{F})
$$
and for any object $U$ of $\mathcal{C}$ we also have
$$
H^i(U, \mathcal{F}_{ab})
=
H^i(U, \mathcal{F}).
$$
Here the left hand side is cohomology computed in
$\textit{Ab}(\mathcal{C})$ and the right hand side
is cohomology computed in $\textit{Mod}(\mathcal{O})$.
\end{lemma}

\begin{proof}






\end{proof}








\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
