\input{preamble}

% OK, start here.
%
\begin{document}

\title{Morphisms of schemes}


\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we introduce some types of morphisms of schemes.
A basic reference is \cite{EGA}.






\section{Monomorphisms}
\label{section-monomorphisms}

\begin{definition}
\label{definition-monomorphism}
A morphism of schemes is called a {\it monomorphism} if it is
a monomorphism in the category of schemes, see
Categories, Definition \ref{categories-definition-mono-epi}.
\end{definition}

\begin{lemma}
\label{lemma-monomorphism}
Let $j : X \to Y$ be a morphism of schemes.
Then $j$ is a monomorphism if and only if the
diagonal morphism $\Delta_{X/Y} : X \to X \times_Y X$ is
an isomorphism.
\end{lemma}

\begin{proof}
This is true in any category with fibre products.
\end{proof}

\begin{lemma}
\label{lemma-monomorphism-separated}
A monomorphism of schemes is separated.
\end{lemma}

\begin{proof}
This is true because an isomorphism is a closed immersion,
and Lemma \ref{lemma-monomorphism} above.
\end{proof}

\begin{lemma}
\label{lemma-composition-monomorphism}
A composition of monomorphisms is a monomorpism.
\end{lemma}

\begin{proof}
True in any category.
\end{proof}

\begin{lemma}
\label{lemma-injective-points-surjective-stalks}
Let $j : X \to Y$ be a morphism of schemes.
If
\begin{enumerate}
\item $j$ is injective on points, and
\item for any $x \in X$ the ring map
$j^\sharp_x : \mathcal{O}_{Y, j(x)} \to \mathcal{O}_{X, x}$
is surjective,
\end{enumerate}
then $j$ is a monomorphism.
\end{lemma}

\begin{proof}
Let $a, b : Z \to X$ be two morphisms of schemes such that
$j \circ a  = j \circ b$.
Then (1) implies $a = b$ as underlying
maps of topological spaces.
For any $z \in Z$ we have
$a^\sharp_z \circ j^\sharp_{a(z)} = b^\sharp_z \circ j^\sharp_{b(z)}$
as maps $\mathcal{O}_{Y, j(a(z))} \to \mathcal{O}_{Z, z}$.
The surjectivity of the maps
$j^\sharp_x$ forces $a^\sharp_z = b^\sharp_z$, $\forall z \in Z$.
This implies that $a^\sharp = b^\sharp$.
Hence we conclude $a = b$ as morphisms of schemes
as desired.
\end{proof}

\begin{lemma}
\label{lemma-immersions-monomorphisms}
An immersion of schemes is a monomorphism.
\end{lemma}

\begin{proof}
The criterion of Lemma \ref{lemma-injective-points-surjective-stalks}
applies.
\end{proof}

\begin{example}
\label{example-Q-over-Z}
The morphism $\text{Spec}(\mathbf{Q}) \to \text{Spec}(\mathbf{Z})$
is a monomorphism. This is true because
$\mathbf{Q} \otimes_{\mathbf{Z}} \mathbf{Q} = \mathbf{Q}$.
\end{example}














\section{Closed immersions}
\label{section-closed-immersions}


\noindent
In this section we summarize some of the results obtained
previously on closed immersions of schemes.

\begin{lemma}
\label{lemma-closed-immersion}
Let $i : Z \to X$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item The morphism $i$ is a closed immersions.
\item For every affine open $\text{Spec}(R) = U \subset X$,
there exists an ideal $I \subset R$ such that
$i^{-1}(U) = \text{Spec}(R/I)$ as schemes over $U = \text{Spec}(R)$.
\item There exists an affine open covering $X = \bigcup_{j \in J} U_j$,
$U_j = \text{Spec}(R_j)$ and for every $j \in J$ there exists
an ideal $I_j \subset R_j$ such that
$i^{-1}(U_j) = \text{Spec}(R_j/I_j)$ as schemes over $U_j = \text{Spec}(R_j)$.
\item The morphism $i$ induces a homeomorphism of $Z$ with a closed subset
of $X$ and $i^\sharp : \mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective.
\item The morphism $i$ induces a homeomorphism of $Z$ with a closed subset
of $X$, the map $i^\sharp : \mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective,
and the kernel $\text{Ker}(i^\sharp)\subset \mathcal{O}_X$ is a quasi-coherent
sheaf of ideals.
\item The morphism $i$ induces a homeomorphism of $Z$ with a closed subset
of $X$, the map $i^\sharp : \mathcal{O}_X \to i_*\mathcal{O}_Z$ is surjective,
and the kernel $\text{Ker}(i^\sharp)\subset \mathcal{O}_X$ is a
sheaf of ideals which is locally generated by sections.
\end{enumerate}
\end{lemma}

\begin{proof}
Condition (6) is our definition of a closed immersion, see Schemes,
Definitions \ref{schemes-definition-closed-immersion-locally-ringed-spaces}
and Definition \ref{schemes-definition-immersion}.
So (6) $\Leftrightarrow$ (1). We have (1) $\Rightarrow$ (2) by
Schemes, Lemma \ref{schemes-lemma-closed-subspace-scheme}.
Trivially (2) $\Rightarrow$ (3).

\medskip\noindent
Assume (3). Each of the morphisms
$\text{Spec}(R_j/I_j) \to \text{Spec}(R_j)$ is
a closed immersion, see
Schemes, Example \ref{schemes-example-closed-immersion-affines}.
Hence $i^{-1}(U_j) \to U_j$ is a homeomorphism onto its image
and $i^\sharp|_{U_j}$ is surjective. Hence $i$ is a homeomorphism
onto its image and $i^\sharp$ is surjective since this may be
checked locally. We conclude that (3) $\Rightarrow$ (4).

\medskip\noindent
The implication (4) $\Rightarrow$ (1) is 
Schemes, Lemma \ref{schemes-lemma-characterize-closed-immersions}.
The implication (5) $\Rightarrow$ (6) is trivial.
And the implication (6) $\Rightarrow$ (5) follows
from Schemes, Lemma \ref{schemes-lemma-closed-subspace-scheme}.
\end{proof}

\begin{lemma}
\label{lemma-closed-immersion-ideals}
Let $X$ be a scheme.
Suppose $i : Z \to X$ and $i' : Z' \to X$ are closed immersions
corresponding to the quasi-coherent
ideal sheaves $\mathcal{I} = \text{Ker}(i^\sharp)$
and $\mathcal{I}' = \text{Ker}((i')^\sharp)$ of $\mathcal{O}_X$.
\begin{enumerate}
\item The morphism $i : Z \to X$ factors as $Z \to Z' \to X$
for some $a : Z \to Z'$
if and only if $\mathcal{I}' \subset \mathcal{I}$.
If this happens, then $a$ is a closed immersion.
\item We have $Z \cong Z'$ as schemes over $X$ if and only if
$\mathcal{I} = \mathcal{I}'$.
\end{enumerate}
\end{lemma}

\begin{proof}
This follows from our discussion of closed subspaces in
Schemes, Section \ref{schemes-section-closed-immersion}.
It also follows in a straightforward way from characterization
(3) in Lemma \ref{lemma-closed-immersion} above.
\end{proof}

\begin{lemma}
\label{lemma-closed-immersion-bijection-ideals}
Let $X$ be a scheme.
Let $\mathcal{I} \subset \mathcal{O}_X$ be a sheaf of ideals.
The following are equivalent:
\begin{enumerate}
\item The sheaf of ideals $\mathcal{I}$ is locally generated by
sections as a sheaf of $\mathcal{O}_X$ modules.
\item The sheaf of ideals $\mathcal{I}$ is quasi-coherent as
a sheaf of $\mathcal{O}_X$-modules.
\item There exists a closed immersion $i : Z \to X$ whose
corresponding sheaf of ideals $\text{Ker}(i^\sharp)$ is
equal to $\mathcal{I}$.
\end{enumerate}
\end{lemma}

\begin{proof}
In Schemes, Section \ref{schemes-section-closed-immersion} we constructed
the closed subspace associated to a sheaf of ideals locally generated
by sections. This closed subspace is a scheme by
Schemes, Lemma \ref{schemes-lemma-closed-subspace-scheme}.
Hence we see that (1) $\Rightarrow$ (3) by our definition
of a closed immersion of schemes. By Lemma \ref{lemma-closed-immersion}
above we see that (3) $\Rightarrow$ (2). And of course (2) $\Rightarrow$ (1).
\end{proof}

\begin{lemma}
\label{lemma-base-change-closed-immersion}
The base change of a closed immersion is a closed immersion.
\end{lemma}

\begin{proof}
See Schemes, Lemma \ref{schemes-lemma-base-change-immersion}.
\end{proof}

\begin{lemma}
\label{lemma-composition-closed-immersion}
A composition of closed immersions is a closed immersion.
\end{lemma}

\begin{proof}
This is clear from the characterization (3) of closed immersions
in Lemma \ref{lemma-closed-immersion}. Since if $I \subset R$
is an ideal, and $\overline{J} \subset R/I$ is an ideal, then
$\overline{J} = J/I$ for some ideal $J \subset R$ which contains
$I$ and $(R/I)/\overline{J} = R/J$.
\end{proof}

\begin{example}
\label{example-thibaut}
Here is an example of an immersion which is not a composition of an
open immersion followed by a closed immersion.
Let $k$ be a field.
Let $X = \text{Spec}(k[x_1, x_2, x_3, \ldots])$.
Let $U = \bigcup_{n = 1}^{\infty} D(x_n)$.
Then $U \to X$ is an open immersion.
Consider the ideals
$$
I_n =
(x_1^n, x_2^n, \ldots, x_{n - 1}^n, x_n - 1, x_{n + 1}, x_{n + 2}, \ldots)
\subset
k[x_1, x_2, x_3, \ldots][1/x_n].
$$
Note that $I_n k[x_1, x_2, x_3, \ldots][1/x_nx_m] = (1)$
for any $m \not = n$. Hence the quasi-coherent ideals
$\widetilde I_n$ on $D(x_n)$ agree on $D(x_nx_m)$, namely
$\widetilde I_n|_{D(x_nx_m)} = \mathcal{O}_{D(x_n x_m)}$ if
$n \not = m$. Hence these ideals glue to a quasi-coherent sheaf of ideals
$\mathcal{I} \subset \mathcal{O}_U$.
Let $Z \subset U$ be the closed subscheme corresponding to
$\mathcal{I}$. Thus $Z \to X$ is an immersion.

\medskip\noindent
We claim that we cannot factor $Z \to X$ as
$Z \to \overline{Z} \to X$, where $\overline{Z} \to X$ is closed
and $Z \to \overline{Z}$ is open. Namely, $\overline{Z}$ would
have to be defined by an ideal $I \subset k[x_1, x_2, x_3, \ldots]$
such that $I_n = I k[x_1, x_2, x_3, \ldots][1/x_n]$.
But the only element $f \in k[x_1, x_2, x_3, \ldots]$
which ends up in all $I_n$ is $0$! Hence $I$ does not exist.
\end{example}







\section{Dominant morphisms}
\label{section-dominant}

\noindent
The definition of a morphism of schemes being dominant is a little
different from what you might expect if you are used to the notion
of a dominant morphism of varieties.

\begin{definition}
\label{definition-dominant}
A morphism $f : X \to S$ of schemes is called {\it dominant} if the
image of $f$ is a dense subset of $S$.
\end{definition}

\noindent
So for example, if $k$ is an infinite field and $\lambda_1, \lambda_2, \ldots$
is a countable collection of elements of $k$, then the morphism
$$
\coprod\nolimits_{i = 1,2,\ldots } \text{Spec}(k) 
\longrightarrow
\text{Spec}(k[x])
$$
with $i$th factor mapping to the point $x = \lambda_i$ is dominant.

\begin{lemma}
\label{lemma-generic-points-in-image-dominant}
Let $f : X \to S$ be a morphism of schemes.
If every generic point of every irreducible component of $S$
is in the image of $f$, then $f$ is dominant.
\end{lemma}

\begin{proof}
This is a topological fact which follows directly from the fact that
the topological space underlying a scheme is sober, see
Schemes, Lemma \ref{schemes-lemma-scheme-sober}, and that
every point of $S$ is contained in an irreducible component of
$S$, see Topology, Lemma \ref{topology-lemma-irreducible}.
\end{proof}

\noindent
The expectation that morphisms are dominant only if generic points of the
target are in the image does hold if the morphism is quasi-compact.

\begin{lemma}
\label{lemma-quasi-compact-dominant}
Let $f : X \to S$ be a quasi-compact morphism of schemes.
Then $f$ is dominant (if and) only if for every irreducible
component $Z \subset S$ the generic point of $Z$ is in the
image of $f$.
\end{lemma}

\begin{proof}
Let $V \subset S$ be an affine open.
Because $f$ is quasi-compact we may choose finitely many affine
opens $U_i \subset f^{-1}(V)$, $i = 1, \ldots, n$ covering
$f^{-1}(V)$. Consider the morphism of affines
$$
f' :
\coprod\nolimits_{i = 1, \ldots, n} U_i 
\longrightarrow
V.
$$
A disjoint union of affines is affine, see
Schemes, \ref{schemes-lemma-disjoint-union-affines}.
Generic points of irreducible components of $V$
are exactly the generic points of the irreducible components of
$S$ that meet $V$. Also, $f$ is dominant if and only $f'$ is dominant
no matter what choices of $V, n, U_i$ we make above. Thus we
have reduced the lemma to the case of a morphism of affine schemes.
The affine case is
Algebra, Lemma \ref{algebra-lemma-image-dense-generic-points}.
\end{proof}

\noindent
There is another case where this holds. 

\begin{lemma}
\label{lemma-dominant-finite-number-irreducible-components}
Let $f : X \to S$ be a morphism of schemes.
Suppose that $X$ has finitely many irreducible components.
Then $f$ is dominant (if and) only if for every irreducible
component $Z \subset S$ the generic point of $Z$ is in the
image of $f$. If so, then $S$ has finitely many irreducible
components as well.
\end{lemma}

\begin{proof}
Assume $f$ is dominant.
Say $X = Z_1 \cup Z_2 \cup \ldots \cup Z_n$ is the decomposition
of $X$ into irreducible components. Let $\xi_i \in Z_i$ be
its generic point, so $Z_i = \overline{\{\xi_i\}}$.
Note that $f(Z_i)$ is an irreducible subset of $S$.
Hence
$$
S = \overline{f(X)} = \bigcup \overline{f(Z_i)} =
\bigcup \overline{\{f(\xi_i)\}}
$$
is a finite union if irreducible subsets whose generic
points are in the image of $f$. The lemma follows.
\end{proof}






\section{Radicial morphisms}
\label{section-radicial}

\begin{definition}
\label{definition-radicial}
Let $f : X \to S$ be a morphism.
We say $f$ is {\it radicial}
if for every field $K$ the induced map
$\text{Mor}(\text{Spec}(K), X) \to \text{Mor}(\text{Spec}(K), S)$
is injective.
\end{definition}

\begin{lemma}
\label{lemma-radicial-universally-injective}
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item The morphism $f$ is radicial.
\item The morphism $f$ is universally injective, i.e.,
for every morphism $S' \to S$ the base change $f' : X_{S'} \to S$
is injective on underlying topological spaces.
\item For every $s \in S$ there is at most one $x \in X$
with $f(s) = x$ and the field extension $\kappa(s) \subset \kappa(x)$
is either an equality or purely inseparable.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $K$ be a field, and let $s : \text{Spec}(K) \to S$ be a morphism.
Giving a morphism $x : \text{Spec}(K) \to X$ such that $f \circ x = s$
is the same as giving a section of the projection
$X_K = \text{Spec}(K) \times_S X \to \text{Spec}(K)$, which in turn
is the same as giving a point $x \in X_K$ whose residue field is $K$.
Hence we see that (2) implies (1).

\medskip\noindent
Conversely, suppose that (1) holds. Assume that $x, x' \in X_{S'}$
map to the same point $s' \in S'$. Choose a commutative diagram
$$
\xymatrix{
K & \kappa(x) \ar[l] \\
\kappa(x') \ar[u] & \kappa(s') \ar[l] \ar[u]
}
$$
of fields. By Schemes, Lemma \ref{schemes-lemma-characterize-points}
we get two morphisms $a, a' : \text{Spec}(K) \to X_{S'}$. One corresponding
to the point $x$ and the embedding $\kappa(x) \subset K$ and
the other corresponding to the  point $x$ and the embedding
$\kappa(x') \subset K$. Also we have $f' \circ a = f' \circ a'$.
Condition (1) now implies that the compositions of $a$ and $a'$ with
$X_{S'} \to X$ are equal. Since $X_{S'}$ is the fibre product
of $S'$ and $X$ over $S$ we see that $a = a'$. Hence $x = x'$ as
desired.

\medskip\noindent
If there are two points $x, x'$ mapping to the same point of $s$
then $f$ is not radicial by the equivalence of (1) and (2) above.
If for some $s = f(x)$, $x \in X$ the field extension
$\kappa(s) \subset \kappa(x)$ is not purely inseparable, then 
we may find a field extension $\kappa(s) \subset K$ such that
$\kappa(x)$ has two $\kappa(s)$-homomorphisms into $K$. By
Schemes, Lemma \ref{schemes-lemma-characterize-points} this
implies that the map
$\text{Mor}(\text{Spec}(K), X) \to \text{Mor}(\text{Spec}(K), S)$
is not injective, and hence $f$ is not radicial.
Thus we see that (1) implies (3).

\medskip\noindent
Finally, assume (3). By
Schemes, Lemma \ref{schemes-lemma-characterize-points} a morphism
$\text{Spec}(K) \to X$ is given by a pair $(x, \kappa(x) \to K)$.
Property (3) says exactly that associating to the pair
$(x, \kappa(x) \to K)$ the pair $(s, \kappa(s) \to \kappa(x) \to K)$
is injective.
\end{proof}











\section{Affine morphisms}
\label{section-affine}

\begin{definition}
\label{definition-affine}
A morphism of schemes $f : X \to S$ is called {\it affine} if 
the inverse image of every affine open of $S$ is an affine
open of $X$.
\end{definition}

\begin{lemma}
\label{lemma-affine-separated}
An affine morphism is separated.
\end{lemma}

\begin{proof}
Let $f : X \to S$ be affine. We will show $f$ is separated using
Schemes, Lemma \ref{schemes-lemma-characterize-separated}. Let
$x_1, x_2 \in X$ be points of $X$ which map to the same point $s \in S$.
Choose any affine open $W \subset S$ containing $s$. By assumption
$f^{-1}(W)$ is affine. Apply the lemma cited with $U = V = f^{-1}(W)$.
\end{proof}

\begin{lemma}
\label{lemma-characterize-affine}
Let $f : X \to S$ be a morphism of schemes.
If there exists an affine open covering $S = \bigcup W_j$
such that each $f^{-1}(W_j)$ is affine then $f$ is affine.
\end{lemma}

\begin{proof}
Assume $S = \bigcup_{j \in J} W_j$ is an affine open covering such that
each $f^{-1}(W_j)$ is affine. By
Schemes, Lemma \ref{schemes-lemma-quasi-compact-affine} this implies
that $f$ is quasi-compact. By
Schemes, Lemma \ref{schemes-lemma-characterize-quasi-separated}
the morphism $f$ is quasi-separated. Hence by
Schemes, Lemma \ref{schemes-lemma-push-forward-quasi-coherent} the
sheaf $\mathcal{A} = f_*\mathcal{O}_X$ is a quasi-coherent sheaf
of $\mathcal{O}_X$-algebras.

\medskip\noindent
Let $\text{Spec}(R) = V \subset S$ be affine open.
We have to show that $f^{-1}(V)$ is affine. Set
$A = \mathcal{A}(V) = f_*\mathcal{O}_X(V) = \mathcal{O}_X(f^{-1}(V))$.
By Schemes, Lemma \ref{schemes-lemma-morphism-into-affine} there is
a canonical morphism $\psi : f^{-1}(V) \to \text{Spec}(A)$ over
$\text{Spec}(R) = V$.
By Schemes, Lemma \ref{schemes-lemma-good-subcover} there exists
an integer $n \geq 0$, a standard open covering
$V = \bigcup_{i = 1, \ldots, n} D(h_i)$, $h_i \in R$, and a map
$a : \{1, \ldots, n\} \to J$ such that each $D(h_i)$ is also
a standard open of the affine scheme $W_{a(i)}$. The inverse image
of a standard open under a morphism of affine schemes is standard open, see
Algebra, Lemma \ref{algebra-lemma-spec-functorial}. Hence we see
that $f^{-1}(D(h_i))$ is a standard open of $f^{-1}(W_{a(i)})$,
in particular that $f^{-1}(D(h_i))$ is affine. Because $\mathcal{A}$
is quasi-coherent we have
$A_{h_i} = \mathcal{A}(D(h_i)) = \mathcal{O}_X(f^{-1}(D(h_i)))$,
so $f^{-1}(D(h_i))$ is the spectrum of $A_{h_i}$.
It follows that the morphism $\psi$ induces an isomorphism of the open
$f^{-1}(D(h_i))$ with the open $\text{Spec}(A_{h_i})$ of
$\text{Spec}(A)$. Since $f^{-1}(V) = \bigcup f^{-1}(D(h_i))$
and $\text{Spec}(A) = \bigcup \text{Spec}(A_{h_i})$ we win.
\end{proof}

\begin{lemma}
\label{lemma-composition-affine}
The composition of affine morphisms is affine.
\end{lemma}

\begin{proof}
Let $f : X \to Y$ and $g : Y \to Z$ be affine morphisms.
Let $U \subset Z$ be affine open. Then $g^{-1}(U)$ is affine
by assumption on $g$. Whereupon $f^{-1}(g^{-1}(U))$ is affine
by assumption on $f$. Hence $(g \circ f)^{-1}(U)$ is affine.
\end{proof}

\begin{lemma}
\label{lemma-base-change-affine}
The base change of an affine morphism is affine.
\end{lemma}

\begin{proof}
Let $f : X \to S$ be an affine morphism. Let $S' \to S$ be any morphism.
Denote $f' : X_{S'} = S' \times_S X \to S'$ the base change of $f$.
For every $s' \in S'$ there exists an open affine neighbourhood
$s' \in V \subset S'$ which maps into some open affine $U \subset S$.
By assumption $f^{-1}(U)$ is affine. By the material in
Schemes, Section \ref{schemes-section-fibre-products} we see
that $f^{-1}(U)_{V} = V \times_U f^{-1}(U)$ is affine and equal
to $(f')^{-1}(V)$. This proves that $S'$ has an open covering by
affines whose inverse image under $f'$ is affine. We conclude
by Lemma \ref{lemma-characterize-affine} above.
\end{proof}






\section{Quasi-affine morphisms}
\label{section-quasi-affine}

\noindent
Recall that a scheme $X$ is called {\it quasi-affine} if it is quasi-compact
and isomorphic to an open subscheme of an affine scheme, see
Properties, Definition \ref{properties-definition-quasi-affine}.


\begin{definition}
\label{definition-quasi-affine}
A morphism of schemes $f : X \to S$ is called {\it quasi-affine} if
it is quasi-compact and the inverse image of every affine open
of $S$ is a quasi-affine scheme.
\end{definition}












\section{Types of morphisms defined by properties of ring maps}
\label{section-properties-ring-maps}

\noindent
In this section we study what properties of ring maps
allow one to define local properties of morphisms of schemes.

\begin{definition}
\label{definition-property-local}
Let $P$ be a property of ring maps.
\begin{enumerate}
\item We say that $P$ is {\it local} if the following hold:
\begin{enumerate}
\item For any ring map $R \to A$, and any $f \in R$ we have
$P(R \to A) \Rightarrow P(R_f \to A_f)$.
\item For any rings $R$, $A$, any $f \in R$, $a\in A$, and any ring map
$R_f \to A$ we have $P(R_f \to A) \Rightarrow P(R \to A_a)$.
\item For any ring map $R \to A$, and $a_i \in A$ such that
$(a_1, \ldots, a_n) = A$ then
$\forall i, P(R \to A_{a_i}) \Rightarrow P(R \to A)$.
\end{enumerate}
\item We say that $P$ is {\it stable under base change} if for any
ring maps $R \to A$, $R \to R'$ we have
$P(R \to A) \Rightarrow P(R' \to R' \otimes_R A)$.
\item We say that $P$ is {\it stable under composition} if for any
ring maps $A \to B$, $B \to C$ we have
$P(A \to B) \wedge P(B \to C) \Rightarrow P(A \to C)$.
\end{enumerate}
\end{definition}

\begin{definition}
\label{definition-locally-P}
Let $P$ be a property of ring maps.
Let $f : X \to S$ be a morphisms of schemes.
We say $f$ {\it is locally of type $P$} if for any $x \in X$
there exists an affine open neighbourhood $U$ of $x$
in $X$ which maps into an affine open $V \subset S$ such that
the induced ring map $\mathcal{O}_S(V) \to \mathcal{O}_X(U)$
has property $P$.
\end{definition}

\noindent
This is not a ``good'' definition unless the property $P$ is
a local property. Even if $P$ is a local property we will not
automatically use this definition to say that a morphism is
``locally of type $P$'' unless we also explicitly state the
definition elsewhere.

\begin{lemma}
\label{lemma-locally-P}
Let $f : X \to S$ be a morphism of schemes.
Let $P$ be a property of ring maps.
Let $\text{Spec}(A) = U$ be an affine open of $X$,
and $\text{Spec}(R) = V$ an affine open of $S$ such that
$f(U) \subset V$. Let $R \to A$ be the induced ring map.
If $f$ is locally of type $P$ and $P$ is local,
then $P(R \to A)$ holds.
\end{lemma}

\begin{proof}
By definition there exists an affine open covering
$U = \bigcup_{i \in I} U_i$, $U_i = \text{Spec}(A_i)$ such that each $f(U_i)$
is contained in an affine open $V_i = \text{Spec}(R_i)$ of $S$
and such $P(R_i \to A_i)$ holds for all $i$.
(Warning: $V_i$ may not be contained in $V$.)
For any $u \in U_i$ we may choose an open neighbourhood
$V_{iu} \subset V \cap V_i$ of $f(u)$ which is a standard affine
open in both $V$ and $V_i$, see
Schemes, Lemma \ref{schemes-lemma-standard-open-two-affines}. 
Note that $u \in f^{-1}(V_{i, u})$.
Because $U_i$ is quasi-compact we may choose a finite
collection $V_{ij} \subset V \cap V_i$, $j \in I_i$ of such affine opens
such that $f(U_i) \subset \bigcup_{j \in I_j} V_{ij}$.
Write $V_{ij} = \text{Spec}(R_{ij})$, so that
$R_{ij} \cong R_{r_{ij}} \cong (R_i)_{r_{ij}'}$ for certain
$r_{ij} \in R$, $r_{ij}' \in R_i$.
We may cover each $U_i \cap f^{-1}(V_{ij})$
by finitely many standard opens of $U = \text{Spec}(A)$.
Say $U_i \cap f^{-1}(V_{ij}) = \bigcup_{k \in K_{ij}} D(a_{ijk})$,
with $a_{ijk} \in A$. We have $A_{a_{ijk}} \cong (A_i)_{a_{ijk}}$.
The open subschemes and their inclusion relations give rise
to the following commutative diagram or rings:
$$
\xymatrix{
& R_i \ar[r] \ar[d]^{r_{ij}'} & A_i \ar[d]^{r_{ij}'}
& A \ar[l] \ar[d]^{a_{ijk}}\\
R \ar[r]^{r_{ij}} & R_{ij} \ar[r] & A_i \otimes_{R_i} R_{ij} \ar[r]^-{a_{ijk}}
& A_{a_{ijk}}
}
$$
Here we have labeled each arrow which is a principal localization with
the element at which the source of the arrow is being localized.
Since we have $P(R_i \to A_i)$ we have
$P(R_{ij} \to A_i \otimes_{R_i} R_{ij})$ by
Definition \ref{definition-property-local} (1)(a).
Then we conclude $P(R \to A_{a_{ijk}})$ by
Definition \ref{definition-property-local} (1)(b).
Because the opens $D(a_{ijk})$ cover all the opens
$U_i \cap f^{-1}(D(r_{ij})$ which cover the opens $U_i$
which cover all of $U$ we see that $U = \bigcup_{ijk} D(a_{ijk})$.
Hence $P(R \to A)$ by Definition \ref{definition-property-local} (1)(c).
\end{proof}

\begin{lemma}
\label{lemma-locally-P-characterize}
Let $P$ be a local property of ring maps.
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent
\begin{enumerate}
\item The morphism $f$ is locally of type $P$.
\item For every affine opens $U \subset X$, $V \subset S$
with $f(U) \subset V$ we have $P(\mathcal{O}_S(V) \to \mathcal{O}_X(U))$.
\item There exists an open covering $S = \bigcup_{j \in J} V_j$
and open coverings $f^{-1}(V_j) = \bigcup_{i \in I_j} U_i$ such
that each of the morphisms $U_i \to V_j$, $j\in J, i\in I_j$
is locally of type $P$.
\item There exists an affine open covering $S = \bigcup_{j \in J} V_j$
and affine open coverings $f^{-1}(V_j) = \bigcup_{i \in I_j} U_i$ such
that $P(\mathcal{O}_S(V_j) \to \mathcal{O}_X(U_i))$ holds, for all
$j\in J, i\in I_j$.
\end{enumerate}
Moreover, if $f$ is locally of type $P$ then for
any open subschemes $U \subset X$, $V \subset S$ with $f(U) \subset V$
the restriction $f|_U : U \to V$ is locally of type $P$.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-locally-P} above.
\end{proof}

\begin{lemma}
\label{lemma-composition-type-P}
Let $P$ be a property of ring maps. 
Assume $P$ is local and stable under composition.
The composition of morphisms locally of type $P$ is
locally of type $P$.
\end{lemma}

\begin{proof}
Let $f : X \to Y$ and $g : Y \to Z$ be morphisms locally of type $P$.
Let $x \in X$. Choose an affine open neighbourhood $W \subset Z$ of
$g(f(x))$. Choose an affine open neighbourhood $V \subset g^{-1}(W)$
of $f(x)$. Choose an affine open neighbourhood $U \subset f^{-1}(V)$
of $x$. By Lemma \ref{lemma-locally-P-characterize} the ring maps
$\mathcal{O}_Z(W) \to \mathcal{O}_Y(V)$ and
$\mathcal{O}_Y(V) \to \mathcal{O}_X(U)$ satisfy $P$.
Hence $\mathcal{O}_Z(W) \to \mathcal{O}_X(U)$ satisfies $P$
as $P$ is assumed stable under composition.
\end{proof}

\begin{lemma}
\label{lemma-base-change-type-P}
Let $P$ be a property of ring maps. 
Assume $P$ is local and stable under base change.
The base change of a morphism locally of type $P$
is locally of type $P$.
\end{lemma}

\begin{proof}
Let $f : X \to S$ be a morphism locally of type $P$.
Let $S' \to S$ be any morphism. Denote
$f' : X_{S'} = S' \times_S X \to S'$ the base change of $f$.
For every $s' \in S'$ there exists an open affine neighbourhood
$s' \in V' \subset S'$ which maps into some open affine $V \subset S$.
By Lemma \ref{lemma-locally-P-characterize} the open $f^{-1}(V)$ is a
union of affines $U_i$ such that the ring maps
$\mathcal{O}_S(V) \to \mathcal{O}_X(U_i)$ all satisfy $P$.
By the material in Schemes, Section \ref{schemes-section-fibre-products}
we see that $f^{-1}(U)_{V'} = V' \times_V f^{-1}(V)$ is
the union of the affine opens $V' \times_V U_i$.
Since $\mathcal{O}_{X_{S'}}(V' \times_V U_i) =
\mathcal{O}_{S'}(V') \otimes_{\mathcal{O}_S(V)} \mathcal{O}_X(U_i)$
we see that the ring maps
$\mathcal{O}_{S'}(V') \to \mathcal{O}_{X_{S'}}(V' \times_V U_i)$
satisfy $P$ as $P$ is assumed stable under base change.
\end{proof}

\begin{lemma}
\label{lemma-properties-local}
The following properties of a ring map $R \to A$ are local.
\begin{enumerate}
\item (Finite type.)
The ring map $R \to A$ is of finite type.
\item (Finite presentation.)
The ring map $R \to A$ is of finite presentation.
\item (Isomorphism on local rings.)
For every prime $\mathfrak q$ of $A$ lying over $\mathfrak p \subset R$
the ring map $R \to A$ induces an isomorphism
$R_{\mathfrak p} \to A_{\mathfrak q}$.
\item (Open immersion.)
For every prime $\mathfrak q$ of $A$ there exists an $f \in R$,
$\varphi(f) \not \in \mathfrak q$ such that the ring map $\varphi : R \to A$ 
induces an isomorphism $R_f \to A_f$.
\item (Reduced fibres.) 
For every prime $\mathfrak p$ of $R$ the fibre ring
$A \otimes_R \kappa(\mathfrak p)$ is reduced.
\item (Fibres of dimension at most $n$.)
For every prime $\mathfrak p$ of $R$ the fibre ring
$A \otimes_R \kappa(\mathfrak p)$ has Krull dimension at most $n$.
\item (Flat.)
The ring map $R \to A$ is flat.
\item (Quasi-finite.)
The ring map $R \to A$ is quasi-finite,
see Algebra, Definition \ref{algebra-definition-quasi-finite}.
\item (Syntomic.)
The ring map $R \to A$ is syntomic, see
Algebra, Definition \ref{algebra-definition-lci}.
\item (Smooth.)
The ring map $R \to A$ is smooth, see
Algebra, Definition \ref{algebra-definition-smooth}.
\item (Locally Noetherian on the target.)
The ring map $R \to A$ has the property that $A$ is Noetherian.
\item Add more here as needed.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-properties-base-change}
The following properties of ring maps are stable under base change.
\begin{enumerate}
\item (Finite type.)
The ring map $R \to A$ is of finite type.
\item (Finite presentation.)
The ring map $R \to A$ is of finite presentation.
\item (Isomorphism on local rings.)
For every prime $\mathfrak q$ of $A$ lying over $\mathfrak p \subset R$
the ring map $R \to A$ induces an isomorphism
$R_{\mathfrak p} \to A_{\mathfrak q}$.
\item (Open immersion.)
For every prime $\mathfrak q$ of $A$ there exists an $f \in R$,
$\varphi(f) \not \in \mathfrak q$ such that the ring map $\varphi : R \to A$ 
induces an isomorphism $R_f \to A_f$.
\item (Reduced fibres.) 
For every prime $\mathfrak p$ of $R$ the fibre ring
$A \otimes_R \kappa(\mathfrak p)$ is reduced.
\item (Fibres of dimension at most $n$.)
For every prime $\mathfrak p$ of $R$ the fibre ring
$A \otimes_R \kappa(\mathfrak p)$ has Krull dimension at most $n$.
\item (Flat.)
The ring map $R \to A$ is flat.
\item (Quasi-finite.)
The ring map $R \to A$ is quasi-finite,
see Algebra, Definition \ref{algebra-definition-quasi-finite}.
\item (Syntomic.)
The ring map $R \to A$ is syntomic, see
Algebra, Definition \ref{algebra-definition-lci}.
\item (Smooth.)
The ring map $R \to A$ is smooth, see
Algebra, Definition \ref{algebra-definition-smooth}.
\item Add more here as needed.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-properties-composition}
The following properties of ring maps are stable under composition.
\begin{enumerate}
\item (Finite type.)
The ring map $R \to A$ is of finite type.
\item (Finite presentation.)
The ring map $R \to A$ is of finite presentation.
\item (Isomorphism on local rings.)
For every prime $\mathfrak q$ of $A$ lying over $\mathfrak p \subset R$
the ring map $R \to A$ induces an isomorphism
$R_{\mathfrak p} \to A_{\mathfrak q}$.
\item (Open immersion.)
For every prime $\mathfrak q$ of $A$ there exists an $f \in R$,
$\varphi(f) \not \in \mathfrak q$ such that the ring map $\varphi : R \to A$ 
induces an isomorphism $R_f \to A_f$.
\item (Flat.)
The ring map $R \to A$ is flat.
\item (Quasi-finite.)
The ring map $R \to A$ is quasi-finite,
see Algebra, Definition \ref{algebra-definition-quasi-finite}.
\item (Syntomic.)
The ring map $R \to A$ is syntomic, see
Algebra, Definition \ref{algebra-definition-lci}.
\item (Smooth.)
The ring map $R \to A$ is smooth, see
Algebra, Definition \ref{algebra-definition-smooth}.
\item (Locally Noetherian on the target.)
The ring map $R \to A$ has the property that $A$ is Noetherian.
\item Add more here as needed.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}








\section{Finite type morphisms}
\label{section-finite-type}

\begin{definition}
\label{definition-finite-type}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is {\it of finite type at $x \in X$} if 
there exists an affine open neighbourhood $\text{Spec}(A) = U \subset X$
of $x$ and and an affine open $\text{Spec}(R) = V \subset S$
with $f(U) \subset V$ such that the induced ring map
$R \to A$ is of finite type.
\item We say that $f$ is {\it locally of finite type} if it is 
of finite type at every point of $X$.
\item We say that $f$ is {\it of finite type} if it is locally of
finite type and quasi-compact.
\end{enumerate}
\end{definition}

\noindent
According to Lemmas \ref{lemma-properties-local},
\ref{lemma-properties-base-change}, and
\ref{lemma-properties-composition} the property of a ring map
being of finite type is local, stable under base change,
and stable under composition.  Hence
Lemma \ref{lemma-locally-P} gives some properties
of morphisms locally of finite type which we will use in the following
without further mention.

\begin{lemma}
\label{lemma-composition-finite-type}
The composition of morphisms (locally) of finite type is
(locally) of finite type.
\end{lemma}

\begin{proof}
By the above and the fact that compositions of quasi-compact morphisms
are quasi-compact, see
Schemes, Lemma \ref{schemes-lemma-composition-quasi-compact}.
\end{proof}

\begin{lemma}
\label{lemma-base-change-finite-type}
The base change of a morphism (locally) of finite type
is (locally) of finite type.
\end{lemma}

\begin{proof}
By the above and the fact that a base change of a quasi-compact morphism
is quasi-compact, see
Schemes, Lemma \ref{schemes-lemma-quasi-compact-preserved-base-change}.
\end{proof}

\begin{lemma}
\label{lemma-immersion-locally-finite-type}
A locally closed immersion is locally of finite type.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-finite-type-noetherian}
Let $f : X \to S$ be a morphism.
If $S$ is (locally) Noetherian and $f$ (locally) of finite type
then $X$ is (locally) Noetherian.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}











\section{Points of finite type}
\label{section-points-finite-type}

\noindent
The moral of this section is that ``finite type points'' can replace
``closed points'' in a certain sense and in certain situations.
There are always enough of them for example, see below.

\begin{lemma}
\label{lemma-point-finite-type}
Let $S$ be a scheme. Let $k$ be a field.
Let $f : \text{Spec}(k) \to S$ be a morphism.
The following are equivalent:
\begin{enumerate}
\item The morphism $f$ is of finite type.
\item The morphism $f$ is locally of finite type.
\item There exists an affine open $U = \text{Spec}(R)$ of $S$
such that $f$ corresponds to a finite ring map $R \to k$.
\item There exists an affine open $U = \text{Spec}(R)$ of $S$
such that the image of $f$ consists of a closed point $u$ in $U$
and the field extension $\kappa(u) \subset k$ is finite.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (1) and (2) is obvious as $\text{Spec}(k)$
is a singleton and hence any morphism from it is quasi-compact.

\medskip\noindent
Suppose $f$ is locally of finite type. Choose any affine open
$\text{Spec}(R) = U \subset S$ such that the image of $f$
is contained in $U$. Thus we get a ring map $R \to k$ which
is of finite type. Let $\mathfrak p \subset R$ be the kernel.
Then $R/\mathfrak p \subset k$ is of finite type. By
Algebra, Lemma \ref{algebra-lemma-field-finite-type-over-domain}
there exist a $\overline{f} \in R/\mathfrak p$ such that
$(R\mathfrak p)_{\overline{f}}$ is a field and
$(R\mathfrak p)_{\overline{f}} \to k$ is a finite field
extension. If $f \in R$ is a lift of $\overline{f}$, then
we see that $k$ is a finite $R_f$-module. Thus (2) $\Rightarrow$ (3).

\medskip\noindent
Suppose that $\text{Spec}(R) = U \subset S$ is an affine open
such that $f$ corresponds to a finite ring map $R \to k$.
Then $f$ is locally of finite type
by our general Lemma \ref{lemma-locally-P-characterize}.
Thus (3) $\Rightarrow$ (2).

\medskip\noindent
Suppose $R \to k$ is finite. The image of $R \to k$ is a field
over which $k$ is finite by
Algebra, Lemma \ref{algebra-lemma-integral-under-field}.
Hence the kernel of $R \to k$ is a maximal ideal.
Thus (3) $\Rightarrow$ (4).

\medskip\noindent
The implication (4) $\Rightarrow$ (3) is immediate.
\end{proof}

\noindent
Let us say that a point $s$ of a scheme $S$ is {\it of finite type}
if the canonical morphism $\text{Spec}(\kappa(s)) \to S$, see
Schemes, Section \ref{schemes-section-points}, is of finite type.
From the lemma we see that the set of finite type points is
$$
S_{\text{ft-pts}} = \bigcup\nolimits_{U \subset S\text{ open}} U_0
$$
where $U_0$ is the set of closed points of $U$. (We may let $U$ range
over all opens or over all affine opens; it does not matter.)
In addition, for any finite type morphism $f : \text{Spec}(k) \to S$,
where $k$ is a field we see that the image of $f$ is a finite type
point. More generally, since the composition of morphisms locally of finite
type is locally of finite type we see that given any
locally finite type morphism
$f : T \to S$ we get an induced map
$f_{\text{ft-pts}} : T_{\text{ft-pts}} \to S_{\text{ft-pts}}$.
Any locally closed immersion is locally of finite type,
see Lemma \ref{lemma-immersion-locally-finite-type}. We conclude
that for any locally closed subset $T \subset S$ we have
$$
T \not = \emptyset
\Rightarrow 
T \cap S_{\text{ft-pts}} \not = \emptyset.
$$
This is true because $T$ carries a schemes structure (see
Schemes, Lemma \ref{schemes-lemma-reduced-closed-subscheme})
and any nonempty affine open of $T$ has at least one closed point.
It follows that most of the material from
Topology, Section \ref{topology-section-space-jacobson} goes through
with the set of closed points replaced by the set of points of
finite type.

\medskip\noindent
In fact, if $S$ is Jacobson then we recover the closed points as
the finite type points.

\begin{lemma}
\label{lemma-jacobson-finite-type-points}
Let $S$ be a scheme.
The following are equivalent:
\begin{enumerate}
\item For every finite type morphism $f : \text{Spec}(k) \to S$
with $k$ a field the image consists of a closed point of $S$.
In the terminology introduced above: finite type points of $S$ are
closed points of $S$.
\item For every locally finite type morphism $T \to S$ closed points map
to closed points.
\item For every locally finite type morphism $f : T \to S$ any closed point
$t \in T$ maps to a closed point $s \in S$ and $\kappa(s) \subset \kappa(t)$
is finite.
\item The scheme $S$ is Jacobson.
\end{enumerate}
\end{lemma}

\begin{proof}
We have trivially (3) $\Rightarrow$ (2) $\Rightarrow$ (1).
The discussion above shows that (1) implies (4).
Hence it suffices to show that (4) implies (3).
Suppose that $T \to S$ is locally of finite type.
Choose $t \in T$ with $s = f(t)$ as in (3).
Choose affine open neighbourhoods $\text{Spec}(R) = U \subset S$ of $s$ and
$\text{Spec}(A) = V \subset T$ of $t$ with $f(V) \subset U$.
The induced ring map $R \to A$ is of finite type
(see Section \ref{section-properties-ring-maps}) and $A$ is Jacobson
by Properties, Lemma \ref{properties-lemma-jacobson}.
Thus the result follows from
Algebra, Proposition \ref{algebra-proposition-Jacobson-permanence}.
\end{proof}



















\section{Quasi-finite morphisms}
\label{section-quasi-finite}

\begin{definition}
\label{definition-quasi-finite}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that {\it $f$ is quasi-finite at a point $x \in X$} if there
exist an affine neighbourhood $\text{Spec}(A) = U \subset X$
and an affine open $\text{Spec}(R) = V \subset S$ such that
$f(U) \subset V$ and the ring map $R \to A$ is quasi-finite,
see Algebra, Definition \ref{algebra-definition-quasi-finite}.
\item We say {\it $f$ is locally quasi-finite} if $f$ is
quasi-finite at every point $x$ of $X$.
\item We say that {\it $f$ is quasi-finite} if $f$ is of finite type
and every point $x$ is an isolated point of its fibre.
\end{enumerate}
\end{definition}

\noindent
According to Lemmas \ref{lemma-properties-local},
\ref{lemma-properties-base-change}, and
\ref{lemma-properties-composition} the property of a ring map
being quasi-finite is local, stable under base change,
and stable under composition.  Hence
Lemma \ref{lemma-locally-P} gives some properties
of locally quasi-finite morphisms which we will use in the following
without further mention.













\section{Morphisms of finite presentation}
\label{section-finite-presentation}

\begin{definition}
\label{definition-finite-presentation}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is {\it of finite presentation at $x \in X$} if 
there exists a affine open neighbourhood $\text{Spec}(A) = U \subset X$
of $x$ and and affine open $\text{Spec}(R) = V \subset S$
with $f(U) \subset V$ such that the induced ring map
$R \to A$ is of finite presentation.
\item We say that $f$ is {\it locally of finite presentation} if it is 
of finite presentation at every point of $X$.
\item We say that $f$ is {\it of finite presentation} if it is locally of
finite presentation, quasi-compact and quasi-separated.
\end{enumerate}
\end{definition}

\noindent
According to Lemmas \ref{lemma-properties-local},
\ref{lemma-properties-base-change}, and
\ref{lemma-properties-composition} the property of a ring map
being of finite presentation is local, stable under base change,
and stable under composition.  Hence
Lemma \ref{lemma-locally-P} gives some properties
of morphisms locally of finite presentation which we will use in the following
without further mention.

\begin{lemma}
\label{lemma-composition-finite-presentation}
The composition of morphisms (locally) of finite presentation is
(locally) of finite presentation.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-base-change-finite-presentation}
The base change of a morphism (locally) of finite presentation
is (locally) of finite presentation.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-finite-presentation-finite-type}
A morphism of finite presentation is of finite type.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-finite-type-presentation}
Let $f : X \to S$ be a morphism of schemes.
Assume $S$ (locally) Noetherian.
Then $f$ is (locally) of finite presentation
if and only if $f$ is (locally) of finite type.
\end{lemma}

\begin{proof}
This follows from the above except for the implication
$S$ Noetherian \& $f$ finite type $\Rightarrow$ 
$f$ finite presentation. And even here everything is clear
except for the question of why $f$ is quasi-separated.
This follows by combining Properties,
Lemma \ref{properties-lemma-locally-Noetherian-quasi-separated}
and Schemes, Lemma \ref{schemes-lemma-compose-after-separated}.
\end{proof}

\begin{lemma}
\label{lemma-open-immersion-locally-finite-presentation}
An open immersion $U \to S$ is locally of finite presentation.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}















\section{Open morphisms}
\label{section-open}

\begin{definition}
\label{definition-open}
Let $f : X \to S$ be a morphism.
\begin{enumerate}
\item We say $f$ is {\it open} if the map on underlying
topological spaces is open.
\item We say $f$ is {\it universally open} if for any morphism of
schemes $S' \to S$ the base change $f' : X_{S'} \to S'$ is open.
\end{enumerate}
\end{definition}

\noindent
According to
Topology, Lemma \ref{topology-lemma-closed-open-map-specialization}
generalizations lift along an open morphism.
Here is a (partial) converse.

\begin{lemma}
\label{lemma-locally-finite-presentation-universally-open}
Let $f : X \to S$ be a morphism.
If $f$ is locally of finite presentation and generalizations lift along
$f$, then $f$ is open.
If $f$ is locally of finite presentation and generalizations lift along
every base change of $f$, then $f$ is universally open.
\end{lemma}

\begin{proof}
It suffices to prove the first assertion.
This reduces to the case where both $X$ and $S$ are affine.
In this case the result follows from
Algebra, Lemma \ref{algebra-lemma-going-up-down-specialization}
and Proposition \ref{algebra-proposition-fppf-open}.
\end{proof}










\section{Flat morphisms}
\label{section-flat}

\begin{definition}
\label{definition-flat}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say $f$ is {\it flat at a point $x \in X$} if the
local ring $\mathcal{O}_{X, x}$ is flat over the local ring
$\mathcal{O}_{S, f(x)}$.
\item We say $f$ is {\it flat} if $f$ is flat at every point of $X$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-composition-flat}
The composition of flat morphisms is flat.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-base-change-flat}
The base change of a flat morphism is flat.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-fppf-open}
A flat morphism locally of finite presentation is universally open.
\end{lemma}

\begin{proof}
This follows because generalizations lift along a flat morphism
(see Algebra, Section \ref{algebra-section-going-up}), and
Lemma \ref{lemma-locally-finite-presentation-universally-open} above.
We can also argue directly as follows.

\medskip\noindent
Let $f : X \to S$ be flat locally of finite presentation.
To show $f$ is open it suffices to show that we may cover
$X$ by open affines $X = \bigcup U_i$ such that $U_i \to S$
is open. By definition we may cover $X$ by
affine opens $U_i \subset X$ such that each $U_i$ maps
into an affine open $V_i \subset S$ and such that
the induced ring map $\mathcal{O}_S(V_i) \to \mathcal{O}_X(U_i)$ is
of finite presentation. Thus $U_i \to V_i$ is open by
Algebra, Proposition \ref{algebra-proposition-fppf-open}.
The lemma follows.
\end{proof}

















\section{Syntomic morphisms}
\label{section-syntomic}

\begin{definition}
\label{definition-syntomic}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is {\it syntomic at $x \in X$} if 
there exists a affine open neighbourhood $\text{Spec}(A) = U \subset X$
of $x$ and and affine open $\text{Spec}(R) = V \subset S$
with $f(U) \subset V$ such that the induced ring map
$R \to A$ is syntomic, see
Algebra, Definition \ref{algebra-definition-lci}.
\item We say that $f$ is {\it syntomic} if it is syntomic
at every point of $X$.
\item We say that a morphism of affine schemes $f : X \to S$
is {\it standard syntomic} there exists a global relative complete
intersection $R \to R[x_1, \ldots, x_n]/(f_1, \ldots, f_c)$ (see
Algebra,
Definition \ref{algebra-definition-relative-global-complete-intersection})
such that $X \to S$ is isomorphic to
$$
\text{Spec}(R[x_1, \ldots, x_n]/(f_1, \ldots, f_c)) \to \text{Spec}(R).
$$
\end{enumerate}
\end{definition}

\noindent
Note that syntomic $=$ locally syntomic.
According to Lemmas \ref{lemma-properties-local},
\ref{lemma-properties-base-change}, and
\ref{lemma-properties-composition} the property of a ring map
being syntomic is local, stable under base change,
and stable under composition.  Hence
Lemma \ref{lemma-locally-P} gives some properties
of syntomic morphisms which we will use in the following
without further mention.

\begin{lemma}
\label{lemma-composition-syntomic}
The composition of syntomic morphisms is syntomic.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-base-change-syntomic}
The base change of a syntomic morphism is syntomic.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-syntomic-locally-finite-presentation}
A syntomic morphism is locally of finite presentation.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}




















\section{Smooth morphisms}
\label{section-smooth}

\begin{definition}
\label{definition-smooth}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is {\it smooth at $x \in X$} if 
there exists a affine open neighbourhood $\text{Spec}(A) = U \subset X$
of $x$ and and affine open $\text{Spec}(R) = V \subset S$
with $f(U) \subset V$ such that the induced ring map
$R \to A$ is smooth, see Algebra, Definition \ref{algebra-definition-smooth}.
\item We say that $f$ is {\it smooth} if it is smooth at every point of $X$.
\item We say that a morphism of affine schemes $f : X \to S$
is {\it standard smooth} there exists a standard smooth ring
map $R \to R[x_1, \ldots, x_n]/(f_1, \ldots, f_c)$ (see
Algebra, Definition \ref{algebra-definition-standard-smooth})
such that $X \to S$ is isomorphic to
$$
\text{Spec}(R[x_1, \ldots, x_n]/(f_1, \ldots, f_c)) \to \text{Spec}(R).
$$
\end{enumerate}
\end{definition}

\noindent
Note that smooth $=$ locally smooth.
According to Lemmas \ref{lemma-properties-local},
\ref{lemma-properties-base-change}, and
\ref{lemma-properties-composition} the property of a ring map
being smooth is local, stable under base change,
and stable under composition.  Hence
Lemma \ref{lemma-locally-P} gives some properties
of smooth morphisms which we will use in the following
without further mention.

\begin{lemma}
\label{lemma-composition-smooth}
The composition of smooth morphisms is smooth.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-base-change-smooth}
The base change of a smooth morphism is smooth.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-smooth-syntomic}
A smooth morphism is syntomic, and hence locally of finite presentation.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}
















\section{Relatively ample sheaves}
\label{section-relatively-ample}


\begin{definition}
\label{definition-relatively-ample}
Let $f : X \to S$ be a morphism of schemes.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
We say {\it $\mathcal{L}$ is $f$-relatively ample}, or
{\it $\mathcal{L}$ is ample on $X/S$} if $f : X \to S$
is quasi-compact, and if for every affine open $V \subset S$
the restriction of $\mathcal{L}$ to the open subscheme
$f^{-1}(V)$ of $X$ is ample.
\end{definition}







\section{Very ample sheaves}
\label{section-very-ample}


\begin{definition}
\label{definition-very-ample}
Let $f : X \to S$ be a morphism of schemes.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
We say {\it $\mathcal{L}$ is $f$-relatively very ample}, or
{\it $\mathcal{L}$ is very ample on $X/S$} if
there exist a quasi-coherent $\mathcal{O}_S$-module
$\mathcal{E}$ and an immersion $i : X \to \mathbf{P}(\mathcal{E})$
over $S$ such that
$\mathcal{L} \cong i^*\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)$.
\end{definition}








\section{Quasi-projective morphisms}
\label{section-quasi-projective}



\begin{definition}
\label{definition-quasi-projective}
Let $f : X \to S$ be a morphism of schemes.
We say $f$ is {\it quasi-projective} if $f$ is of finite type
and there exists an $f$-relatively ample invertible $\mathcal{O}_X$-module.
\end{definition}








\section{Proper morphisms}
\label{section-proper}


\begin{definition}
\label{definition-proper}
Let $f : X \to S$ be a morphism of schemes.
We say {\it $f$ is proper} if $f$ is separated, finite type, and
universally closed.
\end{definition}




\section{Projective morphisms}
\label{section-projective}


\begin{definition}
\label{definition-projective}
Let $f : X \to S$ be a morphism of schemes.
We say {\it $f$ is projective} if $X$ is isomorphic as
an $S$-scheme to a closed subscheme of a projective
bundle $\mathbf{P}(\mathcal{E})$ for some quasi-coherent, finite type
$\mathcal{O}_S$-module $\mathcal{E}$.
\end{definition}









\section{Integral and finite morphisms}
\label{section-integral}


\begin{definition}
\label{definition-integral}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is {\it integral} if $f$ is affine
and if for every affine open $\text{Spec}(R) = V \subset S$
with inverse image $\text{Spec}(A) = f^{-1}(V) \subset X$
the associated ring map $R \to A$ is integral.
\item We say that $f$ is {\it finite} if $f$ is affine
and if for every affine open $\text{Spec}(R) = V \subset S$
with inverse image $\text{Spec}(A) = f^{-1}(V) \subset X$
the associated ring map $R \to A$ is finite.
\end{enumerate}
\end{definition}








































\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
