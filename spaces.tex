\input{preamble}

% OK, start here.
%
\begin{document}

\title{Algebraic Spaces}


\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
This is where we define algebraic spaces and make some very elementary
observations. Algebraic spaces were first introduced by Mike Artin,
see \cite{ArtinI} and \cite{ArtinII}.





\section{General remarks}
\label{section-general}

\noindent
We work in a suitable big fppf site $\textit{Sch}_{fppf}$
as in Topologies, Definition \ref{topologies-definition-big-fppf-site}.
So, if not explicitly stated otherwise all schemes will be objects
of $\textit{Sch}_{fppf}$.
We will record elsewhere what changes if you change the big
fppf site (insert future reference here).

\medskip\noindent
We will always work relative to a base $S$ contained in $\textit{Sch}_{fppf}$.
And we will then work with the big fppf site $(\textit{Sch}/S)_{fppf}$,
see Topologies, Definition \ref{topologies-definition-big-small-fppf}.
The absolute case can be recovered by taking
$S = \text{Spec}(\mathbf{Z})$.

\medskip\noindent
If $U, T$ are schemes over $S$, then we denote
$U(T)$ for the set of $T$-valued points {\it over} $S$.
In a formula: $U(T) = \text{Mor}_S(T, U)$.

\medskip\noindent
Note that any fpqc covering is a family of universally effective
epimorphisms, see
Descent, Lemma \ref{fpqc-descent-lemma-fpqc-universal-effective-epimorphisms}.
Hence the topology on $\textit{Sch}_{fppf}$
is weaker than the canonical topology and all representable presheaves
are sheaves.







\section{Representable morphisms of presheaves}
\label{section-representable}

\noindent
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
Let $F, G : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$.
Let $a : F \to G$ be a representable transformation of functors, see
Categories,
Definition \ref{categories-definition-representable-map-presheaves}.
This means that for every
$U \in \text{Ob}((\textit{Sch}/S)_{fppf})$ and
any $\xi \in G(U)$ the fiber product $h_U \times_{\xi, G} F$ is representable.
Choose a representing object $V_\xi$ and an isomorphism
$h_{V_\xi} \to h_U \times_G F$.
By the Yoneda lemma, see Categories, Lemma \ref{categories-lemma-yoneda},
the projection $h_{V_\xi} \to h_U \times_G F \to h_U$ comes from a unique
morphism of schemes $a_\xi : V_\xi \to U$.
Suggestively we could represent this by the diagram
$$
\xymatrix{
V_\xi \ar@{~>}[r] \ar[d]_{a_\xi} & h_{V_\xi} \ar[d] \ar[r] & F \ar[d]^a \\
U \ar@{~>}[r] & h_U \ar[r]^\xi & G 
}
$$
where the squiggly arrows represent the Yoneda embedding.

\begin{definition}
\label{definition-relative-representable-property}
With $S$, and $a : F \to G$ representable as above.
Let $P$ be a property of morphisms of schemes preserved under any base change,
see Schemes, Definition \ref{schemes-definition-preserved-by-base-change}.
We say that {\it $a$ has property $P$} if for every
$U \in \text{Ob}((\textit{Sch}/S)_{fppf})$ and
any $\xi \in G(U)$ the resulting morphism of schemes
$V_\xi \to U$ has property $P$.
\end{definition}

\noindent
It is important to note that we will only use this definition for
properties of morphisms that are stable under base change. This is
not because the definition doens't make sense otherwise; rather it
is because we may want to give a different definition which is
better suited to the property we have in mind.

\begin{lemma}
\label{lemma-representable-diagonal}
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
Let $F$ be a presheaf of sets on $(\textit{Sch}/S)_{fppf}$.
The following are equivalent:
\begin{enumerate}
\item The diagonal $F \to F \times F$ is representable.
\item For every scheme $U$ over $S$,
$U/S \in \text{Ob}((\textit{Sch}/S)_{fppf})$
and any $\xi \in F(U)$ the map $\xi : h_U \to F$ is representable.
\end{enumerate}
\end{lemma}

\begin{proof}
This is completely formal, see
Categories, Lemma \ref{categories-lemma-representable-diagonal}.
It depends only on the fact that the category $(\textit{Sch}/S)_{fppf}$
has products of pairs of objects and fibre products, see
Topologies, Lemma \ref{topologies-lemma-fibre-products-fppf}.
\end{proof}

\noindent
In the situation of the lemma, for any morphism
$\xi : h_U \to F$ as in the lemma, it makes sense
to say that $\xi$ has property $P$, for any property
as in Definition \ref{definition-relative-representable-property}.
We will use this remark in the definition
of algebraic spaces below. In particular this holds for
$P = $ ``surjective'' and $P = $ ``etale''.


















\section{Algebraic spaces}
\label{section-algebraic-spaces}


\begin{definition}
\label{definition-algebraic-space}
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
An {\it algebraic space over $S$} is a presheaf
$$
F : (\textit{Sch}/S)^{opp}_{fppf} \longrightarrow \textit{Sets}
$$
with the following properties
\begin{enumerate}
\item The presheaf $F$ is a sheaf.
\item The diagonal morphism $F  \to F \times F$ is representable.
\item There exists a scheme $U \in \text{Ob}(\textit{Sch}_{fppf})$
and a map $h_U \to F$ which is surjective, and etale.
\end{enumerate}
\end{definition}

\noindent
There are two differences with the ``usual'' definition, for example the
definition in Knutson's book \cite{Kn}.

\medskip\noindent
The first is that we require $F$ to be a sheaf in the fppf topology.
One reason for doing this is that many natural examples
of algebraic spaces satisfy the sheaf condition for the fppf coverings
(and even for fpqc coverings). Also, one of the reasons that algebraic
spaces have been so useful is via Mike Artin's results on algebraic spaces.
Built into his method is a condition which garantees the result is
locally of finite presentation over $S$.
Combined it somehow seems to us that the fppf topology
is the natural topology to work with. In the end the resulting category
of algebraic spaces ends up being ``the same''. Namely, allthough the actual
sheaves $F$ being considered will actually be different in the end the
category of algebraic spaces defined using sheaves in the etale topology
is equivalent the the category we define here. This will be clear later
when we introduce presentations (insert future reference here).

\medskip\noindent
The second is that we only require the diagonal map for $F$ to be
representable, whereas in \cite{Kn} it is required that it also
be quasi-compact. If $F = h_U$ for some scheme $U$ over $S$
this corresponds to the condition that $S$ be quasi-separated.
Our point of view is to try to prove a certain
number of the results that follow only assuming that the diagonal
of $F$ be representable, and simply add an addition hypothesis wherever
this is necessary. In any case it has the pleasing consquence that
the following lemma is true.

\begin{lemma}
\label{lemma-scheme-is-space}
A scheme is an algebraic space. More precisely,
given $T \in \text{Ob}((\textit{Sch}/S)_{fppf})$ the
functor $h_T$ is an algebraic space.
\end{lemma}

\begin{proof}
The functor $h_T$ is a sheaf by our remarks in Section \ref{section-general}.
The diagonal $h_T \to h_T \times h_T = h_{T \times T}$ is
representable because $(\textit{Sch}/S)_{fppf}$ has fibre products.
The identity map $h_T \to h_T$ is surjective etale.
\end{proof}

\begin{definition}
\label{definition-morphism-algebraic-spaces}
Let $F$, $F'$ be algebraic spaces over $S$.
A {\it morphism $f : F \to F'$ of algebraic spaces over $S$}
is a transformation of functors from $F$ to $F'$.
\end{definition}

\noindent
The category of algebraic spaces over $S$ contains the category
$(\textit{Sch}/S)_{fppf}$ as a full subcategory via the
Yoneda embedding $T/S \mapsto h_T$. From now on we no longer distinghuish
between a scheme $T/S$ and the algebraic space it represents.
Thus when we say ``Let $f : T \to F$ be a morphism from the scheme
$T$ to the algebraic space $F$'', we mean that
$T \in \text{Ob}((\textit{Sch}/S)_{fppf})$, that $F$ is an
algebraic space over $S$, and that $f : h_T \to F$ is a morphism
of algebraic spaces over $S$.











\section{Presentations of algebraic spaces}
\label{section-presentations}

\noindent
Given an algebraic space we can find a ``presentation'' of it.

\begin{definition}
\label{definition-equivalence-relation-on-scheme}
Let $S$ be a scheme. Let $U \to S$ be a scheme over $S$.
We say a morphism $R \to U \times_S U$ is
an {\it equivalence relation on $U$ over $S$}
if and only if for every $T/S$ the $T$-valued
points of $R$ define an equivalence relation
on the set of $T$-valued points of $U$.
\end{definition}

\begin{lemma}
\label{lemma-space-presentation}
Let $F$ be an algebraic space over $S$. Let $f : U \to F$ be a
surjective etale morphism from a scheme to $F$. Set $R = U \times_F U$.
Then $R$ defines an equivalence relation on $U$ over $S$.
Moreover, the diagram
$$
\xymatrix{
R \ar@<1ex>[r] \ar@<-1ex>[r] &
U \ar[r] &
F
}
$$
is a coequalizer diagram in $\textit{Sh}((\textit{Sch}/S)_{fppf})$.
\end{lemma}

\begin{proof}
Let $T/S$ be an object of $(\textit{Sch}/S)_{fppf}$.
Then $R(T) = \{(a, b) \in U(T) \times U(T) \mid f \circ a = f \circ b\}$
which is clearly defines an equivalence relation on $U(T)$.

\medskip\noindent
To show the second statement we first show that
$U \to F$ is a surjection of sheaves, see
Sites, Definition \ref{sites-definition-sheaves-injective-surjective}. 
Let $\xi \in F(T)$ with $T$ as above. Let $V = T \times_{\xi, F, f}U$.
By assumption $V$ is a scheme and $V \to T$ is surjective etale.
Hence $\{V \to T\}$ is a covering for the fppf topology.
Since $\xi|_V$ factors through $U$ by construction we
conclude $U \to F$ is surjective. To conclude we 
have to show that given any two morphisms
$a, b : T \to U$ such that $f \circ a = f \circ b$ there is a
morphism $c : T \to R$ such that $a = \text{pr}_1 \circ c$
and $b = \text{pr}_2 \circ b$. This is clear from the definition
of $R$.
\end{proof}

\begin{definition}
\label{definition-presentation}
Let $F$ be an algebraic space over $S$.
A {\it presentation} of $F$ is given by a scheme
$U$ over $S$ and an equivalence relation $R$ on $U$ over $S$, and
a surjective etale morphism $U \to F$ such that $R = U \times_F U$.
\end{definition}

\noindent
To construct algebraic spaces we study the converse question, namely,
for which pairs $(U, R)$ the quotient sheaf $U/R$ is an algebraic
space.












\section{Equivalence relations}
\label{section-equivalence-relations}

\noindent
Given a(n equivalence) relation $R$ on a set $A$ we denote
$A/R$ the set of equivalence classes.

\begin{definition}
\label{definition-pre-equivalence}
Let $S$ be a scheme. Let $U$ be a scheme over $S$.
\begin{enumerate}
\item A {\it relation} on $U$ over $S$ is any morphism
of schemes $j : R \to U \times_S U$. In this case we set
$t = \text{pr}_1 \circ j$ and $s = \text{pr}_2 \circ j$.
\item A {\it pre-equivalence relation} is a relation
$j : R \to U\times_SU$ such that the image of
$j(T) : R(T) \to U(T) \times U(T)$ is an equivalence relation for
all $T$.
\item Given a pre-equivalence relation $(R, j)$ on $U$ over $S$ we write
$U/R$ for the quotient sheaf in $\textit{Sh}((\textit{Sch}/S)_{fppf})$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-equivalence-relation-separated-presheaf}
Let $R$ be an equivalence relation on the scheme $U$ over $S$.
The presheaf
\begin{eqnarray*}
(\textit{Sch}/S)_{fppf} & \longrightarrow & \textit{Sets} \\
T/S & \longmapsto & U(T)/R(T)
\end{eqnarray*}
is separated, see Sites, Definition \ref{sites-definition-separated}
\end{lemma}

\begin{proof}
Follows directly from the definitions.
\end{proof}

\begin{lemma}
\label{lemma-map-to-quotient}
Let $j : R \to U\times_S U$
be an equivalence relation on the scheme $U$ over $S$.
Let $T$ be a scheme over $S$. An element of $(U/R)(T)$ is given
by an fppf covering $\{T_i \to T\}_{i \in I}$
and $S$-morphisms $f_i : T_i \to U$ such that
$(f_i|_{T_i\times_T T_j}, f_j|_{T_i\times_T T_j})$
factors through $R$.
\end{lemma}

\begin{proof}
Direct from the definitions, and Sites, Theorem \ref{sites-theorem-plus}.
\end{proof}



















\section{Algebraic spaces and equivalence relations}
\label{section-spaces-from-equivalence-relations}

\noindent
Suppose given a scheme $U$ over $S$
and an equivalence relation $R$ on $U/S$ such that the two
projection morphisms $s, t : R \to U$ are etale.
We would like this to define an algebraic space.
Actually this may not always be the case.
The problem is that the sheafification
of the quotient sheaf $U/R$ may not have all the properties required
of it in Definition \ref{definition-algebraic-space}.
Here is one case where it does hold.

\begin{lemma}
\label{lemma-presentation-quasi-compact}
Let $S$ be a scheme.
Let $U$ be a scheme over $S$.
Let $j = (s, t) : R \to U \times_S U$
be an equivalence relation on $U$ over $S$ such that
\begin{enumerate}
\item $s$ and $t$ are etale, and
\item $j$ is quasi-compact.
\end{enumerate}
Then the sheafification $F$ of the presheaf
$T \mapsto U(T)/R(T)$ is an algebraic space and
$(U \to F, R)$ is a presentation of $F$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}





\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
