\input{preamble}

% OK, start here.
%
\begin{document}

\title{Cohomology of Sheaves}


\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this document we work out some topics on cohomology of sheaves.
We work out what happens for sheaves on sites
as well, allthough we will simply duplicate the discussion,
and have sections detailing the constructions in the topological
case and in the case of sites.
Basic references are \cite{SGA4}, \cite{Godement} and \cite{Iversen}.

\section{Topics}
\label{section-topics}

\noindent
Here are some topics that should be discussed in this chapter.
\begin{enumerate}
\item Definition of cohomology of an abelian sheaf.
\item Definition of cohomology of a sheaf of modules and
how it is the same as the cohomology of the underlying abelian sheaf.
\item Hypercohomology.
\item Ext-groups.
\item Ext sheaves.
\item Tor functors.
\item Higher direct images.
\item Derived pullback.
\item Cup-product.
\item Group cohomology.
\item Comparison of group cohomology and cohomology on $\mathcal{T}_G$.
\item Cech cohomology.
\item Cech to cohomology spectral sequence.
\item Leray Spectral sequence.
\item Etc, etc, etc.
\end{enumerate}



\section{Cech cohomology}
\label{section-cech}

\noindent
Let $X$ be a topological space.
Let $\mathcal{U} : U = \bigcup_{i \in I} U_i$ be an open covering.
As is customary we denote
$U_{i_0\ldots i_p} = U_{i_0} \cap \ldots \cap U_{i_p}$ for the
$(p + 1)$-fold intersection of members of $\mathcal{U}$.
Let $\mathcal{F}$ be an abelian sheaf on $X$.
Set
$$
\check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})
=
\prod\nolimits_{(i_0, \ldots, i_p) \in I^{p + 1}}
\mathcal{F}(U_{i_0\ldots i_p}).
$$
This is an abelian group. If we write
$s \in \check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})$ then we denote
$s_{i_0\ldots i_p}$ its value in $\mathcal{F}(U_{i_0\ldots i_p})$.
Note that if $s \in \check{\mathcal{C}}^2(\mathcal{U}, \mathcal{F})$
and $i, j \in I$ then $s_{ij}$ and $s_{ji}$ are both elements
of $\mathcal{F}(U_i \cap U_j)$ but there is no imposed
relation between $s_{ij}$ and $s_{ji}$. In other words, we are {\it not}
working with alternating cochains. We define
$$
d : \check{\mathcal{C}}^p(\mathcal{U}, \mathcal{F})
\longrightarrow
\check{\mathcal{C}}^{p + 1}(\mathcal{U}, \mathcal{F})
$$
by the formula
$$
d(s)_{i_0\ldots i_{p + 1}}
=
\sum\nolimits_{j = 0}^{p + 1}
(-1)^j
s_{i_0\ldots \hat i_j \ldots i_p}|_{U_{i_0\ldots i_{p + 1}}}
$$
It is straightforward to see that $d \circ d = 0$. In other words
$\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})$ is a complex.

\begin{definition}
\label{definition-cech-complex}
Let $X$ be a topological space.
Let $\mathcal{U} : U = \bigcup_{i \in I} U_i$ be an open covering.
Let $\mathcal{F}$ be an abelian sheaf on $X$.
The complex $\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F})$
is the {\it Cech complex} associated to $\mathcal{F}$ and the
open covering $\mathcal{U}$. Its cohomology groups
$H^i(\check{\mathcal{C}}^\bullet(\mathcal{U}, \mathcal{F}))$ are
called the {\it Cech cohomology groups} associated to
$\mathcal{F}$ and the covering $\mathcal{U}$.
They are denoted $\check H^i(\mathcal{U}, \mathcal{F})$.
\end{definition}






\section{Cech cohomology of complexes}
\label{section-cech-cohomology-of-complexes}

\noindent
In general for sheaves of abelian groups
${\mathcal F}$ and ${\mathcal G}$ on $X$ there is a cupproduct map
$H^i(X, {\mathcal F}) \times H^j(X, {\mathcal G}) \to
H^{i+j}(X, {\mathcal F}\otimes_{\bf Z} {\mathcal G})$. The easiest way
I know how to define it is to compute cohomology using Cech
cocyles and write out the formula for the cup product. See below.
If you are worried about the fact that cohomology may not
equal Cech cohomology, then you can use hypercoverings and still
use the cocycle notation. This also has the advantage that
it works to define the cup product for hypercohomology on any site.

\medskip\noindent
Let ${\mathcal F}^*$ be a bounded below complex of sheaves of abelian
groups on $X$. We can (often) compute ${\bf H}^n(X, {\mathcal F}^*)$
using Cech cocycles. Namely, let ${\mathcal U} = \{U_i\}_{i\in I}$
be an open covering of $X$. Consider the (simple) complex
$s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)$
with degree $n$ term
$$
s^n{\mathcal C}^*({\mathcal U}, {\mathcal F}^*) =
\prod\nolimits_{p+q=n} {\mathcal F}^q(U_{i_0\ldots i_p})
$$
with a typical element denoted $\alpha = \{\alpha_{i_0\ldots i_p}\}$
so that $\alpha_{i_0\ldots i_p} \in {\mathcal F}^{q}(U_{i_0\ldots i_p})$,
in other words the ${\mathcal F}$-degree of $\alpha_{i_0\ldots i_p}$ is $q$.
We indicate this by the formula $\deg_{\mathcal F}(\alpha_{i_0\ldots i_p})=q$.
The differential of an element $\alpha$ of degree $n$ is
\begin{align*}
d(\alpha)_{i_0\ldots i_{p+1}}
& =
d_{{\mathcal F}}(\alpha_{i_0\ldots i_{p+1}})
+
(-1)^{n-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
\alpha_{i_0\ldots \hat i_j \ldots i_{p+1}}\cr
& =
d_{{\mathcal F}}(\alpha_{i_0\ldots i_{p+1}})
+
\sum\nolimits_{j=0}^{p+1}
(-1)^{j+n-p}
\alpha_{i_0\ldots \hat i_j \ldots i_{p+1}}
\end{align*}
where $d_{\mathcal F}$ denotes the differential on the complex ${\mathcal F}$.
An expression such as
$\alpha_{i_0\ldots\hat i_j\ldots i_{p+1}}$ means the restriction
of $\alpha_{i_0\ldots\hat i_j\ldots i_{p+1}} \in
{\mathcal F}(U_{i_0\ldots\hat i_j\ldots i_{p+1}})$ to 
$U_{i_0\ldots i_{p+1}}$.
To check this is a complex, let $\alpha$ be an element of
degree $n$ in $s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)$, so that
$d(\alpha)$ has degree $n+1$. We compute:
\begin{align*}
d^2(\alpha)_{i_0\ldots i_{p+2}} 
& =
d_{{\mathcal F}}(d(\alpha)_{i_0\ldots i_{p+2}})
+
(-1)^{(n+1)-(p+1)}
\sum\nolimits_{j=0}^{p+2}
(-1)^j
d(\alpha)_{i_0\ldots \hat i_j \ldots i_{p+2}}
\cr
& =
d_{\mathcal F}( d_{{\mathcal F}}(\alpha_{i_0\ldots i_{p+2}}) )
\cr
& +
d_{\mathcal F}\Big(
(-1)^{n-(p+1)}
\sum\nolimits_{j=0}^{p+2}
(-1)^j
\ \alpha_{i_0\ldots \hat i_j \ldots i_{p+2}}
\Big)
\cr
& +
(-1)^{(n+1)-(p+1)}
\sum\nolimits_{j=0}^{p+2}
(-1)^j
d_{{\mathcal F}}(\alpha_{i_0\ldots \hat i_j\ldots i_{p+2}})
\cr
& +
(-1)^{(n+1)-(p+1)}
\sum\nolimits_{j=0}^{p+2}
(-1)^{j+n-p}
\sum\nolimits_{j'=0\ldots j-1}
(-1)^{j'}
\alpha_{i_0\ldots \hat i_{j'}\ldots\hat i_{j} \ldots i_{p+1}}
\cr
& +
(-1)^{(n+1)-(p+1)}
\sum\nolimits_{j=0}^{p+2}
(-1)^{j+n-p}
\sum\nolimits_{j'=j+1\ldots p+2}
(-1)^{j'-1}
\alpha_{i_0\ldots \hat i_j\ldots\hat i_{j'} \ldots i_{p+1}}
\end{align*}
which equals zero by the nullity of $d_{\mathcal F}^2$, 
a trivial sign change between the second and third terms, and
the usual argument for the last two double Cech terms.

\medskip\noindent
The construction of $s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)$
is functorial in ${\mathcal F}^*$. As well there is a functorial
transformation
$$
\Gamma(X, {\mathcal F}^*)
\longrightarrow
s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)
$$
of complexes defined by the following rule: The section
$s\in \Gamma(X,{\mathcal F}^n)$
is mapped to the element $\alpha=\{\alpha_{i_0\ldots i_p}\}$
with $\alpha_{i_0} = s|_{I_{i_0}}$ and $\alpha_{i_0\ldots i_p}=0$
for $p>0$.

\medskip\noindent
Refinements. Let ${\mathcal V} = \{ V_j \}_{j\in J}$ be a
refinement of ${\mathcal U}$. This means there is a map $t: J \to I$
such that $V_j \subset U_{t(j)}$ for all $j\in J$. This gives
rise to a functorial transformation
$$
T_t : s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)
\longrightarrow
s{\mathcal C}^*({\mathcal V}, {\mathcal F}^*).
$$
This is defined by the rule
$$
T_t(\alpha)_{j_0\ldots j_p}
= 
\alpha_{t(j_0)\ldots t(j_p)}|_{V_{j_0\ldots j_p}}
$$
Given two maps $t,t' : J \to I$ as above the maps
$T_t$ and $T_{t'}$ constructed above are homotopic.
The homotopy is given by
\begin{align*}
h(\alpha)_{j_0\ldots j_p}
& =
(-1)^{n+p}
\sum\nolimits_{a=0}^{p}
(-1)^a
\alpha_{t(j_0)\ldots t(j_a) t'(j_a) \ldots t'(j_p)}
\end{align*}
for an element $\alpha$ of degree $n$. This works
because of the following computation, again with
$\alpha$ an elemement of degree $n$ (so $d(\alpha)$
has degree $n+1$ and $h(\alpha)$ has degree $n-1$):
\begin{align*}
& (
d(h(\alpha)) + h(d(\alpha))
)_{j_0\ldots j_p}
\cr
& = 
d_{\mathcal F}(h(\alpha)_{j_0\ldots j_p})
+
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^k
h(\alpha)_{j_0\ldots\hat j_k\ldots j_p}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^a
d(\alpha)_{t(j_0)\ldots t(j_a) t'(j_a) \ldots t'(j_p)}
\cr
& =
(-1)^{n+p}
\sum\nolimits_{a=0}^p
(-1)^a
d_{\mathcal F}(\alpha_{t(j_0)\ldots t(j_a) t'(j_a) \ldots t'(j_p)})
\cr
& +
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^{k+n+p-1}
\sum\nolimits_{a=0}^{k-1}
(-1)^a
\alpha_{t(j_0)\ldots t(j_a)t'(j_a)\ldots\hat{t'(j_k)}\ldots t'(j_p)}
\cr
& +
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^{k+n+p-1}
\sum\nolimits_{a=k+1}^p
(-1)^{a-1}
\alpha_{t(j_0)\ldots\hat{t(j_k)}\ldots t(j_a)t'(j_a)\ldots t'(j_p)}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^a
d_{\mathcal F}(\alpha_{t(j_0)\ldots t(j_a) t'(j_a) \ldots t'(j_p)})
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^{a+n-p}
\sum\nolimits_{k=0}^a
(-1)^k
\alpha_{t(j_0)\ldots \hat{t(j_k)}\ldots t(j_a)t'(j_a)\ldots t'(j_p)}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^{a+n-p}
\sum\nolimits_{k=a}^p
(-1)^{k+1}
\alpha_{t(j_0)\ldots t(j_a)t'(j_a)\ldots \hat{t'(j_k)}\ldots t'(j_p)}
\cr
& = 
\alpha_{t(j_0)\ldots t(j_p)} - \alpha_{t'(j_0)\ldots t'(j_p)}
=
T_t(\alpha)_{j_0\ldots j_p} - T_{t'}(\alpha)_{j_0\ldots j_p}
\end{align*}
We leave it to the reader to verify the cancellations.
It follows that the induced map
$$
H^*(T_t) :
H^*(s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)) \to
H^*(s{\mathcal C}^*({\mathcal V},{\mathcal F}^*))
$$
is independend of the choice of $t$. We define
Cech hypercohomology as the limit of the Cech cohomology groups
over all refinements via the maps $H^*(T_t)$.

\medskip\noindent
Let ${\mathcal I}^*$ be a bounded below complex of injectives. Consider
the map $\Gamma(X, {\mathcal I}^*) \to
s{\mathcal C}^*({\mathcal U}, {\mathcal I}^*)$ defined in degree $n$ by
$i \mapsto \alpha = \{\alpha_{i_0\ldots i_p}\}$ with
$\alpha_{i_0} = i|_{U_{i_0}}$ and $\alpha_{i_0\ldots i_p} = 0$
for $p>0$. This is a quasi-isomorphism of complexes of abelian groups
(prove by a spectral sequence argument on the double complex
${\mathcal C}^*({\mathcal U}, {\mathcal I}^*)$).
Suppose ${\mathcal F}^* \to {\mathcal I}^*$ is a quasi-isomorphism
of ${\mathcal F}^*$ into a bounded below complex of injectives. 
The hypercohomology ${\bf H}^*(X,{\mathcal F}^*)$ is defined 
to be $H^*(\Gamma(X, {\mathcal I}^*))$. Thus
the corresponding map $s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*) \to 
s{\mathcal C}^*({\mathcal U}, {\mathcal I}^*)$ induces maps
$H^*(s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)) \to
{\bf H}^*(X,{\mathcal F}^*)$.
In the limit this induces a map of Cech hypercohomology into
the cohomology, which is usually an isomorphism and is always
an isomorphism if we use hypercoverings.

\medskip\noindent
Consider the map $\tau : s{\mathcal C}^*({\mathcal U},{\mathcal F}^*) \to
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)$ defined by
$$
\tau(\alpha)_{i_0\ldots i_p} = (-1)^{p(p+1)/2} \alpha_{i_p\ldots i_0}.
$$
Then we have for an element $\alpha$ of degree $n$ that
\begin{align*}
d(\tau(\alpha))_{i_0\ldots i_{p+1}}
& =
d_{\mathcal F}(\tau(\alpha)_{i_0\ldots i_{p+1}})
+
(-1)^{n-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
\tau(\alpha)_{i_0\ldots \hat i_j\ldots i_{p+1}}
\cr
& =
(-1)^{(p+1)(p+2)/2}
d_{\mathcal F}(\alpha_{i_{p+1}\ldots i_0}))
+
(-1)^{n-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^{j+p(p+1)/2}
\alpha_{i_{p+1}\ldots \hat i_j\ldots i_0}
\end{align*}
On the other hand we have
\begin{align*}
\tau(d(\alpha))_{i_0\ldots i_{p+1}}
& =
(-1)^{(p+1)(p+2)/2} d(\alpha)_{i_{p+1}\ldots i_0} 
\cr
& =
(-1)^{(p+1)(p+2)/2}
d_{\mathcal F}(\alpha_{i_{p+1}\ldots i_0})
+
(-1)^{(p+1)(p+2)/2+n-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
\alpha_{i_{p+1}\ldots \hat i_{p+1-j}\ldots i_0}
\cr
& =
(-1)^{(p+1)(p+2)/2}
d_{\mathcal F}(\alpha_{i_{p+1}\ldots i_0})
+
(-1)^{(p+1)(p+2)/2+n-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^{j-p-1}
\alpha_{i_{p+1}\ldots \hat i_j\ldots i_0}
\end{align*}
Thus we conclude that $d(\tau(\alpha))=\tau(d(\alpha))$
because $p(p+1)/2 \equiv (p+1)(p+2)/2+p+1 \bmod 2$. In other words
$\tau$ is an endomorphism of the complex
$s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)$. Note that the diagram
$$
\begin{matrix}
\Gamma(X,{\mathcal F}^*) &
\longrightarrow &
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*) \cr
\downarrow {\rm id} & & \downarrow \tau \cr
\Gamma(X,{\mathcal F}^*) &
\longrightarrow &
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*) \cr
\end{matrix}
$$
commutes. In addition $\tau$ is clearly compatible with refinements.
This proves that $\tau$ acts as the identity on Cech hypercohomology
(i.e., in the limit -- provided Cech hypercohomology agrees with
hypercohomology, which is always the case if we use hypercoverings).
To see this use a quasi-isomorphism ${\mathcal F}^* \to {\mathcal I}^*$ of
${\mathcal F}^*$ into a bounded below complex of injectives as before.
We claim that $\tau$ actually is homotopic to the identity on the
simple Cech complex $s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)$.
To prove this, we use as homotopy
$$
h(\alpha)_{i_0\ldots i_p}
=
(-1)^{n+p}
\sum\nolimits_{a=0}^{p}
(-1)^a
\alpha_{i_0\ldots i_a i_{p-a} \ldots i_0}
$$
for $\alpha$ of degree $n$. As usual we omit writing
$|_{U_{i_0\ldots i_p}}$. This works
because of the following computation, again with
$\alpha$ an elemement of degree $n$ (so $d(\alpha)$
has degree $n+1$ and $h(\alpha)$ has degree $n-1$):
\begin{align*}
& (
d(h(\alpha)) + h(d(\alpha))
)_{i_0\ldots i_p}
\cr
& = 
d_{\mathcal F}(h(\alpha)_{i_0\ldots i_p})
+
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^k
h(\alpha)_{i_0\ldots\hat i_k\ldots i_p}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^a
d(\alpha)_{i_0\ldots i_a i_{p-a} \ldots i_0}
\cr
& =
(-1)^{n+p}
\sum\nolimits_{a=0}^p
(-1)^a
d_{\mathcal F}(\alpha_{i_0\ldots i_a i_{p-a} \ldots i_0})
\cr
& +
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^{k+n+p-1}
\sum\nolimits_{a=0}^{k-1}
(-1)^a
\alpha_{i_0\ldots i_a i_{p-a}\ldots\hat{i_{p-k}}\ldots i_0}
\cr
& +
(-1)^{(n-1)-(p-1)}
\sum\nolimits_{k=0}^p
(-1)^{k+n+p-1}
\sum\nolimits_{a=k+1}^p
(-1)^{a-1}
\alpha_{i_0\ldots\hat{i_k}\ldots i_a i_{p-a}\ldots i_0}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^a
d_{\mathcal F}(\alpha_{i_0\ldots i_a i_{p-a} \ldots i_0})
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^{a+n-p}
\sum\nolimits_{k=0}^a
(-1)^k
\alpha_{i_0\ldots \hat{i_k}\ldots i_a i_{p-a}\ldots i_0}
\cr
& +
(-1)^{n+1+p}
\sum\nolimits_{a=0}^p
(-1)^{a+n-p}
\sum\nolimits_{k=a}^p
(-1)^{k+1}
\alpha_{i_0\ldots i_a i_{p-a}\ldots \hat{i_{p-k}}\ldots i_0}
\cr
& = 
\alpha_{i_0 \ldots i_p} - \alpha_{i_p \ldots i_0}
\end{align*}
We leave it to the reader to verify the cancellations.


\medskip\noindent
Suppose we have two bounded complexes complexes of sheaves
${\mathcal F}^*$ and ${\mathcal G}^*$. We define the complex
$Tot({\mathcal F}^*\otimes_{\bf Z} {\mathcal G}^*)$
to be to complex with terms
$\otimes_{p+q=n} {\mathcal F}^p \otimes {\mathcal G}^q$
and differential according to the rule $d(\alpha \otimes \beta) =
d(\alpha)\otimes \beta + (-1)^{\deg(\alpha)} \alpha \otimes d(\beta)$
when $\alpha$ and $\beta$ are homogenous. We apply the same rule
to define the total complex associated to a tensor product of
complexes of abelian groups (the case when the space is a point).

\medskip\noindent
Suppose that $M^*$ and $N^*$ are two bounded below
complexes of abelian groups. Then if $m$, resp.\ $n$
is a cocycle for $M^*$, resp.\ $N^*$, it is immediate 
that $m \otimes n$ is a cocycle for $Tot(M^*\otimes N^*)$.
Hence a cupproduct
$$
H^i(M^*) \times H^j(N^*) \to H^{i+j}(Tot(M^*\otimes N^*)).
$$

\medskip\noindent
So the construction of the cup product in hypercohomology
of complexes rests on a construction of a map of complexes
$$
Tot(s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)
\otimes_{\bf Z}
s{\mathcal C}^*({\mathcal U}, {\mathcal G}^*))
\longrightarrow 
s{\mathcal C}^*({\mathcal U}, Tot({\mathcal F}^*\otimes {\mathcal G}^*)),\ 
\alpha \otimes \beta \mapsto \alpha \cup \beta.
$$
This is done by the rule
$$
(\alpha \cup \beta)_{i_0\ldots i_p}
=
\sum\nolimits_{r=0}^p
(-1)^{r(m-(p-r))}
\alpha_{i_0\ldots i_r} \otimes \beta_{i_r\ldots i_p}.
$$
where $\alpha$ has degree $n$ and $\beta$ has degree $m$.
Note that $\alpha \cup \beta$ has degree $n+m$.
For an explanation of the sign see the paper
``Higher order operations in Deligne cohomology'' by Denninger
who refers to the paper ``cohomologie a support propres'' by Deligne
for a more precise explanation.
To check this is a map of complexes we have to show that
$$
d(\alpha \cup \beta) = 
d(\alpha) \cup \beta +
(-1)^{\deg(\alpha)} \alpha \cup d(\beta)
$$
because $d(\alpha \otimes \beta) = d(\alpha)\otimes\beta
+ (-1)^{\deg(\alpha)} \alpha\otimes d(\beta)$ is the formula
for the differential on $Tot(s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)
\otimes_{\bf Z} s{\mathcal C}^*({\mathcal U}, {\mathcal G}^*))$. We compute
first
\begin{align*}
d(\alpha \cup \beta)_{i_0\ldots i_{p+1}}
& =
d_{{\mathcal F}\otimes {\mathcal G}}
\Big(
(\alpha \cup \beta)_{i_0\ldots i_{p+1}}
\Big)
+
(-1)^{n+m-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
(\alpha \cup \beta)_{i_0\ldots\hat i_j\ldots i_{p+1}}
\cr
& =
\sum\nolimits_{r=0}^{p+1}
(-1)^{r(m-(p+1-r))}
d_{{\mathcal F}\otimes {\mathcal G}}
(
\alpha_{i_0\ldots i_r} \otimes \beta_{i_r\ldots i_{p+1}}
)
\cr
& +
(-1)^{n+m-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
\sum\nolimits_{r=0}^{j-1}
(-1)^{r(m-(p-r))}
\alpha_{i_0\ldots i_r} \otimes \beta_{i_r\ldots\hat i_j\ldots i_{p+1}}
\cr
& +
(-1)^{n+m-p}
\sum\nolimits_{j=0}^{p+1}
(-1)^j
\sum\nolimits_{r=j+1}^{p+1}
(-1)^{(r-1)(m-(p+1-r))}
\alpha_{i_0\ldots\hat i_j\ldots i_r} \otimes \beta_{i_r\ldots i_{p+1}}
\end{align*}
On the other hand
\begin{align*}
(d(\alpha) \cup \beta)_{i_0\ldots i_{p+1}}
& =
\sum_{r=0}^{p+1}
(-1)^{r(m-(p+1-r))}
d(\alpha)_{i_0\ldots i_r} \otimes \beta_{i_r\ldots i_{p+1}}
\cr
& =
\sum_{r=0}^{p+1}
(-1)^{r(m-(p+1-r))}
d_{\mathcal F}(\alpha_{i_0\ldots i_r}) \otimes \beta_{i_r\ldots i_{p+1}}
\cr
& +
\sum_{r=0}^{p+1}
(-1)^{r(m-(p+1-r))+n-(r-1)}
\sum\nolimits_{j=0}^{r}
(-1)^j
\alpha_{i_0\ldots\hat{i_j}\ldots i_r} \otimes \beta_{i_r\ldots i_{p+1}}
\end{align*}
and
\begin{align*}
(-1)^n (\alpha \cup d(\beta))_{i_0\ldots i_{p+1}}
& =
(-1)^n
\sum_{r=0}^{p+1}
(-1)^{r(m+1-(p+1-r))}
\alpha_{i_0\ldots i_r} \otimes d(\beta)_{i_r\ldots i_{p+1}}
\cr
& =
(-1)^n
\sum_{r=0}^{p+1}
(-1)^{r(m+1-(p+1-r))}
\alpha_{i_0\ldots i_r} \otimes d_{\mathcal G}(\beta_{i_r\ldots i_{p+1}})
\cr
& +
(-1)^n
\sum_{r=0}^{p+1}
(-1)^{r(m+1-(p+1-r))+m-(p-r)}
\sum\nolimits_{j=r}^{p+1}
(-1)^{j-r}
\alpha_{i_0\ldots i_r} \otimes \beta_{i_r\ldots\hat{i_j}\ldots i_{p+1}}
\end{align*}
Now you can see the desired equality.

\medskip\noindent
Associativity of the cupproduct. Suppose that ${\mathcal F}^*$,
${\mathcal G}^*$ and ${\mathcal H}^*$ are bounded below
complexes of abelian groups on $X$. The obvious map
(without the intervention of signs) is an isomorphism
of complexes
$$
Tot(Tot({\mathcal F}^*\otimes_{\bf Z} {\mathcal G}^*)\otimes_{\bf Z}
{\mathcal H}^*)
\longrightarrow
Tot({\mathcal F}^*\otimes_{\bf Z} Tot({\mathcal G}^*\otimes_{\bf Z}
{\mathcal H}^*)).
$$
Using this map it is easy to verify that
$$
(\alpha \cup \beta) \cup \gamma = \alpha \cup ( \beta \cup \gamma)
$$
namely, if $\alpha$ has degree $a$, $\beta$ has degree $b$ and
$\gamma$ has degree $c$, then
\begin{align*}
((\alpha \cup \beta) \cup \gamma)_{i_0\ldots i_p}
& =
\sum_{r=0}^p
(-1)^{r(c-(p-r))}
(\alpha\cup\beta)_{i_0\ldots i_r} \otimes \gamma_{i_r\ldots i_p}
\cr
& =
\sum_{r=0}^p
(-1)^{r(c-(p-r))}
\sum_{s=0}^r
(-1)^{s(b-(r-s))}
\alpha_{i_0\ldots i_s} \otimes \beta_{i_s\ldots i_r} \otimes
\gamma_{i_r\ldots i_p}
\end{align*}
and
\begin{align*}
(\alpha \cup (\beta \cup \gamma)_{i_0\ldots i_p}
& =
\sum_{s=0}^p
(-1)^{s(b+c-(p-s))}
\alpha_{i_0\ldots i_s} \otimes (\beta \cup \gamma)_{i_s\ldots i_p}
\cr
& =
\sum_{s=0}^p
(-1)^{s(b+c-(p-s))}
\sum_{r=s}^p
(-1)^{(r-s)(c-(p-r))}
\alpha_{i_0\ldots i_s} \otimes \beta_{i_s\ldots i_r} \otimes
\gamma_{i_r\ldots i_p}
\end{align*}
and a trivial mod $2$ calculation shows the signs match up.

\medskip\noindent
Finally, we indicate why the cup product preserves
a graded commutative structure, at least on a cohomological level.
For this we use the operator
$\tau$ introduced above. Let ${\mathcal F}^*$ be a bounded below
complexes of abelian groups, and assume we are given
a graded commutative multiplication
$$
\wedge^* : Tot({\mathcal F}^*\otimes {\mathcal F}^*) \to {\mathcal F}^*.
$$
This means the following: For $s$ a local section of
${\mathcal F}^a$, and $t$ a local section of ${\mathcal F}^b$
we have $s \wedge t$ a local section of ${\mathcal F}^{a+b}$.
Graded commutative means we have
$s \wedge t = (-1)^{ab} t \wedge s$. Since $\wedge$ is a map
of complexes we have
$d(s\wedge t) = d(s) \wedge t + (-1)^a s \wedge t$.
The composition
$$
Tot(
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)
\otimes
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)
) \longrightarrow
s{\mathcal C}^*({\mathcal U},Tot({\mathcal F}^*\otimes_{\bf Z}{\mathcal F}^*))
\longrightarrow
s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)
$$
induces a cup product on cohomology
$$
H^n(s{\mathcal C}^*({\mathcal U},{\mathcal F}^*))
\times 
H^m(s{\mathcal C}^*({\mathcal U},{\mathcal F}^*))
\longrightarrow
H^{n+m}(s{\mathcal C}^*({\mathcal U},{\mathcal F}^*)).
$$
and so in the limit also a product on Cech hypercohomology
and therefore (using hypercoverings if needed) a product 
in hypercohomology of ${\mathcal F}^*$. We claim this product
(on cohomology) is graded commutative as well. To prove this
we first consider an element $\alpha$ of degree $n$ in
$s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)$ and an element
$\beta$ of degree $m$ in $s{\mathcal C}^*({\mathcal U}, {\mathcal F}^*)$
and we compute
\begin{align*}
\tau( \alpha \cup \beta )_{i_0\ldots i_p}
& =
(-1)^{p(p+1)/2}
(\alpha \cup \beta)_{i_p\ldots i_0}
\cr
& =
(-1)^{p(p+1)/2}
\sum\nolimits_{r=0}^p
(-1)^{(p-r)(m-r)}
\alpha_{i_p\ldots i_r}\otimes \beta_{i_r\ldots i_0}
\cr
& = 
(-1)^{p(p+1)/2}
\sum\nolimits_{r=0}^p
(-1)^{(p-r)(m-r) + r(r+1)/2 + (p-r)(p-r+1)/2}
\tau(\alpha)_{i_r\ldots i_p}\otimes \tau(\beta)_{i_0\ldots i_r}
\end{align*}
The image of this in $s^{n+m}{\mathcal C}^*({\mathcal U},{\mathcal F}^*)$
equals
$$
(-1)^{p(p+1)/2}
\sum\nolimits_{r=0}^p
(-1)^{(p-r)(m-r) + r(r+1)/2 + (p-r)(p-r+1)/2 + (m-r)(n-(p-r))}
\tau(\beta)_{i_0\ldots i_r} \wedge \tau(\alpha)_{i_r\ldots i_p}
$$
because $\wedge$ is graded commutative. But this is the same
as the image of 
$$
(-1)^{nm}
(\tau(\beta) \cup \tau(\alpha))_{i_0\ldots i_p}
=
(-1)^{nm}
\sum\nolimits_{r=0}^p
(-1)^{r(n-(p-r))}
\tau(\beta)_{i_0\ldots i_r} \otimes \tau(\alpha)_{i_r\ldots i_p}
$$
This proves the desired result since we proved earlier that
$\tau$ acts as the identity on cohomology.


\medskip\noindent
Suppose that
$$
0 
\to
{\mathcal F}_1^*
\to 
{\mathcal F}_2^*
\to 
{\mathcal F}_3^*
\to 
0
$$
and
$$
0 
\leftarrow
{\mathcal G}_1^*
\leftarrow
{\mathcal G}_2^*
\leftarrow
{\mathcal G}_3^*
\leftarrow
0
$$
are short exact sequences of bounded below complexes of abelian
sheaves on $X$. We will use the following convention and notation: we think of
${\mathcal F}_1^q$ as a subsheaf of ${\mathcal F}_2^q$ and we think of
${\mathcal G}_3^q$ as a subsheaf of ${\mathcal G}_2^q$. Hence if $s$ is
a local section of ${\mathcal F}_1^q$ we use $s$ to denote 
the corresponding section of ${\mathcal F}_2^q$ as well. Similarly 
for local sections of ${\mathcal G}_3^q$. Furthermore,
if $s$ is a local section of ${\mathcal F}_2^q$ then we denote
$\bar s$ its image in ${\mathcal F}_3^q$. Similarly for the
map ${\mathcal G}_2^q \to {\mathcal G}^q_1$. In particular if
$s$ is a local section of ${\mathcal F}_2^q$ and $\bar s = 0$
then $s$ is a local section of ${\mathcal F}_1^q$. Let ${\mathcal H}^*$
be another complex of abelian sheaves, and suppose
we have maps of comlpexes
$$
\gamma_i :
Tot({\mathcal F}_i^* \otimes_{\bf Z} {\mathcal G}_i^*)
\longrightarrow
{\mathcal H}^*
$$
which are compatible with the maps between the complexes. So for
example, for local sections $s$ of ${\mathcal F}_2^q$ and
$t$ pf ${\mathcal G}_3^{q'}$ we have $\gamma_2(s\otimes t)
= \gamma_3(\bar s \otimes t)$ as sections of ${\mathcal H}^{q+q'}$.
In this situation, suppose that ${\mathcal U} = \{ U_i \}_{i\in I}$
is an open covering of $X$. Suppose that $\alpha$, resp.\ 
$\beta$ is an element of $s^n{\mathcal C}^*({\mathcal U}, {\mathcal F}_2^*)$,
resp.\ $s^m{\mathcal C}^*({\mathcal U}, {\mathcal G}_2^*)$ with the
property that 
$$
d(\bar \alpha) = 0,\ \hbox{and}\ d(\bar \beta)=0.
$$
This means that
\begin{enumerate}
\item $\alpha_3 = \bar \alpha$ is a degree $n$ cocycle
in the simple complex $s{\mathcal C}^*({\mathcal U}, {\mathcal F}_3^*)$,
\item $\alpha_1 = d(\alpha)$ is a degree $n+1$ 
cocycle in the simple complex
$s{\mathcal C}^*({\mathcal U}, {\mathcal F}_1^*)$,
\item $\beta_1 = \bar \beta$ is a degree $n$ cocycle
in the simple complex
$s{\mathcal C}^*({\mathcal U}, {\mathcal G}_1^*)$, and
\item $\beta_3 = d(\beta)$ is a degree $m+1$ 
cocycle in the simple complex
$s{\mathcal C}^*({\mathcal U}, {\mathcal G}_3^*)$.
\end{enumerate}

\noindent
I claim that
$$
\gamma_1( \alpha_1 \cup \beta_1),\ \hbox{and}\ 
\gamma_3( \alpha_3 \cup \beta_3)
$$
represent the same cohology class up to sign.
The reason is simply that we may compute
\begin{align*}
d( \gamma_2(\alpha \cup \beta) )
& =
\gamma_2( d( \alpha \cup \beta) )
\cr
& =
\gamma_2( d(\alpha) \cup \beta + (-1)^n \alpha \cup d(\beta) )
\cr
& =
\gamma_2( \alpha_1 \cup \beta)  + (-1)^n \gamma_2( \alpha \cup \beta_3)
\cr
& =
\gamma_1( \alpha_1 \cup \beta_1) + (-1)^n \gamma_3( \alpha_3 \cup \beta_3)
\end{align*}
So this even tells us that the sign is $(-1)^{n+1}$.






\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
