\input{preamble}

% OK, start here.
%
\begin{document}

\title{Exercises}


\maketitle

\tableofcontents

\let\oldlabel\label
\renewcommand{\label}[1]{%
\oldlabel{#1}%
\hypertarget{#1}{}%
\marginpar{\footnotesize #1}}

\section{Algebra}
\label{section-algebra}

\noindent
This first section just contains some assorted questions.

\begin{exercise}
Let $A$ be a ring, and ${\mathfrak m}$ a maximal ideal. In $A[X]$
let $\tilde {\mathfrak m}_1 = ({\mathfrak m},X)$ and
$\tilde {\mathfrak m}_2 = ({\mathfrak m},X-1)$. Show
that 
$$
A[X]_{\tilde {\mathfrak m}_1} \cong A[X]_{\tilde {\mathfrak m}_2}.
$$
\end{exercise}

\begin{exercise}
Find an example of a non Noetherian ring $R$ such that every
finitely generated ideal of $R$ is finitely presented as an $R$-module.
(A ring is said to be {\it coherent} if the last property holds.)
\end{exercise}

\begin{exercise}
Suppose that $(A,{\mathfrak m},k)$ is a Noetherian local ring. For any
finite $A$-module $M$ define $r(M)$ to be the minimum number
of generators of $M$ as an $A$-module. This number equals
$\dim_k M/{\mathfrak m} M = \dim_k M\otimes_A k$ by NAK.
\begin{enumerate}
\item Show that $r(M\otimes_AN) = r(M)r(N)$.
\item Let $I\subset A $ be an ideal with $r(I)>1$. Show that
$r(I^2) < r(I)^2$.
\item Conclude that if every ideal in $A$ is a flat module, then
$A$ is a PID (or a field).
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $k$ be a field. Show that the following pairs of 
$k$-algebras are not isomorphic:
\begin{enumerate}
\item $k[x_1,\ldots,x_n]$ and $k[x_1,\ldots,x_{n+1}]$ for any
$n\geq 1$.
\item $k[a,b,c,d,e,f]/(ab+cd+ef)$ and $k[x_1,\ldots,x_n]$ 
for $n=5$.
\item $k[a,b,c,d,e,f]/(ab+cd+ef)$ and $k[x_1,\ldots,x_n]$ 
for $n=6$.
\end{enumerate}
\end{exercise}

\begin{remark}
Of course the idea of this exercise is to find 
a simple argument in each case rather than applying a ``big'' theorem.
Nonetheless it is good to be guided by general principles.
\end{remark}

\begin{exercise}
Algebra. (Silly and should be easy.)
\begin{enumerate}
\item Give an example of a ring $A$ and a nonsplit
short exact sequence of $A$-modules
$$
0 \to M_1 \to M_2 \to M_3 \to 0.
$$
\item Give an example of a nonsplit sequence of $A$-modules
as above and a faithfully flat $A \to B$ such that 
$$
0 \to M_1\otimes_AB \to M_2\otimes_AB \to M_3\otimes_AB \to 0.
$$
is split as a sequence of $B$-modules.
\end{enumerate}
\end{exercise}

\begin{exercise}
Suppose that $k$ is a field having a primitive $n$th root
of unity $\zeta$. This means that $\zeta^n = 1$, but $\zeta^m\not=1$ for 
$0<m<n$.
\begin{enumerate}
\item Show that the characteristic of $k$ is prime to $n$.
\item Suppose that $a \in k$ is an element of $k$ which is not
an $d$th power in $k$ for any divisor $d$ of $n$, $in\geq d>1$. Show that
$k[x]/(x^n-a)$ is a field. (Hint: Consider a splitting field for
$x^n-a$ and use Galois theory.)
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $\nu : k[x]\setminus \{0\}  \to {\mathbf Z}$ be a map
with the following properties: $\nu(fg) = \nu(f) + \nu(g)$ whenever
$f$, $g$ not zero, and  $\nu(f+g) \geq min(\nu(f),\nu(g))$ whenever 
$f$, $g$, $f+g$ are not zero, and $\nu(c)=0$ for all $c\in k^*$.
\begin{enumerate}
\item Show that if $f$, $g$, and $f+g$ are nonzero and
$\nu(f) \not= \nu(g)$ then we have equality $\nu(f+g) = min(\nu(f),\nu(g))$.
\item Show that if $f=\sum a_i x^i$, $f\not=0$, then
$\nu(f) \geq min(\{i\nu(x)\}_{a_i\not=0})$. When does equality hold?
\item Show that if $\nu$ attains a negative value then
$\nu(f) = -n \deg(f)$ for some $n\in {\mathbf N}$.
\item Suppose $\nu(x) \geq 0$. Show that
$\{f \mid f=0,\ or\ \nu(f) > 0\}$ is a prime ideal of $k[x]$.
\item Describe all possible $\nu$.
\end{enumerate}
\end{exercise}













\section{Colimits}
\label{section-colimits}

\begin{exercise}
Let $(I, \geq)$ be a partially ordered set which is directed.
Let $A$ be a ring and let $(N_i,\varphi_{i,i'})$ be a directed system of
$A$-modules indexed by $I$. Suppose that $M$ is another $A$-module. Prove
that 
$$
\text{colim}_{i\in I}\ M\otimes_A N_i\cong
M\otimes_A \Big( \text{colim}_{i\in I}\ N_i\Big).
$$
\end{exercise}

\begin{definition}
\label{definition-finite-presentation}
A module $M$ over $R$ is said to be {\it of finite presentation over}
$R$ if it  is isomorphic to the cokernel of a map of finite free modules
$ R^{\oplus n} \to R^{\oplus m}$.
\end{definition}

\begin{exercise}
Prove that any module over any ring is 
\begin{enumerate}
\item the limit of its finitely generated
submodules, and
\item in some way a limit of finitely presented modules.
\end{enumerate}
\end{exercise}








\section{Flat ring maps}
\label{section-flat}

\begin{exercise}
Let $S$ be a multiplicative subset of the ring $A$.
\begin{enumerate}
\item For an $A$-module $M$ show that $S^{-1}M = S^{-1}A\otimes_A M$.
\item Show that $S^{-1}A$ is flat over $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Find an injection $M_1 \to M_2$ of $A$-modules such that
$M_1\otimes N \to M_2 \otimes N$ is not injective in the following
cases:
\begin{enumerate}
\item $A=k[x,y]$ and $N=(x,y) \subset A$. (Here and below $k$ is a field.)
\item $A=k[x,y]$ and $N=A/(x,y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Give an example of a ring $A$ and a finite $A$-module $M$
which is a flat but not a projective $A$-module.
\end{exercise}

\begin{remark}
If $M$ is of finite presentation and flat over $A$,
then $M$ is projective over $A$. Thus your example will have to
involve a ring $A$ which is not Noetherian. I know of an example
where $A$ is the ring of ${\mathcal C}^\infty$-functions on ${\mathbf R}$.
\end{remark}

\begin{exercise}
Find a flat but not free module over ${\mathbf Z}_{(2)}$.
\end{exercise}

\begin{exercise}
Flat deformations. 
\begin{enumerate}
\item Suppose that $k$ is a field and $k[\epsilon]$ is the ring of 
dual numbers $k[\epsilon]=k[x]/(x^2)$ and $\epsilon = \bar x$. Show that for
any $k$-algebra $A$ there is a flat $k[\epsilon]$-algebra $B$ such that
$A$ is isomorphic to $B/\epsilon B$.
\item Suppose that $k={\mathbf F}_p = {\mathbf Z}/p{\mathbf Z}$ and 
$A = k[x_1,x_2,x_3,x_4,x_5,x_6]/(x_1^p,x_2^p,x_3^p,x_4^p,x_5^p,x_6^p)$.
Show that there exists a flat ${\mathbf Z}/p^2{\mathbf Z}$-algebra $B$ such
that $B/pB$ is isomorphic to $A$. (So here $p$ plays the role of $\epsilon$.)
\item Now let $p=2$ and consider the same question for
$k={\mathbf F}_2 = {\mathbf Z}/2{\mathbf Z}$ and 
$A = k[x_1,x_2,x_3,x_4,x_5,x_6]/(x_1^2,x_2^2,x_3^2,x_4^2,x_5^2,x_6^2,
x_1x_2+x_3x_4+x_5x_6)$. 
However, in this case show that there does {\it not} exist a flat
${\mathbf Z}/4{\mathbf Z}$-algebra $B$ such that $B/2B$ is isomorphic to
$A$. (Find the trick! The same example works in arbitrary characteristic
$p>0$, except that the computation is more difficult.)
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $(A,{\mathfrak m},k)$ be a local ring and let $k \subset k'$ be
a finite field extension. Show there exists a flat, local map of
local rings $A \to B$ such that ${\mathfrak m}_B = {\mathfrak m} B$ and 
$B/{\mathfrak m} B$ is
isomorphic to $k'$ as $k$-algebra. (Hint: first do the case where
$k \subset k'$ is generated by a single element.)
\end{exercise}

\begin{remark}
The same result holds for arbitrary field extensions $k \subset K$.
\end{remark}










\section{The Spectrum of a ring}
\label{section-spectrum-ring}

\begin{exercise}
Compute $\text{Spec} \mathbf{Z}$ as a set and describe its topology.
\end{exercise}

\begin{exercise}
Let $A$ be any ring. Let $X$ be any topological space.
For $f\in A$ we define
$D(f):= \{\mathfrak p \subset A \mid f \not \in \mathfrak p\}$.
Prove that the open subsets $D(f)$ form a basis of the topology of
$\text{Spec} A$.
\end{exercise}

\begin{exercise}
Prove that the map $I\mapsto V(I)$
defines a natural bijection
$$
\{\hbox{$I\subset A$ with $I=\sqrt{I}$}\}
\longrightarrow
\{\hbox{$T\subset \text{Spec} A$ closed}\}
$$
\end{exercise}

\begin{definition}
\label{definition-quasi-compact}
A topological space $X$ is called {\it quasi-compact}
if for any open covering $X=\bigcup_{i\in I} U_i$ there is a finite
subset $\{i_1,\ldots,i_n\}\subset I$ such that $X=U_{i_1}\cup\ldots
U_{i_n}$. 
\end{definition}

\begin{exercise}
Prove that $\text{Spec} A$ is quasi-compact for any ring $A$.
\end{exercise}

\begin{definition}
\label{definition-Hausdorff}
A topological space $X$ is said to verify the separation axiom $T_0$
if for any pair of points $x,y\in X$, $x\not=y$ there is an open
subset of $X$ containing one but not the other.
We say that $X$ is {\it Hausdorff} if for any pair $x,y\in X$, $x\not=y$
there are disjoint open subsets $U, V$ such that $x\in U$
and $y\in V$.
\end{definition}

\begin{exercise}
Show that $\text{Spec} A$ is {\bf not} Hausdorff in general.
Prove that $\text{Spec} A$ is $T_0$. Give an example of a topological
space $X$ that is not $T_0$.
\end{exercise}

\begin{remark}
Usually the word compact is reserved for quasi-compact and
Hausdorff spaces.
\end{remark}

\begin{definition}
\label{definition-irreducible}
A topological space $X$ is called {\it irreducible} if $X$ is not empty
and if $X=Z_1\cup Z_2$ with $Z_1, Z_2\subset X$ closed, then either
$Z_1=X$ or $Z_2=X$. A subset $T\subset X$ of a topological space
is called {\it irreducible} if it is an irreducible
topological space with the topology induced from $X$. 
This definition implies $T$ is irreducible if and only 
if the closure $\bar T$ of $T$ in $X$ is irreducible.
\end{definition}

\begin{exercise}
Prove that $\text{Spec} A$ is irreducible if and only if
$Nil(A)$ is a prime ideal and that in this case it is the unique
minimal prime ideal of $A$.
\end{exercise}

\begin{exercise}
Prove that a closed subset $T\subset \text{Spec} A$
is irreducible if and only if it is of the form $T=V({\mathfrak p})$ for 
some prime ideal ${\mathfrak p}\subset A$.
\end{exercise}

\begin{definition}
\label{definition-generic-point}
A point $x$ of an irreducible topological space $X$ is called
a {\it generic point} of $X$ if $X$ is equal to the closure of 
the subset $\{x\}$.
\end{definition}

\begin{exercise}
Show that in a $T_0$ space $X$ every irreducible closed
subset has at most one generic point. 
\end{exercise}

\begin{exercise}
Prove that in $\text{Spec} A$ every
irreducible closed subset {\it does} have a generic point.
In fact show that the map
${\mathfrak p} \mapsto \overline{\{{\mathfrak p}\}}$ is
a bijection of $\text{Spec} A$ with the set of irreducible closed
subsets of $X$.
\end{exercise}

\begin{exercise}
Give an example to show that an irreducible
subset of $\text{Spec} \mathbf{Z}$ does not neccesarily have a generic point.
\end{exercise}

\begin{definition}
\label{definition-Noetherian}
A topological space $X$ is called {\it Noetherian} if any
decreasing sequence $Z_1\supset Z_2 \supset Z_3\supset \ldots$
of closed subsets of $X$ stabilizes.
(It is called {\it Artinian} if any increasing sequence of closed
subsets stabilizes.)
\end{definition}

\begin{exercise}
Show that if the ring $A$ is Noetherian then 
the topological space $\text{Spec} A$ is Noetherian. Give an 
example to show that the converse is false. (The same for
Artinian if you like.)
\end{exercise}

\begin{definition}
\label{definition-irreducible-component}
A maximal irreducible subset $T\subset X$ is called an
{\it irreducible component} of the space $X$. Such an irreducible
component of $X$ is automatically a closed subset of $X$.
\end{definition}

\begin{exercise}
Prove that any irreducible subset
of $X$ is contained in an irreducible component of $X$.
\end{exercise}

\begin{exercise}
Prove that a Noetherian topological space $X$
has only finitely many irreducible components, say $X_1,\ldots, X_n$,
and that $X=X_1\cup X_2\cup\ldots\cup X_n$. (Note that
any $X$ is always the union of its irreducible components, but that
if $X={\mathbf R}$ with its usual topology for instance then the irreducible
components of $X$ are the one point subsets. This is not
terribly interesting.)
\end{exercise}

\begin{exercise}
Show that irreducible components of $\text{Spec} A$
correspond to minimal primes of $A$.
\end{exercise}

\begin{definition}
\label{definition-specialization}
A point $x\in X$ is called {\it closed} if $\overline{\{x\}}=\{ x\}$.
Let $x,y$ be points of $X$. We say that $x$ is a {\it specialization}
of $y$, or that $y$ is a {\it generalization} of $x$ if
$x\in \overline{\{y\}}$.
\end{definition}

\begin{exercise}
Show that closed points of $\text{Spec} A$ 
correspond to maximal ideals of $A$.
\end{exercise}

\begin{exercise}
Show that ${\mathfrak p}$ is a generalization of ${\mathfrak q}$ 
in $\text{Spec} A$ if and only if ${\mathfrak p}\subset {\mathfrak q}$. 
Characterize closed points,
maximal ideals, generic points and minimal prime ideals in terms of
generalization and specialization. (Here we use the terminology that a point
of a possibly reducible topological space $X$ is called a generic point
if it is a generic points of one of the irreducible components of $X$.)
\end{exercise}

\begin{exercise}
Let $I$ and $J$ be ideals of $A$.
What is the condition for $V(I)$ and $V(J)$ to be disjoint?
\end{exercise}

\begin{definition}
\label{definition-connected-component}
A topological space $X$ is called {\it connected} if it is not the union
of two nonempty disjoint open subsets. A {\it connected component}
of $X$ is a (nonempty) maximal connected subset. Any point of $X$ is contained
in a connected component of $X$ and any connected component of $X$ is
closed in $X$. (But in general a connected component need not be open in $X$.)
\end{definition}

\begin{exercise}
Show that $\text{Spec} A$ is disconnected
iff $A\cong B\times C$ for certain nonzero rings $B,C$.
\end{exercise}

\begin{exercise}
Let $T$ be a connected component
of $\text{Spec} A$. Prove that $T$ is stable under generalization.
Prove that $T$ is an open subset of $\text{Spec} A$ if $A$ is Noetherian.
(Remark: This is wrong when $A$ is an infinite product of copies of
${\mathbf F}_2$ for example. The spectrum of this ring consists of infinitely
many closed points.)
\end{exercise}

\begin{exercise}
Compute $\text{Spec} k[x]$, i.e., describe
the prime ideals in this ring, describe the possible specializations, and
describe the topology. (Work this out when $k$ is algebraically closed but
also when $k$ is not.)
\end{exercise}

\begin{exercise}
 Compute $\text{Spec} k[x,y]$, where $k$ is algebraically
closed.
[Hint: use the morphism $\varphi: \text{Spec} k[x,y]\to\text{Spec} k[x]$;
if $\varphi({\mathfrak p})=(0)$ then localize with respect to $S=\{f\in k[x]
\mid f\not=0\}$ and use result of lecture on localization and $\text{Spec}$.]
(Why do you think algebraic geometers call this affine 2-space?)
\end{exercise}

\begin{exercise}
Compute $\text{Spec} \mathbf{Z}[y]$. 
[Hint: as above.] (Affine 1-space over $\mathbf{Z}$.)
\end{exercise}






\section{Length}
\label{section-length}

\begin{exercise}
Let $A=k[x,y]_{(x,y)}$ be the local ring of the affine plane at
the origin. Make any assumption you like about the field $k$. Suppose
that $f = x^3 + x^2y^2 + y^{100}$ and $g = y^3 - x^{999}$. What is the length
of $A/(f,g)$ as an $A$-module? (Possible way to proceed: think about the
ideal that $f$ and $g$ generate in quotients of the form $A/{\mathfrak m}_A^n=
k[x,y]/(x,y)^n$ for varying $n$. Try to find $n$ such that 
$A/(f,g)+{\mathfrak m}_A^n \cong A/(f,g)+{\mathfrak m}_A^{n+1}$ and use NAK.)
\end{exercise}



\section{Singularities}
\label{section-singularities}

\begin{exercise}
Let $k$ be any field. Suppose that $A=k[[x,y]]/(f)$ and
$B=k[[u,v]]/(g)$, where $f=xy$ and $g=uv+\delta$ with $\delta \in (u,v)^3$.
Show that $A$ and $B$ are isomorphic rings.
\end{exercise}

\begin{remark}
A singularity on a curve over a field $k$ is called an
ordinary double point if the complete local ring of the curve at the
point is of the form $k'[[x,y]]/(f)$, where (a) $k'$ is a finite separable
extension of $k$, (b) the initial term of $f$ has degree two, i.e., it
looks like $q=ax^2+bxy+cy^2$ for some $a,b,c\in k'$ not all zero, and (c) 
$q$ is a nondegenerate quadratic form over $k'$ (in char 2 this means that
$b$ is not zero). In general there is one isomorphism class of such rings for
each isomophism class of pairs $(k',q)$.
\end{remark}






\section{Hilbert Nullstellensatz}
\label{section-Hilbert-Nullstellensatz}


\begin{exercise}
{\it A silly argument using the complex numbers!}
Let ${\mathbf C}$ be the complex number field. Let $V$ be a vector 
space over ${\mathbf C}$. The spectrum of a linear operator
$T : V \to V$ is the set of complex numbers $\lambda \in {\mathbf C}$
such that the operator $T - \lambda {\rm id}_V$ is not invertible.
\begin{enumerate}
\item Show that ${\mathbf C}(X)=f.f.({\mathbf C}[X])$
has uncountable dimension over ${\mathbf C}$.
\item Show that any linear operator on $V$ has a
nonempty spectrum if the dimension of $V$ is finite or
countable.
\item Show that if a finitely generated ${\mathbf C}$-algebra
$R$ is a field, then the map ${\mathbf C}\to R$ is an isomorphism.
\item Show that any maximal ideal ${\mathfrak m}$ of
${\mathbf C}[x_1,\ldots,x_n]$ is of the form
$(x_1-\alpha_1,\ldots,x_n-\alpha_n)$ for some $\alpha_i \in {\mathbf C}$.
\end{enumerate}
\end{exercise}

\begin{remark}
\label{remark-HNSS}
Let $k$ be a field. Then for every integer $n\in {\mathbf N}$ and
every maximal ideal ${\mathfrak m} \subset k[x_1,\ldots,x_n]$
the quotient $k[x_1,\ldots,x_n]/{\mathfrak m}$ is a finite field
extension of $k$. This will be shown later in the course. Of course
(please check this) it implies a similar statement for maximal ideals
of finitely generated $k$-algebras. The exercise above proves
it in the case $k={\mathbf C}$.
\end{remark}

\begin{exercise}
Let $k$ be a field. Please use Remark \ref{remark-HNSS}. 
\begin{enumerate}
\item Let $R$ be a $k$-algebra. Suppose that $\dim_k R < \infty$
and that $R$ is a domain. Show that $R$ is a field.
\item Suppose that $R$ is a finitely generated $k$-algebra, and
$f\in R$ not nilpotent. Show that there exists a maximal ideal
${\mathfrak m} \subset R$ with $f\not\in {\mathfrak m}$.
\item Show by an example that this statement fails when $R$
is not of finite type over a field. 
\item Show that any radical ideal $I \subset {\mathbf C}[x_1,\ldots,x_n]$
is the intersection of the maximal ideals containing it.
\end{enumerate}
\end{exercise}

\begin{remark}
This is the Hilbert Nullstellensatz. Namely it says
that the closed subsets of $\text{Spec} k[x_1,\ldots,x_n]$ (which correspond
to radical ideals by a previous exercise) are determined by the 
closed points contained in them.
\end{remark}

\begin{exercise}
Let $A =
{\mathbf C}[x_{11}, x_{12}, x_{21}, x_{22}, y_{11}, y_{12}, y_{21}, y_{22}]$.
Let $I$ be the ideal of $A$ generated by the entries of the
matrix $XY$, with 
$$
X = \left(
\begin{matrix}
x_{11} & x_{12}\\
x_{21} & x_{22}
\end{matrix}
\right)
\quad \hbox{and} \quad
Y = \left(
\begin{matrix}
y_{11} & y_{12}\\
y_{21} & y_{22}
\end{matrix}
\right).
$$
Find the irreducible components of the closed subset $V(I)$ of $\text{Spec} A$.
(I mean describe them and give equations for each of them. You do not have
to prove that the equations you write down define prime ideals.) Hints:
\begin{enumerate}
\item You may use the Hilbert Nullstellensatz, and it suffices to find
irreducible locally closed subsets which cover the set of closed points of 
$V(I)$.
\item There are two easy components. 
\item An image of an irreducible set under a continuous map is 
irreducible.
\end{enumerate}
\end{exercise}







\section{Catenary rings}
\label{section-catenary}

\begin{definition}
\label{definition-catenary}
A Noetherian ring $A$ is said to be {\it catenary}
if for any triple of prime ideals
${\mathfrak p}_1 \subset {\mathfrak p}_2 \subset {\mathfrak p}_3$
we have
$$
ht({\mathfrak p}_3 / {\mathfrak p}_1) = ht({\mathfrak p}_3/{\mathfrak p}_2) + 
ht({\mathfrak p}_2/{\mathfrak p}_1).
$$
\end{definition}

\begin{exercise}
Show that a Noetherian local domain of dimension $2$ is catenary.
\end{exercise}




\section{Fraction fields}
\label{section-fraction-fields}

\begin{exercise}
Consider the domain
$$
{\mathbf Q}[r,s,t]/(s^2-(r-1)(r-2)(r-3), t^2-(r+1)(r+2)(r+3)).
$$
Find a domain of the form ${\mathbf Q}[x,y]/(f)$ with isomorphic
field of fractions.
\end{exercise}




\section{Finite locally free modules}
\label{section-finite-locally-free}

\begin{definition}
\label{definition-finite-locally-free}
Let $A$ be a ring. Recall that a {\it finite locally free} $A$-module
$M$ is a module such that for every ${\mathfrak p} \in \text{Spec} A$
there exists an
$f\in A$, $f \not \in {\mathfrak p}$ such that $M_f$ is a finite free
$A_f$-module.
\end{definition}

\begin{exercise}
Let $A$ be a ring.
\begin{enumerate}
\item Suppose that $M$ is a finite locally free $A$-module, and
suppose that $\varphi : M \to M$ is an endomorphism. Define/construct
the {\it trace}  and {\it determinant} of $\varphi$ and prove that your
construction is ``functorial in the triple $(A,M,\varphi)$''.
\item Show that if $M,N$ are finite locally free $A$-modules,
and if $\varphi : M \to N$ and $\psi : N \to M$ then
$Trace(\varphi \circ \psi) = Trace(\psi \circ \varphi)$ and
$Det(\varphi \circ \psi) = Det(\psi \circ \varphi)$.
\item In case $M$ is finite locally free show that
$Det$ defines a multiplicative map $End_A(M) \to A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Now suppose that $B$ is an $A$-algebra which is finite
locally free as an $A$-module, in other words $B$ is a finite locally
free $A$-algebra.
\begin{enumerate}
\item Define $Trace_{B/A}$ and $Norm_{B/A}$ using
$Trace$ and $Det$ as defined above.
\item Let $b\in B$ and let $\pi : \text{Spec} B \to \text{Spec} A$ be
the induced morphism. Show that $\pi(V(b)) = V(Norm_{B/A}(b))$.
(Recall that $V(f) = \{ {\mathfrak p} \mid f \in {\mathfrak p}\}$.)
\item (Base change.) Suppose that $i:A \to A'$ is a ring map. Set
$B' = B\otimes_A A'$. Indicate why $i(Norm_{B/A}(b))$ equals
$Norm_{B'/A'}(b\otimes 1)$.
\item Compute $Norm_{B/A}(b)$ when
$B = A\times A\times A \times\ldots\times A$
and $b = (a_1,\ldots,a_n)$.
\item Compute the norm of $y-y^3$ under the finite flat
map ${\mathbf Q}[x] \to {\mathbf Q}[y]$, $x \to y^n$. (Hint: use
the ``base change''
$A = {\mathbf Q}[x] \subset A' = {\mathbf Q}(\zeta_n)(x^{1/n})$.)
\end{enumerate}
\end{exercise}



\section{Glueing}
\label{section-glueing}

\begin{exercise}
Suppose that $A$ is a ring and $M$ is an $A$-module.
Let $f_i$ be a collection of elements of $A$ such that
$$
\text{Spec}(A) = \bigcup D(f_i).
$$
\begin{enumerate}
\item Show that if $M_{f_i}$ is a finitely generated $A_{f_i}$-module,
then $M$ is a finitely generated $A$-module.
\item Show that if $M_{f_i}$ is a flat $A_{f_i}$-module,
then $M$ is a flat $A$-module. (This is kind of silly if you think about
it right.)
\end{enumerate}
\end{exercise}

\begin{remark}
In algebraic geometric language this means that the property 
of ``being finitely generated'' or ``being flat'' is local for the Zariski
topology (in a suitable sense). You can also show this for the property
``being of finite presentation''.
\end{remark}





\section{Going up and going down}
\label{section-going-up}


\begin{definition}
\label{definition-GU-GD}
Let $\phi: A \to B$ be a homomorphism of rings. We say
that the {\it going-up theorem} holds for $\phi$ if the
following condition is satisfied:
\begin{list}{(GU)}{}
\item for any ${\mathfrak p}, {\mathfrak p}' \in \text{Spec}(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any $P \in \text{Spec}(B)$ lying
over ${\mathfrak p}$, there exists $P'\in \text{Spec}(B)$ lying
over ${\mathfrak p}'$ such that $P \subset P'$.
\end{list}
Similarly, we say that the {\it going-down theorem} holds for $\phi$
if the following condition is satisfied:
\begin{list}{(GD)}{}
\item for any ${\mathfrak p}, {\mathfrak p}' \in \text{Spec}(A)$ such that
${\mathfrak p} \subset {\mathfrak p}'$, and for any
$P' \in \text{Spec}(B)$ lying
over ${\mathfrak p}'$, there exists $P\in \text{Spec}(B)$ lying
over ${\mathfrak p}$ such that $P \subset P'$.
\end{list}
\end{definition}

\begin{exercise}
In each of the following cases determine whether
(GU), (GD) holds, and explain why. (Use any Prop/Thm/Lemma you can find, 
but check the hypotheses in each case.)
\begin{enumerate}
\item $k$ is a field, $A=k$, $B=k[x]$.
\item $k$ is a field, $A=k[x]$, $B=k[x,y]$.
\item $A={\mathbf Z}$, $B={\mathbf Z}[1/11]$.
\item $k$ is an algebraically closed field, $A=k[x,y]$, 
$B=k[x,y,z]/(x^2-y,z^2-x)$.
\item $A={\mathbf Z}$, $B={\mathbf Z}[i,1/(2+i)]$.
\item $A={\mathbf Z}$, $B={\mathbf Z}[i,1/(14+7i)]$.
\item $k$ is an algebraically closed field, $A=k[x]$, 
$B=k[x,y,1/(xy-1)]/(y^2-y)$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $k$ be an algebraically closed field. Compute the image in
$\text{Spec}(k[x,y])$
of the following maps:
\begin{enumerate}
\item $\text{Spec}(k[x,yx^{-1}]) \to \text{Spec}(k[x,y])$, where
$k[x,y] \subset k[x,yx^{-1}] \subset k[x,y,x^{-1}]$.
(Hint: To avoid confusion, give the element $yx^{-1}$ another name.)
\item $\text{Spec}(k[x,y,a,b]/(ax-by-1))\to \text{Spec}(k[x,y])$.
\item $\text{Spec}(k[t,1/(t-1)]) \to \text{Spec}(k[x,y])$, induced by $x 
\mapsto t^2$,
and $y \mapsto t^3$.
\item $k={\mathbf C}$ (complex numbers),
$\text{Spec}(k[s,t]/(s^3+t^3-1)) \to \text{Spec}(k[x,y])$, where
$x\mapsto s^2$, $y \mapsto t^2$.
\end{enumerate}
\end{exercise}

\begin{exercise}
{\bf Remark.} Finding the image as above usually is done by using
elimination theory.
\end{exercise}




\section{Fitting ideals}
\label{section-fitting-ideals}

\begin{exercise}
Let $R$ be a ring and let $M$ be a finitely presented $R$
module. Recall this means that there is an exact sequence
$$
R^{\oplus r} \longrightarrow R^{\oplus n} \longrightarrow M \longrightarrow 0.
$$
This is called a {\it presentation of $M$}.
Note that the map $R^{\oplus n} \to M$
is given by a sequence of elements $x_1,\ldots,x_n$ of $M$. The elements $x_i$
are generators of $M$. The map $R^{\oplus r} \to R^{\oplus n}$ is given by a
$n \times r$ matrix $A$ with coefficients in $R$. The columns of $A$ are said
to be the relations. Any vector $(r_i) \in R^{\oplus n}$ such that
$\sum r_i x_i =0$ is a linear combination of the columns of $A$.

\smallskip\noindent
Of course any module has a lot of different presentations.
We define $Pres(M)$ to be the collection of matrices you can obtain in this
way (meaning all matrices $A$ of any size $n \times r$ that occur in some
presentation of $M$).
\begin{enumerate}
\item Show that if $A\in Pres(M)$ has size $n\times r$ then
the matrix $\tilde A$ of size $n \times (r+1)$ obtained from $A$ by
adding a column of zeros occurs in $Pres(M)$. (Hint: this corresponds
to adding a trivial relation.)
\item Show that if $A\in Pres(M)$, then any $\tilde A \in Pres(M)$,
where $\tilde A$ is obtained from $A$ by replacing $i$th column vector
$A_i$ by $A_i + \sum_{j\not=i} r_j A_j$ for any $r_j \in R$. (Hint: This
corresponds to replacing a relation by itself plus a linear combination of
other relations.)
\item Show that if $A\in Pres(M)$ has size $n\times r$ then
the matrix $\tilde A$ of size $(n+1) \times (r+1)$ obtained from $A$ 
by setting
\begin{eqnarray*}
\tilde a_{ij}      & = & a_{ij},\ i<n+1, j<r+1,\\
\tilde a_{n+1 j}   & = & 0,\ j<r+1,\\
\tilde a_{i r+1}   & = & 0,\ i<n+1,\\
\tilde a_{n+1 r+1} & = & 1
\end{eqnarray*}
occurs in $Pres(M)$. (Hint: This corresponds to adding $x_{n+1}=0$ and
the trivial relation $x_{n+1}=0$.)
\item Show that if $A\in Pres(M)$, then $\tilde A \in Pres(M)$
where $\tilde A$ is obtained from $A$ by replacing the $j$th row
by a sum consisting of itself and a linear combination of other
rows (with coefficients in $R$). (Hint: This corresponds to replacing
$x_j$ by $x_j + \sum_{i\not = j} r_i x_i$ and adjusting the relations
accordingly.)

\smallskip\noindent
We say that matrices $A$ and $A'$ with coefficients in $R$
are obtained from each other by a sequence of elementary moves if
there is a sequence of matrices $A=A_0, A_1, A_2,\ldots, A_n=A'$ such
that for each $0\leq \ell < n$ the pair $(A_\ell, A_{\ell+1})$ is the
pair $(A,\tilde A)$ or $(\tilde A, A)$ for one of the operations on
matrices described in (a)-(d) above.

\item Show that any two matrices in $Pres(M)$ are obtained from
each other by a sequence of elementary moves. (Hint: First show this 
holds if $A$, $A'$ in $Pres(M)$ are matrices of relations among the same
set of generators.)
\item Let $k$ be an integer. Suppose that $A$, $A'$ are obtained from
each other by a sequence of elementary moves. Say $A$ has size $n \times r$
and $A'$ has size $n' \times r'$. Show that the ideal generated by the 
$(n-k)\times (n-k)$ minors of $A$ agrees with the ideal generated by the
$(n'-k)\times (n'-k)$ minors of $A'$. [[Convention: If $k\geq n$ then we say
the ideal generated by the $(n-k)\times (n-k)$-minors is $R$. In other words,
the determinant of a matrix of size $0 \times 0$, $-1 \times -1$, etc
is defined to be $1$.]]

\smallskip\noindent
This defines the $k$th fitting ideal of $M$. Notation $Fit_k(M)$.

\item Show that
$Fit_0(M) \subset Fit_1(M) \subset Fit_2(M) \subset \ldots$.
(Hint: Use that a determinant can be computed by expanding along a column.)
\item Show that $M=(0)$ if $Fit_0(M)=R$.
\item Show that $M$ if $Fit_0(M)=(0)$ and $Fit_1(M)=R$, then $M$ is
locally free of rank $1$. (This is slightly tricky.)
\end{enumerate}
\end{exercise}




\section{Hilbert functions}
\label{section-hilbert}

\begin{definition}
\label{definition-numerical-polynomial}
A {\it numerical polynomial} is a polynomial $f(x) \in {\mathbf Q}[x]$
such that $f(n) \in {\mathbf Z}$ for every integer $n$.
\end{definition}

\begin{definition}
\label{definition-graded-module}
A {\it graded module} $M$ over a ring $A$ is an $A$-module $M$
endowed with a direct sum decomposition
$
\bigoplus\nolimits_{n \in {\mathbf Z}} M_n
$
into $A$-submodules. We will say that $M$ is {\it locally finite} if all of
the $M_n$ are finite $A$-modules. Suppose that $A$ is a Noetherian ring and
that $\varphi$ is a {\it Euler-Poincar\'e function} on finite $A$-modules. 
This means that for every finitely generated $A$-module $M$ we are given an
integer $\varphi(M) \in {\mathbf Z}$ and for every short exact sequence 
$$
0
\longrightarrow
M'
\longrightarrow
M
\longrightarrow
M''
\longrightarrow
0
$$
we have $\varphi(M) = \varphi(M') + \varphi(M')$. The {\it Hilbert function}
of a locally finite graded module $M$ (with respect to $\varphi$) is the
function $\chi_\varphi(M,n) = \varphi(M_n)$. We say that $M$ has a
{\it Hilbert polynomial} if there is some numerical polynomial
$P_\varphi$ such that $\chi_\varphi(M,n) = P_\varphi(n)$ for all sufficiently
large integers $n$.
\end{definition}

\begin{definition}
\label{definition-graded-algebra}
A {\it graded $A$-algebra} is a graded $A$-module
$B = \bigoplus_{n \geq 0} B_n$ together with an $A$-bilinear map
$$
B \times B \longrightarrow B,\ (b,b') \longmapsto bb'
$$
that turns $B$ into an $A$-algebra so that $B_n \cdot B_m \subset B_{n+m}$.
Finally, a {\it graded module $M$ over a graded $A$-algebra $B$} is given
by a graded $A$-module $M$ together with a (compatible) $B$-module structure
such that $B_n \cdot M_d \subset M_{n+d}$. Now you can define {\it
homomorphisms of graded modules/rings}, {\it graded submodules}, {\it graded
ideals}, {\it exact sequences of graded modules}, etc, etc.
\end{definition}

\begin{exercise}
Let $A=k$ a field. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
Let $A ={\mathbf Z}$. What are all possible Euler-Poincar\'e functions
on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
Let $A = k[x,y]/(xy)$ with $k$ algebraically closed. What are all
possible Euler-Poincar\'e functions on finite $A$-modules in this case?
\end{exercise}

\begin{exercise}
Suppose that $A$ is Noetherian. Show that the kernel of a map
of locally finite graded $A$-modules is locally finite.
\end{exercise}

\begin{exercise}
Let $k$ be a field and let $A=k$ and $B=k[x,y]$ with grading
determined by $\deg(x)=2$ and $\deg(y)=3$. Let $\varphi(M)=\dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
Let $k$ be a field and let $A=k$ and $B=k[x,y]/(x^2,xy)$ with grading
determined by $\deg(x)=2$ and $\deg(y)=3$. Let $\varphi(M)=\dim_k(M)$.
Compute the Hilbert function of $B$ as a graded $k$-module. Is there
a Hilbert polynomial in this case?
\end{exercise}

\begin{exercise}
Let $k$ be a field and let $A=k$.  Let $\varphi(M)=\dim_k(M)$.
Fix $d\in {\mathbf N}$. Consider the graded $A$-algebra
$B=k[x,y,z]/(x^d+y^d+z^d)$, where  $x,y,z$ each have degree $1$.
Compute the Hilbert function of $B$. Is there a Hilbert polynomial
in this case?
\end{exercise}



\section{Proj of a ring}
\label{section-proj-ring}

\begin{definition}
\label{definition-homogeneous-ideal}
Let $R$ be a graded ring. A {\it homogeneous} ideal is simply an ideal
$I \subset R$ which is also a graded submodule of $R$. Equivalently, 
it is an ideal generated by homogeneous elements. Equivalently, if
$f \in I$ and 
$$
f = f_0 + f_1 + \ldots + f_n
$$
is the decomposition of $f$ into homogenous pieces in $R$ then $f_i \in I$
for each $i$.
\end{definition}

\begin{definition}
\label{definition-Proj-R}
We define the {\it homogeneous spectrum $\text{Proj}(R)$}
of the graded ring $R$ to be the set of homogenous, prime ideals
${\mathfrak p}$ of $R$ such that $R_{+} \not \subset {\mathfrak p}$.
Note that $\text{Proj}(R)$ is a subset of $\text{Spec}(R)$ and hence has a
natural induced topology.
\end{definition}

\begin{definition}
\label{definition-Dplus-Vplus}
Let $R = \oplus_{d \geq 0} R_d$ be a graded ring, let $f\in R_d$ and
assume that $d \geq 1$. We define {\it $R_{(f)}$} to be the subring of
$R_f$ consisting of elements of the form $r/f^n$ with $r$ homogenous and
$\deg(r) = nd$. Furthermore, we define
$$
D_{+}(f) = \{ {\mathfrak p} \in \text{Proj}(R) | f \not\in {\mathfrak p} \}.
$$
Finally, for a homogenous ideal $I \subset R$ we define
$V_{+}(I) = V(I) \cap \text{Proj}(R)$.
\end{definition}

\begin{exercise}
Topology on $\text{Proj}(R)$. With notations as above:
\begin{enumerate}
\item Show that $D_{+}(f)$ is open in $\text{Proj}(R)$, show that
$D_{+}(ff') = D_{+}(f) \cap D_{+}(f')$.
\item Let $g = g_0 + \ldots + g_m$ be an element
of $R$ with $g_i \in R_i$. Express $D(g) \cap \text{Proj}(R)$
in terms of $D_{+}(g_i)$, $i \geq 1$ and $D(g_0) \cap \text{Proj}(R)$.
No proof necessary.
\item Let $g\in R_0$ be a homogenous element of degree $0$.
Express $D(g) \cap \text{Proj}(R)$ in terms of $D_{+}(f_\alpha)$ for a suitable
family $f_\alpha \in R$ of homogenous elements of positive degree.
\item Show that the collection $\{D_{+}(f)\}$ of opens forms a
basis for the topology of $\text{Proj}(R)$.
\item Show that there is a canonical bijection
$D_{+}(f) \to \text{Spec}(R_{(f)})$.
\item Show that the map from (e) is a homeomorphism.
\item Give an example of an $R$ such that $\text{Proj}(R)$ is not
quasi-compact. No proof necessary.
\item Show that any closed subset $T \subset \text{Proj}(R)$ is of
the form $V_{+}(I)$ for some homogenous ideal $I \subset R$.
\end{enumerate}
\end{exercise}

\begin{remark}
There is a continuous map $ \text{Proj}(R) \longrightarrow \text{Spec}(R_0) $.
\end{remark}

\begin{exercise}
If $R=A[X]$ with $\deg(X)=1$, show that the natural map
$\text{Proj}(R) \to \text{Spec}(A)$ is a bijection and in fact
a homeomorphism.
\end{exercise}

\begin{exercise}
Blowing up: part I.
In this exercise $R = Bl_I(A) = A \oplus I \oplus I^2 \oplus \ldots$.
Consider the natural map $b : \text{Proj}(R) \to \text{Spec}(A)$. 
Set $U = \text{Spec}(A) - V(I)$. Show that
$$
b : b^{-1}(U) \longrightarrow U
$$
is a homeomorphism.
Thus we may think of $U$ as an open subset of $\text{Proj}(R)$.
Let $Z \subset \text{Spec}(A)$ be an irreducible closed subscheme
with generic point $\xi \in Z$. Assume that $\xi \not\in V(I)$,
in other words $Z \not\subset V(I)$, in other words
$\xi \in U$, in other words $Z\cap U \not=\emptyset$. We define
the {\it strict transform} $Z'$ of $Z$ to be the closure of the unique
point $\xi'$ lying above $\xi$. Another way to say this is that
$Z'$ is the closure in $\text{Proj}(R)$ of the locally closed subset
$Z\cap U \subset U \subset \text{Proj}(R)$.
\end{exercise}

\begin{exercise}
Blowing up: Part II.
Let $A = k[x,y]$ where $k$ is a field, and let $I=(x,y)$.
Let $R$ be the blow up algebra for $A$ and $I$.
\begin{enumerate}
\item Show that the strict transforms of $Z_1=V(\{x\})$ and
$Z_2=V(\{y\})$ are disjoint.
\item Show that the strict transforms of $Z_1=V(\{x\})$ and
$Z_2=V(\{x-y^2\})$ are not disjoint.
\item Find an ideal $J \subset A$ such that $V(J) = V(I)$
and such that the strict transforms of $Z_1=V(\{x\})$ and
$Z_2=V(\{x-y^2\})$ are disjoint.
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $R$ be a graded ring.
\begin{enumerate}
\item Show that $\text{Proj}(R)$ is empty if $R_n=(0)$ for all $n >> 0$.
\item Show that $\text{Proj}(R)$ is an irreducible topological space
if $R$ is a domain and $R_{+}$ is not zero. (Recall that the empty
topological space is not irreducible.)
\end{enumerate}
\end{exercise}

\begin{exercise}
Blowing up: Part III.
Consider $A$, $I$ and $U$, $Z$ as in the definition of strict transform.
Let $Z = V({\mathfrak p})$ for some prime ideal ${\mathfrak p}$. Let $\bar A = 
A/{\mathfrak p}$ and let
$\bar I$ be the image of $I$ in $\bar A$.
\begin{enumerate}
\item Show that there exists a surjective ring map
$R:=Bl_I(A) \to \bar R:=Bl_{\bar I}(\bar A)$.
\item Show that the ring map above induces a bijective map
from $\text{Proj}(\bar R)$ onto the strict transform $Z'$ of $Z$. (This
is not so easy. Hint: Use 5(b) above.)
\item Conclude that the strict transform $Z' = V_{+}(P)$ where
$P \subset R$ is the homogenous ideal defined by $P_d = I^d \cap {\mathfrak p}$.
\item Suppose that $Z_1=V({\mathfrak p})$ and
$Z_2=V({\mathfrak q})$ are irreducible
closed subsets defined by prime ideals such that  $Z_1 \not \subset Z_2$,
and $Z_2 \not \subset Z_1$. Show that blowing up the ideal
$I = {\mathfrak p} + {\mathfrak q}$ separates the
strict transforms of $Z_1$ and $Z_2$,
i.e., $Z_1' \cap Z_2' = \emptyset$. (Hint: Consider the homogenous
ideal $P$ and $Q$ from part (c) and consider $V(P + Q)$.)
\end{enumerate}
\end{exercise}


\section{Cohen-Macaulay rings of dimension 1}
\label{section-CM-dim-1}

\begin{definition}
\label{definition-CM}
A Noetherian local ring $A$ is said to be {\it Cohen-Macauley}
of dimension $d$ if it has dimension $d$ and there exists a system
of parameters $x_1,\ldots,x_d$ for $A$ such that $x_i$ is a nonzero
divisor in $A/(x_1,\ldots,x_{i-1})$ for $i=1,\ldots,d$.
\end{definition}

\begin{exercise}
Cohen-Macauley rings of dimension 1. Part I: Theory.
\begin{enumerate}
\item Let $(A, {\mathfrak m})$ be a local Noetherian with $\dim A=1$.
Show that if $x\in {\mathfrak m}$ is not a zero divisor then
\begin{enumerate}
\item $\dim A/xA=0$, in other words $A/xA$ is Artinian,
in other words $\{x\}$ is a system of parameters for $A$.
\item $A$ is has no embedded prime.
\end{enumerate}
\item Conversely, let $(A,{\mathfrak m})$ be a local Noetherian ring of
dimension $1$. Show that if $A$ has no embedded prime then there exists
a nonzero divisor in ${\mathfrak m}$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Cohen-Macauley rings of dimension 1. Part II: Examples.
\begin{enumerate}
\item Let $A$ be the local ring at $(x,y)$ of $k[x,y]/(x^2,xy)$.
\begin{enumerate}
\item Show that $A$ has dimension 1.
\item Prove that every element of ${\mathfrak m}\subset A$ is a
zero divisor.
\item Find $z\in {\mathfrak m}$ such that $\dim A/zA=0$
(no proof required).
\end{enumerate}
\item Let $A$ be the local ring at $(x,y)$ of $k[x,y]/(x^2)$.
Find a nonzero divisor in ${\mathfrak m}$ (no proof required).
\end{enumerate}
\end{exercise}

\begin{exercise}
Local rings of embedding dimension $1$.
Suppose that $(A,{\mathfrak m},k)$ is a Noetherian local ring
of embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Show that the function $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n+1}$
is either constant with value $1$, or its values are
$$
1,1,\ldots,1,0,0,0,0,0,\ldots
$$
\end{exercise}

\begin{exercise}
Regular local rings of dimension $1$.
Suppose that $(A,{\mathfrak m},k)$ is a regular Noetherian local ring of
dimension $1$. Recall that this means that $A$ has dimension $1$
and embedding dimension $1$, i.e.,
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 1.
$$
Let $x\in{\mathfrak m}$ be any element whose class in ${\mathfrak m}/{\mathfrak 
m}^2$ is not zero.
\begin{enumerate}
\item Show that for every element $y$
of ${\mathfrak m}$ there exists an integer $n$ such that $y$ can be written as
$y=ux^n$ with $u\in A^\ast$ a unit.
\item Show that $x$ is a nonzero divisor in $A$.
\item Conclude that $A$ is a domain.
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $(A,{\mathfrak m},k)$ be a Noetherian local ring with associated
graded $Gr_{\mathfrak m}(A)$.
\begin{enumerate}
\item Suppose that $x\in {\mathfrak m}^d$ maps to a nonzero
divisor $\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d+1}$ in degree $d$ of 
$Gr_{\mathfrak m}(A)$.
Show that $x$ is a nonzero divisor.
\item Suppose the depth of $A$ is at least $1$.
Namely, suppose that there exists a nonzero divisor $y \in {\mathfrak m}$.
In this case we can do better: assume just that $x\in {\mathfrak m}^d$ maps to
the element $\bar x \in {\mathfrak m}^d/{\mathfrak m}^{d+1}$ in degree $d$
of $Gr_{\mathfrak m}(A)$ which is a nonzero divisor on sufficiently
high degrees: $\exists N$ such that for all $n \geq N$ the map
of multiplication by $\bar x$ 
$$
{\mathfrak m}^n/{\mathfrak m}^{n+1} \longrightarrow
{\mathfrak m}^{n+d}/{\mathfrak m}^{n+d+1}
$$
is injective. Then show that $x$ is a nonzero divisor.
\end{enumerate}
\end{exercise}

\begin{exercise}
Suppose that $(A,{\mathfrak m},k)$ is a Noetherian local ring of
dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.	
$$
Notation: $f(n) = \dim_k {\mathfrak m}^n/{\mathfrak m}^{n+1}$.
Pick generators $x,y \in {\mathfrak m}$ 
and write $Gr_{\mathfrak m}(A) = k[\bar x,\bar y]/I$ for some
homogenous ideal $I$.
\begin{enumerate}
\item Show that there exists a homogenous element
$F\in k[\bar x, \bar y]$ such that $I \subset (F)$ with equality
in all sufficiently high degrees.
\item Show that $f(n) \leq n+1$.
\item Show that if $f(n) < n+1$ then $n \geq \deg(F)$.
\item Show that if $f(n) < n+1$, then $f(n+1) \leq f(n)$.
\item Show that $f(n) = \deg(F)$ for all $n >> 0$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Cohen-Macauley rings of dimension 1 and embedding dimension 2.
Suppose that $(A,{\mathfrak m},k)$ is a Noetherian local ring which is 
Cohen-Macauley
of dimension $1$. Assume also that the embedding dimension of $A$ is
$2$, i.e., assume that
$$
\dim_k {\mathfrak m}/{\mathfrak m}^2 = 2.	
$$
Notations: $f$, $F$, $x,y\in {\mathfrak m}$, $I$ as in Ex.\ 6 above. Please
use any results from the problems above.
\begin{enumerate}
\item Suppose that $z\in {\mathfrak m}$ is an element whose class
in ${\mathfrak m}/{\mathfrak m}^2$ is a linear form
$\alpha \bar x + \beta \bar y \in k[\bar x, \bar y]$
which is coprime with $f$.
\begin{enumerate}
\item Show that $z$ is a nonzero divisor on $A$.
\item Let $d = \deg(F)$.
Show that ${\mathfrak m}^n = z^{n+1-d}{\mathfrak m}^{d-1}$
for all sufficiently large $n$. (Hint: First show
$z^{n+1-d}{\mathfrak m}^{d-1} \to {\mathfrak m}^n/{\mathfrak m}^{n+1}$
is surjective by what you know about $Gr_{\mathfrak m}(A)$. Then use NAK.)
\end{enumerate}
\item What condition on $k$ garantees the existence of 
such a $z$? (No proof required; it's too easy.)

\noindent
Now we are going to assume there exists a $z$ as above. This turns out
to be a harmless assumption (in the sense that you can reduce to
the situation where it holds in order to obtain the results in
parts (d) and (e) below).
\item Now show that ${\mathfrak m}^\ell = z^{\ell-d+1} {\mathfrak m}^{d-1}$
for all $\ell \geq d$.
\item Conclude that $I = (F)$.
\item Conclude that the function $f$ has values
$$
2,3,4,\ldots,d-1,d,d,d,d,d,d,d,\ldots
$$
\end{enumerate}
\end{exercise}

\begin{remark}
This suggests that a local Noetherian Cohen-Macauley ring of dimension 1
and embedding dimension 2 is of the form $B/FB$, where $B$ is a 2-dimensional
regular local ring. This is more or less true (under suitable ``niceness''
properties of the ring).
\end{remark}






\section{Infinitely many primes}
\label{section-many-primes}

\noindent
A section with a collection of strange questions on rings where
inifinitely many primes are not invertible.

\begin{exercise}
Give an example of a finite type ${\mathbf Z}$-algebra $R$
with the following two properties:
\item{(a)} There is no ring map $R \to {\mathbf Q}$.
\item{(b)} For every prime $p$ there exists a maximal ideal
${\mathfrak m} \subset R$ such that $R/{\mathfrak m} \cong {\mathbf F}_p$.
\end{exercise}

\begin{exercise}
For $f \in {\mathbf Z}[x,u]$ we define $f_p(x)
= f(x,x^p) \bmod p \in {\mathbf F}_p[x]$. Give an example
of an $f \in {\mathbf Z}[x,u]$ such that the following two
properties hold:
\item{(a)} There exist infinitely many $p$ such that $f_p$
does not have a zero in ${\mathbf F}_p$.
\item{(b)} For all $p>>0$ the polynomial $f_p$ either has
a linear or a quadratic factor.
\end{exercise}

\begin{exercise}
For $f \in {\mathbf Z}[x,y,u,v]$ we define $f_p(x,y)
= f(x,y,x^p,y^p) \bmod p \in {\mathbf F}_p[x,y]$. Give an ``interesting''
example of an $f$ such that $f_p$ is reducible for all $p>>0$.
For example, $f=xv-yu$ with $f_p=xy^p-x^py=xy(x^{p-1}-y^{p-1})$ is
``uninteresting''; any $f$ depeding only on $x,u$ is ``uninteresting'',
etc.
\end{exercise}

\begin{remark}
Let $h \in {\mathbf Z}[y]$ be a monic polynomial of degree $d$.
Then:
\begin{enumerate}
\item The map $A = {\mathbf Z}[x] \to B ={\mathbf Z}[y]$,
$x \mapsto h$ is finite locally free of rank $d$.
\item For all primes $p$ the map
$A_p = {\mathbf F}_p[x]\to B_p = {\mathbf F}_p[y]$,
$y \mapsto h(y) \bmod p$ is finite locally free of rank $d$.
\end{enumerate}
\end{remark}

\begin{exercise}
Let $h,A,B,A_p,B_p$ be as in the remark. For $f \in {\mathbf Z}[x,u]$ we
define $f_p(x) = f(x,x^p) \bmod p \in {\mathbf F}_p[x]$. For
$g \in {\mathbf Z}[y,v]$ we define
$g_p(y) = g(y,y^p) \bmod p \in {\mathbf F}_p[y]$. 
\begin{enumerate}
\item Give an example of a $h$ and $g$ such that 
there does not exist a $f$ with the property
$$
f_p  =  Norm_{B_p/A_p}(g_p).
$$
\item Show that for any choice of $h$ and $g$ as above
there exists a nonzero $f$ such that for all $p$ we have 
$$
Norm_{B_p/A_p}(g_p)\ \ \hbox{divides}\ \ f_p .
$$
If you want you can restrict to the case $h=y^n$, even with $n=2$,
but it is true in general.
\item Discuss the relevance of this to Exercises 6 \& 7 of the previous
set.
\end{enumerate}
\end{exercise}

\begin{exercise}
Unsolved problems. They may be really hard or they may be easy.
I don't know.
\begin{enumerate}
\item Is there any $f \in {\mathbf Z}[x,u]$ such that $f_p$ is
irreducible for an inifinite number of $p$?
\item Let $f \in {\mathbf Z}[x,u]$ nonzero, and suppose 
$\deg_x(f_p) = dp+d'$ for all large $p$. (In other words $\deg_u(f)=d$
and the coefficient $c$ of $u^d$ in $f$ has $\deg_x(c)=d'$.) Suppose we
can write $d = d_1 + d_2$ and $d' = d'_1 + d'_2$ with $d_1,d_2 > 0$
and $d'_1, d'_2 \geq 0$ such that for all sufficiently large $p$
there exists a factorization
$$
	f_p = f_{1,p} f_{2,p}
$$
with $\deg_x(f_{1,p}) = d_1p+d'_1$. Is it true that $f$ comes about via a
norm construction as in Exercise 4? (More precisely, are there a $h$ and
$g$ such that $Norm_{B_p/A_p}(g_p)$ divides $f_p$ for all $p >> 0$.)
\item Analogous question to the one in (b) but now with
$f \in {\mathbf Z}[x_1,x_2,u_1,u_2]$ irreducible and just assuming that
$f_p(x_1,x_2) = f(x_1,x_2,x_1^p,x_2^p) \bmod p$ factors for all
$p >> 0$.
\end{enumerate}
\end{exercise}


































\section{Sheaves}
\label{section-sheaves}

\begin{exercise}
Carefully prove that a map of sheaves of {\bf sets}
is an epimorphisms (in the category of sheaves of sets) if and only if the
induced maps on all the stalks are surjective.
\end{exercise}


\begin{exercise}
Let $f : X \to Y$ be a map of topological spaces.
Prove pushforward $f_\ast$ and pullback $f^{-1}$ for sheaves of {\bf sets}
form an adjoint pair of functors.
\end{exercise}

\begin{exercise}
Let $j : U \to X$ be an open immersion. Show
that $j^{-1}$ has a left adjoint $j_{!}$ on the category of sheaves
of sets. Characterize the stalks of $j_{!}({\mathcal G})$. (Hint: $j_{!}$
is called extension by zero when you do this for abelian sheaves... )
\end{exercise}

\begin{exercise}
\label{exercise-not-locally-generated-by-sections}
Let $X = \mathbf{R}$ with the usual topology.
Let $\mathcal{O}_X = \underline{\mathbf{Z}/2\mathbf{Z}}_X$.
Let $i : Z = \{0\} \to X$ be the inclusion and let
$\mathcal{O}_Z = \underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Prove the following (the first three follow from the definitions but if you
are not clear on the definitions you should elucidate them):
\begin{enumerate}
\item $i_*\mathcal{O}_Z$ is a skyscraper sheaf.
\item There is a canonical surjective map from
$\underline{\mathbf{Z}/2\mathbf{Z}}_X \to
i_*\underline{\mathbf{Z}/2\mathbf{Z}}_Z$.
Denote the kernel $\mathcal{I} \subset \mathcal{O}_X$.
\item $\mathcal{I}$ is an ideal sheaf of $\mathcal{O}_X$.
\item The sheaf $\mathcal{I}$ on $X$ cannot be locally generated
by sections (as in
Modules, Definition \ref{modules-definition-locally-generated}.)
\end{enumerate}
\end{exercise}

\begin{exercise}
\label{exercise-quotient-j-shriek-Z}
Let $X$ be a topological space.
Let ${\mathcal F}$ be an abelian sheaf on $X$. Show
that ${\mathcal F}$ is the quotient of a (possibly very large) direct sum
of sheaves all of whose terms are of the form
$$
j_{!}(\underline{{\mathbf Z}}_U)
$$
where $U \subset X$ is open and $\underline{{\mathbf Z}}_U$ denotes the
constant sheaf with value ${\mathbf Z}$ on $U$.
\end{exercise}

\begin{remark}
In the category of abelian sheaves the direct sum of
a family of sheaves $\{{\mathcal F}_i\}_{i\in I}$ is the sheaf associated to
the presheaf $U \mapsto \oplus {\mathcal F}_i(U)$. Consequently the stalk of
the direct sum at a point $x$ is the direct sum of the stalks of the 
${\mathcal F}_i$ at $x$.
\end{remark}

\section{Schemes}
\label{section-schemes}

\noindent
Let $LRS$ be the category of locally ringed spaces.
An affine scheme is an object in $LRS$ isomorphic in $LRS$ to
a pair of the form $(\text{Spec} A, {\mathcal O}_A)$. A scheme is an
object $(X, {\mathcal O}_X)$ of $LRS$ such that every point $x\in X$ 
has an open neighbourhood $U \subset X$ such that the pair
$(U, {\mathcal O}_X|_U)$ is an affine scheme.

\begin{exercise}
\label{exercise-one-point}
Find a $1$-point locally ringed space which is not a scheme.
\end{exercise}

\begin{exercise}
\label{exercise-two-points}
Suppose that $X$ is a scheme whose underlying 
topological space has 2 points. Show that $X$ is an affine scheme.
\end{exercise}

\begin{exercise}
\label{exercise-three-points}
Show that there exists a non-affine scheme having three points.
\end{exercise}

\begin{exercise}
\label{exercise-quasi-compact-closed-point}
Suppose that $X$ is a quasi-compact scheme.
Show that $X$ has a closed point.
\end{exercise}

\begin{remark}
When $(X, {\mathcal O}_X)$ is a ringed space and $U \subset X$
is an open subset then $(U, {\mathcal O}_X|_U)$ is a ringed space. Notation:
${\mathcal O}_U = {\mathcal O}_X|_U$. There is a canonical morphisms
of ringed spaces
$$
	j : (U, {\mathcal O}_U) \longrightarrow (X, {\mathcal O}_X).
$$
If $(X, {\mathcal O}_X)$ is a locally ringed space, so is
$(U, {\mathcal O}_U)$ and
$j$ is a morphism of locally ringed spaces. If $(X, {\mathcal O}_X)$
is a scheme
so is $(U, {\mathcal O}_U)$ and $j$ is a morphism of schemes. We say
that
$(U, {\mathcal O}_U)$ is an {\it open subscheme} of $(X, {\mathcal O}_X)$
and that
$j$ is an {\it open immersion}. More generally, any morphism
$j' : (V, {\mathcal O}_V) \to (X, {\mathcal O}_X)$ that is {\it isomorphic}
to a
morphism $j : (U, {\mathcal O}_U) \to (X, {\mathcal O}_X)$ as above is
called an
open immersion.
\end{remark}

\begin{exercise}
\label{exercise-open-affine-not-affine}
Give an example of an affine scheme $(X, {\mathcal O}_X)$
and an open $U \subset X$ such that $(U, {\mathcal O}_X|U)$ is not an affine
scheme.
\end{exercise}

\begin{exercise}
\label{exercise-morphism-does-not-extend}
Given an example of a pair of affine schemes
$(X, {\mathcal O}_X)$, $(Y, {\mathcal O}_Y)$,
an open subscheme $(U, {\mathcal O}_X|_U)$
of $X$ and a morphism of schemes
$(U, {\mathcal O}_X|_U) \to (Y, {\mathcal O}_Y)$
that does not extend to a morphism of schemes
$(X, {\mathcal O}_X) \to (Y, {\mathcal O}_Y)$.
\end{exercise}

\begin{exercise}
\label{exercise-closed-subscheme-does-not-extend}
(This is pretty hard.)
Given an example of a scheme $X$, and open subscheme $U \subset X$
and a closed subscheme $Z \subset U$ such that $Z$ does not extend
to a closed subscheme of $X$. 
\end{exercise}

\begin{exercise}
\label{exercise-not-morphism-schemes}
Give an example of a scheme $X$, a field $K$, and a
morphism of ringed spaces $\text{Spec} K \to X$ which
is NOT a morphism of schemes.
\end{exercise}

\begin{exercise}
\label{exercise-just-kidding}
Do all the exercises in Hartshorne, \cite[Chapter II]{H},
Sections 1 and 2...\ \ Just kidding!
\end{exercise}

\begin{definition}
\label{definition-integral}
A scheme $X$ is called {\it integral} if for every nonempty affine
open $U \subset X$ the ring $\Gamma(U, \mathcal{O}_X) = \mathcal{O}_X(U)$
is a domain.
\end{definition}

\begin{exercise}
\label{exercise-morphism-integral-schemes-surjective-stalks-not-closed}
Give an example of a morphism of {\it integral}
schemes $f : X \to Y$ such that the induced maps ${\mathcal O}_{Y,f(x)}
\to {\mathcal O}_{X,x}$ are surjective for all $x\in X$, but $f$
is not a closed immersion.
\end{exercise}

\begin{exercise}
\label{exercise-fibre-product-affines-not-affine}
Give an example of a fibre product $X\times_S Y$ such that $X$ and $Y$
are affine but $X\times_S Y$ is not.
\end{exercise}

\begin{remark}
It turns out this cannot happen with $S$ separated. Do you know why?
\end{remark}

\begin{exercise}
\label{exercise-not-geometrically-integral}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over ${\mathbf Q}$ such that
$\text{Spec}{\mathbf C} \times_{\text{Spec}{\mathbf Q}} V$
is not integral.
\end{exercise}

\begin{exercise}
\label{exercise-not-geometrically-reduced}
Give an example of a scheme
$V$ which is integral 1-dimensional scheme of finite type
over a field $k$ such that $\text{Spec} k' \times_{\text{Spec}{k}} V$
is not reduced for some finite field extension $k \subset k'$.
\end{exercise}

\begin{remark}
If your scheme is affine then dimension is the
same as the Krull dimension of the underlying ring. So you can
use last semesters results to compute dimension.
\end{remark}

\begin{exercise}
\label{exercise-for-number-theorists}
(For the number theorists.) Give an example of a closed subscheme
$$
Z \subset \text{Spec} {\mathbf Z}[x, \frac{1 }{ x(x-1)(2x-1)}]
$$
such that the morphism $Z \to \text{Spec} {\mathbf Z}$ is finite
and surjective.
\end{exercise}

\begin{remark}
If you do not like number theory, you can try the 
variant where you look at
$$
\text{Spec} {\mathbf F}_p[t, x, \frac{1 }{ x(x-t)(tx-1)}]  \longrightarrow
\text{Spec} {\mathbf F}_p[t]
$$
and you try to find a closed subscheme of the top scheme
which maps finite surjectively to the bottom one. (There is a
theoretical reason for having a finite ground field here; allthough
it may not be necessary in this particular case.)
\end{remark}


\section{Quasi-coherent Sheaves}
\label{section-quasi-coherent}

\begin{definition}
\label{definition-quasi-coherent}
Let $X$ be a scheme.
A sheaf $\mathcal{F}$ of $\mathcal{O}_X$-modules is {\it quasi-coherent}
if for every affine open $\text{Spec}(R) = U \subset X$ the restriction
$\mathcal{F}|_U$ is of the form $\widetilde M$ for some $R$-module
$M$. (See Schemes, Section \ref{schemes-section-quasi-coherent}.)
\end{definition}

\begin{definition}
\label{definition-specialization}
Let $X$ be a topological space. Let $x, x' \in X$.
We say $x$ is a {\it specialization} of $x'$ 
if and only if $x \in \overline{\{x'\}}$.
\end{definition}

\begin{exercise}
\label{exercise-quasi-coherent-specialization-points}
Let $X$ be a scheme. Let $x, x' \in X$. Let $\mathcal{F}$ be
a quasi-coherent sheaf of $\mathcal{O}_X$-modules.
Suppose that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$. Show that $\mathcal{F}_x \not = 0$.
\end{exercise}

\begin{exercise}
\label{exercise-O-module-specialization-points}
Find an example of a scheme $X$, points $x, x' \in X$,
a sheaf of $\mathcal{O}_X$-modules
$\mathcal{F}$ such that (a) $x$ is a specialization of $x'$ and (b)
$\mathcal{F}_{x'} \not = 0$ and $\mathcal{F}_x = 0$.
\end{exercise}

\section{Proj and projective schemes}
\label{section-proj}

\begin{exercise}
Give examples of graded rings $S$ such that
\begin{enumerate}
\item $\text{Proj}(S)$ is affine and nonempty, and
\item $\text{Proj}(S)$ is integral, nonempty but not isomorphic
to ${\mathbf P}^n_A$ for any $n\geq 0$, any ring $A$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Give an example of a nonconstant morphism
of schemes ${\mathbf P}^1_{\mathbf C} \to {\mathbf P}^5_{\mathbf C}$ over
$\text{Spec}({\mathbf C})$.
\end{exercise}

\begin{exercise}
Give an example of an isomorphism of schemes
$$
{\mathbf P}^1_{\mathbf C} \to
\text{Proj}({\mathbf C}[X_0,X_1,X_2]/(X_0^2+X_1^2+X_2^2))
$$
\end{exercise}

\begin{exercise}
Give an example of a morphism of schemes
$f : X \to {\mathbf A}^1_{\mathbf C}=\text{Spec}({\mathbf C}[T])$ such that the
(scheme theoretic) fibre of $f$ over $t \in {\mathbf A}^1_{\mathbf C}$ is (a)
isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t$ is a closed point not equal
to $0$, and (b) not isomorphic to ${\mathbf P}^1_{\mathbf C}$ when $t=0$. 
\end{exercise}

\begin{remark}
This can be done in many, many ways. Here are some additional restraints
you can impose: Can you do it with fibre at $t=0$ projective? Can you do it
with special fibre irreducible and projective? Can you do it with special
fibre integral and projective? Can you do it with fibre at $t=0$ smooth and
projective? What about similar questions when you replace
${\mathbf P}^1_{\mathbf C}$ with another variety over ${\mathbf C}$?
\end{remark}

\begin{exercise}
Give an example of a surjective morphism
$X \to {\mathbf P}^n_{\mathbf C}$ with $X$ affine.
\end{exercise}

\begin{exercise}
Maps of $\text{Proj}$. Let $R$ and $S$ be graded rings. So
$R = \oplus_{d \geq 0} R_d$ and $R_a \cdot R_b \subset R_{a+b}$.
Suppose we have a ring map
$$
\varphi : R \to S
$$
such that there exists an integer $e \geq 1$ such that
$\varphi( R_d ) \subset S_{de}$.
\begin{enumerate}
\item For which elements $\mathfrak p \in \text{Proj}(S)$ is
there a well-defined corresponding point in $\text{Proj}(R)$? In other words,
find a suitable open $U \subset \text{Proj}(S)$ such that $\varphi$ defines
a continuous map $\text{Proj}(\varphi) : U \to \text{Proj}(R)$.
\item Give an example where $U \not = \text{Proj}(S)$.
\item Give an example where $U = \text{Proj}(S)$.
\item (Do not write this down.) Convince yourself that 
the continuous map $U \to \text{Proj}(R)$ comes canonically with
a map on sheaves so that $\text{Proj}(\varphi)$ is a morphism of schemes:
$$
\text{Proj}(S) \supset U \longrightarrow \text{Proj}(R)
$$
\end{enumerate}
\end{exercise}

\noindent
{\bf Notation.} Let $R$ be a graded ring as above and
let $n \geq 0$ be an integer. Let $X = \text{Proj}(R)$. Then there is a unique
quasi-coherent ${\mathcal O}_X$-module ${\mathcal O}_X(n)$ on $X$ such that
for every homogeneous element $f \in R$ of positive degree we have
${\mathcal O}_X |_{D_{+}(f)}$ is the quasi-coherent sheaf associated to the
$R_{(f)} = (R_f)_0$-module $(R_f)_n$ ($=$elements homogenous of degree
$n$ in $R_f = R[1/f]$). See Hartshorne, page 116+. Note that there are
natural maps
$$
{\mathcal O}_X(n_1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(n_2)
\longrightarrow
{\mathcal O}_X(n_1+n_2)
$$

\begin{exercise}
Pathologies in $\text{Proj}$. 
Give examples of $R$ as above such that
\begin{enumerate}
\item ${\mathcal O}_X(1)$ is not an invertible ${\mathcal O}_X$-module.
\item ${\mathcal O}_X(1)$ is invertible, but the
natural map ${\mathcal O}_X(1) \otimes_{{\mathcal O}_X} {\mathcal O}_X(1) \to
{\mathcal O}_X(2)$ is NOT an isomorphism.
\end{enumerate}
\end{exercise}



\section{Invertible sheaves}
\label{section-invertible-sheaves}

\noindent
An invertible ${\mathcal O}_X$-module on a locally
ringed space $(X,{\mathcal O}_X)$
is a sheaf of ${\mathcal O}_X$-modules ${\mathcal L}$ such that every point
has an open neighbourhood $U \subset X$ such that ${\mathcal L}|_U$
is isomorphic to ${\mathcal O}_U$ as ${\mathcal O}_U$-module.
We say that ${\mathcal L}$ is trivial if it is isomorphic to 
${\mathcal O}_X$ as a ${\mathcal O}_X$-module.

\begin{exercise}
General facts.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on 
a scheme $X$ is quasi-coherent.
\item Suppose $X\to Y$ is a morphism of ringed spaces,
and ${\mathcal L}$ an invertible ${\mathcal O}_Y$-module.
Show that $f^\ast {\mathcal L}$ is an invertible ${\mathcal O}_X$ module.
\end{enumerate}
\end{exercise}

\begin{exercise}
Algebra.
\begin{enumerate}
\item Show that an invertible ${\mathcal O}_X$-module on 
an affine scheme $\text{Spec} A$ corresponds to an $A$-module $M$ which is
(i) finite, (ii) projective, (iii) locally free of rank 1,
and hence (iv) flat, and (v) finitely presented. (Feel free to
quote things from last semesters course; or from algebra books.)
\item Suppose that $A$ is a domain and that $M$ is
a module as in (a). Show that $M$ is isomorphic as an $A$-module
to an ideal $I \subset A$ such that $IA_{\mathfrak p}$ is principal for
every prime ${\mathfrak p}$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Simple examples.
\begin{enumerate}
\item Let $k$ be a field. Let $A = k[x]$.
Show that $X=\text{Spec} A$ has only trivial invertible ${\mathcal 
O}_X$-modules.
\item Let $A$ be the ring
$$
A = \{ f\in k[x] \mid f(0)=f(1) \}.
$$
Show that $X = \text{Spec} A$ has a nontrivial invertible ${\mathcal 
O}_X$-module,
unless $k={\mathbf F}_2$. (Hint: Think about $\text{Spec} A$ as identifying
$0$ and $1$ in ${\mathbf A}^1_k=\text{Spec} k[x]$.)
\item Same question for the ring $A = k[x^2,x^3] \subset
k[x]$ (except now $k = {\mathbf F}_2$ works as well).
\end{enumerate}
\end{exercise}

\begin{exercise}
Higher dimensions.
\begin{enumerate}
\item Prove that every invertible sheaf on two dimensional
affine space is trivial. More precisely, let 
${\mathbf A}^2_k = \text{Spec} k[x,y]$ where $k$ is a field.
Show that every invertible sheaf on ${\mathbf A}^2_k$ is trivial.
(Hint: One way to do this is to consider the corresponding
module $M$, to look at $M \otimes_{k[x,y]} k(x)[y]$, and
then use 3(a) to find a generator for this; then you still have to think.
Another way to is to use 2(b) and use what we know about ideals of the
polynomial ring: primes of height one are generated by an irreducible
polynomial; then you still have to think.)
\item Prove that every invertible sheaf on any open
subscheme of two dimensional affine space is trivial. More precisely, let 
$U \subset {\mathbf A}^2_k$ be an open subscheme where $k$ is a field.
Show that every invertible sheaf on $U$ is trivial. Hint: Show that every
invertible sheaf on $U$ extends to one on ${\mathbf A}^2_k$. Not easy;
but you can find it in Hartshorne.
\item Find an example of a nontrivial
invertible sheaf on a punctured cone over a field. More
precisely, let $k$ be a field and let $C = \text{Spec} k[x,y,z]/(xy-z^2)$.
Let $U = C \setminus \{ (x,y,z) \}$. Find a nontrivial
invertible sheaf on $U$. Hint: It may be easier to compute the
group of isomorphism classes of invertible sheaves on $U$ than to
just find one. Note that $U$ is covered by the opens 
$\text{Spec} k[x,y,z,1/x]/(xy-z^2) $ and $\text{Spec} k[x,y,z,1/y]/(xy-z^2)$
which are ``easy'' to deal with.
\end{enumerate}
\end{exercise}

\section{{\v C}ech Cohomology}
\label{section-cech-cohomology}

\begin{exercise}
{\v C}ech cohomology. Here $k$ is a field.
\begin{enumerate}
\item Let $X$ be a scheme with an open covering
${\mathcal U} : X = U_1 \cup U_2$, with $U_1 = \text{Spec} k[x]$, $U_2= 
\text{Spec} k[y]$
with $U_1 \cap U_2 = \text{Spec} k[z,1/z]$ and with open immersions
$U_1 \cap U_2 \to U_1$ resp.\ $U_1 \cap U_2 \to U_2$ determined
by $x \mapsto z$ resp.\ $y \mapsto z$ (and I really mean this).
(We've seen in the lectures that such an $X$ exists; it is the affine
line zith zero doubled.) Compute ${\mathaccent 20 H}^1({\mathcal U}, {\mathcal 
O})$;
eg.\ give a basis for it as a $k$-vectorspace.
\item For each element in
${\mathaccent 20 H}^1({\mathcal U}, {\mathcal O})$
construct an exact sequence of sheaves of ${\mathcal O}_X$-modules
$$
0 \to {\mathcal O}_X \to E \to {\mathcal O}_X \to 0
$$ 
such that the boundary $\delta(1) \in {\mathaccent 20 H}^1({\mathcal U}, 
{\mathcal O})$
equals the given element. (Part of the problem is to make sense of this.
See also below.
It is also OK to show abstractly such a thing has to exist.)
\end{enumerate}
\end{exercise}

\begin{definition}
\label{definition-delta}
(Definition of delta.) Suppose that 
$$
0 \to {\mathcal F}_1 \to {\mathcal F}_2 \to {\mathcal F}_3 \to 0
$$
is a short exact sequence of abelian sheaves on any topological space $X$.
The boundary map
$\delta : H^0(X, {\mathcal F}_3) \to {\mathaccent 20 H}^1(X, {\mathcal F}_1)$
is defined as follows. Take an element $\tau \in H^0(X, {\mathcal F}_3)$.
Choose an open covering ${\mathcal U} : X = \bigcup_{i\in I} U_i$ such
that for each $i$ there exists a section $\tilde \tau_i \in {\mathcal F}_2$
lifting the restriction of $\tau$ to $U_i$. Then consider the assignment
$$
(i_0, i_1) \longmapsto
\tilde \tau_{i_0}|_{U_{i_0i_1}} - \tilde \tau_{i_1}|_{U_{i_0i_1}}.
$$
This is clearly a 1-coboundary in the {\v C}ech complex
${\mathaccent 20 C}^\ast({\mathcal U}, {\mathcal F}_2)$. But we observe that
(thinking of ${\mathcal F}_1$ as a subsheaf of ${\mathcal F}_2$) the RHS
always is a section of ${\mathcal F}_1$ over $U_{i_0i_1}$. Hence we
see that the assignment defines a 1-cochain in the complex
${\mathaccent 20 C}^\ast({\mathcal U}, {\mathcal F}_2)$. The cohomology
class of this 1-cochain is by definition {\it $\delta(\tau)$}.
\end{definition}



\section{Divisors}
\label{section-divisors}

\noindent
We collect all relevant definitions here in one spot for convenience.

\begin{definition}
\label{definition-divisor}
Throughout, let $S$ be any scheme and let
$X$ be a Noetherian, integral and separated scheme.
\begin{enumerate}
\item A {\it Weil divisor} is a formal linear combination
$\Sigma n_i[Z_i]$ of prime divisors $Z_i$ with integer coefficients.
\item A {\it prime divisor} is a closed subscheme $Z \subset X$,
which is integral with generic point $\xi \in Z$ such that
${\mathcal O}_{X,\xi}$ has dimension $1$. We will use the notation 
${\mathcal O}_{X,Z} = {\mathcal O}_{X,\xi}$
when $\xi \in Z \subset X$ is as above. Note that ${\mathcal O}_{X,Z} \subset
K(X)$ is a subring of the function field of $X$.
\item The {\it Weil divisor associated to a rational function
$f \in K(X)^\ast$} is the sum $\Sigma v_Z(f)[Z]$. Here $v_Z(f)$ is
defined as follows
\begin{enumerate}
\item If $f \in {\mathcal O}_{X,Z}^\ast$ then $v_Z(f)=0$.
\item If $f \in {\mathcal O}_{X,Z}$ then 
$$
v_Z(f)=\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(f)).
$$
\item If $f = \frac{a}{b}$ with $a,b \in {\mathcal O}_{X,Z}$
then 
$$
v_Z(f)=\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(a)) -
\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(b)).
$$
\end{enumerate}
\item An {\it effective Cartier divisor} on a scheme $S$
is a closed subscheme $D \subset S$ such that every point $d\in D$
has an affine open neighbourhood $\text{Spec} A = U \subset S$ in $S$
so that $D \cap U = \text{Spec} A/(f)$ with $f \in A$ a nonzero divisor.
\item The {\it Weil divisor $[D]$ associated to an effective
Cartier divisor $D \subset X$} of our Noetherian integral separated
scheme $X$ is defined as the sum $\Sigma v_Z(D)[Z]$ where
$v_Z(D)$ is defined as follows
\begin{enumerate}
\item If the generic point $\xi$ of $Z$ is not in $D$
then $v_Z(D)=0$.
\item If the generic point $\xi$ of $Z$ is in $D$
then 
$$
v_Z(D)=\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(f))
$$
where $f \in {\mathcal O}_{X,Z}={\mathcal O}_{X,\xi}$ is the nonzero divisor
which defines $D$ in an affine neighbourhood of $\xi$ (as in definition
{\bf (d)} above).
\end{enumerate}
\item Let $S$ be a scheme. The {\it sheaf of total quotient
rings ${\mathcal K}_S$} is the sheaf of ${\mathcal O}_S$-algebras which is
the sheafification of the pre-sheaf ${\mathcal K}'$ defined as follows.
For $U \subset S$ open we set ${\mathcal K}'(U) = S_U^{-1}{\mathcal O}_S(U)$
where $S_U \subset {\mathcal O}_S(U)$ is the multiplicative subset
consisting of sections $f \in {\mathcal O}_S(U)$ such that the germ
of $f$ in ${\mathcal O}_{S,u}$ is a nonzero divisor for every $u\in U$.
In particular the elements of $S_U$ are all nonzero divisors.
Thus ${\mathcal O}_S$ is a subsheaf of ${\mathcal K}_S$, and we get a
short exact sequence
$$
0 \to {\mathcal O}_S^\ast \to {\mathcal K}_S^\ast \to
{\mathcal K}_S^\ast/{\mathcal O}_S^\ast \to 0.
$$
\item A {\it Cartier divisor} on a scheme $S$ is a global
section of the quotient sheaf ${\mathcal K}_S^\ast/{\mathcal O}_S^\ast$.
\item The {\it Weil divisor associated to a Cartier divisor}
$\tau \in \Gamma(X, {\mathcal K}_X^\ast/{\mathcal O}_X^\ast)$ over our 
Noetherian integral separated scheme
$X$ is the sum $\Sigma v_Z(\tau)[Z]$ where $v_Z(\tau)$ is defined
as by the following recipe
\begin{enumerate}
\item If the germ of $\tau$ at the generic point $\xi$
of $Z$ is zero -- in other words the image of $\tau$ in the stalk
$({\mathcal K}^\ast/{\mathcal O}^\ast)_\xi$ is ``zero'' -- then $v_Z(\tau)=0$.
\item Find an affine open neighbourhood $\text{Spec} A = U \subset X$
so that $\tau|_U$ is the image of a section $f \in {\mathcal K}(U)$
and moreover $f = a/b$ with $a,b \in A$. Then we set
$$
v_Z(f)=\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(a)) -
\text{length}_{{\mathcal O}_{X,Z}}({\mathcal O}_{X,Z}/(b)).
$$
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{remarks}
Here are some trivial remarks.
\begin{enumerate}
\item On a Noetherian integral separated scheme $X$ the 
sheaf ${\mathcal K}_X$ is constant with value the function field $K(X)$.
\item To make sense out of the definitions above one needs
to show that
$$
\text{length}_{\mathcal O}({\mathcal O}/(ab)) =
\text{length}_{\mathcal O}({\mathcal O}/(a)) +
\text{length}_{\mathcal O}({\mathcal O}/(b))
$$
for any pair $(a,b)$ of nonzero elements of a Noetherian 1-dimensional
local domain ${\mathcal O}$. This will be done in the lectures.
\end{enumerate}
\end{remarks}

\begin{exercise}
Describe how to assign a Cartier divisor
to an effective Cartier divisor.
\end{exercise}

\noindent
The following questions have some logical dependencies; if you point them
out then you won't have to do all of them.

\begin{exercise}
Give an example of a Weil divisor
(on a Noetherian integral separated scheme) which is not
the Weil divisor associated to a rational function.
\end{exercise}

\begin{exercise}
Give an example of a Weil divisor
(on a Noetherian integral separated scheme) which is not
the Weil divisor associated to any effective Cartier divisor.
\end{exercise}

\begin{exercise}
Give an example of a Weil divisor
(on a Noetherian integral separated scheme) which is not
the Weil divisor associated to any Cartier divisor.
\end{exercise}

\begin{exercise}
Give an example of a Weil divisor $D$
(on a Noetherian integral separated scheme) which is not
the Weil divisor associated to any Cartier divisor but
such that $nD$ is the Weil divisor associate to a Cartier
divisor for some $n>1$.
\end{exercise}

\begin{exercise}
Give an example of a Weil divisor $D$
(on a Noetherian integral separated scheme) which is not
the Weil divisor associated to any Cartier divisor and
such that $nD$ is NOT the Weil divisor associate to a Cartier
divisor for any $n>1$.
\end{exercise}

\begin{exercise}
Give an example of a Cartier divisor
which is not the difference of (the Cartier divisors associated
to) two effective Cartier divisors.
\end{exercise}

\section{Differentials}
\label{section-differentials}

\noindent
{\bf Definitions and results.} K\"ahler differentials.
\begin{enumerate}
\item Let $R \to A$ be a ring map. The {\it module of K\"ahler
differentials of $A$ over $R$} is 
$$
\Omega^1_{A/R} = \bigoplus\nolimits_{a\in A} A \cdot {\rm d}a \Big/
\big\langle {\rm d}(a_1a_2)-a_1{\rm d}a_2-a_2{\rm d}a_1, {\rm d}r\big\rangle.
$$
The canonical universal $R$-derivation ${\rm d} : A \to \Omega^1_{A/R}$ 
maps $a\mapsto {\rm d}a$.
\item Consider the short exact sequence
$$
0 \to I \to A\otimes_R A \to A \to 0
$$
which defines the ideal $I$. There is a canonical derivation
${\rm d} : A \to I/I^2$ which maps $a$ to the class of
$a\otimes 1 - 1 \otimes a$. This is another presentation of
the module of derivations of $A$ over $R$, in other words
$$
(I/I^2, {\rm d}) \cong (\Omega^1_{A/R}, {\rm d}).
$$
\item For multiplicative subsets $S_R \subset R$ and
$S_A \subset A$ such that $S_R$ maps into $S_A$ we have
$$
\Omega^1_{S_A^{-1}A / S_R^{-1}R} =
S_A^{-1}\Omega^1_{A/R}.
$$
\item If $A$ is a finitely presented $R$-algebra then
$\Omega^1_{A/R}$ is a finitely presented $A$-module. Hence in
this case the {\it fitting} ideals of $\Omega^1_{A/R}$ are defined.
(See exercise set 6 of last semester.)
\item Let $f : X \to S$ be a morphism of schemes. There is
a quasi-coherent sheaf of ${\mathcal O}_X$-modules $\Omega^1_{X/S}$
and a ${\mathcal O}_S$-linear derivation 
$$
{\rm d} : {\mathcal O}_X \longrightarrow \Omega^1_{X/S}
$$
such that for any affine opens $\text{Spec} A \subset X$, $\text{Spec} R 
\subset S$
with $f(\text{Spec} A) \subset \text{Spec} R$ we have
$$
\Gamma(\text{Spec} A, \Omega^1_{X/S}) = \Omega^1_{A/R}
$$
compatibly with ${\rm d}$.
\end{enumerate}

\begin{exercise}
Let $k[\epsilon]$ be the ring of dual numbers
over the field $k$, i.e., $\epsilon^2=0$.
\begin{enumerate}
\item Consider the ring map
$$
R = k[\epsilon] \to A = k[x,\epsilon]/(\epsilon x)
$$
Show that the fitting ideals of $\Omega^1_{A/R}$ are (starting with the
zeroth fitting ideal)
$$
(\epsilon), A, A,\ldots
$$
\item Consider the map $R=k[t] \to 
A=k[x,y,t]/(x(y-t)(y-1),x(x-t))$. Show that the fitting ideals of
of $\Omega^1_{A/R}$ in $A$ are (assume characteristic $k$ is zero
for simplicity)
$$
x(2x-t)(2y-t-1)A,\ (x,y,t)\cap (x,y-1,t),\ A,\ A,\ldots
$$
So the $0$-the fitting ideal is cut out by a single element of $A$,
the $1$st fitting ideal defines two closed points of $\text{Spec} A$, and
the others are all trivial.
\item Consider the map $R=k[t] \to A=k[x,y,t]/(xy-t^n)$.
Compute the fitting ideals of $\Omega^1_{A/R}$.
\end{enumerate}
\end{exercise}

\begin{remark}
The $k$th fitting ideal of $\Omega^1_{X/S}$ is commonly used
to define the singular scheme of the morphism $X \to S$ when $X$ has relative
dimension $k$ over $S$. But as part (a) shows, you have to be careful doing
this when your family does not have ``constant'' fibre dimension, e.g., when 
it is not flat. As part (b) shows, flatness doesn't garantee it works either
(and yes this is a flat family). In ``good cases'' -- such as in (c) -- for
families of curves you expect the $0$-th fitting ideal to be zero and
the $1$st fitting ideal to define (scheme-theoretically) the singular locus.
\end{remark}

\begin{exercise}
Suppose that $R$ is a ring and 
$$
A = k[x_1,\ldots,x_n]/(f_1,\ldots,f_n).
$$
Note that we are assuming that $A$ is presented by the same
number of equations as variables. Thus the matrix of partial
derivatives
$$
( \partial f_i / \partial x_j )
$$
is $n\times n$, i.e., a square matrix. Assume that
its determinant is invertible as an element in $A$. Note that
this is exactly the condition that says that $\Omega^1_{A/R} = (0)$
in this case of $n$-generators and $n$ relations.
Let $\pi : B' \to B$ be a surjection of $R$-algebras 
whose kernel $J$ has square zero (as an ideal in $B'$).
Let $\varphi : A \to B$ be a homomorphism of $R$-algebras. 
Show there exists a unique homomorphism of $R$-algebras
$\varphi' : A \to B'$ such that $\varphi = \pi \circ \varphi'$.
\end{exercise}

\begin{exercise}
Find a generalization
of the result of the previous exercise to the case where $A=R[x,y]/(f)$.
\end{exercise}

\section{Schemes, Final Exam}
\label{section-final-exam}

\begin{exercise}
Definitions. Provide definitions of the following concepts.
\begin{enumerate}
\item $X$ is a {\it scheme} 
\item the morphism of schemes $f : X \to Y$ is {\it finite}
\item the morphisms of schemes $f : X \to Y$ is {\it of finite type}
\item the scheme $X$ is {\it Noetherian}
\item the ${\mathcal O}_X$-module ${\mathcal L}$ on
the scheme $X$ is {\it invertible}
\item the {\it genus} of a nonsingular
projective curve over an algebraically closed field
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $X = \text{Spec} {\mathbf Z}[x,y]$, and let ${\mathcal F}$ be a 
quasi-coherent
${\mathcal O}_X$-module. Suppose that ${\mathcal F}$ is zero when restricted to 
the
standard affine open $D(x)$.
\begin{enumerate}
\item Show that every global section $s$ of ${\mathcal F}$ is killed by some
power of $x$, i.e., $x^ns=0$ for some $n\in {\mathbf N}$.
\item Do you think the same is true if we do not assume that ${\mathcal F}$
is quasi-coherent?
\end{enumerate}
\end{exercise}

\begin{exercise}
Suppose that $X \to \text{Spec}(R)$ is a proper morphism and that
$R$ is a discrete valuation ring with residue field $k$. Suppose that
$X \times_{\text{Spec} R} \text{Spec} k$ is the empty scheme. Show that
$X$ is the empty scheme.
\end{exercise}

\begin{exercise}
Consider the
projective\footnote{The projective embedding is
$((X_0,X_1),(Y_0,Y_1))\mapsto (X_0Y_0,X_0Y_1,X_1Y_0,X_1Y_1)$
in other words $(x,y)\mapsto (1,y,x,xy)$.} variety
$$
{\mathbf P}^1 \times {\mathbf P}^1 = {\mathbf P}^1_{{\mathbf C}} 
\times_{\text{Spec} {\mathbf C}} {\mathbf P}^1_{\mathbf C}
$$
over the field of complex numbers ${\mathbf C}$. It is covered by four affine 
pieces,
corresponding to pairs of standard affine pieces of ${\mathbf P}^1_{\mathbf 
C}$. For example,
suppose we use homogenous coordinates $X_0, X_1$ on the first factor and
$Y_0, Y_1$ on the second. Set $x=X_1/X_0$, and $y=Y_1/Y_0$. Then the 4 affine
open pieces are the spectra of the  rings
$$ 
{\mathbf C}[x,y],\ 
{\mathbf C}[x^{-1},y],\ 
{\mathbf C}[x,y^{-1}],\ 
{\mathbf C}[x^{-1},y^{-1}].
$$
Let $X \subset {\mathbf P}^1 \times {\mathbf P}^1$ be the closed subscheme 
which is the
closure of the closed subset of the first affine piece given by the equation
$$
y^3(x^4+1) = x^4 -1.
$$
\begin{enumerate}
\item Show that $X$ is contained in the union of the first and
the last of the 4 affine open pieces.
\item Show that $X$ is a nonsingular projective curve.
\item Consider the morphism $pr_2 : X \to {\mathbf P}^1$ (projection onto
the first factor). On the first affine piece it is the map $(x,y) \mapsto x$.
Briefly explain why it has degree $3$.
\item Compute the ramification points and ramification indices 
for the map $pr_2 : X \to {\mathbf P}^1$.
\item Compute the genus of $X$.
\end{enumerate}
\end{exercise}

\begin{exercise}
Let $X \to \text{Spec} {\mathbf Z}$ be a morphism of finite type. Suppose that
there is an infinite number of primes $p$ such that
$X\times_{\text{Spec} {\mathbf Z}} \text{Spec} {\mathbf F}_p$ is not empty. 
\begin{enumerate}
\item Show that $X \times_{\text{Spec} {\mathbf Z}}\text{Spec} \mathbf{Q}$ is 
not empty.
\item Do you think the same is true if we replace the condition
``finite type'' by the condition ``locally of finite type''?
\end{enumerate}
\end{exercise}


\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}

