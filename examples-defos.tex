\input{preamble}

% OK, start here.
%
\begin{document}

\title{Deformation Problems}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
The goal of this chapter is to work out examples of the general theory
developed in the chapters Formal Deformation Theory,
Deformation Theory, The Cotangent Complex.

\medskip\noindent
Section 3 of the paper \cite{Sch} by Schlessinger discusses some
examples as well.






\section{Examples of deformation problems}
\label{section-examples}

\noindent
List of things that should go here:
\begin{enumerate}
\item Deformations of schemes:
\begin{enumerate}
\item The Rim-Schlessinger condition.
\item Computing the tangent space.
\item Computing the infinitesimal deformations.
\item The deformation category of an affine hypersurface.
\end{enumerate}
\item Deformations of representations of abstract groups.
\item Deformations of representations of topological groups
(e.g., profinite ones).
\item Deformations of sheaves (for example fix $X/S$, a finite type point
$s$ of $S$, and a quasi-coherent sheaf $\mathcal{F}_s$ over $X_s$).
\item Deformations of algebraic spaces (very similar to deformations
of schemes; maybe even easier?).
\item Deformations of maps (eg morphisms between schemes; you can fix
both or one of the target and/or source).
\item Add more here.
\end{enumerate}





\section{General outline}
\label{section-general}

\noindent
This section lays out the procedure for discussing the next few examples.

\medskip\noindent
Throughout this section we fix a Noetherian ring $\Lambda$ and
we fix a finite ring map $\Lambda \to k$ where $k$ is a field.
As usual we let $\mathcal{C}_\Lambda$ be our base category, see
Definition \ref{definition-CLambda}. Here are our examples.

\medskip\noindent
Let $x_0$ be any object of $\mathcal{F}(k)$ for $\mathcal{F}$ as in
Lemma \ref{lemma-examples-have-RS}. Then $\mathcal{F}_{x_0}$ is
a deformation category, see Lemma \ref{lemma-localize-RS}.
In particular, $\mathcal{F}_{x_0}$ satisfies (S1) and (S2)
(Lemma \ref{lemma-RS-implies-S1-S2}). Thus an important question
is now whether the tangent space
$$
T_{x_0}\mathcal{F} = T\mathcal{F}_{x_0}
$$
(see Remark \ref{remark-tangent-space-cofibered-groupoid} and
Definition \ref{definition-tangent-space})
is finite dimensional. Namely, this insures that
$\mathcal{F}_{x_0}$ has a versal formal object
(Lemma \ref{lemma-versal-object-existence}).
Finally, we want to see if
$$
\text{Inf}_{x_0}(\mathcal{F})
$$
is finite dimensional. Namely, this will imply that
$\mathcal{F}_{x_0}$ admits a presentation by a
smooth prorepresentable groupoid in functors on $\mathcal{C}_\Lambda$, see
Theorem \ref{theorem-presentation-deformation-groupoid}.




\section{Finite projective modules}
\label{section-finite-projective-modules}

\begin{example}[Finite projective modules]
\label{example-finite-projective-modules}
Let $\mathcal{F}$ be the category defined as follows
\begin{enumerate}
\item an object is a pair $(A, M)$ consisting of an
object $A$ of $\mathcal{C}_\Lambda$ and a
finite projective $A$-module $M$, and
\item a morphism $(f, g) : (B, N) \to (A, M)$ consists of
a morphism $f : B \to A$ in $\mathcal{C}_\Lambda$ together
with a map $g : N \to M$ which is $f$-linear and induces
an isomorpism $N \otimes_{B, f} A \cong M$.
\end{enumerate}
The functor $p : \mathcal{F} \to \mathcal{C}_\Lambda$ sends $(A, M)$ to $A$
and $(f, g)$ to $f$. It is clear that $p$ is cofibred in groupoids.
Since every finite projective module over a local ring is finite free
(Algebra, Lemma \ref{algebra-lemma-finite-projective})
we see that
$$
\begin{matrix}
\text{isomorphism classes} \\
\text{of objects of }\mathcal{F}(A)
\end{matrix}
= \coprod\nolimits_{n \geq 0} \{*\}
$$
\end{example}

\begin{lemma}
\label{lemma-finite-projective-modules-RS}
Example \ref{example-finite-projective-modules}
satisfies the Rim-Schlessinger condition (RS).
\end{lemma}

\begin{proof}
Let $A_1 \to A$ and $A_2 \to A$ be morphisms of $\mathcal{C}_\Lambda$.
Assume $A_2 \to A$ is surjective.
According to Lemma \ref{lemma-RS-2-categorical}
it suffices to show that the functor
$\mathcal{F}(A) \to \mathcal{F}(A_1) \times_{\mathcal{F}(A)} \mathcal{F}(A_2)$
is an equivalence of categories.

\medskip\noindent
We first do this in Example \ref{example-finite-projective-modules}.
Here we have to show that the category of finite projective modules
over $A_1 \times_A A_2$ is equivalent to the fibre product
of the categories of finite projective modules over $A_1$ and $A_2$
over the category of finite projective modules over $A$.
This is a special case of More on Algebra, Lemma
\ref{more-algebra-lemma-finitely-presented-module-over-fibre-product}.
We recall that the inverse functor sends the triple
$(M_1, M_2, \varphi)$ where
$M_1$ is a finite projective $A_1$-module,
$M_2$ is a finite projective $A_2$-module, and
$\varphi : M_1 \otimes_{A_1} A \to M_2 \otimes_{A_2} A$
is an isomorphism of $A$-module, to the finite projective
$A_1 \times_A A_2$-module $M_1 \times_\varphi M_2$.
\end{proof}

\begin{lemma}
\label{lemma-finite-projective-modules-TI}
In Example \ref{example-finite-projective-modules} if $x_0 = (k, V)$, then
$$
T_{x_0}\mathcal{F} = (0)
\quad\text{and}\quad
\text{Inf}_{x_0}(\mathcal{F}) = \text{End}_k(V)
$$
are finite dimensional.
\end{lemma}

\begin{proof}
Recall that in each case $T_{x_0}\mathcal{F}$ is the set of isomorphism
classes of pairs $(x, \alpha)$ consisting of an object $x$ of $\mathcal{F}
$ over the dual numbers $k[\epsilon]$ and a morphism
$\alpha : x \to x_0$ of $\mathcal{F}$ lying over $k[\epsilon] \to k$.
Similarly, $\text{Inf}_{x_0}(\mathcal{F})$ is the set of automorphisms
of the trivial deformation $x'_0$ of $x_0$ over $k[\epsilon]$ (see
Definition \ref{definition-infinitesimal-auts} for more details).

\medskip\noindent
Proof of (1). Of course this is trivial, but we work it out in some
detail to fix notation for the next cases. Namely, up to isomorphism,
there is a unique pair $(M, \alpha)$ consisting of a
finite projective module $M$ over $k[\epsilon]$
and $k[\epsilon]$-linear map $\alpha : M \to V$
which induces an isomorphism $M \otimes_{k[\epsilon]} k \to V$.
For example, if $V = k^{\oplus n}$, then we take
$M = k[\epsilon]^{\oplus n}$ with the obvious map $\alpha$.
Given $(M, \alpha)$, we see that an element of
$\text{Inf}_{x_0}(\mathcal{F})$ is an automorphism $\gamma : M \to M$ with
$\gamma \bmod \epsilon = \text{id}$. Then we can write
$\gamma = \text{id}_M + \epsilon \psi$ where
$\psi : M/\epsilon M \to M/\epsilon M$ is $k$-linear.
Using $\alpha$ we can think of $\psi$ as an element of
$\text{End}_k(V)$ and this finishes the proof in this case.
\end{proof}




\section{Representations of a group}
\label{section-representations}


\begin{example}[Representations of a group]
\label{example-representations}
Let $\Gamma$ be a group.
Let $\mathcal{F}$ be the category defined as follows
\begin{enumerate}
\item an object is a triple $(A, M, \rho)$ consisting of an
object $A$ of $\mathcal{C}_\Lambda$, a finite projective $A$-module $M$,
and a homomorphism $\rho : \Gamma \to \text{GL}_A(M)$, and
\item a morphism $(f, g) : (B, N, \tau) \to (A, M, \rho)$ consists of
a morphism $f : B \to A$ in $\mathcal{C}_\Lambda$ together
with a map $g : N \to M$ which is $f$-linear and $\Gamma$-equivariant
and induces an isomorpism $N \otimes_{B, f} A \cong M$.
\end{enumerate}
The functor $p : \mathcal{F} \to \mathcal{C}_\Lambda$ sends $(A, M, \rho)$
to $A$ and $(f, g)$ to $f$. It is clear that $p$ is cofibred in groupoids.
Since every finite projective module over a local ring is finite free
(Algebra, Lemma \ref{algebra-lemma-finite-projective})
we see that
$$
\begin{matrix}
\text{isomorphism classes} \\
\text{of objects of }\mathcal{F}(A)
\end{matrix}
=
\coprod\nolimits_{n \geq 0}\quad
\begin{matrix}
\text{GL}_n(A)\text{-conjugacy classes of}\\
\text{homomorphisms }\rho : \Gamma \to \text{GL}_n(A)
\end{matrix}
$$
\end{example}

\begin{lemma}
\label{lemma-representations-RS}
Example \ref{example-representations}
satisfies the Rim-Schlessinger condition (RS).
\end{lemma}

\begin{proof}
All the other cases follow more or less immediately from the first case.
For example, in Example \ref{example-representations}, consider an object
$$
((A_1, M_1, \rho_1), (A_2, M_2, \rho_2), (\text{id}_A, \varphi))
$$
of the category $\mathcal{F}(A_1) \times_{\mathcal{F}(A)} \mathcal{F}(A_2)$.
Then, as seen above, we can consider the finite projective
$A_1 \times_A A_2$-module $M_1 \times_\varphi M_2$.
Since $\varphi$ is compatible with the given actions we obtain
$$
\rho_1 \times \rho_2 : \Gamma \longrightarrow
\text{GL}_{A_1 \times_A A_2}(M_1 \times_\varphi M_2)
$$
Then $(M_1 \times_\varphi M_2, \rho_1 \times \rho_2)$
is an object of $\mathcal{F}(A_1 \times_A A_2)$.
This construction determines a quasi-inverse to our functor
and the proof is complete in this case.
\end{proof}

\begin{lemma}
\label{lemma-representations-TI}
In Example \ref{example-representations}
if $x_0 = (k, V, \rho_0)$, then
$$
T_{x_0}\mathcal{F} = \Ext^1_{k[\Gamma]}(V, V) =
H^1(\Gamma, \text{End}_k(V))
\quad\text{and}\quad
\text{Inf}_{x_0}(\mathcal{F}) = H^0(\Gamma, \text{End}_k(V))
$$
are finite dimensional if $\Gamma$ is finitely generated.
\end{lemma}

\begin{proof}
Proof of (2). We first deal with the infinitesimal automorphisms.
Let $M = V \otimes_k k[\epsilon]$ with induced action
$\rho_0' : \Gamma \to \text{GL}_n(M)$.
Then an element of $\text{Inf}_{x_0}(\mathcal{F})$
is given by an automorphism
$\gamma = \text{id} + \epsilon \psi : M \to M$
as above, where moreover $\psi$ has to commute
with the action of $\Gamma$ (given by $\rho_0$).
Thus we see that
$$
\text{Inf}_{x_0}(\mathcal{F}) = H^0(\Gamma, \text{End}_k(V))
$$
as predicted in the lemma. Next, let $(M, \rho)$ be an object
of $\mathcal{F}$ over $k[\epsilon]$ and let
$\alpha : M \to V$ be a $\Gamma$-equivariant map
inducing an isomorphism $M/\epsilon M \to V$.
Since $M$ is free as a $k[\epsilon]$-module we obtain
an extension of $\Gamma$-modules
$$
0 \to V \to M \xrightarrow{\alpha} V \to 0
$$
(We omit the detailed construction of the map on the left.)
Conversely, if we have an extension of $\Gamma$-modules as
above, then we can use this to make a $k[\epsilon]$-module
structure on $M$ and get an object of $\mathcal{F}(k[\epsilon])$
together with a map $\alpha$ as above.
It follows that
$$
T_{x_0}\mathcal{F} = \Ext^1_{k[\Gamma]}(V, V)
$$
as predicted in the lemma. In the category of $k[\Gamma]$-modules
the functor $\Hom_{k[\Gamma]}(V, -)$ is identical to
$H^0(\Gamma, V^\vee \otimes_k -)$ where $V^\vee$ is the contragredient
representation. This implies also that if $I$ is an injective object, then
$V^\vee \otimes_k I$ is an injective object as well. We conclude that
$$
\Ext^1_{k[\Gamma]}(V, V) = H^1(\Gamma, V^\vee \otimes_k V) =
H^1(\Gamma, \text{End}_k(V))
$$
Finally, if $\Gamma$ is a finitely generated group, then by using
cocycles to compute group cohomology
(see \'Etale Cohomology, Section
\ref{etale-cohomology-section-group-cohomology})
we find that this cohomology group is finite dimensional.
\end{proof}




\section{Continuous represetations}
\label{section-continuous-representations}


\begin{example}[Representations of a topological group]
\label{example-continuous-representations}
Let $\Gamma$ be a topological group.
Let $\mathcal{F}$ be the category defined as follows
\begin{enumerate}
\item an object is a triple $(A, M, \rho)$ consisting of an
object $A$ of $\mathcal{C}_\Lambda$, a finite projective $A$-module $M$,
and a continuous homomorphism $\rho : \Gamma \to \text{GL}_A(M)$
where $\text{GL}_A(M)$ is given the discrete topology, and
\item a morphism $(f, g) : (B, N, \tau) \to (A, M, \rho)$ consists of
a morphism $f : B \to A$ in $\mathcal{C}_\Lambda$ together
with a map $g : N \to M$ which is $f$-linear and $\Gamma$-equivariant
and induces an isomorpism $N \otimes_{B, f} A \cong M$.
\end{enumerate}
The functor $p : \mathcal{F} \to \mathcal{C}_\Lambda$ sends $(A, M, \rho)$
to $A$ and $(f, g)$ to $f$. It is clear that $p$ is cofibred in groupoids.
Since every finite projective module over a local ring is finite free
(Algebra, Lemma \ref{algebra-lemma-finite-projective})
we see that
$$
\begin{matrix}
\text{isomorphism classes} \\
\text{of objects of }\mathcal{F}(A)
\end{matrix}
=
\coprod\nolimits_{n \geq 0}\quad
\begin{matrix}
\text{GL}_n(A)\text{-conjugacy classes of}\\
\text{continuous homomorphisms }\rho : \Gamma \to \text{GL}_n(A)
\end{matrix}
$$
\end{example}

\begin{lemma}
\label{lemma-continuous-representations-RS}
Example \ref{example-continuous-representations}
satisfies the Rim-Schlessinger condition (RS).
\end{lemma}

\begin{proof}
In Example \ref{example-continuous-representations}
we use the exact same construction as in the preceding paragraph.
Here we add that $\rho_1 \times \rho_2$ is continuous:
Namely, $\Ker(\rho_1)$ and $\Ker(\rho_2)$ are open normal subgroups
and hence $\Ker(\rho_1 \times \rho_2) = \Ker(\rho_1) \cap \Ker(\rho_2)$
is open as well. Hence continuity holds.
\end{proof}

\begin{lemma}
\label{lemma-continuous-representations-TI}
In Example \ref{example-continuous-representations}
if $x_0 = (k, V, \rho_0)$, then
$$
T_{x_0}\mathcal{F} = H^1_{cont}(\Gamma, \text{End}_k(V))
\quad\text{and}\quad
\text{Inf}_{x_0}(\mathcal{F}) = H^0_{cont}(\Gamma, \text{End}_k(V))
$$
are finite dimensional if $\Gamma$ is topologically finitely generated.
\end{lemma}

\begin{proof}
Proof of (3). This is proved in the same manner as the proof of
(2) with some small changes due to the fact that we have to carry
the topology on the group $\Gamma$ along. We omit the details.
\end{proof}



\section{Graded algebras}
\label{section-graded-algebras}

\begin{example}[Graded algebras]
\label{example-graded-algebras}
Let $\mathcal{F}$ be the category defined as follows
\begin{enumerate}
\item an object is a pair $(A, P)$ consisting of an
object $A$ of $\mathcal{C}_\Lambda$ and a graded $A$-algebra $P$
such that $P_d$ is a finite projective $A$-module for all $d \geq 0$, and
\item a morphism $(f, g) : (B, Q) \to (A, P)$ consists of
a morphism $f : B \to A$ in $\mathcal{C}_\Lambda$ together
with a map $g : Q \to P$ which is $f$-linear and induces an
isomorpism $Q \otimes_{B, f} A \cong P$.
\end{enumerate}
The functor $p : \mathcal{F} \to \mathcal{C}_\Lambda$ sends $(A, P)$
to $A$ and $(f, g)$ to $f$. It is clear that $p$ is cofibred in groupoids.
\end{example}

\begin{lemma}
\label{lemma-graded-algebras-RS}
Example \ref{example-graded-algebras}
satisfies the Rim-Schlessinger condition (RS).
\end{lemma}

\begin{proof}
In Example \ref{example-graded-algebras} we argue as follows.
Consider an object
$$
((A_1, P_1), (A_2, P_2), (\text{id}_A, \varphi))
$$
of the category $\mathcal{F}(A_1) \times_{\mathcal{F}(A)} \mathcal{F}(A_2)$.
Then we consider $P_1 \times_\varphi P_2$. Since
$\varphi : P_1 \otimes_{A_1} A \to P_2 \otimes_{A_2} A$
is an isomorphism of graded algebras, we see that the graded pieces
of $P_1 \times_\varphi P_2$ are finite projective $A_1 \times_A A_2$-modules.
Thus $P_1 \times_\varphi P_2$ is an object of $\mathcal{F}(A_1 \times_A A_2)$.
This construction determines a quasi-inverse to our functor
and the proof is complete in this final case.
\end{proof}

\begin{lemma}
\label{lemma-graded-algebras-TI}
In Example \ref{example-graded-algebras}
if $x_0 = (k, P)$, then
$$
T_{x_0}\mathcal{F}
\quad\text{and}\quad
\text{Inf}_{x_0}(\mathcal{F}) = \text{Der}_k(P, P)
$$
are finite dimensional if $P$ is finitely generated over $k$.
\end{lemma}

\begin{proof}
Proof of (4). We first deal with the infinitesimal automorphisms.
Let $Q = P \otimes_k k[\epsilon]$.
Then an element of $\text{Inf}_{x_0}(\mathcal{F})$
is given by an automorphism
$\gamma = \text{id} + \epsilon \delta : Q \to Q$
as above where now $\delta : P \to P$.
The fact that $\gamma$ is graded implies that
$\delta$ is homogeneous of degree $0$.
The fact that $\gamma$ is $k$-linear implies that
$\delta$ is $k$-linear.
The fact that $\gamma$ is multiplicative implies that
$\delta$ is a $k$-derivation.
Conversely, given a $k$-derivation $\delta : P \to P$
homogeneous of degree $0$, we obtain an automorphism
$\gamma = \text{id} + \epsilon \delta$ as above.
Thus we see that
$$
\text{Inf}_{x_0}(\mathcal{F}) = \text{Der}_k(P, P)
$$
as predicted in the lemma.
Clearly, if $P$ is generated in degrees $P_i$,
$0 \leq i \leq N$, then $\delta$ is determined by
the linear maps $\delta_i : P_i \to P_i$ for
$0 \leq i \leq N$ and we see that
$$
\dim_k \text{Der}_k(P, P) < \infty
$$
as desired.

\medskip\noindent
To finish the proof of the lemma we show that there is a finite
dimensional deformation space in the final case. To do this we
choose a presentation
$$
k[X_1, \ldots, X_n]/(F_1, \ldots, F_m) \longrightarrow P
$$
of graded $k$-algebras where $\deg(X_i) = d_i$ and
$F_j$ is homogeneous of degree $e_j$.
Let $Q$ be any graded $k[\epsilon]$-algebra
finite free in each degree which comes with an isomorphsm
$\alpha : Q/\epsilon Q \to P$ so that $(Q, \alpha)$ defines
an element of $T_{x_0}\mathcal{F}$.
Choose a homogeneous element $q_i \in Q$ of degree $d_i$
mapping to the image of $X_i$ in $P$.
Then we obtain
$$
k[\epsilon][X_1, \ldots, X_n] \longrightarrow Q,\quad
X_i \longmapsto q_i
$$
and since $P = Q/\epsilon Q$ this map is surjective by Nakayama's lemma.
A small diagram chase shows we can choose homogeneous elements
$F_{\epsilon, j} \in k[\epsilon][X_1, \ldots, X_n]$ of degree $e_j$
mapping to zero in $Q$ and mapping to $F_j$ in $k[X_1, \ldots, X_n]$.
Then
$$
k[\epsilon][X_1, \ldots, X_n]/(F_{\epsilon, 1}, \ldots, F_{\epsilon, m})
\longrightarrow Q
$$
is a presentation of $Q$ by flatness of $Q$ over $k[\epsilon]$.
Write
$$
F_{\epsilon, j} =  F_j + \epsilon G_j
$$
There is some ambiguity in the vector $(G_1, \ldots, G_m)$.
First, using different choices of $F_{\epsilon, j}$
we can modify $G_j$ by an arbitrary element of degree $e_j$
in the kernel of $k[X_1, \ldots, X_n] \to P$.
Hence, instead of $(G_1, \ldots, G_m)$, we remember the
element
$$
(g_1, \ldots, g_m) \in P_{e_1} \oplus \ldots \oplus P_{e_m}
$$
where $g_j$ is the image of $G_j$ in $P_{e_j}$.
Moreover, if we change our choice of $q_i$ into $q_i + \epsilon p_i$
with $p_i$ of degree $d_i$ then a computation (omitted) shows
that $g_j$ changes into
$$
g_j^{new} = g_j - \sum\nolimits_{i = 1}^n p_i \partial F_j / \partial X_i
$$
We conclude that the isomorphism class of $Q$ is determined by the
image of the vector $(G_1, \ldots, G_m)$ in the $k$-vector space
$$
W  = \Coker(P_{d_1} \oplus \ldots \oplus P_{d_n}
\xrightarrow{(\frac{\partial F_j}{\partial X_i})}
P_{e_1} \oplus \ldots \oplus P_{e_m})
$$
In this way we see that we obtain an injection
$$
T_{x_0}\mathcal{F} \longrightarrow W
$$
Since $W$ visibly has finite dimension, we conclude that the lemma is true.
\end{proof}













\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
