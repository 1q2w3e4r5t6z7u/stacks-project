\input{preamble}

% OK, start here.
%
\begin{document}

\title{Constructions of schemes}

%\begin{abstract}
%\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we introduce ways of constructing schemes out of others.
A basic reference is \cite{EGA}.








\section{Relative spectrum}
\label{section-spec}



\noindent
Let $S$ be a scheme.
Let $\mathcal{A}$ be a quasi-coherent sheaf of $\mathcal{O}_S$-algebras.
This means that $\mathcal{A}$ is a sheaf of $\mathcal{O}_S$-algebras
which is quasi-coherent as an $\mathcal{O}_S$-module.

\medskip\noindent
For any $f : T \to S$ the pullback
$f^*\mathcal{A}$ is a quasi-coherent sheaf of $\mathcal{O}_T$-algebras.
We are going to consider pairs $(f : T \to S, \varphi)$ where
$f$ is a morphism of schemes and $\varphi : f^*\mathcal{A} \to \mathcal{O}_T$
is a morphism of $\mathcal{O}_T$-algebras. Note that this is the
same as giving a $f^{-1}\mathcal{O}_S$-algebra homomorphism
$\varphi : f^{-1}\mathcal{A} \to \mathcal{O}_T$, see
Sheaves, Lemma \ref{sheaves-lemma-adjointness-tensor-restrict}.
This is also the same as giving a $\mathcal{O}_S$-algebra map
$\varphi : \mathcal{A} \to f_*\mathcal{O}_T$, see
Sheaves, Lemma \ref{sheaves-lemma-adjoint-push-pull-modules}.
We will use all three ways of thinking about $\varphi$,
without further mention.

\medskip\noindent
Given such a
pair $(f : T \to S, \varphi)$ and a morphism $a : T' \to T$ we get
a second pair $(f' = f \circ a, \varphi' = a^*\varphi)$ which we
call the pull back of $(f, \varphi)$. One way to describe
$\varphi' = a^*\varphi$ is as the composition
$\mathcal{A} \to f_*\mathcal{O}_T \to f'_*\mathcal{O}_{T'}$
where the second map is $f_*a^\sharp$ with
$a^\sharp : \mathcal{O}_T \to a_*\mathcal{O}_{T'}$.
In this way we have defined a contravariant functor
\begin{eqnarray}
\label{equation-spec}
F : \textit{Sch} & \longrightarrow & \textit{Sets} \\
T & \longmapsto & F(T) = \{\text{pairs }(f, \varphi) \text{ as above}\}
\nonumber
\end{eqnarray}

\begin{lemma}
\label{lemma-spec-base-change}
Let $S$ be a scheme. Let $\mathcal{A}$ be a quasi-coherent
sheaf of $\mathcal{O}_S$-algebras. Let $F$ be the functor
associated to $(S, \mathcal{A})$ above.
Let $g : S' \to S$ be a morphism of schemes.
Set $\mathcal{A}' = g^*\mathcal{A}$. Let $F'$ be the
functor associated to $(S', \mathcal{A}')$ above.
Then there is a canonical isomorphism
$$
F' \cong h_{S'} \times_{h_S} F
$$
of functors.
\end{lemma}

\begin{proof}
A pair $(f' : T \to S', \varphi' : (f')^*\mathcal{A}' \to \mathcal{O}_T)$
is the same as a pair $(f, \varphi : f^*\mathcal{A} \to \mathcal{O}_T)$
together with a factorization of $f$ as $f = g \circ f'$. Namely with
this notation we have
$(f')^* \mathcal{A}' = (f')^*g^*\mathcal{A} = f^*\mathcal{A}$.
Hence the lemma.
\end{proof}

\begin{lemma}
\label{lemma-spec-affine}
Let $S$ be a scheme. Let $\mathcal{A}$ be a quasi-coherent
sheaf of $\mathcal{O}_S$-algebras. Let $F$ be the functor
associated to $(S, \mathcal{A})$ above.
If $S$ is affine, then $F$ is representable by the
affine scheme $\text{Spec}(\Gamma(S, \mathcal{A}))$.
\end{lemma}

\begin{proof}
Write $S = \text{Spec}(R)$ and $A = \Gamma(S, \mathcal{A})$.
Then $A$ is an $R$-algebra and $\mathcal{A} = \widetilde A$.
The ring map $R \to A$ gives rise to a canonical map
$$
f_{univ} : \text{Spec}(A)
\longrightarrow
S = \text{Spec}(R).
$$
We have
$f_{univ}^*\mathcal{A} =  \widetilde{A \otimes_R A}$
by Schemes, Lemma \ref{schemes-lemma-widetilde-pullback}.
Hence there is a canonical map
$$
\varphi_{univ} :
f_{univ}^*\mathcal{A} = \widetilde{A \otimes_R A}
\longrightarrow
\widetilde A = \mathcal{O}_{\text{Spec}(A)}
$$
coming from the $A$-module map $A \otimes_R A \to A$,
$a \otimes a' \mapsto aa'$. We claim that the pair
$(f_{univ}, \varphi_{univ})$ represents $F$ in this case.
In other words we claim that for any scheme $T$ the map
$$
\text{Mor}(T, \text{Spec}(A)) \longrightarrow
\{\text{pairs } (f, \varphi)\},\ \ 
a \longmapsto (a^*f_{univ}, a^*\varphi)
$$
is bijective.

\medskip\noindent
Let us construct the inverse map.
For any pair $(f : T \to S, \varphi)$ we get the induced
ring map
$$
\xymatrix{
A = \Gamma(S, \mathcal{A}) \ar[r]^{f^*} &
\Gamma(T, f^*\mathcal{A}) \ar[r]^{\varphi} &
\Gamma(T, \mathcal{O}_T)
}
$$
This induces a morphism of schemes $T \to \text{Spec}(A)$
by Schemes, Lemma \ref{schemes-lemma-morphism-into-affine}.

\medskip\noindent
The verification that this map is inverse to the map
displayed above is omitted.
\end{proof}

\begin{lemma}
\label{lemma-spec}
The functor $F$ is representable by a scheme.
\end{lemma}

\begin{proof}
We are going to use Schemes, Lemma \ref{schemes-lemma-glue-functors}.

\medskip\noindent
First we check that $F$ satisfies the sheaf property for the
Zariski topology. Namely, suppose that $T$ is a scheme,
that $T = \bigcup_{i \in I} U_i$ is an open covering,
and that $(f_i, \varphi_i) \in F(U_i)$ such that
$(f_i, \varphi_i)|_{U_i \cap U_j} = (f_j, \varphi_j)|_{U_i \cap U_j}$.
This implies that the morphisms $f_i : U_i \to S$
glue to a morphism of schemes $f : T \to S$ such that
$f|_{I_i} = f_i$, see Schemes, Section \ref{schemes-section-glueing-schemes}.
Thus $f_i^*\mathcal{A} = f^*\mathcal{A}|_{U_i}$ and by assumption the
morphisms $\varphi_i$ agree on $U_i \cap U_j$. Hence by Sheaves,
Section \ref{sheaves-section-glueing-sheaves} these glue to a
morphism of $\mathcal{O}_T$-algebras $f^*\mathcal{A} \to \mathcal{O}_T$.
This proves that $F$ satisfies the sheaf condition with respect to
the Zariski topology.

\medskip\noindent
Let $S = \bigcup_{i \in I} U_i$ be an affine open covering.
Let $F_i \subset F$ be the subfunctor consisting of
those pairs $(f : T \to S, \varphi)$ such that
$f(T) \subset U_i$.

\medskip\noindent
We have to show each $F_i$ is representable.
This is the case because $F_i$ is identified with
the functor associated to $U_i$ equipped with
the quasi-coherent $\mathcal{O}_{U_i}$-algebra $\mathcal{A}|_{U_i})$.
Thus the result follows from Lemma \ref{lemma-spec-affine}.

\medskip\noindent
Next we show that $F_i \subset F$ is representable by open immersions.
Let $(f : T \to S, \varphi) \in F(T)$. Consider $V_i = f^{-1}(U_i)$.
It follows from the definition of $F_i$ that given $a : T' \to T$
we gave $a^*(f, \varphi) \in F_i(T')$ if and only if $a(T') \subset V_i$.
This is what we were required to show.

\medskip\noindent
Finally, we have to show that the collection $(F_i)_{i \in I}$
covers $F$. Let $(f : T \to S, \varphi) \in F(T)$.
Consider $V_i = f^{-1}(U_i)$. Since $S = \bigcup_{i \in I} U_i$
is an open covering of $S$ we see that $T = \bigcup_{i \in I} V_i$
is an open covering of $T$. Moreover $(f, \varphi)|_{V_i} \in F_i(V_i)$.
This finishes the proof of the lemma.
\end{proof}

\begin{definition}
\label{definition-spec}
Let $S$ be a scheme. Let $\mathcal{A}$ be a quasi-coherent
sheaf of $\mathcal{O}_S$-algebras. We denote
$\underline{\text{Spec}}_S(\mathcal{A})$ a scheme
representing the functor $F$ introduced in Equation
\ref{equation-spec} above. This is called the {\it relative
spectrum of $\mathcal{A}$ over $S$}. The universal family
is a pair $f_{univ} : \underline{\text{Spec}}_S(\mathcal{A}) \to S$\ and a morphism of $\mathcal{O}_S$-algebras
$$
\mathcal{A}
\longrightarrow
f_{univ, *}\mathcal{O}_{\underline{\text{Spec}}_S(\mathcal{A})}
$$
\end{definition}

\noindent
The following lemma says among other things that forming the
relative spectrum commutes with base change.

\begin{lemma}
\label{lemma-spec-properties}
Let $S$ be a scheme. Let $\mathcal{A}$ be a quasi-coherent
sheaf of $\mathcal{O}_S$-algebras. Let
$f_{univ} : \underline{\text{Spec}}_S(\mathcal{A}) \to S$
be the relative spectrum of $\mathcal{A}$ over $S$.
\begin{enumerate}
\item For every affine open $U \subset S$ the inverse image
$f^{-1}(U)$ is affine.
\item For every morphism $g : S' \to S$ we have
$S' \times_S \underline{\text{Spec}}_S(\mathcal{A}) =
\underline{\text{Spec}}_{S'}(g^*\mathcal{A})$.
\item
The universal
map
$$
\mathcal{A}
\longrightarrow
f_{univ, *}\mathcal{O}_{\underline{\text{Spec}}_S(\mathcal{A})}
$$
is an isomorphism of $\mathcal{O}_S$-algebras.
\end{enumerate}
\end{lemma}

\begin{proof}
We first note that (2) follows immediately from
Lemma \ref{lemma-spec-base-change}. Then (1) follows because
$f^{-1}(U) = U \times_S \underline{\text{Spec}}_S(\mathcal{A}) =
\underline{\text{Spec}}_U(\mathcal{A}|_U)$ combined with
Lemma \ref{lemma-spec-affine}. Finally, (3) follows because
it is local on $S$ and it is clear in case $S$ is affine
by Lemma \ref{lemma-spec-affine} again.
\end{proof}






\section{Vector bundles}
\label{section-vector-bundle}

\noindent
Let $S$ be a scheme.
Let $\mathcal{E}$ be a quasi-coherent sheaf of $\mathcal{O}_S$-modules.
For every integer $n \geq 0$ we may consider the
$n$th symmetric


\begin{definition}
\label{definition-vector-bundle}

















\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
