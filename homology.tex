\input{preamble}

% OK, start here.
%
\begin{document}

\title{Homological Algebra}


\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
Basic homological algebra will be explained in this document.
We add as needed in the other parts, since there is clearly
an infinite amount of this stuff around.
A reference is \cite{Maclane}.

\section{Basic notions}
\label{section-topology-basic}

\noindent
The following notions are considered basic and will not be defined,
and or proved. This does not mean they are all necessarily easy or 
well known.

\begin{enumerate}
\item Nothing yet.
\end{enumerate}


\section{Abelian categories}
\label{section-abelian-categories}

\noindent
An abelian category will be a category satisfying
just enough axioms so the snake lemma holds.

\begin{definition}
\label{definition-preadditive}
A category $\mathcal{A}$ is called {\it preadditive} if each
morphism set $\text{Mor}_{\mathcal{A}}(x, y)$ is endowed
with the structure of an abelian group such that the
compositions
$$
\text{Mor}(x, y) \times \text{Mor}(y, z)
\longrightarrow
\text{Mor}(x, z)
$$
are bilinear. A functor $F : \mathcal{A} \to \mathcal{B}$ of
preadditive categories is called {\it additive} if and only
if $F : \text{Mor}(x, y) \to \text{Mor}(F(x), F(y))$
is a homomorphism of abelian groups for all
$x, y \in \text{Ob}(\mathcal{A})$.
\end{definition}

\noindent
In particular for every $x, y$ there exists at least
one morphism $x \to y$, namely the zero map.

\begin{lemma}
\label{lemma-preadditive-zero}
Let $\mathcal{A}$ be a preadditive category.
If $\mathcal{A}$ has an initial object, then that object
is also a final object. If $\mathcal{A}$ has a final object, then that object
is also a initial object. Furthermore, if such an object $0$ exists,
then a morphism $\alpha : x \to y$ factors through $0$ if and only if
$\alpha = 0$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-zero-object}
In a preadditive category $\mathcal{A}$ we call
{\it zero object}, and we denote it $0$
any final and initial object as in Lemma \ref{lemma-preadditive-zero} above.
\end{definition}

\begin{lemma}
\label{lemma-preadditive-direct-sum}
Let $\mathcal{A}$ be a preadditive category.
Let $x, y \in \text{Ob}(\mathcal{A})$.
If the product $x \times y$ exists, then so does
the coproduct $x \coprod y$.
If the coproduct $x \coprod y$ exists, then so does
the product $x \times y$. In this case
also $x \coprod y \cong x \times y$.
\end{lemma}

\begin{proof}
Suppose that $z = x \times y$ with projections
$p : z \to x$ and $q : z \to y$. Denote $i : x \to z$
the morphism corresponding to $(1, 0)$. Denote $j : y \to z$
the morphism corresponding to $(0, 1)$. Thus we have the
commutative diagram
$$
\xymatrix{
x \ar[rr]^1 \ar[rd]^i & & x \\
& z \ar[ru]^p \ar[rd]^q & \\
y \ar[rr]^1 \ar[ru]^j & & y
}
$$
where the diagonal compositions are zero. It follows that
$i \circ p + j \circ q : z \to z$ is the identity since
it is a morphism which upon composing with $p$ gives $p$
and upon composing with $q$ gives $q$.
Suppose given morphisms $a : x \to w$ and $b : y \to w$.
Then we can form the map $a \circ p + b \circ q : z \to w$.
In this way we get a bijection $\text{Mor}(z, w)
= \text{Mor}(x, w) \times \text{Mor}(y, w)$ which
show that $z = x \coprod y$.

\medskip\noindent
We leave it to the reader to construct the morphisms
$p,q$ given a coproduct $x \coprod y$ instead of a
product.
\end{proof}

\begin{definition}
\label{definition-direct-sum}
Given a pair of objects $x, y$
in a preadditive category $\mathcal{A}$ we call
{\it direct sum}, and we denote it $x \oplus y$ the
product $x \times y$ endowed with the morphisms
$i,j,p,q$ as in Lemma \ref{lemma-preadditive-direct-sum} above.
\end{definition}

\begin{remark}
\label{remark-direct-sum}
Note that the proof of Lemma \ref{lemma-preadditive-direct-sum}
shows that given $p$ and $q$ the morphisms $i$, $j$ are uniquely
determined by the rules $p \circ i = \text{id}_x$,
$q \circ j = \text{id}_y$, $p \circ j = 0$, $q \circ i = 0$.
Moreover, we automatically have
$i \circ p + j \circ q = \text{id}_{x \oplus y}$.
Similarly, given $i$, $j$ the morphisms $p$ and $q$ are uniquely determined.
Finally, given objects $x,y,z$ and morphisms
$i : x \to z$, $j : y \to z$, $p : z \to x$ and
$q : z \to y$ such that $p \circ i = \text{id}_x$,
$q \circ j = \text{id}_y$, $p \circ j = 0$, $q \circ i = 0$
and $i \circ p + j \circ q = \text{id}_{z}$, then $z$
is the direct sum of $x$ and $y$ with the four morphisms
equal to $i,j,p,q$.
\end{remark}

\begin{definition}
\label{definition-additive-category}
A category $\mathcal{A}$ is called {\it additive}
if it is preadditive and finite products exist, in other
words it has a zero object and direct sums.
\end{definition}

\noindent
Namely the empty product is a finite product and
if it exists, then it is a final object.

\begin{lemma}
\label{lemma-additive-additive}
Let $\mathcal{A}$, $\mathcal{B}$ be additive categories.
Let $F : \mathcal{A} \to \mathcal{B}$ be an additive functor.
Then $F$ transforms direct sums to direct sums and zero to zero.
\end{lemma}

\begin{proof}
Suppose $F$ is additive. A direct sum $z$
of $x$ and $y$ is characterized by having morphisms
$i : x \to z$, $j : y \to z$, $p : z \to x$ and
$q : z \to y$ such that $p \circ i = \text{id}_x$,
$q \circ j = \text{id}_y$, $p \circ j = 0$, $q \circ i = 0$
and $i \circ p + j \circ q = \text{id}_{z}$, according
to Remark \ref{remark-direct-sum}. Clearly $F(x), F(y), F(z)$
and the morphisms $F(i), F(j), F(p), F(q)$ satisfy exactly the
same relations (by additivity) and we see that $F(z)$ is
a direct sum of $F(x)$ and $F(y)$.
\end{proof}

\begin{definition}
\label{definition-kernel}
Let $\mathcal{A}$ be a preadditive category.
Let $f : x \to y$ be a morphism.
\begin{enumerate}
\item A {\it kernel} of $f$ is a morphism
$i : z \to x$ such that (a) $f \circ i = 0$ and (b)
for any $i' : z' \to x$ such that $f \circ i' = 0$ there
exists a unique morphism $g : z' \to z$ such that
$i' = i \circ g$.
\item If the kernel of $f$ exists, then we denote
this $\text{Ker}(f) \to x$.
\item A {\it cokernel} of $f$ is a morphism
$p : y \to z$ such that (a) $p \circ f = 0$ and (b)
for any $p' : y \to z'$ such that $p' \circ f = 0$ there
exists a unique morphism $g : z \to z'$ such that
$p' = g \circ p$.
\item If a cokernel of $f$ exists we denote this
$y \to \text{Coker}(f)$.
\item If a kernel of $f$ exists, then a {\it coimage
of $f$} is a cokernel for the morphism $\text{Ker}(f) \to x$.
\item If a kernel and coimage exist then we denote this
$x \to \text{Coim}(f)$.
\item If a cokernel of $f$ exists, then the {\it image of
$f$} is a kernel of the morphism $y \to \text{Coker}(f)$.
\item If a cokernel and image of $f$ exist then we denote
this $\text{Im}(f) \to y$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-coim-im-map}
Let $f : x \to y$ be a morphism in a preadditive category
such that the kernel, cokernel, image and coimage all exist.
Then $f$ can be factored uniquely as
$x \to \text{Coim}(f) \to \text{Im}(f) \to y$.
\end{lemma}

\begin{proof}
There is a canonical morphism $\text{Coim}(f) \to y$
because $\text{Ker}(f) \to x \to y$ is zero.
The composition $\text{Coim}(f) \to y \to \text{Coker}(f)$
is zero, because it is the unique morphism which gives
rise to the morphism $x \to y \to \text{Coker}(f)$ which
is zero. Hence $\text{Coim}(f) \to y$ factors uniquely through
$\text{Im}(f) \to y$, which gives us the desired map.
\end{proof}

\begin{example}
\label{example-not-abelian}
Let $k$ be a field.
Consider the category
of filtered vector spaces over $k$.
(See Definition \ref{definition-filtered}.)
Consider the filtered vector spaces $(V, F)$ and $(W, F)$ with
$V = k$ and
$$
F^iV
=
\left\{
\begin{matrix}
V & \text{if} & i < 0 \\
0 & \text{if} & i \geq 0
\end{matrix}
\right.
\text{ and }
F^iW
=
\left\{
\begin{matrix}
V & \text{if} & i \leq 0 \\
0 & \text{if} & i > 0
\end{matrix}
\right.
$$
The map $f : V \to W$ corresponding to $\text{id}_k$ on the underlying
vector spaces has trivial kernel and cokernel but is not
an isomorphism. Note also that $\text{Coim}(f) = V$ and $\text{Im}(f) = W$.
This means that the category of filtered vector spaces over $k$
is not abelian.
\end{example}

\begin{definition}
\label{definition-abelian-category}
A category $\mathcal{A}$ is {\it abelian} if
it is additive, if all kernels and cokernels exist,
and if the natural map $\text{Coim}(f) \to \text{Im}(f)$
is an isomorphism for all morphisms $f$ of
$\mathcal{A}$.
\end{definition}

\begin{lemma}
\label{lemma-abelian-opposite}
Let $\mathcal{A}$ be a pre-additive category.
The additions on sets of morphisms make
$\mathcal{A}^{opp}$ into a pre-additive category,
and $\mathcal{A}$ is abelian if and only if $\mathcal{A}^{opp}$
is abelian.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-injective-surjective}
Let $f : x \to y$ be a morphism in an abelian category.
\begin{enumerate}
\item We say $f$ is {\it injective} if $\text{Ker}(f) = 0$.
\item We say $f$ is {\it surjective} if $\text{Coker}(f) = 0$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-characterize-injective}
Let $f : x \to y$ be a morphism in an abelian category. Then
\begin{enumerate}
\item $f$ is injective if and only if $f$ is a monomorphism, and
\item $f$ is surjective if and only if $f$ is an epimorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
In an abelian category, if $K \subset M$ is a subobject,
then we denote
$$
M/K = \text{Coker}(K \to M).
$$

\begin{lemma}
\label{lemma-colimit-abelian-category}
Let $\mathcal{A}$ be an abelian category.
All finite limits and finite colimits exist in $\mathcal{A}$.
\end{lemma}

\begin{proof}
To show that finite limits exist it suffices to show
that finite products and equalizers exist, see
Categories, Lemma \ref{categories-lemma-finite-limits-exist}.
Finite products exist
by definition and the equalizer of $a,b : x \to y$ is
the kernel of $a - b$. The argument for finite colimits
is similar but dual to this.
\end{proof}

\begin{definition}
\label{definition-exact}
Let $\mathcal{A}$ be an additive category.
We say a sequence of morphisms
$$
\ldots \to x \to y \to z \to \ldots
$$
in $\mathcal{A}$
is a {\it complex} if the composition of any two (drawn)
arrows is zero. If $\mathcal{A}$ is abelian then
we say a sequence as above is {\it exact at $y$} if
$\text{Im}(x \to y) = \text{Ker}(y \to z)$. We say it is {\it exact}
if it is exact at every object. A {\it short exact sequence}
is an exact complex of the form
$$
0 \to A  \to B \to C \to 0.
$$
\end{definition}

\begin{definition}
\label{definition-ses-split}
Let $\mathcal{A}$ be an abelian category.
Let $i : A \to B$ and $q : B \to C$ be morphisms
of $\mathcal{A}$ such that
$0 \to A \to B \to C \to 0$ is a short
exact sequence. We say the short exact
sequence is {\it split} if there exist
morphisms $j : C \to B$ and $p : B \to A$ such
that $(B, i, j, p, q)$ is the direct sum of $A$ and $C$.
\end{definition}

\begin{lemma}
\label{lemma-ses-split}
Let $\mathcal{A}$ be an abelian category.
Let $0 \to A \to B \to C \to 0$
be a short exact sequence. 
\begin{enumerate}
\item Given a morphism $s : C \to B$ left inverse to
$B \to C$, there exists a unique $\pi : B \to A$
such that $(s, \pi)$ splits the short exact sequence
as in Definition \ref{definition-ses-split}.
\item Given a morphism $\pi : B \to A$ right inverse to
$A \to B$, there exists a unique $s : C \to B$
such that $(s, \pi)$ splits the short exact sequence
as in Definition \ref{definition-ses-split}.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}


\begin{lemma}
\label{lemma-snake}
Let $\mathcal{A}$ be an abelian category.
Suppose given a commutative diagram
$$
\xymatrix{
& x \ar[r] \ar[d]^\alpha &
y \ar[r] \ar[d]^\beta &
z \ar[r] \ar[d]^\gamma &
0 \\
0 \ar[r] & u \ar[r] & v \ar[r] & w
}
$$
with exact rows, then there is a canonical exact sequence
$$
\text{Ker}(\alpha) \to \text{Ker}(\beta) \to \text{Ker}(\gamma)
\to
\text{Coker}(\alpha) \to \text{Coker}(\beta) \to \text{Coker}(\gamma)
$$
Moreover, if $x \to y$ is injective, then the first map is
injective, and if $v \to w$ is surjective, then the last
map is surjective.
\end{lemma}

\begin{proof}
Omitted. Let us point out however what the map
$\delta : \text{Ker}(\gamma) \to \text{Coker}(\alpha)$ is.
Let $T \in \text{Ob}(\mathcal{A})$. Consider
a morphism $a : T \to z$ with $\gamma \circ a = 0$.
In other words $a$ maps $T$ into $\text{Ker}(\gamma)$.
We have to construct $\delta \circ a : T \to \text{Coker}(\alpha)$.
Because $y \to z$ is surjective, the fibre product
$T' = T\times_z y$ surjects onto $T$. Denote
$a' : T' \to y$ the second projection. Consider
the morphism $\beta \circ a' : T' \to v$. 
Composing this morphism with $v \to w$ gives the
same morphism as the composition $T' \to T \to z \to w$
in other words, it gives the zero morphism. 
Because $u \to v$ is the kernel of $v \to w$ we conclude
that $a'$ factors through a morphism $a'' : T' \to u$.
Note that the kernel $T''$ of $T' \to T$ maps to
zero under the composition $T' \to y \to z$, and
hence maps into $\text{Im}(x \to y)$. Thus
$a''|_{T''} : T'' \to u$ maps into the image
of $\alpha$. We conclude that there exists a
factorization
$$
\xymatrix{
T' \ar[rr]_-{a''} \ar[d]_{\text{pr}_1} & &
u \ar[d] \\
T \ar[rr]^-{\delta \circ a} & &
\text{Coker}(\alpha)
}
$$
which gives the desired map $\delta \circ a : T \to \text{Coker}(\alpha)$.
\end{proof}










\section{Extensions}
\label{section-extensions}

\begin{definition}
\label{definition-extension}
Let $\mathcal{A}$ be an abelian category.
Let $A, C \in \text{Ob}(\mathcal{A})$.
An {\it extension $E$ of $B$ by $A$} is a short
exact sequence
$$
0 \to A \to E \to B \to 0.
$$
\end{definition}

\noindent
By abuse of language we often omit mention of the
morphisms $A \to E$ and $E \to B$, allthough they are
definitively part of the structure of an extension.

\begin{definition}
\label{definition-ext-group}
Let $\mathcal{A}$ be an abelian category.
Let $A, C \in \text{Ob}(\mathcal{A})$.
The set of isomorphism classes of extensions
of $B$ by $A$ is denoted
$$
\text{Ext}_\mathcal{A}(B, A).
$$
This is called the {\it $\text{Ext}$-group}.
\end{definition}

\noindent
This definition works, because by our conventions
$\mathcal{A}$ is a set, and hence
$\text{Ext}_\mathcal{A}(B, A)$ is a set.
In any of the cases of ``big'' abelian categories
listed in Categories, Remark \ref{categories-remark-big-categories}.
one can check by hand that $\text{Ext}_\mathcal{A}(B, A)$
is a set as well. Also, we will see later that this is 
always the case when $\mathcal{A}$ has either enough projectives
or enough injectives. Insert future reference here.

\medskip\noindent
Actually we can turn $\text{Ext}_\mathcal{A}(-, -)$ into a
functor
$$
\mathcal{A}^{opp} \times \mathcal{A} \longrightarrow \textit{Sets},\ 
(A, B) \longmapsto \text{Ext}_\mathcal{A}(A, B)
$$
as follows:
\begin{enumerate}
\item Given a morphism $B' \to B$ and an extension
$E$ of $B$ by $A$ we define $E' = E \times_B B'$
so that we have the following commutative diagram
of short exact sequences
$$
\xymatrix{
0 \ar[r] & A \ar[r] \ar[d] & E' \ar[r] \ar[d] & B' \ar[r] \ar[d] & 0 \\
0 \ar[r] & A \ar[r] & E \ar[r] & B \ar[r] & 0
}
$$
The extension $E'$ is called the {\it pullback of $E$ via
$B' \to B$}.
\item Given a morphism $A \to A'$ and an extension
$E$ of $B$ by $A$ we define $E' = A' \coprod_A E$
so that we have the following commutative diagram
of short exact sequences
$$
\xymatrix{
0 \ar[r] & A' \ar[r] \ar[d] & E' \ar[r] \ar[d] & B \ar[r] \ar[d] & 0 \\
0 \ar[r] & A \ar[r] & E \ar[r] & B \ar[r] & 0
}
$$
The extension $E'$ is called the {\it pushout of $E$ via
$A \to A'$}.
\end{enumerate}
To see that this defines a functor as indicated above
there are several things to verify. First of all
functoriality in the variable $B$ requires that
$(E \times_B B') \times_{B'} B'' = E \times_B B''$
which is a general property of fibre products.
Dually one deals with functoriality in the
variable $A$. Finally, given $A \to A'$ and
$B' \to B$ we have to show that
$$
A' \coprod\nolimits_A (E \times_B B')
\cong
(A' \coprod\nolimits_A E)\times_B B'
$$
as extensions of $B'$ by $A'$. Recall that $A' \coprod_A E$
is the quotient of $A' \oplus E$ by the image of
$A \to A' \oplus E$, $x \mapsto (x, -x)$.
Thus the right hand side is a quotient of
$A' \oplus E \times_B B'$, and it is easy to see that
the kernel is exactly what you need in order to
get the left hand side.

\medskip\noindent
Note that if $E_1$ and $E_2$ are extensions of
$B$ by $A$, then $E_1\oplus E_2$ is an extension
of $B \oplus B$ by $A\oplus A$. We pull back by
the diagonal map $B \to B \oplus B$ and we push
out by the sum map $A \oplus A \to A$ to get
an extension $E_1 + E_2$ of $B$ by $A$.
$$
\xymatrix{
0 \ar[r] &
A \oplus A \ar[r] \ar[d]^{\sum} &
E_1 \oplus E_2 \ar[r] \ar[d] &
B \oplus B \ar[r] \ar[d] &
0 \\
0 \ar[r] &
A \ar[r] &
E' \ar[r] &
B \oplus B \ar[r] &
0\\
0 \ar[r] &
A \ar[r] \ar[u] &
E_1 + E_2 \ar[r] \ar[u] &
B \ar[r] \ar[u]^{\Delta} &
0
}
$$

\begin{lemma}
\label{lemma-baer-sum}
The construction $(E_1, E_2) \mapsto E_1+E_2$
above defines a commutative group
law on $\text{Ext}_\mathcal{A}(B, A)$ which is
functorial in both variables.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\section{Additive functors}
\label{section-functors}

\noindent
Recall that we defined, in
Categories, Definition \ref{categories-definition-exact}
the notion of a ``right exact'', ``left exact'' and
``exact'' functor in the setting of a functor between
categories that have finite (co)limits. Thus this
applies in particular to functors between abelian
categories.

\begin{lemma}
\label{lemma-exact-functor}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories.
Let $F : \mathcal{A} \to \mathcal{B}$ be a functor.
\begin{enumerate}
\item If $F$ is either left or right exact, then it is additive.
\item If $F$ is additive then it is left exact if and only if
for every short exact sequence 
$0 \to A \to B \to C \to 0$
the sequence $0 \to F(A) \to F(B) \to F(C)$
is exact.
\item If $F$ is additive then it is right exact if and only if
for every short exact sequence 
$0 \to A \to B \to C \to 0$
the sequence $F(A) \to F(B) \to F(C) \to 0$
is exact.
\item If $F$ is additive then it is exact if and only if
for every short exact sequence 
$0 \to A \to B \to C \to 0$
the sequence $0 \to F(A) \to F(B) \to F(C) \to 0$
is exact.
\end{enumerate}
\end{lemma}

\begin{proof}
Let us first note that if $F$ commutes with the empty limit or
the empty colimits, then $F(0) = 0$. In particular $F$ applied
to the zero morphism is zero. We will use this below without mention.

\medskip\noindent
Moreover, suppose that $F$ commutes with finite limits.
Then $F(A \times A) = F(A) \times F(A)$ with
projections $F(p)$ and $F(q)$. Hence
$F(A \oplus A) = F(A) \oplus F(A)$ with all
four morphisms $F(i), F(j), F(p), F(q)$ equal to their
counterparts in $\mathcal{B}$ as they satisfy the same
relations, see Remark \ref{remark-direct-sum}.
Then $f = F(p + q)$ is a morphism $f : F(A) \oplus F(A) \to F(A)$
such that $f \circ F(i) = F(p \circ i + q \circ i) = F(\text{id}_A)
= \text{id}_{F(A)}$. And similarly $f \circ F(j) = \text{id}_A$.
We conclude that $F(p + q) = F(p) + F(q)$. For
any pair of morphisms $a, b : B \to A$ the map
$g = F(i \circ a + j \circ b) : F(B) \to F(A) \oplus F(A)$
is a morphism such that $F(p) \circ g =
F(p \circ (i \circ a + j \circ b)) = F(a)$ and similarly
$F(q) \circ g = F(b)$. Hence $g = F(i) \circ F(a) + F(j) \circ F(b)$.
The sum of $a$ and $b$ is the composition
$$
\xymatrix{
B \ar[rr]^-{i \circ a + j \circ b} & &
A \oplus A \ar[r]^-{p + q} & A.
}
$$
Applying $F$ we get
$$
\xymatrix{
F(B) \ar[rrr]^-{F(i) \circ F(a) + F(j) \circ F(b)} & & &
F(A) \oplus F(A) \ar[rr]^-{F(p) + F(q)} & &
A.
}
$$
where we used the expressions for $f$ and $g$ obtained above.
Hence $F$ is additive.\footnote{I'm sure there is an infinitely
slicker proof of this.}

\medskip\noindent
Denote $f : B \to C$ a map from $B$ to $C$.
Exactness of $0 \to A \to B \to C$ just means that
$A = \text{Ker}(f)$. Clearly the kernel of $f$ is
the equalizer of the two maps $f$ and $0$ from $B$ to $C$.
Hence if $F$ commutes with limits, then $F(\text{Ker}(f))
= \text{Ker}(F(f))$ which exactly means that
$0 \to F(A) \to F(B) \to F(C)$ is exact.

\medskip\noindent
Conversely, suppose that $F$ is additive and
transforms any short exact sequence $0 \to A \to B \to C$ into
an exact sequence $0 \to F(A) \to F(B) \to F(C)$.
Because it is additive it commutes with direct sums
and hence finite products in $\mathcal{A}$. To show
it commutes with finite limits it therefore
suffices to show that it commutes with
equalizers. But equalizers in an abelian category
are the same as the kernel of the difference map,
hence it suffices to show that $F$ commutes with
taking kernels. Let $f : A \to B$ be a morphism.
Factor $f$ as $A \to I \to B$ with $f' : A \to I$ surjective
and $i : I \to B$ injective. (This is possible by the
definition of an abelian category.) Then it is
clear that $\text{Ker}(f) = \text{Ker}(f')$. Also
$0 \to \text{Ker}(f') \to A \to I \to 0$
and
$0 \to I \to B \to B/I \to 0$
are short exact. By the condition imposed on $F$
we see that
$0 \to F(\text{Ker}(f')) \to F(A) \to F(I)$
and
$0 \to F(I) \to F(B) \to F(B/I)$
are exact. Hence it is also the case that
$F(\text{Ker}(f'))$ is the kernel of the map
$F(A) \to F(B)$, and we win.

\medskip\noindent
The proof of (3) is similar to the proof of (2).
Statement (4) is a combination of (2) and (3).
\end{proof}

\begin{lemma}
\label{lemma-exact-functor-ext}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories.
Let $F : \mathcal{A} \to \mathcal{B}$ be an exact functor.
For every pair of objects $A, B$ of $\mathcal{A}$ the
functor $F$ induces an abelian group homomorphism
$$
\text{Ext}_\mathcal{A}(B, A)
\longrightarrow
\text{Ext}_\mathcal{B}(F(B), F(A))
$$
which maps the extension $E$ to $F(E)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}



\section{Complexes}
\label{section-complexes}

\noindent
Of course the notions of a chain complex and a cochain complex
are dual and you only have to read one of the two parts of
this section. So pick the one you like. (Actually, this doesn't
quite work right since the conventions on numbering things
are not adapted to an easy transition between chain and cochain
complexes.)

\medskip\noindent
A {\it chain complex $A_\bullet$} in an additive category $\mathcal{A}$
is a complex
$$
\ldots \to
A_{n + 1} \xrightarrow{d_{n + 1}}
A_n \xrightarrow{d_n}
A_{n - 1} \to
\ldots
$$
of $\mathcal{A}$. In other words, we are given an object $A_i$ of
$\mathcal{A}$ for all $i \in \mathbf{Z}$ and for
all $i \in \mathbf{Z}$ a morphism $d_i : A_i \to A_{i - 1}$ such that
$d_{i - 1} \circ d_i = 0$ for all $i$. A {\it morphism of chain
complexes $f : A_\bullet \to B_\bullet$} is given by a
family of morphisms $f_i : A_i \to B_i$ such that all
the diagrams
$$
\xymatrix{
A_i \ar[r]_{d_i} \ar[d]_{f_i} & A_{i - 1} \ar[d]^{f_{i - 1}} \\
B_i \ar[r]^{d_i} & B_{i - 1}
}
$$
commute. The {\it category of chain complexes of $\mathcal{A}$}
is denoted $\text{Ch}(\mathcal{A})$. The full subcategory consisting
of objects of the form
$$
\ldots \to A_2 \to A_1 \to A_0 \to 0 \to 0 \to \ldots
$$
is denoted $\text{Ch}_{\geq 0}(\mathcal{A})$.
In other words, a chain complex $A_\bullet$ belongs to
$\text{Ch}_{\geq 0}(\mathcal{A})$ if and only if
$A_i = 0$ for all $i < 0$.
A {\it homotopy $h$} between a pair of morphisms
of chain complexes $f, g : A_\bullet \to B_\bullet$ is
is a collection of morphisms $h_i : A_i \to B_{i + 1}$
such that we have
$$
f_i - g_i = d_{i + 1} \circ h_i + h_{i - 1} \circ d_i
$$
for all $i$. Clearly, the notions of chain complex, morphism of
chain complexes, and homotopies between morphisms of chain complexes
makes sense even in a preadditive category. 

\begin{lemma}
\label{lemma-compose-homotopy}
Let $\mathcal{A}$ be an additive category.
Let $f, g : B_\bullet \to C_\bullet$ be morphisms
of chain complexes. Suppose given morphisms of chain
complexes $a : A_\bullet \to B_\bullet$, and
$c : C_\bullet \to D_\bullet$. 
If $\{h_i : B_i \to C_{i + 1}\}$ defines a homotopy
between $f$ and $g$, then $\{c_{i + 1} \circ h_i \circ a_i\}$
defines a homotopy between $c \circ f \circ a$ and
$c \circ g \circ a$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
In particular this means that it makes sense to define
the category of chain complexes with maps up to homotopy.
We'll return to this later.

\begin{definition}
\label{definition-homotopy-equivalent}
Let $\mathcal{A}$ be an additive category.
We say a morphism $a : A_\bullet \to B_\bullet$
is a {\it homotopy equivalence} if there exists
a morphism $b : B_\bullet \to A_\bullet$
such that there exists a homotopy between
$a \circ b$ and $\text{id}_A$
and there exists a homotopy between $b \circ a$ and $\text{id}_B$.
If there exists such a morphism between $A_\bullet$ and $B_\bullet$, then
we say that $A_\bullet$ and $B_\bullet$ are {\it homotopy equivalent}.
\end{definition}

\noindent
In other words, two complexes are homotopy equivalent if they become
isomorphic in the category of complexes up to homotopy.

\begin{lemma}
\label{lemma-cat-chain-abelian}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item The category of chain complexes in $\mathcal{A}$ is
abelian.
\item A morphism of complexes
$f : A_\bullet \to B_\bullet$ is injective
if and only if each $f_n : A_n \to B_n$ is injective.
\item A morphism of complexes
$f : A_\bullet \to B_\bullet$ is surjective
if and only if each $f_n : A_n \to B_n$ is surjective.
\item A sequence of chain complexes
$$
A_\bullet \xrightarrow{f} B_\bullet \xrightarrow{g} C_\bullet
$$
is exact at $B_\bullet$ if and only if each sequence
$$
A_i \xrightarrow{f_i} B_i \xrightarrow{g_i} C_i
$$
is exact at $B_i$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
For any $i \in \mathbf{Z}$ the $i$th {\it homology group}
of a chain complex $A_\bullet$ in an abelian category is defined by
the following formula
$$
H_i(A_\bullet) = \text{Ker}(d_i)/\text{Im}(d_{i + 1}).
$$
If $f : A_\bullet \to B_\bullet$ is a morphism of chain
complexes of $\mathcal{A}$ then we get an induced
morphism $H_i(f) : H_i(A_\bullet) \to H_i(B_\bullet)$
because clearly
$f_i(\text{Ker}(d_i : A_i \to A_{i - 1})) \subset
\text{Ker}(d_i : B_i \to B_{i - 1})$, and similarly
for $\text{Im}(d_{i + 1})$.
Thus we obtain a functor
$$
H_i : \text{Ch}(\mathcal{A}) \longrightarrow \mathcal{A}.
$$

\begin{definition}
\label{definition-quasi-isomorphism}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item A morphism of chain complexes $f : A_\bullet \to B_\bullet$
is called a {\it quasi-isomorphism} if the induced
maps $H_i(f) : H_i(A_\bullet) \to H_i(B_\bullet)$
is an isomorphism for all $i \in \mathbf{Z}$.
\item A chain complex $A_\bullet$ is called
{\it acyclic} if all of its homology objects
$H_i(A_\bullet)$ are zero.
\end{enumerate}
\end{definition}


\begin{lemma}
\label{lemma-map-homology-homotopy}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item If the maps $f, g : A_\bullet \to B_\bullet$ are
homotopic, then the induced maps $H_i(f)$ and $H_i(g)$
are equal.
\item If the map $f : A_\bullet \to B_\bullet$ is a homotopy
equivalence, then $f$ is a quisi-isomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-long-exact-sequence-chain}
Let $\mathcal{A}$ be an abelian category.
Suppose that
$$
0 \to
A_\bullet \to
B_\bullet \to
C_\bullet \to
0
$$
is a short exact sequence of chain complexes of $\mathcal{A}$.
Then there is a canonical long exact homology sequence
$$
\xymatrix{
\ldots & \ldots & \dots \ar[lld] \\
H_i(A_\bullet) \ar[r] & H_i(B_\bullet) \ar[r] & H_i(C_\bullet) \ar[lld] \\
H_{i - 1}(A_\bullet) \ar[r] &
H_{i - 1}(B_\bullet) \ar[r] &
H_{i - 1}(C_\bullet) \ar[lld] \\
\ldots & \ldots & \dots \\
}
$$
\end{lemma}

\begin{proof}
Omitted. The maps come from the Snake Lemma \ref{lemma-snake}
applied to the diagrams
$$
\xymatrix{
&
A_i/\text{Im}(d_{A, i + 1}) \ar[r] \ar[d]^{d_{A, i}} &
B_i/\text{Im}(d_{B, i + 1}) \ar[r] \ar[d]^{d_{B, i}} &
C_i/\text{Im}(d_{C, i + 1}) \ar[r] \ar[d]^{d_{C, i}} &
0 \\
0 \ar[r] &
\text{Ker}(d_{A, i - 1}) \ar[r] &
\text{Ker}(d_{B, i - 1}) \ar[r] &
\text{Ker}(d_{C, i - 1}) &
}
$$
\end{proof}

\noindent
A {\it cochain complex $A^\bullet$} in an additive category $\mathcal{A}$
is a complex
$$
\ldots \to
A^{n - 1} \xrightarrow{d^{n - 1}}
A^n \xrightarrow{d^n}
A^{n + 1} \to
\ldots
$$
of $\mathcal{A}$. In other words, we are given an object $A^i$ of
$\mathcal{A}$ for all $i \in \mathbf{Z}$ and for
all $i \in \mathbf{Z}$ a morphism $d^i : A^i \to A^{i + 1}$ such that
$d^{i + 1} \circ d^i = 0$ for all $i$. A {\it morphism of cochain
complexes $f : A^\bullet \to B^\bullet$} is given by a
family of morphisms $f^i : A^i \to B^i$ such that all
the diagrams
$$
\xymatrix{
A^i \ar[r]_{d^i} \ar[d]_{f^i} & A^{i + 1} \ar[d]^{f^{i + 1}} \\
B^i \ar[r]^{d^i} & B^{i + 1}
}
$$
commute. The {\it category of cochain complexes of $\mathcal{A}$}
is denoted $\text{CoCh}(\mathcal{A})$. The full subcategory consisting
of objects of the form
$$
\ldots \to 0 \to 0 \to A^0 \to A^1 \to A^2 \to \ldots
$$
is denoted $\text{CoCh}_{\geq 0}(\mathcal{A})$.
In other words, a cochain complex $A^\bullet$ belongs to
$\text{CoCh}_{\geq 0}(\mathcal{A})$ if and only if
$A^i = 0$ for all $i < 0$.
A {\it homotopy $h$} between a pair of morphisms
of cochain complexes $f, g : A^\bullet \to B^\bullet$ is
is a collection of morphisms $h^i : A^i \to B^{i - 1}$
such that we have
$$
f^i - g^i = d^{i - 1} \circ h^i + h^{i + 1} \circ d^i
$$
for all $i$. Clearly, the notions of cochain complex, morphism of
cochain complexes, and homotopies between morphisms of cochain complexes
makes sense even in a preadditive category.

\begin{lemma}
\label{lemma-compose-homotopy-cochain}
Let $\mathcal{A}$ be an additive category.
Let $f, g : B^\bullet \to C^\bullet$ be morphisms
of cochain complexes. Suppose given morphisms of cochain
complexes $a : A^\bullet \to B^\bullet$, and
$c : C^\bullet \to D^\bullet$. 
If $\{h^i : B^i \to C^{i - 1}\}$ defines a homotopy
between $f$ and $g$, then $\{c^{i - 1} \circ h^i \circ a^i\}$
defines a homotopy between $c \circ f \circ a$ and
$c \circ g \circ a$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
In particular this means that it makes sense to define
the category of cochain complexes with maps up to homotopy.
We'll return to this later.

\begin{definition}
\label{definition-homotopy-equivalent-cochain}
Let $\mathcal{A}$ be an additive category.
We say a morphism $a : A^\bullet \to B^\bullet$
is a {\it homotopy equivalence} if there exists
a morphism $b : B^\bullet \to A^\bullet$
such that there exists a homotopy between
$a \circ b$ and $\text{id}_A$
and there exists a homotopy between $b \circ a$ and $\text{id}_B$.
If there exists such a morphism between $A^\bullet$ and $B^\bullet$, then
we say that $A^\bullet$ and $B^\bullet$ are {\it homotopy equivalent}.
\end{definition}

\noindent
In other words, two complexes are homotopy equivalent if they become
isomorphic in the category of complexes up to homotopy.

\begin{lemma}
\label{lemma-cat-cochain-abelian}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item The category of cochain complexes in $\mathcal{A}$ is
abelian.
\item A morphism of cochain complexes
$f : A^\bullet \to B^\bullet$ is injective
if and only if each $f^n : A^n \to B^n$ is injective.
\item A morphism of cochain complexes
$f : A^\bullet \to B^\bullet$ is surjective
if and only if each $f^n : A^n \to B^n$ is surjective.
\item A sequence of cochain complexes
$$
A^\bullet \xrightarrow{f} B^\bullet \xrightarrow{g} C^\bullet
$$
is exact at $B^\bullet$ if and only if each sequence
$$
A^i \xrightarrow{f^i} B^i \xrightarrow{g^i} C^i
$$
is exact at $B^i$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
For any $i \in \mathbf{Z}$ the $i$th {\it cohomology group}
of a cochain complex $A^\bullet$ is defined by
the following formula
$$
H^i(A^\bullet) = \text{Ker}(d^i)/\text{Im}(d^{i - 1}).
$$
If $f : A^\bullet \to B^\bullet$ is a morphism of cochain
complexes of $\mathcal{A}$ then we get an induced
morphism $H^i(f) : H^i(A^\bullet) \to H^i(B^\bullet)$
because clearly
$f^i(\text{Ker}(d^i : A^i \to A^{i + 1})) \subset
\text{Ker}(d^i : B^i \to B^{i + 1})$, and similarly
for $\text{Im}(d^{i - 1})$.
Thus we obtain a functor
$$
H^i : \text{CoCh}(\mathcal{A}) \longrightarrow \mathcal{A}.
$$

\begin{definition}
\label{definition-quasi-isomorphism-cochain}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item A morphism of cochain complexes $f : A^\bullet \to B^\bullet$
is called a {\it quasi-isomorphism} if the induced
maps $H^i(f) : H^i(A^\bullet) \to H^i(B^\bullet)$
is an isomorphism for all $i \in \mathbf{Z}$.
\item A cochain complex $A^\bullet$ is called
{\it acyclic} if all of its cohomology objects
$H^i(A^\bullet)$ are zero.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-map-cohomology-homotopy-cochain}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item If the maps $f, g : A^\bullet \to B^\bullet$ are
homotopic, then the induced maps $H^i(f)$ and $H^i(g)$
are equal.
\item If $f : A^\bullet \to B^\bullet$ is a homotopy equivalence,
then $f$ is a quasi-isomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-long-exact-sequence-cochain}
Let $\mathcal{A}$ be an abelian category.
Suppose that
$$
0 \to
A^\bullet \to
B^\bullet \to
C^\bullet \to
0
$$
is a short exact sequence of chain complexes of $\mathcal{A}$.
Then there is a canonical long exact homology sequence
$$
\xymatrix{
\ldots & \ldots & \dots \ar[lld] \\
H^i(A^\bullet) \ar[r] &
H^i(B^\bullet) \ar[r] &
H^i(C^\bullet) \ar[lld] \\
H^{i + 1}(A^\bullet) \ar[r] &
H^{i + 1}(B^\bullet) \ar[r] &
H^{i + 1}(C^\bullet) \ar[lld] \\
\ldots & \ldots & \dots \\
}
$$
\end{lemma}

\begin{proof}
Omitted. The maps come from the Snake Lemma \ref{lemma-snake}
applied to the diagrams
$$
\xymatrix{
&
A^i/\text{Im}(d_A^{i - 1}) \ar[r] \ar[d]^{d_A^i} &
B^i/\text{Im}(d_B^{i - 1}) \ar[r] \ar[d]^{d_B^i} &
C^i/\text{Im}(d_C^{i - 1}) \ar[r] \ar[d]^{d_C^i} &
0 \\
0 \ar[r] &
\text{Ker}(d_A^{i + 1}) \ar[r] &
\text{Ker}(d_B^{i + 1}) \ar[r] &
\text{Ker}(d_C^{i + 1}) &
}
$$
\end{proof}






\section{Truncation of complexes}
\label{section-truncations}

\noindent
Let $\mathcal{A}$ be an abelian category.
Let $A_\bullet$ be a chain complex. There
are two ways to truncate or filter the complex $A_\bullet$.
\begin{enumerate}
\item The ``stupid'' filtration is the filtration by
the subcomplexes $\sigma_{\leq n} A_\bullet$ defined
by the rule $(\sigma_{\leq n} A_\bullet)_i = 0$ if
$i > n$ and $(\sigma_{\leq n} A_\bullet)_i = A_i$ if
$i \leq n$. In a picture
$$
\xymatrix{
\sigma_{\leq n}A_\bullet \ar[d]  &
\ldots \ar[r] &
0 \ar[r] \ar[d] &
A_n \ar[r] \ar[d] &
A_{n - 1} \ar[r] \ar[d] &
\ldots \\
A_\bullet  &
\ldots \ar[r] &
A_{n + 1} \ar[r] &
A_n \ar[r] &
A_{n - 1} \ar[r] &
\ldots
}
$$
Note that this filtration has the property that
$\sigma_{\leq n}A_\bullet / \sigma_{\leq n - 1}A_\bullet
= A_n[-n]$.
\item The {\it canonical} filtration by $\tau_{\geq n}A_\bullet$
which is best defined by a picture, namely
$$
\xymatrix{
\tau_{\geq n}A_\bullet \ar[d]  &
\ldots \ar[r] &
A_{n + 1} \ar[r] \ar[d] &
\text{Ker}(d_n) \ar[r] \ar[d] &
0 \ar[r] \ar[d] &
\ldots \\
A_\bullet  &
\ldots \ar[r] &
A_{n + 1} \ar[r] &
A_n \ar[r] &
A_{n - 1} \ar[r] &
\ldots
}
$$
Note that these complexes have the property that
$$
H_i(\tau_{\geq n}A_\bullet) = 
\left\{
\begin{matrix}
H_i(A_\bullet) & \text{if} & i \geq n \\
0 & \text{if} & i < n
\end{matrix}
\right.
$$
\end{enumerate}

\medskip\noindent
Let $\mathcal{A}$ be an abelian category.
Let $A^\bullet$ be a cochain complex. There
are two ways to truncate or filter the complex $A^\bullet$.
\begin{enumerate}
\item The ``stupid'' filtration is the filtration by
the subcomplexes $\sigma_{\geq n} A^\bullet$ defined
by the rule $(\sigma_{\geq n} A^\bullet)_i = 0$ if
$i < n$ and $(\sigma_{\geq n} A^\bullet)_i = A_i$ if
$i \geq n$. In a picture
$$
\xymatrix{
\sigma_{\geq n}A^\bullet \ar[d]  &
\ldots \ar[r] &
0 \ar[r] \ar[d] &
A^n \ar[r] \ar[d] &
A^{n + 1} \ar[r] \ar[d] &
\ldots \\
A^\bullet  &
\ldots \ar[r] &
A^{n - 1} \ar[r] &
A^n \ar[r] &
A^{n + 1} \ar[r] &
\ldots
}
$$
Note that this filtration has the property that
$\sigma_{\geq n}A^\bullet / \sigma_{\geq n + 1}A^\bullet
= A^n[-n]$.
\item The {\it canonical} filtration by $\tau_{\leq n}A^\bullet$
which is best defined by a picture, namely
$$
\xymatrix{
\tau_{\leq n}A^\bullet \ar[d]  &
\ldots \ar[r] &
A^{n - 1} \ar[r] \ar[d] &
\text{Ker}(d_n) \ar[r] \ar[d] &
0 \ar[r] \ar[d] &
\ldots \\
A^\bullet  &
\ldots \ar[r] &
A^{n - 1} \ar[r] &
A^n \ar[r] &
A^{n + 1} \ar[r] &
\ldots
}
$$
Note that these complexes have the property that
$$
H^i(\tau_{\leq n}A^\bullet) = 
\left\{
\begin{matrix}
H^i(A^\bullet) & \text{if} & i \geq n \\
0 & \text{if} & i < n
\end{matrix}
\right.
$$
\end{enumerate}


















\section{Homotopy and the shift functor}
\label{section-homotopy-shift}

\noindent
It is an annoying feature that signs and indices
have to be part of any discussion of homological
algebra\footnote{I am sure you think that my conventions
are wrong. If so and if you feel strongly about it
then drop me an email with an explanation.}.

\begin{definition}
\label{definition-shift}
Let $\mathcal{A}$ be an additive category.
Let $A_\bullet$ be a chain complex
with boundary maps $d_{A, n} : A_n \to A_{n - 1}$.
For any $k \in \mathbf{Z}$ we define the
{\it $k$-shifted chain complex $A[k]_\bullet$}
as follows: 
\begin{enumerate}
\item we set $A[k]_n = A_{n + k}$, and
\item we set $d_{A[k], n} : A[k]_n \to A[k]_{n - 1}$
equal to $d_{A[k], n} = (-1)^k d_{A, n + k}$.
\end{enumerate}
If $f : A_\bullet \to B_\bullet$ is a morphism of
chain complexes, then we let
$f[k] : A[k]_\bullet \to B[k]_\bullet$ be the
morphism of chain complexes with
$f[k]_n = f_{k + n}$.
\end{definition}

\noindent
Of course this means we have functors
$[k] : \text{Ch}(\mathcal{A}) \to \text{Ch}(\mathcal{A})$
which mutually commute (on the nose, without
any intervening isomorphisms of functors),
such that $A[k][l]_\bullet = A[k + l]_\bullet$ and
with $[0] = \text{id}_{\text{Ch}(\mathcal{A})}$.

\begin{definition}
\label{definition-homology-shift}
Let $\mathcal{A}$ be an abelian category.
Let $A_\bullet$ be a chain complex
with boundary maps $d_{A, n} : A_n \to A_{n - 1}$.
For any $k \in \mathbf{Z}$ we identify
{\it $H_{i + k}(A_\bullet) \rightarrow H_i(A[k]_\bullet)$}
via the identification
$A_{i + k} = A[k]_i$.
\end{definition}

\noindent
This identification is functorial in $A_\bullet$.
Note that since no signs are involved in this
definition we actually get a compatible system
of identifications of all the homology
objects $H_{i - k}(A[k]_\bullet)$, which are
further compatible with the identifications
$A[k][l]_\bullet = A[k + l]_\bullet$ and
with $[0] = \text{id}_{\text{Ch}(\mathcal{A})}$.

\medskip\noindent
Let $\mathcal{A}$ be an additive category.
Suppose that $A_\bullet$ and $B_\bullet$ are
chain complexes, $a, b : A_\bullet \to B_\bullet$ are
morphsms of chain complexes, and $\{h_i : A_i \to B_{i + 1}\}$
is a homotopy between $a$ and $b$. Recall that this means
that
$a_i - b_i = d_{i + 1} \circ h_i + h_{i - 1} \circ d_i$.
What if $a = b$? Then we obtain the formula
$0 = d_{i + 1} \circ h_i + h_{i - 1} \circ d_i$,
in other words, $ - d_{i + 1} \circ h_i = h_{i - 1} \circ d_i$.
By definition above this means the collection $\{h_i\}$
above defines a morphism of chain complexes
$$
A_\bullet \longrightarrow B[1]_\bullet.
$$
Such a thing is the same as a morphism $A[-1]_\bullet \to B_\bullet$
by our remarks above. This proves the following lemma.

\begin{lemma}
\label{lemma-homotopy-shift}
Let $\mathcal{A}$ be an additive category.
Suppose that $A_\bullet$ and $B_\bullet$ are
chain complexes. Given any morphism of chain
complexes $a : A_\bullet \to B_\bullet$ there
is a bijection between the set of homotopies
from $a$ to $a$ and
$\text{Mor}_{\text{Ch}(\mathcal{A})}(A_\bullet, B[1]_\bullet)$.
More generally, the set of homotopies between
$a$ and $b$ is either empty or a principal homogenous
space under the group
$\text{Mor}_{\text{Ch}(\mathcal{A})}(A_\bullet, B[1]_\bullet)$.
\end{lemma}

\begin{proof}
See above.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split}
Let $\mathcal{A}$ be an abelian category.
Let
$$
0 \to A_\bullet \to B_\bullet \to C_\bullet \to 0
$$
be a sort exact sequence of complexes.
Suppose that $\{s_n : C_n \to B_n\}$ is a family
of morphisms which split the short exact sequences
$0 \to A_n \to B_n \to C_n \to 0$. Let
$\pi_n : B_n \to A_n$ be the associated
projections, see Lemma \ref{lemma-ses-split}.
Then the family of morphisms
$$
\pi_{n - 1} \circ d_{B, n} \circ s_n
:
C_n \to A_{n - 1}
$$
define a morphism of complexes $\delta(s) : C_\bullet \to A[-1]_\bullet$.
\end{lemma}

\begin{proof}
Denote $i : A_\bullet \to B_\bullet$ and $q : B_\bullet \to C_\bullet$
the maps of complexes in the short exact sequence. Then
$i_{n - 1} \circ \pi_{n - 1} \circ d_{B, n} \circ s_n =
d_{B, n} \circ s_n - s_{n - 1} \circ d_{C, n}$. Hence
$i_{n - 2} \circ d_{A, n - 1} \circ \pi_{n - 1} \circ d_{B, n} \circ s_n =
d_{B, n - 1} \circ (d_{B, n} \circ s_n - s_{n - 1} \circ d_{C, n}) =
- d_{B, n - 1} \circ s_{n - 1} \circ d_{C, n}$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split-long}
Notation and assumptions as in Lemma \ref{lemma-ses-termwise-split} above.
The morphism of complexes $\delta(s) : C_\bullet \to A[-1]_\bullet$
induces the maps
$$
H_i(\delta(s)) :
H_i(C_\bullet) \longrightarrow H_i(A[-1]_\bullet) = H_{i - 1}(A_\bullet)
$$
which occur in the long exact homology sequence associated
to the short exact sequence of chain complexes by
Lemma \ref{lemma-long-exact-sequence-chain}.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split-homotopy}
Notation and assumptions as in Lemma \ref{lemma-ses-termwise-split} above.
Suppose $\{s'_n : C_n \to B_n\}$ is a second choice of splittings.
Write $s'_n = s_n + \pi_n \circ h_n$ for some unique
morphisms $h_n : C_n \to A_n$. The family of maps
$\{h_n : C_n \to A[-1]_{n + 1}\}$ is a homotopy between
the associated morphisms
$\delta(s), \delta(s') : C_\bullet \to A[-1]_\bullet$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}



\begin{definition}
\label{definition-shift-cochain}
Let $\mathcal{A}$ be an additive category.
Let $A^\bullet$ be a cochain complex
with boundary maps $d_A^n : A^n \to A^{n - 1}$.
For any $k \in \mathbf{Z}$ we define the
{\it $k$-shifted cochain complex $A[k]^\bullet$}
as follows: 
\begin{enumerate}
\item we set $A[k]^n = A^{n + k}$, and
\item we set $d_{A[k]}^n : A[k]^n \to A[k]^{n - 1}$
equal to $d_{A[k]}^n = (-1)^k d_A^{n + k}$.
\end{enumerate}
If $f : A^\bullet \to B^\bullet$ is a morphism of
cochain complexes, then we let
$f[k] : A[k]^\bullet \to B[k]^\bullet$ be the
morphism of cochain complexes with
$f[k]^n = f^{k + n}$.
\end{definition}

\noindent
Of course this means we have functors
$[k] : \text{CoCh}(\mathcal{A}) \to \text{CoCh}(\mathcal{A})$
which mutually commute (on the nose, without
any intervening isomorphisms of functors) and
such that $A[k][l]^\bullet = A[k + l]^\bullet$ and
with $[0] = \text{id}_{\text{CoCh}(\mathcal{A})}$.

\begin{definition}
\label{definition-comology-shift}
Let $\mathcal{A}$ be an abelian category.
Let $A^\bullet$ be a cochain complex
with boundary maps $d_A^n : A^n \to A^{n + 1}$.
For any $k \in \mathbf{Z}$ we identify
{\it $H^{i + k}(A^\bullet) \longrightarrow H^i(A[k]^\bullet)$}
via the identification $A^{i + k} = A[k]^i$.
\end{definition}

\noindent
This identification is functorial in $A^\bullet$.
Note that since no signs are involved in this
definition we actually get a compatible system
of identifications of all the homology
objects $H^{i - k}(A[k]^\bullet)$, which are
further compatible with the identifications
$A[k][l]^\bullet = A[k + l]^\bullet$ and
with $[0] = \text{id}_{\text{CoCh}(\mathcal{A})}$.

\medskip\noindent
Let $\mathcal{A}$ be an additive category.
Suppose that $A^\bullet$ and $B^\bullet$ are
cochain complexes, $a, b : A^\bullet \to B^\bullet$ are
morphsms of cochain complexes, and $\{h^i : A^i \to B^{i - 1}\}$
is a homotopy between $a$ and $b$. Recall that this means
that
$a^i - b^i = d^{i - 1} \circ h^i + h^{i + 1} \circ d^i$.
What if $a = b$? Then we obtain the formula
$0 = d^{i - 1} \circ h^i + h^{i + 1} \circ d^i$,
in other words, $ - d^{i - 1} \circ h^i = h^{i + 1} \circ d^i$.
By definition above this means the collection $\{h^i\}$
above defines a morphism of cochain complexes
$$
A^\bullet \longrightarrow B[-1]^\bullet.
$$
Such a thing is the same as a morphism $A[1]^\bullet \to B^\bullet$
by our remarks above. This proves the following lemma.

\begin{lemma}
\label{lemma-homotopy-shift-cochain}
Let $\mathcal{A}$ be an additive category.
Suppose that $A^\bullet$ and $B^\bullet$ are
cochain complexes. Given any morphism of cochain
complexes $a : A^\bullet \to B^\bullet$ there
is a bijection between the set of homotopies
from $a$ to $a$ and
$\text{Mor}_{\text{CoCh}(\mathcal{A})}(A^\bullet, B[-1]^\bullet)$.
More generally, the set of homotopies between
$a$ and $b$ is either empty or a principal homogenous
space under the group
$\text{Mor}_{\text{CoCh}(\mathcal{A})}(A^\bullet, B[-1]^\bullet)$.
\end{lemma}

\begin{proof}
See above.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split-cochain}
Let $\mathcal{A}$ be an additive category.
Let
$$
0 \to A^\bullet \to B^\bullet \to C^\bullet \to 0
$$
be a complex (!) of complexes.
Suppose that we are given splittings $B^n = A^n \oplus C^n$
compatible with the maps in the displayed sequence.
Let $s^n : C^n \to B^n$ and $\pi^n : B^n \to A^n$ be the
corresponding maps. Then the family of morphisms
$$
\pi^{n + 1} \circ d_B^n \circ s^n
:
C^n \to A^{n + 1}
$$
define a morphism of complexes $\delta : C^\bullet \to A[1]^\bullet$.
\end{lemma}

\begin{proof}
Denote $i : A^\bullet \to B^\bullet$ and $q : B^\bullet \to C^\bullet$
the maps of complexes in the short exact sequence. Then
$i^{n + 1} \circ \pi^{n + 1} \circ d_B^n \circ s^n =
d_B^n \circ s^n - s^{n + 1} \circ d_C^n$. Hence
$i^{n + 2} \circ d_A^{n + 1} \circ \pi^{n + 1} \circ d_B^n \circ s^n =
d_B^{n + 1} \circ (d_B^n \circ s^n - s^{n + 1} \circ d_C^n) =
- d_B^{n + 1} \circ s^{n + 1} \circ d_C^n$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split-long-cochain}
Notation and assumptions as in
Lemma \ref{lemma-ses-termwise-split-cochain} above.
Assume in addition that $\mathcal{A}$ is abelian.
The morphism of complexes $\delta : C^\bullet \to A[1]^\bullet$
induces the maps
$$
H^i(\delta) :
H^i(C^\bullet) \longrightarrow H^i(A[1]^\bullet) = H^{i + 1}(A^\bullet)
$$
which occur in the long exact homology sequence associated
to the short exact sequence of cochain complexes by
Lemma \ref{lemma-long-exact-sequence-cochain}.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-ses-termwise-split-homotopy-cochain}
Notation and assumptions as in
Lemma \ref{lemma-ses-termwise-split-cochain} above.
Suppose $\{t^n : C^n \to B^n\}$ is a second choice of splittings.
Write $t^n = s^n + \pi^n \circ h^n$ for some unique
morphisms $h^n : C^n \to A^n$. The family of maps
$\{h^n : C^n \to A[1]^{n - 1}\}$ is a homotopy between
the associated morphisms
$\delta(s), \delta(t) : C^\bullet \to A[1]^\bullet$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}










\section{Injectives}
\label{section-injectives}

\begin{definition}
\label{definition-injective}
Let $\mathcal{A}$ be an abelian category.
An object $J \in \text{Ob}(\mathcal{A})$ is
called {\it injective} if for every injection
$A \hookrightarrow B$ and every morphism
$A \to J$ there exists a morphism $B \to J$ making
the following diagram commute
$$
\xymatrix{
A \ar[r] \ar[d] & B \ar@{-->}[ld] \\
J & 
}
$$
\end{definition}

\noindent
Here is the obligatory characterization of injective objects.

\begin{lemma}
\label{lemma-characterize-injectives}
Let $\mathcal{A}$ be an abelian category.
Let $I$ be an object of $\mathcal{A}$.
The following are equivalent:
\begin{enumerate}
\item The object $I$ is injective.
\item The functor $B \mapsto \text{Hom}_{\mathcal{A}}(B, I)$
is exact.
\item Any short exact sequence
$$
0 \to I \to A \to B \to 0
$$
in $\mathcal{A}$ is split.
\item We have $\text{Ext}_{\mathcal{A}}(B, I) = 0$ for
all $B \in \text{Ob}(\mathcal{A})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-enough-injectives}
Let $\mathcal{A}$ be an abelian category.
We say $\mathcal{A}$ has {\it enough injectives}
if every object $A$ has an injective morphism
$A \to J$ into an injective object $J$.
\end{definition}

\begin{definition}
\label{definition-functorial-injective-embedding}
Let $\mathcal{A}$ be an abelian category.
We say that {\it $\mathcal{A}$ has functorial injective embeddings}
if there exists a functor
$$
J : \mathcal{A} \longrightarrow \text{Arrows}(\mathcal{A})
$$
such that
\begin{enumerate}
\item $s \circ J = \text{id}_{\mathcal{A}}$,
\item for any object $A \in \text{Ob}(\mathcal{A})$
the morphism $J(A)$ is injective, and
\item for any object $A \in \text{Ob}(\mathcal{A})$
the object $t(J(A))$ is an injective object of $\mathcal{A}$.
\end{enumerate}
We will denote such a functor by
$A \mapsto (A \to J(A))$.
\end{definition}

\section{Projectives}
\label{section-projectives}

\begin{definition}
\label{definition-projective}
Let $\mathcal{A}$ be an abelian category.
An object $P \in \text{Ob}(\mathcal{A})$ is
called {\it projective} if for every surjection
$A \rightarrow B$ and every morphism
$P \to B$ there exists a morphism $P \to A$ making
the following diagram commute
$$
\xymatrix{
A \ar[r] & B \\
P \ar@{-->}[u] \ar[ru] & 
}
$$
\end{definition}

\noindent
Here is the obligatory characterization of projective objects.

\begin{lemma}
\label{lemma-characterize-projectives}
Let $\mathcal{A}$ be an abelian category.
Let $P$ be an object of $\mathcal{A}$.
The following are equivalent:
\begin{enumerate}
\item The object $P$ is projective.
\item The functor $B \mapsto \text{Hom}_{\mathcal{A}}(P, B)$
is exact.
\item Any short exact sequence
$$
0 \to A \to B \to P \to 0
$$
in $\mathcal{A}$ is split.
\item We have $\text{Ext}_{\mathcal{A}}(P, A) = 0$ for
all $A \in \text{Ob}(\mathcal{A})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}


\begin{definition}
\label{definition-enough-projectives}
Let $\mathcal{A}$ be an abelian category.
We say $\mathcal{A}$ has {\it enough projectives}
if every object $A$ has an surjective morphism
$P \to A$ from an projective object $P$ onto it.
\end{definition}

\begin{definition}
\label{definition-functorial-projective-surjections}
Let $\mathcal{A}$ be an abelian category.
We say that {\it $\mathcal{A}$ has functorial projective surjections}
if there exists a functor
$$
P : \mathcal{A} \longrightarrow \text{Arrows}(\mathcal{A})
$$
such that
\begin{enumerate}
\item $t \circ J = \text{id}_{\mathcal{A}}$,
\item for any object $A \in \text{Ob}(\mathcal{A})$
the morphism $P(A)$ is surjective, and
\item for any object $A \in \text{Ob}(\mathcal{A})$
the object $s(P(A))$ is an projective object of $\mathcal{A}$.
\end{enumerate}
We will denote such a functor by
$A \mapsto (P(A) \to A)$.
\end{definition}





\section{Injective resolutions}
\label{section-injective-resolutions}

\noindent
In this section we prove some lemmas regarding the existence
of injective resolutions in categories having enough injectives.
In this section we will consider only cochain complexes, and we will
often simply call these complexes.
In fact we rename some of the notions defined earlier as follows.

\begin{definition}
\label{definition-complexes-notation}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item We set $\text{Comp}(\mathcal{A}) = \text{CoCh}(\mathcal{A})$
be the {\it category of (cochain) complexes}.
\item A complex $K^\bullet$ is said to be
{\it bounded below} if $K^n = 0$ for all $n \ll 0$.
\item We let $\text{Comp}^{+}(\mathcal{A})$ be the full subcategory
of $\text{Comp}(\mathcal{A})$ whose objects are the complexes
which are bounded below.
\item We let $K(\mathcal{A})$ be the category with the same objects
as $\text{Comp}(\mathcal{A})$ but as morphisms homotopy classes of
maps of complexes (see Lemma \ref{lemma-compose-homotopy-cochain}).
\item We let $K^{+}(\mathcal{A})$ be the full subcategory of
$K(\mathcal{A})$ whose objects are bounded below complexes
of $\mathcal{A}$.
\end{enumerate}
\end{definition}

\noindent
Given an object $A$ of $\mathcal{A}$ we get a complex
$$
A[0] = ( \ldots \to 0 \to A \to 0 \to \ldots )
$$
where $A$ is placed in degree zero. Hence a natural functor
$\mathcal{A} \to \text{Comp}(\mathcal{A})$, $A \mapsto A[0]$.
Sofar we have defined categories and functors
$$
\mathcal{A} \to \text{Comp}(\mathcal{A}) \to K(\mathcal{A})
$$
and
$$
\mathcal{A} \to \text{Comp}^{+}(\mathcal{A}) \to K^{+}(\mathcal{A})
$$

\begin{definition}
\label{definition-injective-resolution}
Let $\mathcal{A}$ be an abelian category.
Let $A \in \text{Ob}(\mathcal{A})$.
An {\it injective resolution of $A$} is a complex
$I^\bullet$ together with a map $A \to I^0$ such
that:
\begin{enumerate}
\item We have $I^n = 0$ for $n < 0$.
\item Each $I^n$ is an injective object of $\mathcal{A}$.
\item The map $A \to I^0$ is an isomorphism onto $\text{Ker}(d^0)$.
\item We have $H^i(I^\bullet) = 0$ for $i > 0$.
\end{enumerate}
Hence $A[0] \to I^\bullet$ is a quasi-isomorphism.
In other words the complex
$$
\ldots \to 0 \to A \to I^0 \to I^1 \to \ldots
$$
is acyclic.
Let $K^\bullet$ be a complex in $\mathcal{A}$.
An {\it injective resolution of $K^\bullet$} is a complex
$I^\bullet$ together with a map $\alpha : K^\bullet \to I^\bullet$
of complexes such that
\begin{enumerate}
\item We have $I^n = 0$ for $n \ll 0$, i.e., $I^\bullet$ is bounded below.
\item Each $I^n$ is an injective object of $\mathcal{A}$.
\item The map $\alpha : K^\bullet \to I^\bullet$ is a
quasi-isomorphism.
\end{enumerate}
\end{definition}

\noindent
In other words an injective resolution $K^\bullet \to I^\bullet$
gives rise to a diagram
$$
\xymatrix{
\ldots \ar[r] & K^{n - 1} \ar[d] \ar[r] & K^n \ar[d] \ar[r] &
K^{n + 1} \ar[d] \ar[r] & \ldots \\
\ldots \ar[r] & I^{n - 1} \ar[r] & I^n \ar[r] & I^{n + 1} \ar[r] & \ldots
}
$$
which induces an isomorphism on cohomology objects in each degree.
An injective resolution of an object $A$ of $\mathcal{A}$
is almost the same thing as an injective resolution of
the complex $A[0]$.

\begin{lemma}
\label{lemma-cohomology-bounded-below}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$ be a complex of $\mathcal{A}$.
\begin{enumerate}
\item If $K^\bullet$ has an injective resolution then 
$H^n(K^\bullet) = 0$ for $n \ll 0$.
\item If $H^n(K^\bullet) = 0$ for all $n \ll 0$ then there
exists a quasi-isomorphism $K^\bullet \to L^\bullet$
with $L^\bullet$ bounded below.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted. For the second statement use
$L^\bullet = K^\bullet / \tau_{\leq n}K^\bullet$ for
some $n \ll 0$. See Section \ref{section-truncations} for
the definition of the truncation $\tau_{\leq n}$.
\end{proof}

\begin{lemma}
\label{lemma-injective-resolutions-exist}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
\begin{enumerate}
\item Any object of $\mathcal{A}$ has an injective resolution.
\item If $H^n(K^\bullet) = 0$ for all $n \ll 0$ then 
$K^\bullet$ has an injective resolution.
\item If $K^\bullet$ is bounded below then there exists
an injective resolution $\alpha : K^\bullet \to I^\bullet$
such that each $\alpha^n : K^n \to I^n$ is injective.
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (1). First choose an injection $A \to I^0$ of $A$ into an
injective object of $\mathcal{A}$. Next, choose an injection
$I_0/A \to I^1$ into an injective object of $\mathcal{A}$.
Denote $d^0$ the induced map $I^0 \to I^1$.
Next, choose an injection $I^1/\text{Im}(d^0) \to I^2$ into
an injective object of $\mathcal{A}$. Denote $d^1$ the induced
map $I^1 \to I^2$. And so on.

\medskip\noindent
By Lemma \ref{lemma-cohomology-bounded-below} part (2) follows from part (3).

\medskip\noindent
Proof of (3). Consider the following induction hypothesis
$IH_n$: There are $I^j$, $j \leq n$ injective objects almost
all zero, maps $d^j : I^j \to I^{j + 1}$ for $j < n$
and injective maps $\alpha^j : K^j \to I^j$ for $j \leq n$
such that the diagram
$$
\xymatrix{
\ldots \ar[r] & K^{n - 1} \ar[d]^\alpha \ar[r] &
K^n \ar[d]^\alpha \ar[r] &
K^{n + 1} \ar[r] & \ldots \\
\ldots \ar[r] & I^{n - 1} \ar[r] & I^n &  & 
}
$$
is commutative, such that $d^j \circ d^{j - 1} = 0$ for $j < n$
and such that $\alpha$ induces isomorphisms
$H^j(K^\bullet) \to \text{Ker}(d^j)/\text{Im}(d^{j - 1})$
for $j < n$. Note that this implies
\begin{equation}
\label{equation-star}
\alpha(\text{Im}(d^{n - 1}))
\subset
\alpha(\text{Ker}(d^n)) \cap d^{n - 1}(I^{n - 1})
\end{equation}
and
\begin{equation}
\label{equation-star-star}
\alpha(\text{Im}(d^{n - 1}))
\subset
\alpha(K^n) \cap d^{n - 1}(I^{n - 1}).
\end{equation}
If these inclusions are not equalities, then choose an injection
$K^n/\text{Im}(d^{n - 1}) \to I$ into an injective object $I$.
Denote $\alpha' : K^n \to I$ the induced map.
Replace $I^n$ by $\tilde I^n = I^n \oplus I$. Use the
map $(d^{n - 1}, 0) : I^{n - 1} \to I^n \oplus I$ and use
the map $(\alpha^n , \alpha') : K^n \to I^n \oplus I$.
It is easy to see that after these replacements we have
equality in Equations (\ref{equation-star}) and (\ref{equation-star-star}).
Once this is the
case consider the diagram
$$
\xymatrix{
K^n/\text{Ker}(d^n) \ar[r] \ar[d] & K^{n + 1} \\
I^n/(d^{n - 1}(L^{n - 1}) + \alpha(\text{Ker}(d^n))) &
}
$$
Both the horizontal and the vertical arrows are injective.
Hence the push-out $M$ of this diagram contains both
$K^{n + 1}$ and $I^n/(d^{n - 1}(L^{n - 1}) + \alpha(\text{Ker}(d^n)))$
as subobjects. Choose an injection $M \to I^{n + 1}$.
By construction we get $d^n : I^n \to I^{n + 1}$
and an injective map $\alpha^{n + 1} : K^{n + 1} \to I^{n + 1}$.
The equality in Equation (\ref{equation-star}) and the construction of
$d^{n + 1}$ garantee that $\alpha : H^n(K^\bullet) \to
\text{Ker}(d^n)/\text{Im}(d^{n - 1})$ is an isomorphism.
In other words $IH_{n + 1}$ holds.

\medskip\noindent
We finish the proof of (3) by the following observations.
First we note that $IH_n$ is true for all $n << 0$ since
we can just take $I_j = 0$ for $j \leq n$ in this case.
Next, we note that in the proof of $IH_n \Rightarrow IH_{n + 1}$
we only modified the object $I^n$, the map $d^{n - 1}$ and
the map $\alpha^n$. Hence we see that proceding by induction
we produce a definite complex $I^\bullet$ which is bounded below
and consists of injective objects, and a termwise
injective quasi-isomorphism $\alpha : K^\bullet \to I^\bullet$ as desired.
\end{proof}

\noindent
The following lemma can be used to replace an morphism of complexes
by a morphism where in each degree the map is the injection of a 
direct summand.

\begin{lemma}
\label{lemma-make-injective}
Let $\mathcal{A}$ be an additive category.
Let $\alpha : K^\bullet \to L^\bullet$ be a morphism
of complexes of $\mathcal{A}$.
There exists a factorization
$$
\xymatrix{
K^\bullet \ar[r]^{\tilde \alpha} \ar@/_1pc/[rr]_\alpha &
\tilde L^\bullet \ar[r]^\pi &
L^\bullet
}
$$
such that
\begin{enumerate}
\item $\tilde \alpha$ is a termwise split injection (see
Definition \ref{definition-split-ses}),
\item there is a map of complexes $s : L^\bullet \to \tilde L^\bullet$
such that $\pi \circ s = \text{id}_{L^\bullet}$ and such that
$s \circ \pi$ is homotopic to $\text{id}_{\tilde L^\bullet}$.
\end{enumerate}
\end{lemma}

\begin{proof}
We set
$$
\tilde L^n = L^n \oplus K^n \oplus K^{n + 1}
$$
and we define
$$
d^n_{\tilde L} =
\left(
\begin{matrix}
d^n_L & 0 & 0 \\
0 & d^n_K & \text{id}_{K^{n + 1}} \\
0 & 0 & -d^{n + 1}_K
\end{matrix}
\right)
$$
Moreover, we set
$$
\tilde \alpha = 
\left(
\begin{matrix}
\alpha \\
\text{id}_{K^n} \\
0
\end{matrix}
\right)
$$
which is clearly a split injection. It is also clear that it defines a morphism
of complexes. We define
$$
\pi =
\left(
\begin{matrix}
\text{id}_{L^n} &
0 &
0
\end{matrix}
\right)
$$
so that clearly $\pi \circ \tilde \alpha = \alpha$. We set
$$
s = 
\left(
\begin{matrix}
\text{id}_{L^n} \\
0 \\
0
\end{matrix}
\right)
$$
so that $\pi \circ s = \text{id}_{L^\bullet}$. Finally,
let $h^n : \tilde L^n \to \tilde L^{n - 1}$ be the map
which maps the summand $K^n$ of $L^n$ via the identity morphism
to the summand $K^n$ of $L^{n - 1}$. Then it is a trivial matter
(see computations in remark below) to prove that
$$
\text{id}_{\tilde L^\bullet} - s \circ \pi
=
d \circ h + h \circ d
$$
which finishes the proof of the lemma.
\end{proof}

\begin{remark}
\label{remark-compute-modules}
To see the last displayed equality in the proof above we can argue
with elements as follows. We have
$s\pi(l, k, k^{+}) = (l, 0, 0)$.
Hence the morphism of the left hand side maps
$(l, k, k^{+})$ to $(0, k, k^{+})$.
On the other hand $h(l, k, k^{+}) = (0, 0, k)$ and
$d(l, k, k^{+}) = (dl, dk + k^{+}, -dk^{+})$.
Hence $(dh + hd)(l, k, k^{+}) = 
d(0, 0, k) + h(dl, dk + k^{+}, -dk^{+}) =
(0, k, -dk) + (0, 0, dk + k^{+}) = (0, k, k^{+})$
as desired.
\end{remark}

\begin{lemma}
\label{lemma-morphisms-lift}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^\beta \\
I^\bullet
}
$$
with $I^\bullet$ bounded below and consisting of injective
objects, and $\alpha$ a quasi-isomorphism.
\begin{enumerate}
\item There exists a map of complexes $\beta$ making the diagram
commute up to homotopy.
\item If $\alpha$ is injective in every degree
then we can find a $\beta$ which makes the diagram commute.
\end{enumerate}
\end{lemma}

\begin{proof}
We first show that (2) implies (1). Namely, let
$\tilde \alpha : K \to \tilde L^\bullet$, $\pi$, $s$ be as in
Lemma \ref{lemma-make-injective}. Since $\tilde \alpha$ is injective
by (2) there exists a morphism $\tilde \beta : \tilde L^\bullet \to I^\bullet$
such that $\gamma = \tilde \beta \circ \tilde \alpha$. Set
$\beta = \tilde \beta \circ s$. Then we have
$$
\beta \circ \alpha
=
\tilde \beta \circ s \circ \pi \circ \tilde \alpha 
\sim
\tilde \beta \circ \tilde \alpha
=
\gamma
$$
as desired.

\medskip\noindent
Assume that $\alpha : K^\bullet \to L^\bullet$ is injective.
Suppose we have already defined $\beta$ in all degrees
$\leq n - 1$ compatible with differentials and such that
$\gamma^j = \beta^j \circ \alpha^j$ for all $j \leq n - 1$.
Consider the commutative solid diagram
$$
\xymatrix{
K^{n - 1} \ar[r] \ar@/_2pc/[dd]_\gamma \ar[d]^\alpha &
K^n \ar@/^2pc/[dd]^\gamma \ar[d]^\alpha \\
L^{n - 1} \ar[r] \ar[d]^\beta &
L^n \ar@{-->}[d] \\
I^{n - 1} \ar[r] &
I^n
}
$$
Thus we see that the dotted arrow is prescribed on the subobjects
$\alpha(K^n)$ and $d^{n - 1}(L^{n - 1})$. Moreover, these two arrows
agree on $\alpha(d^{n - 1}(K^{n - 1}))$. Hence if
\begin{equation}
\label{equation-qis}
\alpha(d^{n - 1}(K^{n - 1}))
=
\alpha(K^n) \cap d^{n - 1}(L^{n - 1})
\end{equation}
then these morphisms glue to a morphism
$\alpha(K^n) + d^{n - 1}(L^{n - 1}) \to I^n$ and, using the injectivity
of $I^n$, we can extend this to a morphism from all of $L^n$ into $I^n$.
After this by induction we get the morphism $\beta$ for all $n$ simlutaneously
(note that we can set $\beta^n = 0$ for all $n \ll 0$ since $I^\bullet$
is bounded below -- in this way starting the induction).

\medskip\noindent
It remains to prove the equality (\ref{equation-qis}).
The reader is encouraged to argue this for themselves with a suitable
diagram chase. Nonetheless here is our argument.
Note that the inclusion
$\alpha(d^{n - 1}(K^{n - 1})) \subset \alpha(K^n) \cap d^{n - 1}(L^{n - 1})$
is obvious. Take an object $T$ of $\mathcal{A}$ and a morphism
$x : T \to L^n$ whose image is contained in the subobject
$\alpha(K^n) \cap d^{n - 1}(L^{n - 1})$.
Since $\alpha$ is injective we see that $x = \alpha \circ x'$ for
some $x' : T \to K^n$. Moreover, since $x$ lies in $d^{n - 1}(L^{n - 1})$
we see that $d^n \circ x = 0$. Hence using injectivity of $\alpha$ again
we see that $d^n \circ x' = 0$. Thus $x'$ gives a morphism
$[x'] : T \to H^n(K^\bullet)$. On the other hand the corresponding
map $[x] : T \to H^n(L^\bullet)$ induced by $x$ is zero by assumption.
Since $\alpha$ is a quasi-isomorphism we conclude that $[x'] = 0$.
This of course means exactly that the image of $x'$ is
contained in $d^{n - 1}(K^{n - 1})$ and we win.
\end{proof}

\begin{lemma}
\label{lemma-acyclic-is-zero}
Let $\mathcal{A}$ be an abelian category.
Let $K^\bullet$ be an acyclic complex.
Let $I^\bullet$ be bounded below and consisting of injective objects.
Any morphism $K^\bullet \to I^\bullet$ is homotopic to zero.
\end{lemma}

\begin{proof}
Let $\alpha : K^\bullet \to I^\bullet$ be a morphism of
complexes. Assume that $\alpha^j = 0$ for $j < n$.
We will show that there exists a morphism $h : K^{n + 1} \to I^n$
such that $\alpha^n = h \circ d$. Thus $\alpha$ will be homotopic
to the morphism of complexes $\beta$ defined by
$$
\beta^j =
\left\{
\begin{matrix}
0 & \text{if} & j \leq n \\
\alpha^{n + 1} - d \circ h & \text{if} & j = n + 1 \\
\alpha^j & \text{if} & j > n + 1
\end{matrix}
\right.
$$
This will clearly prove the lemma (by induction).
To prove the existence of $h$ note that
$\alpha^n|_{d^{n - 1}(K^{n - 1})} = 0$ since
$\alpha^{n - 1} = 0$. Since $K^\bullet$ is acyclic we
have $d^{n - 1}(K^{n - 1}) = \text{Ker}(K^n \to K^{n + 1})$.
Hence we can think of $\alpha^n$ as a map into $I^n$ defined
on the subobject $\text{Im}(K^n \to K^{n + 1})$ of $K^{n + 1}$.
By injectivity of the object $I^n$ we can extend this to
a map $h : K^{n + 1} \to I^n$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-morphisms-equal-up-to-homotopy}
Let $\mathcal{A}$ be an abelian category.
Consider a solid diagram
$$
\xymatrix{
K^\bullet \ar[r]_\alpha \ar[d]_\gamma & L^\bullet \ar@{-->}[dl]^{\beta_i} \\
I^\bullet
}
$$
with $I^\bullet$ bounded below and consisting of injective
objects, and $\alpha$ a quasi-isomorphism.
Any two morphisms $\beta_1, \beta_2$ making the diagram commute
up to homotopy are homotopic.
\end{lemma}

\begin{proof}
Let $\tilde \alpha : K \to \tilde L^\bullet$, $\pi$, $s$ be as in
Lemma \ref{lemma-make-injective}. If we can show that $\beta_1 \circ\pi$
is homotopic to $\beta_2 \circ \pi$, then we deduce that
$\beta_1 \sim \beta_2$ because $\pi \circ s$ is the identity.
Hence we may assume $\alpha^n : K^n \to L^n$ is the 
inclusion of a direct summand for all $n$. Thus we get a 
short exact sequence of complexes
$$
0 \to K^\bullet \to L^\bullet \to M^\bullet \to 0
$$
which is termwise split and such that $M^\bullet$ is acyclic.
We choose splittings $L^n = K^n \oplus M^n$, so we have
$\beta_i^n : K^n \oplus M^n \to I^n$ and $\gamma^n : K^n \to I^n$.
In this case the condition on $\beta_i$ is that there are morphisms
$h_i^n : K^n \to I^{n - 1}$ such that
$$
\gamma^n - \beta_i^n|_{K^n} = d \circ h_i^n + h_i^{n + 1} \circ d
$$
Thus we see that
$$
\beta_1^n|_{K^n} - \beta_2^n|_{K^n}
=
d \circ (h_1^n - h_2^n) + (h_1^{n + 1} - h_2^{n + 1}) \circ d
$$
Consider the map $h^n : K^n \oplus M^n \to I^{n - 1}$ which
equals $h_1^n - h_2^n$ on the first summand and zero on the second.
Then we see that
$$
\beta_1^n - \beta_2^n
-
(d \circ h^n + h^{n + 1}) \circ d)
$$
is a morphism of complexes $L^\bullet \to I^\bullet$
which is identically zero on the subcomplex $K^\bullet$.
Hence it factors as $L^\bullet \to M^\bullet \to I^\bullet$.
Thus the result of the lemma follows from Lemma \ref{lemma-acyclic-is-zero}.
\end{proof}








\section{The derived category}
\label{section-derived-category}

\noindent
The above material suggests the following definition.

\begin{definition}
\label{definition-derived-category}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
The {\it derived category (bounded below version)} of $\mathcal{A}$
is the category $D^{+}(\mathcal{A})$ whose
\begin{enumerate}
\item objects are bounded below complexes of injectives, and
\item morphisms are morphisms of complexes up to homotopy.
\end{enumerate}
\end{definition}

\noindent
There is another construction of the derived category which is
more general. Namely $\mathcal{A}$ can be an arbitrary abelian
category. The idea is that one takes the category
$K(\mathcal{A})$, see Definition \ref{definition-complexes-notation},
and inverts all quasi-isomorphisms.
This we will discuss elsewhere (insert future reference here).
We should also point out that the derived category comes equipped
with additional structure, namely the structure of a triangulated
category which we will discuss in
Section \ref{section-triangulated-categories}.

\medskip\noindent
To formulate some first properties of the derived category we remark that
since homotopic maps induce the same maps on cohomology there is a
sequence of functors
$$
H^n : K(\mathcal{A}) \longrightarrow \mathcal{A}
$$
Moreover, we have defined the derived category
$D^{+}(\mathcal{A})$ as a full subcategory
of $K^{+}(\mathcal{A}) \subset K(\mathcal{A})$. Hence we also get functors
$$
H^n : D^{+}(\mathcal{A}) \longrightarrow \mathcal{A}
$$
by restricting the above $H^n$.

\begin{lemma}
\label{lemma-into-derived-category}
Let $\mathcal{A}$ be an abelian category.
Assume $\mathcal{A}$ has enough injectives.
There exists a canonical functor
$$
j : K^{+}(\mathcal{A}) \longrightarrow D^{+}(\mathcal{A})
$$
with the following properties:
\begin{enumerate}
\item If $I^\bullet$ is a bounded below complex of injectives,
then $j(I^\bullet) = I^\bullet$.
\item If $\alpha : I_1^\bullet \to I_2^\bullet$ is a morphism of
bounded below complexes of injectives, then $j(\alpha) = \alpha$.
\item There are canonical isomorphisms $H^n \circ j = H^n$.
\item Given a morphism of complexes $\alpha : K^\bullet \to L^\bullet$
then $j(\alpha)$ is invertible if and only if $\alpha$ is a
quasi-isomorphism.
\item Add more here as needed.
\end{enumerate}
\end{lemma}

\begin{proof}
Consider the set of all objects $K^\bullet$ of $K^{+}(\mathcal{A})$.
(Recall that by our conventions any category has a set of
objects unless mentioned otherwise.)
By Lemma \ref{lemma-injective-resolutions-exist} every object
has an injective resolution.
By the axiom of choice we can choose for each $K^\bullet$
an injective resolution $j : K^\bullet \to j(K^\bullet)$.
Of course we may assume that $j(I^\bullet) = I^\bullet$
whenever $I^\bullet$ is a bounded below complex of injectives.

\medskip\noindent
Next, consider the set of all morphisms
$\alpha : K^\bullet \to L^\bullet$
of $K^{+}(\mathcal{A})$ (we represent each one by a
particular choice of representative).
For each of these consider the diagram
$$
\xymatrix{
K^\bullet \ar[d] \ar[r]_\alpha & L^\bullet \ar[d] \\
j(K^\bullet) \ar@{-->}[r] & j(L^\bullet)
}
$$
By Lemma \ref{lemma-morphisms-lift} there exists a dotted arrow
making the diagram commute up to homotopy (i.e., commute in
$K^{+}(\mathcal{A})$). We choose one (using the axiom of choice)
and denote it
$j(\alpha) : j(K^\bullet) \to j(L^\bullet)$.

\medskip\noindent
To verify that $j$ is a functor we have to show that
$j(\beta) \circ j(\alpha) = j(\beta \circ \alpha)$ 
whenever given morphisms $\alpha : K^\bullet \to L^\bullet$
and $\beta : L^\bullet \to M^\bullet$ in $K^{+}(\mathcal{A})$.
For this note that both 
$j(\beta) \circ j(\alpha)$ and $j(\beta \circ \alpha)$
make the following diagram commute up
to homotopy
$$
\xymatrix{
K^\bullet \ar[d] \ar[r]_{\beta \circ \alpha} & M^\bullet \ar[d] \\
j(K^\bullet) \ar[r] & j(M^\bullet)
}
$$
Hence it follows from Lemma \ref{lemma-morphisms-equal-up-to-homotopy}
that they are equal up
to homotopy, i.e., equal as morphisms in $D^{+}(\mathcal{A})$.

\medskip\noindent
Properties (1) and (2) are true by construction.
The isomorphism $H^n = H^n \circ j$ comes from the
quasi-isomorphisms $K^\bullet \to j(K^\bullet)$ which
are compatible with morphisms.

\medskip\noindent
Let us prove (4). It is clear that if $j(\alpha)$ is invertible,
then $\alpha$ is a quasi-isomorphism, by property (3).
Suppose that $\alpha$ is a quasi-isomorphism. Then we apply
Lemma \ref{lemma-morphisms-lift} to get the dotted arrow
in the following diagram
$$
\xymatrix{
K^\bullet \ar[d] \ar[r]_\alpha & L^\bullet \ar[d] \\
j(K^\bullet) & j(L^\bullet) \ar@{-->}[l]
}
$$
and we use Lemma \ref{lemma-morphisms-equal-up-to-homotopy} to see that
it is an inverse to
$j(\alpha)$. This finishes the proof of the lemma.
\end{proof}

\begin{remark}
\label{remark-failure}
Allthough the derived category $D^{+}(\mathcal{A})$ is an additive category,
it is not an abelian category itself (in most cases). It does have a zero
object but no kernels and cokernels in general. Hence it not possible to define
the notion of a short exact sequence in $D^{+}(\mathcal{A})$. The solution to
this conundrum is to add additional structure to the category
$D^{+}(\mathcal{A})$, namely a set of ``distinguished triangles''.
The result is the notion of a triangulated category which is an
additive category, endowed with translation functors $[n]$
and a set of triangles subject to a list of axioms.
See \cite{Verdier} and (insert future reference here).
One reason for introducing trianglulated categories is to be able to speak
about exact functors between derived categories (especially derived
functors).
\end{remark}







\section{Triangulated categories}
\label{section-triangulated-categories}

\begin{definition}
\label{definition-triangle}
Let $\mathcal{D}$ be an additive category.
Let $[n] : \mathcal{D} \to \mathcal{D}$, $E \mapsto E[n]$
be a collection of additive functors indexed by $n \in \mathbf{Z}$ such that
$[n] \circ [m] = [n + m]$  and $[0] = \text{id}$ (equality as functors).
In this situation
we call {\it triangle} a sixtuple $(X, Y, Z, f, g, h)$
where $X, Y, Z \in \text{Ob}(\mathcal{D})$ and
$f : X \to Y$, $g : Y \to Z$ and $h : Z \to X[1]$ are morphisms
of $\mathcal{D}$.
A {\it morphism of triangles}
$(X, Y, Z, f, g, h) \to (X', Y', Z', f', g', h')$
is given by morphisms $a : X \to X'$, $b : Y \to Y'$ and $c : Z \to Z'$
of $\mathcal{D}$ such that
$b \circ f = f' \circ a$, $c  \circ g = g' \circ b$ and
$a[1] \circ h = h' \circ c$.
\end{definition}

\noindent
A morphism of triangles is visualized by the following
commutative diagram
$$
\xymatrix{
X \ar[r] \ar[d] &
Y \ar[r] \ar[d] &
Z \ar[r] \ar[d] &
X[1] \ar[d] \\
X' \ar[r] &
Y' \ar[r] &
Z' \ar[r] &
X'[1]
}
$$
Here is the definition of a triangulated category as given in
Verdier's thesis.

\begin{definition}
\label{definition-triangulated-category}
A {\it triangulated category} consists of a triple
$(\mathcal{D}, \{[n]\}_{n\in \mathbf{Z}}, \mathcal{T})$
where
\begin{enumerate}
\item $\mathcal{D}$ is an additive category,
\item $[n] : \mathcal{D} \to \mathcal{D}$, $E \mapsto E[n]$
be a collection of additive functors indexed by $n \in \mathbf{Z}$ such that
$[n] \circ [m] = [n + m]$ and $[0] = \text{id}$ (equality as functors), and
\item $\mathcal{T}$ is a set of triangles called the
{\it distinghuished triangles}
\end{enumerate}
subject to the following conditions
\begin{enumerate}
\item[TR1] Any triangle isomorphic to a distinguished triangle is
a distinguished triangle. Any triangle of the form
$(X, X, 0, \text{id}, 0, 0)$ is distinguished.
For any morphism $f : X \to Y$ of $\mathcal{D}$ there exists a
distinguished triangle of the form $(X, Y, Z, f, g, h)$.
\item[TR2] The triangle $(X, Y, Z, f, g, h)$ is distinguished
if and only if the triangle $(Y, Z, X[1], g, h, -f[1])$ is.
\item[TR3] Given a solid commutative square
$$
\xymatrix{
X \ar[r] \ar[d] &
Y \ar[r] \ar[d] &
Z \ar[r] \ar@{-->}[d] &
X[1] \ar[d] \\
X' \ar[r] &
Y' \ar[r] &
Z' \ar[r] &
X'[1]
}
$$
whose rows are distinguished triangles
the dotted arrow exists giving rise to
a morphism of triangles.
\item[TR4] Given objects $X$, $Y$, $Z$ and morphisms
$f : X \to Y$, $g : Y \to Z$ and distinguished triangles
$(X, Y, Q_1, f, p_1, d_1)$,
$(X, Z, Q_2, g \circ f, p_2, d_2)$
and
$(Y, Z, Q_3, g, p_3, d_3)$,
there exist
morphisms $a : Q_1 \to Q_2$ and $b : Q_2 \to Q_3$ such
that
\begin{enumerate}
\item $(Q_1, Q_2, Q_3, a, b, p_1[1] \circ d_3)$ is a
distinguished triangle,
\item the triple $(\text{id}_X, g, a)$ is
a morphism of triangles
$(X, Y, Q_1, f, p_1, d_1) \to (X, Z, Q_2, g \circ f, p_2, d_2)$, and
\item the triple $(f, \text{id}_Z, b)$ is a morphism of triangles
$(X, Z, Q_2, g \circ f, p_2, d_2) \to (Y, Z, Q_3, g, p_3, d_3)$.
\end{enumerate}
\end{enumerate}
\end{definition}

\noindent
The explanation of TR4 is that if you think of $Q_1$ as
$Y/X$, $Q_2$ as $Z/X$ and $Q_3$ as $Z/Y$, then TR4(a) expresses
the isomorphism $(Z/X)/(Y/Z) \cong Z/Y$ and TR(b) and TR(c)
express that we can compare the triangles $X \to Y \to Q_1 \to X[1]$
etc with morphisms of triangles. For a slightly more precise reformuation
of this idea see Remark \ref{remark-two-split-injections}.
As usual we abuse notation and we simply speak of a triangulated
category $\mathcal{D}$ without explicitly introducing
notation for the additional data.

\begin{lemma}
\label{lemma-composition-zero}
Let $\mathcal{D}$ be a triangulated category.
Let $(X, Y, Z, f, g, h)$ be a distinguished triangle.
Then $g \circ f = 0$,
$h \circ g = 0$ and $f[1] \circ h = 0$.
\end{lemma}

\begin{proof}
Omitted. Hint: apply TR3 to
$(1, f, ?) : (X, X, 0, 1, 0, 0) \to (X, Y, Z, f, g, h)$.
The existence of the arrow $?$ which gives a morphism of
triangles will imply that $g \circ f = 0$. For the other cases
rotate the triangle, i.e., apply TR2.
\end{proof}









\section{Cones and termwise split sequences}
\label{section-cones}

\noindent
Let $\mathcal{A}$ be an additive category, and let
$K(\mathcal{A})$ denote the category of complexes of
$\mathcal{A}$ with morphisms given by morphisms of
complexes up to homotopy. In this section we show that
there is a natural structure of a triangulated category on
$K(\mathcal{A})$. Note that the shift functors
$[n]$ on complexes, see Definition \ref{definition-shift-cochain},
give rise to functors $[n] : K(\mathcal{A}) \to K(\mathcal{A})$
such that $[n] \circ [m] = [n + m]$ and $[0] = \text{id}$.

\begin{definition}
\label{definition-cone}
Let $\mathcal{A}$ be an additive category.
Let $f : K^\bullet \to L^\bullet$ be a morphism of
complexes of $\mathcal{A}$. The {\it cone} of $f$
is the complex $C(f)^\bullet$ given by
$C(f)^n = L^n \oplus K^{n + 1}$ and
differential
$$
d_{C(f)}^n = 
\left(
\begin{matrix}
d^n_L & f^{n + 1} \\
0 & -d_K^{n + 1}
\end{matrix}
\right)
$$
It comes equipped with canonical morphisms of complexes
$i : L^\bullet \to C(f)^\bullet$ and $p : C(f)^\bullet \to K^\bullet[1]$
induced by the obvious maps $L^n \to C(f)^n \to K^{n + 1}$.
\end{definition}

\noindent
In other words $(K, L, C(f), f, i, p)$ forms a triangle:
$$
K^\bullet \to L^\bullet \to C(f)^\bullet \to K^\bullet[1]
$$
The formation of this triangle is
functorial in the following sense.

\begin{lemma}
\label{lemma-functorial-cone}
Suppose that
$$
\xymatrix{
K_1^\bullet \ar[r]_{f_1} \ar[d]_a & L_1^\bullet \ar[d]^b \\
K_2^\bullet \ar[r]^{f_2} & L_2^\bullet
}
$$
is a diagram of morphisms of complexes which is commutative
up to homotopy. Then there exists a morphism 
$c : C(f_1)^\bullet \to C(f_2)^\bullet$ which gives rise to
a morphism of triangles
$(a, b, c) : (K_1^\bullet, L_1^\bullet, C(f_1)^\bullet, f_1, i_1, p_1)
\to 
(K_1^\bullet, L_1^\bullet, C(f_1)^\bullet, f_2, i_2, p_2)$
of $K(\mathcal{A})$.
\end{lemma}

\begin{proof}
Let $h^n : K_1^n \to L_2^{n - 1}$ be a family of morphisms such that
$f_2 \circ a - b \circ f_1 = d \circ h + h \circ d$.
Define $c^n$ by the matrix
$$
c^n = 
\left(
\begin{matrix}
a^n & h^{n + 1} \\
0 & b^n
\end{matrix}
\right) :
L_1^n \oplus K_1^{n + 1} \to L_2^n \oplus K_2^{n + 1}
$$
A matrix computation show that $c$ is a morphism of complexes.
It is trivial that $c \circ i_1 = i_2 \circ b$, and it is
trivial also to check that $p_2 \circ c = a \circ p_1$.
\end{proof}

\noindent
Note that the morphism $c : C(f_1)^\bullet \to C(f_2)^\bullet$
constructed in the
proof of Lemma \ref{lemma-functorial-cone} in general depends on the
chosen homotopy $h$ between $f_2 \circ a$ and $b \circ f_1$.
Here is another construction of triangles.

\begin{definition}
\label{definition-termwise-split-map}
Let $\mathcal{A}$ be an additive category.
A {\it termwise split injection $\alpha : A^\bullet \to B^\bullet$}
is a morphism of complexes such that each $A^n \to B^n$
is isomorphic to the inclusion of a direct summand.
A {\it termwise split surjection $\beta : B^\bullet \to C^\bullet$}
is a morphism of complexes such that each $B^n \to C^n$
is isomorphic to the projection onto a direct summand.
\end{definition}

\begin{lemma}
\label{lemma-make-commute-map}
Let $\mathcal{A}$ be an additive category.
Let 
$$
\xymatrix{
A^\bullet \ar[r]_f \ar[d]_a & B^\bullet \ar[d]^b \\
C^\bullet \ar[r]^g & D^\bullet
}
$$
be a diagram of morphisms of complexes commuting up to homotopy.
If $f$ is a split injection, then $b$ is homotopic to a
morphism which makes the diagram commute.
If $g$ is a split surjection, then $a$ is homotopic to a
morphism which makes the diagram commute.
\end{lemma}

\begin{proof}
Let $h^n : A^n \to D^{n - 1}$ be a collection of morphisms
such that $bf - ga = dh + hd$. Let
Suppose that $\pi^n : B^n \to A^n$
are morphisms splitting the morphisms $f^n$.
Take $b' = b + dh\pi + h\pi d$.
Suppose $s^n : D^n \to C^n$ are morphisms splitting the morphisms
$g^n : C^n \to D^n$. Take $a' = a + dsh + shd$.
Computations omitted.
\end{proof}

\begin{definition}
\label{definition-split-ses}
Let $\mathcal{A}$ be an additive category.
A {\it termwise split sequence of complexes of $\mathcal{A}$}
is a complex of complexes
$$
0 \to
A^\bullet \xrightarrow{\alpha}
B^\bullet \xrightarrow{\beta}
C^\bullet \to 0
$$
together with given direct sum decompositions
$B^n = A^n \oplus C^n$
compatible with $\alpha^n$ and $\beta^n$.
We often write $s^n : C^n \to B^n$ and $\pi^n : B^n \to A^n$
for the maps induced by the direct sum decompositions.
According to Lemma \ref{lemma-ses-termwise-split-cochain}
we get an associated morphism of complexes
$$
\delta : C^\bullet \longrightarrow A^\bullet[1]
$$
which in degree $n$ is the map $\pi^{n + 1} \circ d_C^n \circ s^n$.
In other words
$(A^\bullet, B^\bullet, C^\bullet, \alpha, \beta, \delta)$
forms a triangle
$$
A^\bullet \to B^\bullet \to C^\bullet \to A^\bullet[1]
$$
This will be the {\it triangle associated to the termwise
split sequence of complexes}.
\end{definition}

\begin{lemma}
\label{lemma-make-commute}
Let $\mathcal{A}$ be an additive category.
Let $A_i^\bullet \to B_i^\bullet \to C_i^\bullet$, $i = 1, 2$
be termwise split exact sequences. Suppose that
$a : A_1^\bullet \to A_2^\bullet$,
$b : B_1^\bullet \to B_2^\bullet$, and 
$c : C_1^\bullet \to C_2^\bullet$ are morphisms of complexes
such that
$$
\xymatrix{
A_1^\bullet \ar[d]_a \ar[r] &
B_1^\bullet \ar[r] \ar[d]_b &
C_1^\bullet \ar[d]_c \\
A_2^\bullet \ar[r] & B_2^\bullet \ar[r] & C_2^\bullet
}
$$
commutes in $K(\mathcal{A})$. Then there exists a morphism
$b' : B_1^\bullet \to B_2^\bullet$
which is homotopic to $b$ such that the diagram above commutes
in the category of complexes.
\end{lemma}

\begin{proof}
Let $f^n : A_1^n \to B_2^{n - 1}$ be a collection of morphisms
such that $b \circ \alpha_1 - \alpha_2 \circ a = 
d  \circ f + f \circ d$. Let
$g^n : B_1^n \to C_2^{n - 1}$ be a collection of morphisms
such that $c \circ \beta_1 - \beta_2 \circ b = 
d  \circ g + g \circ d$. Suppose that
$\pi^n : B_1^n \to A_1^n$ (resp.\ $s^n : C_2^n \to B_2^n$)
are the morphisms splitting the morphisms $\alpha_1^n$
(resp.\ $\beta_2^n$). Set $h^n = - f^n \circ \pi^n + s^{n - 1} \circ g^n$.
Take $b' = b + d \circ h + h \circ d$. Computation omitted.
\end{proof}

\begin{lemma}
\label{lemma-third-isomorphism}
Let $\mathcal{A}$ be an additive category.
Let $f_1 : K_1^\bullet \to L_1^\bullet$ and
$f_2 : K_2^\bullet \to L_2^\bullet$ be morphisms of complexes.
Let $(a, b, c) : (K_1^\bullet, L_1^\bullet, C(f_1)^\bullet, f_1, i_1, p_1)
\to  (K_1^\bullet, L_1^\bullet, C(f_1)^\bullet, f_2, i_2, p_2)$
be any morphism of triangles of $K(\mathcal{A})$.
If $a$ and $b$ are homotopy equivalences then so is $c$.
\end{lemma}

\begin{proof}
Let $a^{-1} : K_2^\bullet \to K_1^\bullet$ be a morphism of complexes which
is inverse to $a$ in $K(\mathcal{A})$.
Let $b^{-1} : L_2^\bullet \to L_1^\bullet$ be a morphism of complexes which
is inverse to $b$ in $K(\mathcal{A})$.
Let $c' : C(f_2)^\bullet \to C(f_1)^\bullet$
be the morphism from Lemma \ref{lemma-functorial-cone} applied
to $f_1 \circ a^{-1} = b^{-1} \circ f_2$. If we can show that
$c \circ c'$ and $c' \circ c$ are isomorphisms in $K(\mathcal{A})$
then we win. Hence it suffices to prove the following: Given
a morphism of triangles
$(1, 1, c) : (K^\bullet, L^\bullet, C(f)^\bullet, f, i, p)$
the morphism $c$ is an isomorphism in $K(\mathcal{A})$.
By assumption the two squares in the diagram
$$
\xymatrix{
L^\bullet \ar[r] \ar[d]_1 &
C(f)^\bullet \ar[r] \ar[d]_c &
K^\bullet[1] \ar[d]_1 \\
L^\bullet \ar[r] &
C(f)^\bullet \ar[r] &
K^\bullet[1]
}
$$
commute up to homotopy. By construction of $C(f)^\bullet$ the rows
form termwise split sequences of complexes.
By Lemma \ref{lemma-make-commute} we may replace $c$ by
a morphism homotopic to $c$ such that the diagram commutes in the
category of complexes. In this case each $c^n$ is an isomorphism
(because an upper triangular matrix with $1$'s on the diagonal is invertible).
\end{proof}

\noindent
Hence if $a$ and $b$ are homotopy equivalences then 
the resulting morphism of triangles is an isomorphism of triangles
in $K(\mathcal{A})$.
It turns out that the collection of triangles of $K(\mathcal{A})$
given by cones and the collection of triangles of $K(\mathcal{A})$
given by termwise split sequences of complexes are the same
up to isomorphisms, at least up to sign!

\begin{lemma}
\label{lemma-the-same-up-to-isomorphisms}
Let $\mathcal{A}$ be an additive category.
\begin{enumerate}
\item Given a termwise split sequence of complexes
$(\alpha : A^\bullet \to B^\bullet,
\beta : B^\bullet \to C^\bullet, s^n, \pi^n)$
there exists a homotopy equivalence $C(\alpha)^\bullet \to C^\bullet$
such that the diagram
$$
\xymatrix{
A^\bullet \ar[r] \ar[d] & B^\bullet \ar[d] \ar[r] &
C(\alpha)^\bullet \ar[r]_{-p} \ar[d] & A^\bullet[1] \ar[d] \\
A^\bullet \ar[r] & B^\bullet \ar[r] &
C^\bullet \ar[r]^\delta & A^\bullet[1]
}
$$
defines an isomorphism of triangles in $K(\mathcal{A})$.
\item Given a morphism of complexes $f : K^\bullet \to L^\bullet$
there exists an isomorphism of triangles
$$
\xymatrix{
K^\bullet \ar[r] \ar[d] & \tilde L^\bullet \ar[d] \ar[r] &
M^\bullet \ar[r]_{\delta} \ar[d] & K^\bullet[1] \ar[d] \\
K^\bullet \ar[r] & L^\bullet \ar[r] &
C(f)^\bullet \ar[r]^{-p} & K^\bullet[1]
}
$$
where the upper triangle is the triangle associated to a
termwise split exact sequence $K^\bullet \to \tilde L^\bullet \to M^\bullet$.
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (1). We have $C(\alpha)^n = B^n \oplus A^{n + 1}$
and we simply define $C(\alpha)^n \to C^n$ via the projection
onto $B^n$ followed by $\beta^n$. This defines
a morphism of complexes because the compositions
$A^{n + 1} \to B^{n + 1} \to B^n \to C^n$ are zero.
To get a homotopy inverse we take
$C^\bullet \to C(\alpha)^\bullet$ given by
$(s^n , -\delta^n)$ in degree $n$. This is a morphism of complexes
because the morphism $\delta^n$ can be characterized as the
unique morphism $C^n \to A^{n + 1}$ such that
$d \circ s^n - s^{n + 1} \circ d = \alpha \circ \delta^n$,
see proof of Lemma \ref{lemma-ses-termwise-split-cochain}. The composition
$C^\bullet \to C(f)^\bullet \to C^\bullet$ is the identity.
The composition $C(f)^\bullet \to C^\bullet \to C(f)^\bullet$
is equal to the morphism
$$
\left(
\begin{matrix}
s^n \circ \beta^n & 0 \\
-\delta^n \circ \beta^n & 0
\end{matrix}
\right)
$$
To see that this is homotopic to the identity map
use the homotopy $h^n : C(\alpha)^n \to C(\alpha)^{n - 1})$
given by the matrix
$$
\left(
\begin{matrix}
0 & 0 \\
\pi^n & 0
\end{matrix}
\right) : C(\alpha)^n = B^n \oplus A^{n + 1} \to
B^{n - 1} \oplus A^n = C(\alpha)^{n - 1}
$$
It is trivial to verify that
$$
\left(
\begin{matrix}
1 & 0 \\
0 & 1
\end{matrix}
\right)
-
\left(
\begin{matrix}
s^n &
-\delta^n
\end{matrix}
\right)
\left(
\begin{matrix}
\beta^n \\
0
\end{matrix}
\right)
=
\left(
\begin{matrix}
d & \alpha^{n + 1} \\
0 & -d
\end{matrix}
\right)
\left(
\begin{matrix}
0 & 0 \\
\pi^n & 0
\end{matrix}
\right)
+
\left(
\begin{matrix}
0 & 0 \\
\pi^{n + 1} & 0
\end{matrix}
\right)
\left(
\begin{matrix}
d & \alpha^{n + 1} \\
0 & -d
\end{matrix}
\right)
$$
To finish the proof of (1) we have to show that the morphisms
$-p : C(\alpha)^\bullet \to A^\bullet[1]$ (see
Definition \ref{definition-cone})
and  $C(\alpha)^\bullet \to C^\bullet \to A^\bullet[1]$ agree up
to homotopy. This is clear from the above. Namely, we can use the homotopy
inverse $(s, -\delta) : C^\bullet \to C(\alpha)^\bullet$ 
and check instead that the two maps
$C^\bullet \to A^\bullet[1]$ agree. And note that
$p \circ (s, -\delta) = -\delta$ as desired.

\medskip\noindent
Proof of (2). We let $\tilde f : K^\bullet \to \tilde L^\bullet$,
$s : L^\bullet \to \tilde L^\bullet$
and $\pi : L^\bullet \to L^\bullet$ be as in
Lemma \ref{lemma-make-injective}. By Lemmas \ref{lemma-functorial-cone}
and \ref{lemma-third-isomorphism}
the triangles $(K^\bullet, L^\bullet, C(f), i, p)$ and
$(K^\bullet, \tilde L^\bullet, C(\tilde f), \tilde i, \tilde p)$
are isomorphic. Note that we can compose isomorphisms of
triangles. Thus we may replace $L^\bullet$ by
$\tilde L^\bullet$ and $f$ by $\tilde f$. In other words
we may assume that $f$ is a termwise split injection.
In this case the result follows from part (1).
\end{proof}

\noindent
Since we want our boundary maps in long exact sequences of cohomology
to be given by the maps in the snake lemma without signs we define
distinguished triangles as follows.

\begin{definition}
\label{definition-distinguished-triangle}
Let $\mathcal{A}$ be an additive category.
A triangle $(X, Y, Z, f, g, h)$ of $K(\mathcal{A})$ is
called a {\it disinguished triangle of $K(\mathcal{A})$}
if it is isomorphic to the triangle associated to
a termwise split exact sequence of complexes, see Definition
\ref{definition-split-ses}.
\end{definition}

\noindent
Note that according to Lemma \ref{lemma-the-same-up-to-isomorphisms}
a triangle of the form $(K^\bullet, L^\bullet, C(f)^\bullet, f, i, -p)$
is a distinguished triangle.
This does indeed lead to a triangulated category, see
Proposition \ref{lemma-the-same-up-to-isomorphisms}.

\begin{lemma}
\label{lemma-sequence-maps-split}
Let $\mathcal{A}$ be an additive category.
Let $A_1^\bullet \to A_2^\bullet \to \ldots \to A_n^\bullet$
be a sequence of composable morphisms of complexes.
There exists a commutative diagram
$$
\xymatrix{
A_1^\bullet \ar[r] &
A_2^\bullet \ar[r] &
\ldots \ar[r] &
A_n^\bullet \\
B_1^\bullet \ar[r] \ar[u] &
B_2^\bullet \ar[r] \ar[u] &
\ldots \ar[r] &
B_n^\bullet \ar[u]
}
$$
such that each morphism $B_i^\bullet \to B_{i + 1}^\bullet$
is a split injection and each $B_i^\bullet \to A_i^\bullet$
is a homotopy equivalence.
\end{lemma}

\begin{proof}
The case $n = 1$ is without content.
Lemma \ref{lemma-make-injective} is the case $n = 2$.
Suppose we have constructed the diagram
except for $B_n$. Applying Lemma \ref{lemma-make-injective} to
the composition $B_{n - 1} \to A_{n - 1} \to A_n$.
The result is a factorization $B_{n - 1} \to \tilde B_n \to A_n$
as desired.
\end{proof}

\begin{proposition}
\label{proposition-homotopy-category-triangulated}
Let $\mathcal{A}$ be an additive category.
The category $K(\mathcal{A})$ of complexes up to
homotopy with its natural translation functors
and distinguished triangles as defined above
is a triangulated category.
\end{proposition}

\begin{proof}
Omitted. Todo: TR4 and TR2 are not clear yet.
\end{proof}

\begin{remark}
\label{remark-two-split-injections}
Let $\mathcal{A}$ be an additive category.
Suppose that $A^\bullet \to B^\bullet \to C^\bullet$ 
are split injections of complexes. Say $\pi^n : B^n \to A^n$,
and $\chi^n : C^n \to B^n$ are the splittings.
Then also
$A^\bullet \to C^\bullet$ is a split injection with
splittings $\pi^n \circ \chi^n$.
Let us write
$Q_1^\bullet$, $Q_2^\bullet$ and $Q_3^\bullet$
for the ``quotient'' complexes. Then we see that
$B^n = A^n \oplus Q_1^n$ and $C_n = B^n \oplus Q_3^n$,
and, by our choice for the splitting of $A^\bullet \to C^\bullet$,
this gives $C^n = A^n \oplus Q_1^n \oplus Q_3^n$
so that $Q_2^n = Q_1^n \oplus Q_3^n$. Consider the commutative
diagram
$$
\begin{matrix}
0 & \to & A^\bullet & \to & B^\bullet & \to & Q_1^\bullet & \to & 0 \\
  &     & \downarrow&     & \downarrow&     & \downarrow  & \\
0 & \to & A^\bullet & \to & C^\bullet & \to & Q_2^\bullet & \to & 0 \\
  &     & \downarrow&     & \downarrow&     & \downarrow  & \\
0 & \to & B^\bullet & \to & C^\bullet & \to & Q_3^\bullet & \to & 0
\end{matrix}
$$
The rows of this diagram are termwise split exact sequences, and
hence determine distinguished triangles by
definition. Moreover downward arrows in the diagram above
are compatible with the chose splittings and hence
define morphisms of triangles
$$
(A^\bullet \to B^\bullet \to Q_1^\bullet \to A^\bullet[1])
\longrightarrow
(A^\bullet \to C^\bullet \to Q_2^\bullet \to A^\bullet[1])
$$
and
$$
(A^\bullet \to C^\bullet \to Q_2^\bullet \to A^\bullet[1])
\longrightarrow
(B^\bullet \to C^\bullet \to Q_3^\bullet \to B^\bullet[1])
$$
by our specific choice of the splitting of the middle row
in the large displayed diagram above.
Note that the splittings $s^n : Q_3^n \to C^n$
of the bottom split sequence in the diagram provides a splitting
for the split sequence
$0 \to Q_1^\bullet \to Q_2^\bullet \to Q_3^\bullet \to 0$
upon composing with $C^n \to Q_2^n$. It follows easily from this
that the morphism $\delta : Q_3^\bullet \to Q_1^\bullet[1]$
in the corresponding distinguished triangle
$$
(Q_1^\bullet \to Q_2^\bullet \to Q_3^\bullet \to Q_1^\bullet[1])
$$
is equal to the composition $Q_3^\bullet \to B^\bullet[1] \to Q_1^\bullet[1]$.
Hence we get a structure as in the conclusion of axiom TR4.
\end{remark}







\section{The filtered derived category}
\label{section-filtered-derived}

\noindent
A reference for this section is \cite[I, Chapter V]{cotangent}.

\begin{definition}
\label{definition-filtered}
Let $\mathcal{A}$ be an abelian category.
A {\it filtered object of $\mathcal{A}$} is
pair $(A, F)$ consisting of an object $A$ of $\mathcal{A}$
and a decreasing filtration
$$
A \supset \ldots \supset F^nA \supset F^{n + 1}A \supset \ldots \supset 0
$$
by subobjects indexed by $\mathbf{Z}$.
A {\it morphism $(A, F) \to (B, F)$ of filtered objects}
is given by a morphism $\varphi : A \to B$ of $\mathcal{A}$
such that $\varphi(F^iA) \subset F^iB$ for all $i \in \mathbf{Z}$.
The category of filtered objects is denoted $\text{Fil}(\mathcal{A})$.
\end{definition}

\noindent
Note that we do not require the filtration to start with $A$
or to end with $0$. We recall that the filtration
on a filtered object $(A, F)$ is said to be
{\it separated} if $\bigcap_i F^iA = 0$ and
{\it exhaustive} if $\bigcup F^iA = A$.
We will say the filtration is {\it finite} if and only if
$A = F^iA$ for $i \ll 0$ and $0 = F^iA$ for all $i \gg 0$.
In particular a finite filtration is both exhaustive and
separated, but it is in general a much stronger condition.
We will denote $\text{Fil}^f(\mathcal{A})$ the category
of finitely filtered objects of $\mathcal{A}$.

\medskip\noindent
We will often denote a filtered object $(A, F)$ simply $A$
with the filtration being understood to be given by $F^iA$.

\begin{lemma}
\label{lemma-filtered}
Let $\mathcal{A}$ be an abelian category.
The category of filtered objects $\text{Fil}(\mathcal{A})$
has the following properties:
\begin{enumerate}
\item It is an additive category.
\item It has a zero object.
\item It has kernels and cokernels.
\item In general it is not an abelian category.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted. Hints: The kernel of a morphism $f : A \to B$ of filtered
objects is $\text{Ker}(f)$ with filtration
$F^i\text{Ker}(f) = \text{Ker}(f) \cap F^iA$.
The cokernel of a morphism $f : A \to B$ of filtered
objects is $\text{Coker}(f)$ with filtration
$F^i\text{Coker}(f) = \text{Im}(F^iB \to \text{Coker}(f))$.
See Example \ref{example-not-abelian} for the last statement.
\end{proof}

\begin{definition}
\label{definition-strict}
Let $\mathcal{A}$ be an abelian category.
A morphism $f : A \to B$ of filtered objects of $\mathcal{A}$ is
said to be {\it strict} if $f(F^iA) = f(A) \cap F^iB$ for
all $i \in \mathbf{Z}$.
\end{definition}

\noindent
This also equivalent to requiring that $f^{-1}(F^iB) = F^iA + \text{Ker}(f)$
for all $i \in \mathbf{Z}$. We will characterize strict morphisms in
Lemma \ref{lemma-characterize-strict} below.

\begin{definition}
\label{definition-graded}
Let $\mathcal{A}$ be an abelian category.
A {\it graded object of $\mathcal{A}$} is
pair $(A, k)$ consisting of an object $A$ of $\mathcal{A}$
and a direct sum decomposition
$$
A = \bigoplus\nolimits_{i \in \mathbf{Z}} k^iA
$$
by subobjects indexed by $\mathbf{Z}$.
A {\it morphism $(A, k) \to (B, k)$ of graded objects}
is given by a morphism $\varphi : A \to B$ of $\mathcal{A}$
such that $\varphi(k^iA) \subset k^iB$ for all $i \in \mathbf{Z}$.
The category of graded objects is denoted $\text{Gr}(\mathcal{A})$.
\end{definition}

\noindent
With our definitions an abelian category does not necessarily have
all (countable) direct sums. Of course the definition above still
makes sense, but may be a little misleading in case $\mathcal{A}$
does not have infinite direct sums. For example, if
$\mathcal{A} = \text{Vect}_k$ is the category of finite dimensional vector
spaces over a field $k$, then $\text{Gr}(\text{Vect}_k)$ is the category
of finite dimensional vector spaces with a given gradation,
and not the category of graded vector spaces all of whose graded
pieces are finite dimensional.

\begin{lemma}
\label{lemma-graded}
Let $\mathcal{A}$ be an abelian category.
The category of graded objects $\text{Gr}(\mathcal{A})$
is abelian.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
There is a canonical functor
$$
\text{gr} :
\text{Fil}(\mathcal{A})
\longrightarrow
\text{Gr}(\mathcal{A}), \ \ 
(A, F)
\mapsto
\bigoplus\nolimits_{i \in \mathbf{Z}} F^iA/F^{i + 1}A.
$$
We sometimes denote $\text{gr}^i_F(A)$ the object
$F^iA/F^{i + 1}A = k^i\text{gr}(A)$.

\begin{lemma}
\label{lemma-characterize-strict}
Let $\mathcal{A}$ be an abelian category.
Let $f : A \to B$ be a morphism of filtered objects of $\mathcal{A}$.
The following are equivalent
\begin{enumerate}
\item $f$ is strict,
\item the canonical morphism $\text{Coim}(f) \to \text{Im}(f)$
(see Lemma \ref{lemma-coim-im-map}) is an isomorphism.
\end{enumerate}
If the filtrations on $A$ and $B$ are finite then these conditions
are also equivalent to
\begin{enumerate}
\item[(3)] the sequence 
$\text{gr}(\text{Ker}(f)) \to \text{gr}(A) \to \text{gr}(B)$
is exact,
\item[(4)] the sequence $\text{gr}(A) \to \text{gr}(B) \to
\text{gr}(\text{Coker}(f))$ is exact, and
\item[(5)] the sequence
$$
0 \to
\text{gr}(\text{Ker}(f)) \to
\text{gr}(A) \to
\text{gr}(B) \to
\text{gr}(\text{Coker}(f)) \to 0
$$
is exact.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-filtered-complexes-notation}
Let $\mathcal{A}$ be an abelian category.
\begin{enumerate}
\item We denote $\text{CF}(\mathcal{A})$ the {\it category of filtered
complexes} whose objects are complexes $K^\bullet$ of
$\text{Fil}(\mathcal{A})$ which are uniformly finite.
More precisely, $K^\bullet \in \text{CoCh}(\text{Fil}(\mathcal{A}))$
is an object of $\text{CF}(\mathcal{A})$ if and only if there
exist $a \leq b \in \mathbf{Z}$ such that $F^aK^n = K^n$
and $F^bK^n = 0$ for all $n \in \mathbf{Z}$.
\item A filtered complex $K^\bullet$ is said to be
{\it bounded below} if $K^n = 0$ for all $n \ll 0$.
\item We let $\text{CF}^{+}(\mathcal{A})$ be the full subcategory
of $\text{CF}(\mathcal{A})$ whose objects are the complexes
which are bounded below.
\item We let $KF(\mathcal{A})$ be the category with the same objects
as $\text{CF}(\mathcal{A})$ but as morphisms homotopy classes of
maps of complexes (see Lemma \ref{lemma-compose-homotopy-cochain}).
\item We let $KF^{+}(\mathcal{A})$ be the full subcategory of
$KF(\mathcal{A})$ whose objects are bounded below complexes
of $\mathcal{A}$.
\end{enumerate}
\end{definition}

\noindent
Given an object $A$ of $\text{Fil}(\mathcal{A})$ whose filtration is
finite we get a complex
$$
A[0] = ( \ldots \to 0 \to A \to 0 \to \ldots )
$$
where $A$ is placed in degree zero. Hence a natural functor
$\text{Fil}^f(\mathcal{A}) \to \text{CF}(\mathcal{A})$,
$A \mapsto A[0]$ from the category of finitely filtered objects
to the category of filtered complexes.
Sofar we have defined categories and functors
$$
\text{Fil}^f(\mathcal{A})
\to \text{CF}(\mathcal{A}) \to KF(\mathcal{A})
$$
and
$$
\text{Fil}^f(\mathcal{A})
\to \text{CF}^{+}(\mathcal{A}) \to KF^{+}(\mathcal{A})
$$












\section{Injectives and adjoint functors}
\label{section-adjoint}

\begin{lemma}
\label{lemma-adjoint-preserve-injectives}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories.
Let $u : \mathcal{A} \to \mathcal{B}$ and
$v : \mathcal{B} \to \mathcal{A}$ be additive functors.
Assume $u$ is right adjoint to $v$.
Assume that $v$ transforms injective maps into injective maps.
Then $u$ transforms injectives into injectives.
\end{lemma}

\begin{proof}
Adjointness means there are transformations of functors
$s : \text{id}_{\mathcal{B}} \to uv$ and $t : vu \to \text{id}_{\mathcal{A}}$
which give rise to the equality
$$
\text{Mor}_{\mathcal{B}}(B, uA)
=
\text{Mor}_{\mathcal{A}}(vB, A)
$$
via $\varphi : B \to uA$ corresponds to
$t \circ v\varphi : vB \to vuA \to A$ and
$\psi : vB \to A$ corresponds to $u\psi \circ s : B \to uvB \to uA$.
Let $J$ be an injective object of $\mathcal{A}$.
Let $i : N \hookrightarrow M$ be an injective morphism
in $\mathcal{B}$. Let $\alpha : N \to uJ$ be a morphism.
Since $vi : vN \hookrightarrow vM$ is injective we can extend the morphism
$t \circ v\alpha : vN \to vuJ \to J$ to a morphism $\beta : vM \to J$.
In a formula $\beta \circ vi = t \circ v\alpha$.
Consider $u\beta \circ s : M \to uvM \to uJ$. Then
$u\beta \circ s \circ i$ is equal to $\alpha$ because
via the adjointness formulas above we get
$t \circ vu\beta \circ vs \circ vi = \beta \circ vi = t \circ v\alpha$
by our choice of $\beta$.
\end{proof}

\begin{lemma}
\label{lemma-adjoint-enough-injectives}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories.
Let $u : \mathcal{A} \to \mathcal{B}$ and
$v : \mathcal{B} \to \mathcal{A}$ be additive functors.
Assume $u$ is right adjoint to $v$.
Assume that $v$ transforms injective maps into injective maps.
Assume that $\mathcal{A}$ has enough injectives.
Then $\mathcal{B}$ has enough injectives.
\end{lemma}

\begin{proof}
Pick $B \in \text{Ob}(\mathcal{B})$.
Pick an injection $vB \to J$ for $J$
an injective object of $\mathcal{A}$.
Consider $B \to uJ$. By Lemma \ref{lemma-adjoint-preserve-injectives}
the object $uJ$ is injective. Let $K \to B$ be the
kernel of $B \to uJ$. Because
$K \to B \to uJ$ is zero, then
$vK \to J$ is zero, hence $vK \to vB$ is zero,
hence $K \to B$ is zero because $v$
transforms injective maps into injective maps
by assumption. Thus $K = 0$ and we win.
\end{proof}

\begin{lemma}
\label{lemma-adjoint-functorial-injectives}
Let $\mathcal{A}$ and $\mathcal{B}$ be abelian categories.
Let $u : \mathcal{A} \to \mathcal{B}$ and
$v : \mathcal{B} \to \mathcal{A}$ be additive functors.
Assume $u$ is right adjoint to $v$.
Assume that $v$ transforms injective maps into injective maps.
Assume that $\mathcal{A}$ has functorial injective hulls.
Then $\mathcal{B}$ has functorial injective hulls.
\end{lemma}

\begin{proof}
Let $A \mapsto (A \to J(A))$ be a functorial
injective hull on $\mathcal{A}$. Then
$B \mapsto (B \to uJ(vB))$ is a functorial
injective hull on $\mathcal{B}$. Compare with the
proof of Lemma \ref{lemma-adjoint-enough-injectives}.
\end{proof}










\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
