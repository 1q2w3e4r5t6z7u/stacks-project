\input{preamble}

% OK, start here.
%
\begin{document}

\title{Algebraic Curves}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we develop some of the theory of algebraic curves.
A reference covering algebraic curves over the complex numbers is
the book \cite{ACGH}.











\section{Riemann-Roch and duality}
\label{section-Riemann-Roch}

\noindent
Let $k$ be a field. Let $X$ be a proper scheme of dimension $\leq 1$
over $k$. In Varieties, Section \ref{varieties-section-divisors-curves}
we have defined the degree of a locally free $\mathcal{O}_X$-module
$\mathcal{E}$ of constant rank by the formula
\begin{equation}
\label{equation-degree}
\deg(\mathcal{E}) =
\chi(X, \mathcal{E}) - \text{rank}(\mathcal{E})\chi(X, \mathcal{O}_X)
\end{equation}
see Varieties, Definition \ref{varieties-definition-degree-invertible-sheaf}.
In the chapter on Chow Homology we defined the first chern class of
$\mathcal{E}$ as an operation on cycles
(Chow Homology, Section
\ref{chow-section-intersecting-chern-classes}) and we proved that
\begin{equation}
\label{equation-degree-c1}
\deg(\mathcal{E}) = \deg(c_1(\mathcal{E}) \cap [X]_1)
\end{equation}
see Chow Homology, Lemma \ref{chow-lemma-degree-vector-bundle}.
Combining (\ref{equation-degree}) and (\ref{equation-degree-c1})
we obtain our first version of the Riemann-Roch formula
\begin{equation}
\label{equation-rr}
\chi(X, \mathcal{E}) =
\deg(c_1(\mathcal{E}) \cap [X]_1) +
\text{rank}(\mathcal{E})\chi(X, \mathcal{O}_X)
\end{equation}
If $\mathcal{L}$ is an invertible $\mathcal{O}_X$-module, then
we can also consider the numerical intersection
$(\mathcal{L} \cdot X)$ as defined in
Varieties, Definition \ref{varieties-definition-intersection-number}.
However, this does not give anything new as
\begin{equation}
\label{equation-numerical-degree}
(\mathcal{L} \cdot X) = \deg(\mathcal{L})
\end{equation}
by Varieties, Lemma
\ref{varieties-lemma-intersection-numbers-and-degrees-on-curves}. If
$\mathcal{L}$ is ample, then this integer is positive and is
called the degree
\begin{equation}
\label{equation-degree-X}
\deg_\mathcal{L}(X) = (\mathcal{L} \cdot X) = \deg(\mathcal{L})
\end{equation}
of $X$ with respect to $\mathcal{L}$, see
Varieties, Definition \ref{varieties-definition-degree}.

\medskip\noindent
To obtain a true Riemann-Roch theorem we would like to write
$\chi(X, \mathcal{O}_X)$ as the degree of a canonical zero cycle on $X$.
We refer to \cite{F} for a fully general version of this. We will use
duality to get a formula in the case where $X$ is Gorenstein; however,
in some sense this is a cheat (for example because this method cannot
work in higher dimension).

\begin{lemma}
\label{lemma-duality-dim-1}
Let $X$ be a proper scheme of dimension $\leq 1$ over a field $k$.
There exists a dualizing complex $\omega_X^\bullet$ with the
following properties
\begin{enumerate}
\item $H^i(\omega_X^\bullet)$ is nonzero only for $i = -1, 0$,
\item $\omega_X = H^{-1}(\omega_X^\bullet)$
is a coherent Cohen-Macaulay module whose support is the
irreducible components of dimension $1$,
\item for $x \in X$ closed, the module $H^0(\omega_{X, x}^\bullet)$
is nonzero if and only if either
\begin{enumerate}
\item $\dim(\mathcal{O}_{X, x}) = 0$ or
\item $\dim(\mathcal{O}_{X, x}) = 1$
and $\mathcal{O}_{X, x}$ is not Cohen-Macaulay,
\end{enumerate}
\item there are functorial isomorphisms
$\text{Ext}^i_X(K, \omega_X^\bullet) = \Hom_k(H^{-i}(X, K), k)$
compatible with shifts for $K \in D_\QCoh(X)$,
\item there are functorial isomorphisms
$\Hom(\mathcal{F}, \omega_X) = \Hom_k(H^1(X, \mathcal{F}), k)$
for $\mathcal{F}$ quasi-coherent on $X$.
\end{enumerate}
\end{lemma}

\begin{proof}
We start with the relative dualizing complex
$\omega_X^\bullet = \omega_{X/k}^\bullet$
as described in Dualizing Complexes, 
Remark \ref{dualizing-remark-relative-dualizing-complex}.
Then property (4) holds by construction.
Observe that $\omega_X^\bullet$ is also the dualizing complex
normalized relative to
$\omega_{\Spec(k)}^\bullet = \mathcal{O}_{\Spec(k)}$, i.e.,
it is the dualizing complex $\omega_X^\bullet$
as in Dualizing Complexes, Example \ref{dualizing-example-proper-over-local}
with $A = k$ and $\omega_A = k[0]$.
Parts (1) and (2) follow from
Dualizing Complexes, Lemma \ref{dualizing-lemma-vanishing-good-dualizing}.
For a closed point $x \in X$ we see that $\omega_{X, x}^\bullet$ is a
normalized dualizing complex over $\mathcal{O}_{X, x}$, see
Dualizing Complexes, Lemma \ref{dualizing-lemma-good-dualizing-normalized}.
Assertion (3) then follows from
Dualizing Complexes, Lemma \ref{dualizing-lemma-apply-CM}.
Finally, assertion (5) follows from
Dualizing Complexes, Lemma \ref{dualizing-lemma-dualizing-module-proper-over-A}
for coherent $\mathcal{F}$ and in general by unwinding
(4) for $K = \mathcal{F}[0]$ and $i = -1$.
\end{proof}

\begin{lemma}
\label{lemma-duality-dim-1-CM}
Let $X$ be a proper scheme over a field $k$ which is Cohen-Macaulay
and equidimensional of dimension $1$. There exists a dualizing module
$\omega_X$ with the following properties
\begin{enumerate}
\item $\omega_X$ is a coherent Cohen-Macaulay module whose support is $X$,
\item there are functorial isomorphisms
$\text{Ext}^i_X(K, \omega_X[1]) = \Hom_k(H^{-i}(X, K), k)$
compatible with shifts for $K \in D_\QCoh(X)$,
\item there are functorial isomorphisms
$\text{Ext}^{1 + i}(\mathcal{F}, \omega_X) = \Hom_k(H^{-i}(X, \mathcal{F}), k)$
for $\mathcal{F}$ quasi-coherent on $X$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let us take $\omega_X$ normalized as in
as in Dualizing Complexes, Example
\ref{dualizing-example-equidimensional-over-field}.
Then the statements follow from
Lemma \ref{lemma-duality-dim-1}
and the fact that $\omega_X^\bullet = \omega_X[1]$
as $X$ is Cohen-Macualay (Dualizing Complexes, Lemma
\ref{dualizing-lemma-dualizing-module-CM-scheme}).
\end{proof}

\begin{remark}
\label{remark-rework-duality-locally-free}
Let $X$ be a proper scheme of dimension $\leq 1$ over a field $k$.
Let $\omega_X^\bullet$ be as in Lemma \ref{lemma-duality-dim-1}.
If $\mathcal{E}$ is a finite locally free $\mathcal{O}_X$-module
with dual $\mathcal{E}^\wedge$ then we have canonical isomorphisms
$$
\Hom_k(H^{-i}(X, \mathcal{E}), k) =
H^i(X, \mathcal{E}^\wedge \otimes_{\mathcal{O}_X}^\mathbf{L} \omega_X^\bullet)
$$
This follows from the lemma and
Cohomology, Lemma \ref{cohomology-lemma-dual-perfect-complex}.
If $X$ is Cohen-Macaulay and equidimensional of dimension $1$, then
we have canonical isomorphisms
$$
\Hom_k(H^{-i}(X, \mathcal{E}), k) =
H^{1 - i}(X, \mathcal{E}^\wedge \otimes_{\mathcal{O}_X} \omega_X)
$$
where $\omega_X$ is as in Lemma \ref{lemma-duality-dim-1-CM}.
\end{remark}

\noindent
We can use Lemmas \ref{lemma-duality-dim-1} and \ref{lemma-duality-dim-1-CM}
to get a relation between the euler
characteristic of $\mathcal{O}_X$ and the euler characteristic
of the dualizing complex or the dualizing module.

\begin{lemma}
\label{lemma-euler}
Let $X$ be a proper scheme of dimension $\leq 1$ over a field $k$.
With $\omega_X^\bullet$ as in Lemma \ref{lemma-duality-dim-1} we have
$$
\chi(X, \mathcal{O}_X) = \chi(X, \omega_X^\bullet)
$$
If $X$ is Cohen-Macaulay and equidimensional of dimension $1$, then
$$
\chi(X, \mathcal{O}_X) = - \chi(X, \omega_X)
$$
with $\omega_X$ as in Lemma \ref{lemma-duality-dim-1-CM}.
\end{lemma}

\begin{proof}
We define the right hand side of the first formula as follows:
$$
\chi(X, \omega_X^\bullet) =
\sum\nolimits_{i \in \mathbf{Z}} (-1)^i\dim_k H^i(X, \omega_X^\bullet)
$$
This is well defined because $\omega_X^\bullet$ is in
$D^b_{\textit{Coh}}(\mathcal{O}_X)$, but also because
$$
H^i(X, \omega_X^\bullet) =
\text{Ext}^i(\mathcal{O}_X, \omega_X^\bullet) =
H^{-i}(X, \mathcal{O}_X)
$$
which is always finite dimensional and nonzero only if $i = 0, -1$.
This of course also proves the first formula. The second is a consequence
of the first because $\omega_X^\bullet = \omega_X[1]$ in the CM case.
\end{proof}

\noindent
We will use Lemma \ref{lemma-euler} to get the desired formula for
$\chi(X, \mathcal{O}_X)$ in the case that $\omega_X$ is
invertible, i.e., that $X$ is Gorenstein.
The statement is that $-1/2$ of the first chern class of $\omega_X$
capped with the cycle $[X]_1$ associated to $X$ is a natural zero
cycle on $X$ with half-integer coefficients whose degree is
$\chi(X, \mathcal{O}_X)$.
The occurence of fractions in the statement of Riemann-Roch cannot
be avoided.

\begin{lemma}[Rieman-Roch]
\label{lemma-rr}
Let $X$ be a proper scheme over a field $k$ which is Gorenstein and
equidimensional of dimension $1$. Let $\omega_X$ be as in
Lemma \ref{lemma-duality-dim-1-CM}. Then
\begin{enumerate}
\item $\omega_X$ is an invertible $\mathcal{O}_X$-module,
\item $\deg(\omega_X) = -2\chi(X, \mathcal{O}_X)$,
\item for a locally free $\mathcal{O}_X$-module $\mathcal{E}$
of constant rank we have
$$
\chi(X, \mathcal{E}) = \deg(\mathcal{E}) -
\textstyle{\frac{1}{2}} \text{rank}(\mathcal{E}) \deg(\omega_X)
$$
and $\dim_k(H^i(X, \mathcal{E})) =
\dim_k(H^{1 - i}(X, \mathcal{E}^\wedge \otimes_{\mathcal{O}_X} \omega_X)$
for all $i \in \mathbf{Z}$.
\end{enumerate}
\end{lemma}

\begin{proof}
It follows more or less from the definition of the Gorenstein property
that the dualizing sheaf is invertible, see
Dualizing Complexes, Section \ref{dualizing-section-gorenstein}.
By (\ref{equation-rr}) applied to $\omega_X$ we have
$$
\chi(X, \omega_X) = 
\deg(c_1(\omega_X) \cap [X]_1) + \chi(X, \mathcal{O}_X)
$$
Combined with Lemma \ref{lemma-euler} this gives
$$
2\chi(X, \mathcal{O}_X) = - \deg(c_1(\omega_X) \cap [X]_1) = - \deg(\omega_X)
$$
the second equality by (\ref{equation-degree-c1}). Putting this back into
(\ref{equation-rr}) for $\mathcal{E}$ gives the displayed formula of the lemma.
The symmetry in dimensions is a consequence of duality for $X$, see
Remark \ref{remark-rework-duality-locally-free}.
\end{proof}




\section{Some vanishing results}
\label{section-vanishing}

\noindent
In this section we work in the following situation.

\begin{situation}
\label{situation-Cohen-Macaulay-curve}
Here $k$ is a field and $X$ is a proper scheme over $k$ which
is Cohen-Macaulay, equidimensional of dimension $1$, and
has $H^0(X, \mathcal{O}_X) = k$. Let $\omega_X$ be the dualizing
sheaf of $X$ as in Dualizing Complexes, Example
\ref{dualizing-example-equidimensional-over-field}.
\end{situation}

\noindent
From the discussion in Section \ref{section-Riemann-Roch} we see that the
dualizing sheaf $\omega_X$ on $X$ has nonvanishing $H^1$. It turns out
that anything slightly more ``positive'' than $\omega_X$ has vanishing $H^1$.

\begin{lemma}
\label{lemma-vanishing}
In Situation \ref{situation-Cohen-Macaulay-curve}. Given an exact sequence
$$
\omega_X \to \mathcal{F} \to \mathcal{Q} \to 0
$$
of coherent $\mathcal{O}_X$-modules with $H^1(X, \mathcal{Q}) = 0$
(for example if $\dim(\text{Supp}(\mathcal{Q})) = 0$), then
either $H^1(X, \mathcal{F}) = 0$ or
$\mathcal{F} = \omega_X \oplus \mathcal{Q}$.
\end{lemma}

\begin{proof}
(The parenthetical statement follows from
Cohomology of Schemes, Lemma \ref{coherent-lemma-coherent-support-dimension-0}.)
Since $H^0(X, \mathcal{O}_X) = k$ is dual to $H^1(X, \omega_X)$
(see Section \ref{section-Riemann-Roch})
we see that $\dim H^1(X, \omega_X) = 1$. The sheaf $\omega_X$
represents the functor
$\mathcal{F} \mapsto \Hom_k(H^1(X, \mathcal{F}), k)$
on the category of coherent $\mathcal{O}_X$-modules
(Dualizing Complexes, Lemma
\ref{dualizing-lemma-dualizing-module-proper-over-A}).
Consider an exact sequence as in the statement of the lemma
and assume that $H^1(X, \mathcal{F}) \not = 0$. Since
$H^1(X, \mathcal{Q}) = 0$ we see that
$H^1(X, \omega_X) \to H^1(X, \mathcal{F})$ is an isomorphism.
By the universal property of $\omega_X$ stated above, we conclude there
is a map $\mathcal{F} \to \omega_X$ whose action on $H^1$ is the inverse
of this isomorphism. The composition $\omega_X \to \mathcal{F} \to \omega_X$
is the identity (by the universal property) and the lemma is proved.
\end{proof}

\begin{lemma}
\label{lemma-vanishing-twist}
In Situation \ref{situation-Cohen-Macaulay-curve}. Let
$\mathcal{L}$ be an invertible $\mathcal{O}_X$-module which is
globally generated and not isomorphic to $\mathcal{O}_X$. Then
$H^1(X, \omega_X \otimes \mathcal{L}) = 0$.
\end{lemma}

\begin{proof}
By duality as discussed in Section \ref{section-Riemann-Roch} we have to
show that $H^0(X, \mathcal{L}^{\otimes - 1}) = 0$. If not, then we can
choose a global section $t$ of $\mathcal{L}^{\otimes - 1}$
and a global section $s$ of $\mathcal{L}$ such that $st \not = 0$.
However, then $st$ is a constant multiple of $1$, by our assumption
that $H^0(X, \mathcal{O}_X) = k$. It follows that
$\mathcal{L} \cong \mathcal{O}_X$, which is a contradiction.
\end{proof}

\begin{lemma}
\label{lemma-globally-generated}
In Situation \ref{situation-Cohen-Macaulay-curve}. Given an exact sequence
$$
\omega_X \to \mathcal{F} \to \mathcal{Q} \to 0
$$
of coherent $\mathcal{O}_X$-modules with $\dim(\text{Supp}(\mathcal{Q})) = 0$
and $\dim_k H^0(X, \mathcal{Q}) \geq 2$ and such that there is no nonzero
submodule $\mathcal{Q}' \subset \mathcal{F}$ such that
$\mathcal{Q}' \to \mathcal{Q}$ is injective.
Then the submodule of $\mathcal{F}$ generated by global
sections surjects onto $\mathcal{Q}$.
\end{lemma}

\begin{proof}
Let $\mathcal{F}' \subset \mathcal{F}$ be the submodule generated by
global sections and the image of $\omega_X \to \mathcal{F}$. Since
$\dim_k H^0(X, \mathcal{Q}) \geq 2$ and
$\dim_k H^1(X, \omega_X) = \dim_k H^0(X, \mathcal{O}_X) = 1$,
we see that $\mathcal{F}' \to \mathcal{Q}$ is not zero and
$\omega_X \to \mathcal{F}'$ is not an isomorphism.
Hence $H^1(X, \mathcal{F}') = 0$ by Lemma \ref{lemma-vanishing}
and our assumption on $\mathcal{F}$.
Consider the short exact sequence
$$
0 \to \mathcal{F}' \to \mathcal{F} \to
\mathcal{Q}/\Im(\mathcal{F}' \to \mathcal{Q}) \to 0
$$
If the quotient on the right is nonzero, then we obtain a contradiction
because then $H^0(X, \mathcal{F})$ is bigger than $H^0(X, \mathcal{F}')$.
\end{proof}

\noindent
Here is an example global generation statement.

\begin{lemma}
\label{lemma-globally-generated-curve}
In Situation \ref{situation-Cohen-Macaulay-curve} assume that
$X$ is integral. Let $0 \to \omega_X \to \mathcal{F} \to \mathcal{Q} \to 0$
be a short exact sequence of coherent $\mathcal{O}_X$-modules with
$\mathcal{F}$ torsion free, $\dim(\text{Supp}(\mathcal{Q})) = 0$,
and $\dim_k H^0(X, \mathcal{Q}) \geq 2$. Then $\mathcal{F}$
is globally generated.
\end{lemma}

\begin{proof}
Consider the submodule $\mathcal{F}'$ generated by the global sections. By
Lemma \ref{lemma-globally-generated} we see that $\mathcal{F}' \to \mathcal{Q}$
is surjective, in particular $\mathcal{F}' \not = 0$. Since $X$ is a curve, we
see that $\mathcal{F}' \subset \mathcal{F}$ is an inclusion of rank $1$
sheaves, hence $\mathcal{Q}' = \mathcal{F}/\mathcal{F}'$ is supported in
finitely many points. To get a contradiction, assume that
$\mathcal{Q}'$ is nonzero. Then we see that $H^1(X, \mathcal{F}') \not = 0$.
Then we get a nonzero map $\mathcal{F}' \to \omega_X$ by the universal
property (Dualizing Complexes, Lemma
\ref{dualizing-lemma-dualizing-module-proper-over-A}).
The image of the composition $\mathcal{F}' \to \omega_X \to \mathcal{F}$
is generated by global sections, hence is inside of $\mathcal{F}'$.
Thus we get a nonzero self map $\mathcal{F}' \to \mathcal{F}'$.
Since $\mathcal{F}'$ is torsion free of rank $1$ on a proper curve
this has to be an automorphism (details omitted). But then this implies that
$\mathcal{F}'$ is contained in $\omega_X \subset \mathcal{F}$
contradicting the surjectivity of $\mathcal{F}' \to \mathcal{Q}$.
\end{proof}

\begin{lemma}
\label{lemma-tensor-omega-with-globally-generated-invertible}
In Situation \ref{situation-Cohen-Macaulay-curve}. Let $\mathcal{L}$
be a very ample invertible $\mathcal{O}_X$-module with
$\deg(\mathcal{L}) \geq 2$. Then
$\omega_X \otimes_{\mathcal{O}_X} \mathcal{L}$ is globally generated.
\end{lemma}

\begin{proof}
Assume $k$ is algebraically closed. Let $x \in X$ be a closed point.
Let $C_i \subset X$ be the irreducible components and for each $i$
let $x_i \in C_i$ be the generic point. By
Varieties, Lemma \ref{varieties-lemma-very-ample-vanish-at-point}
we can choose a section $s \in H^0(X, \mathcal{L})$ such that $s$
vanishes at $x$ but not at $x_i$ for all $i$. The corresponding
module map $s : \mathcal{O}_X \to \mathcal{L}$ is injective with
cokernel $\mathcal{Q}$ supported in finitely many points and
with $H^0(X, \mathcal{Q}) \geq 2$. Consider the corresponding
exact sequence
$$
0 \to \omega_X \to \omega_X \otimes \mathcal{L} \to
\omega_X \otimes \mathcal{Q} \to 0
$$
By Lemma \ref{lemma-globally-generated} we see that the module generated
by global sections surjects onto $\omega_X \otimes \mathcal{Q}$.
Since $x$ was arbitrary this proves the lemma. Some details omitted.

\medskip\noindent
We will reduce the case where $k$ is not algebraically closed, to
the algebraically closed field case. We suggest the reader skip
the rest of the proof. Choose an algebraic closure $\overline{k}$
of $k$ and consider the base change $X_{\overline{k}}$. Let us
check that $X_{\overline{k}} \to \Spec(\overline{k})$ is an example
of Situation \ref{situation-Cohen-Macaulay-curve}. By flat base change
(Cohomology of Schemes, Lemma \ref{coherent-lemma-flat-base-change-cohomology})
we see that $H^0(X_{\overline{k}}, \mathcal{O}) = \overline{k}$.
By Varieties, Lemma \ref{varieties-lemma-CM-base-change}
we see that $X_{\overline{k}}$ is Cohen-Macaulay. The scheme
$X_{\overline{k}}$ is proper over $\overline{k}$ (Morphisms,
Lemma \ref{morphisms-lemma-base-change-proper}) and
equidimensional of dimension $1$
(Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-after-base-change}).
The pullback of $\omega_X$ to $X_{\overline{k}}$ is the dualizing
module of $X_{\overline{k}}$ by
Dualizing Complexes, Lemma \ref{dualizing-lemma-more-base-change}.
The pullback of $\mathcal{L}$ to $X_{\overline{k}}$ is very ample
(Morphisms, Lemma \ref{morphisms-lemma-very-ample-base-change}).
The degree of the pullback of $\mathcal{L}$ to $X_{\overline{k}}$
is equal to the degree of $\mathcal{L}$ on $X$ (Varieties, Lemma
\ref{varieties-lemma-degree-base-change}). Finally, we see that
$\omega_X \otimes \mathcal{L}$ is globally generated if and only
if its base change is so
(Varieties, Lemma \ref{varieties-lemma-globally-generated-base-change}).
In this way we see that the result follows from the result in the
case of an algebraically closed ground field.
\end{proof}




















\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
