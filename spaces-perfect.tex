\input{preamble}

% OK, start here.
%
\begin{document}

\title{Derived Categories of Spaces}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we discuss derived categories of modules on algebraic spaces.
There do not seem to be good introductory references addressing this topic;
it is covered in the literature by referring to papers dealing with derived
categories of modules on algebraic stacks, for example see
\cite{olsson_sheaves}.



\section{Conventions}
\label{section-conventions}

\noindent
If $\mathcal{A}$ is an abelian category and $M$ is an object
of $\mathcal{A}$ then we also denote $M$ the object of $K(\mathcal{A})$
and/or $D(\mathcal{A})$ corresponding to the complex which has
$M$ in degree $0$ and is zero in all other degrees.

\medskip\noindent
If we have a ring $A$, then $K(A)$ denotes the homotopy category
of complexes of $A$-modules and $D(A)$ the associated derived category.
Similarly, if we have a ringed space $(X, \mathcal{O}_X)$ the symbol
$K(\mathcal{O}_X)$ denotes the homotopy category of complexes of
$\mathcal{O}_X$-modules and $D(\mathcal{O}_X)$ the associated derived
category.





\section{Generalities}
\label{section-generalities}

\noindent
In this section we put some general results on cohomology of unbounded
complexes of modules on algebraic spaces.

\begin{lemma}
\label{lemma-restrict-direct-image-open}
Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces
over $S$. Given an \'etale morphism $V \to Y$, set $U = V \times_Y X$
and denote $g : U \to V$ the projection morphism. Then
$(Rf_*E)|_V = Rg_*(E|_U)$ for $E$ in $D(\mathcal{O}_X)$.
\end{lemma}

\begin{proof}
Represent $E$ by a K-injective complex $\mathcal{I}^\bullet$ of
$\mathcal{O}_X$-modules. Then $Rf_*(E) = f_*\mathcal{I}^\bullet$
and $Rg_*(E|_U) = g_*(\mathcal{I}^\bullet|_U)$ by
Cohomology on Sites, Lemma
\ref{sites-cohomology-lemma-restrict-K-injective-to-open}.
Hence the result follows from
Properties of Spaces,
Lemma \ref{spaces-properties-lemma-pushforward-etale-base-change-modules}.
\end{proof}

\begin{definition}
\label{definition-supported-on}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
Let $E$ be an object of $D(\mathcal{O}_X)$.
Let $T \subset |X|$ be a closed subset.
We say $E$ is {\it supported on $T$} if the
cohomology sheaves $H^i(E)$ are supported on $T$.
\end{definition}

\begin{lemma}
\label{lemma-pushforward-with-support-in-open}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
Let $U \subset X$ be an open subspace. Let $T \subset |X|$ be a
closed subset.
\begin{enumerate}
\item If $E$ is an object of $D(\mathcal{O}_X)$ supported on $T$, then
$E \to Rj_*(E|_U)$ is an isomorphism.
\item If $F$ is an object of $D(\mathcal{O}_U)$ supported on $T$, then
$j_!F \to Rj_*F$ is an isomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $V = X \setminus T$ and $W = U \cap V$. Note that $X = U \cup V$ is an
open covering of $X$. Denote $j_W : W \to V$ the open immersion.
Let $E$ be an object of $D(\mathcal{O}_X)$ whose cohomology sheaves are
supported on $T$. By
Lemma \ref{lemma-restrict-direct-image-open} we have
$(Rj_*E|_U)|_V = Rj_{W, *}(E|_W) = 0$ because $E|_W = 0$ by our assumption.
On the other hand, $Rj_*(E|_U)|_U = E|_U$. Thus (1) is clear.
Let $F$ be an object of $D(\mathcal{O}_U)$ whose cohomology sheaves
are supported on $T$. By
Lemma \ref{lemma-restrict-direct-image-open} we have
$(Rj_*F)|_V = Rj_{W, *}(F|_W) = 0$ because $F|_W = 0$ by our assumption.
We also have $(j_!F)|_V = j_{W!}(F|_W) = 0$ (the first equality is immediate
from the definition of extension by zero). Since both
$(Rj_*F)|_U = F$ and $(j_!F)|_U = F$ we see that (2) holds.
\end{proof}








\section{Derived category of quasi-coherent modules on the small \'etale site}
\label{section-derived-quasi-coherent-etale}

\noindent
Let $X$ be a scheme. In this section we show that $D_{QCoh}(\mathcal{O}_X)$
can be defined in terms of the small \'etale site $X_{\acute{e}tale}$ of $X$.
Denote $\mathcal{O}_{\acute{e}tale}$ the structure sheaf on
$X_{\acute{e}tale}$. 
Consider the morphism of ringed sites
\begin{equation}
\label{equation-epsilon}
\epsilon :
(X_{\acute{e}tale}, \mathcal{O}_{\acute{e}tale})
\longrightarrow
(X_{Zar}, \mathcal{O}_X).
\end{equation}
denoted $\text{id}_{small, \acute{e}tale, Zar}$ in
Descent, Lemma \ref{descent-lemma-compare-sites}.

\begin{lemma}
\label{lemma-epsilon-flat}
The morphism $\epsilon$ of (\ref{equation-epsilon})
is a flat morphism of ringed sites. In particular the functor
$\epsilon^* : \textit{Mod}(\mathcal{O}_X) \to
\textit{Mod}(\mathcal{O}_{\acute{e}tale})$ is exact.
Moreover, if $\epsilon^*\mathcal{F} = 0$, then $\mathcal{F} = 0$.
\end{lemma}

\begin{proof}
The second assertion follows from the first by
Modules on Sites, Lemma \ref{sites-modules-lemma-flat-pullback-exact}.
To prove the first assertion we have to show that
$\mathcal{O}_{\acute{e}tale}$ is a flat $\epsilon^{-1}\mathcal{O}_X$-module.
To do this it suffices to check
$\mathcal{O}_{X, x} \to \mathcal{O}_{\acute{e}tale, \overline{x}}$
is flat for any geometric point $\overline{x}$ of $X$, see
Modules on Sites, Lemma
\ref{sites-modules-lemma-check-flat-stalks},
Sites, Lemma
\ref{sites-lemma-point-morphism-sites},
and
\'Etale Cohomology, Remarks
\ref{etale-cohomology-remarks-enough-points}.
By \'Etale Cohomology, Lemma
\ref{etale-cohomology-lemma-describe-etale-local-ring}
we see that $\mathcal{O}_{\acute{e}tale, \overline{x}}$ is the
strict henselization of $\mathcal{O}_{X, x}$. Thus
$\mathcal{O}_{X, x} \to \mathcal{O}_{\acute{e}tale, \overline{x}}$
is faithfully flat by More on Algebra,
Lemma \ref{more-algebra-lemma-dumb-properties-henselization}.
The final statement follows also: if $\epsilon^*\mathcal{F} = 0$, then
$$
0 = \epsilon^*\mathcal{F}_{\overline{x}} =
\mathcal{F}_x \otimes_{\mathcal{O}_{X, x}} \mathcal{O}_{\acute{e}tale}
$$
(Modules on Sites, Lemma \ref{sites-modules-lemma-pullback-stalk})
for all geometric points $\overline{x}$. By faithful flatness of
$\mathcal{O}_{X, x} \to \mathcal{O}_{\acute{e}tale, \overline{x}}$
we conclude $\mathcal{F}_x = 0$ for all $x \in X$.
\end{proof}

\noindent
Let $X$ be a scheme. Notation as in (\ref{equation-epsilon}).
Recall that $\epsilon^* : \textit{QCoh}(\mathcal{O}_X)
\to \textit{QCoh}(\mathcal{O}_{\acute{e}tale})$
is an equivalence by
Descent, Proposition \ref{descent-proposition-equivalence-quasi-coherent} and
Remark \ref{descent-remark-change-topologies-ringed-sites}.
Moreover, $\textit{QCoh}(\mathcal{O}_{\acute{e}tale})$ forms a
Serre subcategory of
$\textit{Mod}(\mathcal{O}_{\acute{e}tale})$ by
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}.
Hence we can let $D_{QCoh}(\mathcal{O}_{\acute{e}tale})$ be the trangulated
subcategory of $D(\mathcal{O}_{\acute{e}tale})$ whose objects are the
complexes with quasi-coherent cohomology sheaves, see
Derived Categories, Section \ref{derived-section-triangulated-sub}.
The functor $\epsilon^*$ is exact (Lemma \ref{lemma-epsilon-flat})
hence induces
$\epsilon^* :  D(\mathcal{O}_X) \to D(\mathcal{O}_{\acute{e}tale})$
and and since pullbacks of quasi-coherent modules are quasi-coherent
also $\epsilon^* : D_{QCoh}(\mathcal{O}_X) \to
D_{QCoh}(\mathcal{O}_{\acute{e}tale})$.

\begin{lemma}
\label{lemma-derived-quasi-coherent-small-etale-site}
Let $X$ be a scheme. The functor
$\epsilon^* : D_{QCoh}(\mathcal{O}_X) \to
D_{QCoh}(\mathcal{O}_{\acute{e}tale})$
defined above is an equivalence.
\end{lemma}

\begin{proof}
We will prove this by showing the functor
$R\epsilon_* : D(\mathcal{O}_{\acute{e}tale}) \to D(\mathcal{O}_X)$
induces a quasi-inverse.

\medskip\noindent
Every quasi-coherent $\mathcal{O}_{\acute{e}tale}$-module
$\mathcal{H}$ is of the form $\epsilon^*\mathcal{F}$ for some quasi-coherent
$\mathcal{O}_X$-module $\mathcal{F}$, see
Descent, Proposition \ref{descent-proposition-equivalence-quasi-coherent}.
Since $\mathcal{F} = \epsilon_*\mathcal{H}$ in this case
(as $\epsilon_*$ is the restriction to $X_{Zar} \subset X_{\acute{e}tale}$)
we conclude that the adjunction map
$\epsilon^*\epsilon_*\mathcal{H} \to \mathcal{H}$ is an isomorphism for all
quasi-coherent $\mathcal{O}_{\acute{e}tale}$-modules $\mathcal{H}$.

\medskip\noindent
Let $E$ be an object of $D_{\textit{QCoh}}(\mathcal{O}_{\acute{e}tale})$
and denote $\mathcal{H}^i = H^i(E)$ its $i$th cohomology
sheaf. Let $\mathcal{B}$ be the set of affine objects of $X_{\acute{e}tale}$.
Then $H^p(U, \mathcal{H}^i) = 0$ for all $p > 0$, all $i \in \mathbf{Z}$,
and all $U \in \mathcal{B}$, see
Descent, Proposition \ref{descent-proposition-same-cohomology-quasi-coherent}
and
Cohomology of Schemes, Lemma
\ref{coherent-lemma-quasi-coherent-affine-cohomology-zero}.
According to
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-K-injective}
this implies $E$ is represented by a K-injective complex
$\mathcal{I}^\bullet$ and
$\mathcal{I}^\bullet = \lim \mathcal{I}_n^\bullet$ where
each $\mathcal{I}_n^\bullet$ is a bounded below complex of injectives,
the maps in the system
$\ldots \to \mathcal{I}_2^\bullet \to \mathcal{I}_1^\bullet$
are termwise split surjections, and each $\mathcal{I}_n^\bullet$ is
quasi-isomorphic to $\tau_{\geq -n}E$.
In particular,
$$
R\epsilon_*E = \epsilon_*\mathcal{I}^\bullet =
\lim \epsilon_*\mathcal{I}_n^\bullet
$$
For every $U \in \mathcal{B}$ we have
$$
H^m(\mathcal{I}_n^\bullet(U)) =
\left\{
\begin{matrix}
\mathcal{H}^m(U) & \text{if} & m \geq -n \\
0 & \text{if} & m < n
\end{matrix}
\right.
$$
by the vanishing of $H^p(U, \mathcal{H}^i)$ for $p > 0$,
the spectral sequence
Derived Categories, Lemma \ref{derived-lemma-two-ss-complex-functor}, and
the fact that $\tau_{\geq -n}E \cong \mathcal{I}_n^\bullet$. Hence we can apply
Homology, Lemma \ref{homology-lemma-apply-Mittag-Leffler-again}
to the sequence of complexes
$$
\lim_n \mathcal{I}_n^{m - 2}(U) \to
\lim_n \mathcal{I}_n^{m - 1}(U) \to
\lim_n \mathcal{I}_n^m(U) \to
\lim_n \mathcal{I}_n^{m + 1}(U)
$$
to conclude that $H^m(\mathcal{I}^\bullet(U)) = \mathcal{H}^m(U)$ for
$U \in \mathcal{B}$. Since $\epsilon_*$ is restriction
to $X_{Zar}$ we see, on applying the above to $U \subset X$
affine open, that
$H^m(\epsilon_*\mathcal{I}^\bullet) = \epsilon_*\mathcal{H}^m$.
Thus $R\epsilon_*$ indeed gives rise to a functor
$$
R\epsilon_* :
D_{QCoh}(\mathcal{O}_{\acute{e}tale})
\longrightarrow
D_{QCoh}(\mathcal{O}_X)
$$
For our object $E$ of $D_{\textit{QCoh}}(\mathcal{O}_{\acute{e}tale})$ above
the adjunction map $\epsilon^*R\epsilon_*E \to E$
is an isomorphism as we've seen that the cohomology sheaves
of $R\epsilon_*E$ are $\epsilon_*\mathcal{H}^m$ and we have
$\epsilon^*\epsilon_*\mathcal{H}^m = \mathcal{H}^m$ (see above).
For $F \in D_{\textit{QCoh}}(\mathcal{O}_X)$ the
adjunction map $F \to R\epsilon_*\epsilon^*F$
is an isomorphism for the same reason, i.e., because
the cohomology sheaves of $R\epsilon_*\epsilon^*F$
are isomorphic to
$\epsilon_*H^m(\epsilon^*F) = \epsilon_*\epsilon^*H^m(F) = H^m(F)$.
\end{proof}










\section{Derived category of quasi-coherent modules}
\label{section-derived-quasi-coherent}

\noindent
Let $S$ be a scheme. Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}
shows that the category $D_{QCoh}(\mathcal{O}_S)$ can be defined
in terms of complexes of $\mathcal{O}_S$-modules on the scheme $S$
or by complexes of $\mathcal{O}$-modules on the small \'etale site
of $S$. Hence the following definition is compatible with the definition
in the case of schemes.

\begin{definition}
\label{definition-derived-quasi-coherent}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
The {\it derived category of $\mathcal{O}_X$-modules with
quasi-coherent cohomology sheaves} is denoted
$D_{QCoh}(\mathcal{O}_X)$.
\end{definition}

\noindent
This makes sense by
Properties of Spaces, Lemma
\ref{spaces-properties-lemma-properties-quasi-coherent}
and
Derived Categories, Section \ref{derived-section-triangulated-sub}.
Thus we obtain a canonical functor
\begin{equation}
\label{equation-compare}
D(\textit{QCoh}(\mathcal{O}_X))
\longrightarrow
D_{\textit{QCoh}}(\mathcal{O}_X)
\end{equation}
see Derived Categories, Equation (\ref{derived-equation-compare}).

\medskip\noindent
Observe that a flat morphism $f : Y \to X$ of algebraic spaces
induces an exact functor
$f^* : \textit{Mod}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_Y)$,
see
Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-flat-morphism-sites}
and
Modules on Sites, Lemma \ref{sites-modules-lemma-flat-pullback-exact}.
In particular $Lf^* : D(\mathcal{O}_X) \to D(\mathcal{O}_Y)$
is computed on any representative complex
(Derived Categories, Lemma \ref{derived-lemma-right-derived-exact-functor}).
We will write $Lf^* = f^*$ when $f$ is flat and we have
$H^i(f^*E) = f^*H^i(E)$ for $E$ in $D(\mathcal{O}_X)$ in this case.
We will use this often when $f$ is \'etale. Of course in the \'etale
case the pullback functor is just the restriction to $Y_{\acute{e}tale}$,
see Properties of Spaces, Equation
(\ref{spaces-properties-equation-restrict-modules}).

\begin{lemma}
\label{lemma-check-quasi-coherence-on-covering}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
Let $E$ be an object of $D(\mathcal{O}_X)$. The following are equivalent
\begin{enumerate}
\item $E$ is in $D_{\textit{QCoh}}(\mathcal{O}_X)$,
\item for every \'etale morphism $\varphi : U \to X$ where $U$ is an
affine scheme $\varphi^*E$ is an object of
$D_{\textit{QCoh}}(\mathcal{O}_U)$,
\item for every \'etale morphism $\varphi : U \to X$ where $U$ is a scheme
$\varphi^*E$ is an object of
$D_{\textit{QCoh}}(\mathcal{O}_U)$,
\item there exists a surjective \'etale morphism $\varphi : U \to X$
where $U$ is a scheme such that $\varphi^*E$ is an object of
$D_{\textit{QCoh}}(\mathcal{O}_U)$, and
\item there exists a surjective \'etale morphism of algebraic spaces
$f : Y \to X$ such that $Lf^*E$ is an object of
$D_{\textit{QCoh}}(\mathcal{O}_Y)$.
\end{enumerate}
\end{lemma}

\begin{proof}
This follows immediately from the discussion preceding the lemma and
Properties of Spaces, Lemma
\ref{spaces-properties-lemma-characterize-quasi-coherent}.
\end{proof}

\begin{lemma}
\label{lemma-quasi-coherence-direct-sums}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
Then $D_{\textit{QCoh}}(\mathcal{O}_X)$ has direct sums.
\end{lemma}

\begin{proof}
By Injectives, Lemma \ref{injectives-lemma-derived-products}
the derived category $D(\mathcal{O}_X)$ has direct sums and
they are computed by taking termwise direct sums of any representatives.
Thus it is clear that the cohomology sheaf of a direct sum is the
direct sum of the cohomology sheaves as taking direct sums is
an exact functor (in any grothendieck abelian category). The lemma
follows as the direct sum of quasi-coherent sheaves is quasi-coherent, see
Properties of Spaces, Lemma
\ref{spaces-properties-lemma-properties-quasi-coherent}.
\end{proof}

\begin{lemma}
\label{lemma-quasi-coherence-pullback}
Let $S$ be a scheme.
Let $f : Y \to X$ be a morphism of algebraic spaces over $S$.
The functor $Lf^*$ sends $D_{\textit{QCoh}}(\mathcal{O}_X)$
into $D_{\textit{QCoh}}(\mathcal{O}_Y)$.
\end{lemma}

\begin{proof}
Choose a diagram
$$
\xymatrix{
U \ar[d]_a \ar[r]_h & V \ar[d]^b \\
X \ar[r]^f & Y
}
$$
where $U$ and $V$ are schemes, the vertical arrows are \'etale, and
$a$ is surjective. Since $a^* \circ Lf^* = Lh^* \circ b^*$ the result
follows from
Lemma \ref{lemma-check-quasi-coherence-on-covering}
and the case of schemes which is
Derived Categories of Schemes, Lemma
\ref{perfect-lemma-quasi-coherence-pullback}.
\end{proof}

\begin{lemma}
\label{lemma-quasi-coherence-tensor-product}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
For objects $K, L$ of $D_{\textit{QCoh}}(\mathcal{O}_X)$
the derived tensor product $K \otimes^\mathbf{L} L$ is in
$D_{\textit{QCoh}}(\mathcal{O}_X)$.
\end{lemma}

\begin{proof}
Let $\varphi : U \to X$ be a surjective \'etale morphism from a scheme $U$.
Since
$\varphi^*(K \otimes_{\mathcal{O}_X}^\mathbf{L} L) =
\varphi^*K \otimes_{\mathcal{O}_U}^\mathbf{L} \varphi^*L$
we see from
Lemma \ref{lemma-check-quasi-coherence-on-covering}
that this follows from the case of schemes which is
Derived Categories of Schemes, Lemma
\ref{perfect-lemma-quasi-coherence-tensor-product}.
\end{proof}

\noindent
The following lemma will help us to ``compute'' a right derived functor
on an object of $D_{\textit{QCoh}}(\mathcal{O}_X)$.

\begin{lemma}
\label{lemma-nice-K-injective}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$. Let $E$ be an
object of $D_{\textit{QCoh}}(\mathcal{O}_X)$. Then there exists an inverse
system $\mathcal{I}_n^\bullet$ of complexes of $\mathcal{O}_X$-modules
such that
\begin{enumerate}
\item $\mathcal{I} = \lim_n \mathcal{I}_n^\bullet$ represents $E$,
\item $\mathcal{I}_n^\bullet$ is a bounded below complex of injectives,
\item $\tau_{\geq -n}E \to \mathcal{I}_n^\bullet$ is an isomorphism
in $D(\mathcal{O}_X)$,
\item the transition maps
$\mathcal{I}_{n + 1}^\bullet \to \mathcal{I}_n^\bullet$
are termwise split surjections, and
\item $\mathcal{I}^\bullet$ is a K-injective complex of
$\mathcal{O}_X$-modules.
\end{enumerate}
\end{lemma}

\begin{proof}
Denote $\mathcal{H}^i = H^i(E)$ the $i$th cohomology sheaf of $E$.
Let $\mathcal{B}$ be the set of affine objects of $X_{\acute{e}tale}$.
Then $H^p(U, \mathcal{H}^i) = 0$ for all $p > 0$, all $i \in \mathbf{Z}$,
and all $U \in \mathcal{B}$ as $U$ is an affine scheme.
See discussion in
Cohomology of Spaces, Section
\ref{spaces-cohomology-section-higher-direct-image}
and
Cohomology of Schemes, Lemma
\ref{coherent-lemma-quasi-coherent-affine-cohomology-zero}.
Thus the lemma follows from an application of
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-K-injective}.
\end{proof}

\begin{lemma}
\label{lemma-application-nice-K-injective}
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
Let $F : \textit{Mod}(\mathcal{O}_X) \to \textit{Ab}$
be a functor and $N \geq 0$ an integer. Assume that
\begin{enumerate}
\item $F$ is left exact,
\item $F$ commutes with countable direct products,
\item $R^pF(\mathcal{F}) = 0$ for all $p \geq N$ and $\mathcal{F}$
quasi-coherent.
\end{enumerate}
Then for $E \in D_{\textit{QCoh}}(\mathcal{O}_X)$ the maps
$R^pF(E) \to R^pF(\tau_{\geq p - N + 1}E)$ are isomorphisms.
\end{lemma}

\begin{proof}
Let $E$ be an object of $D_{\textit{QCoh}}(\mathcal{O}_X)$.
By shifting the complex we see it suffices to prove the assertion
for $p = 0$. Choose $\mathcal{I}^\bullet = \lim \mathcal{I}_n^\bullet$
as in Lemma \ref{lemma-nice-K-injective}.
As $\mathcal{I}^\bullet$ is K-injective $RF(E)$ is represented by
$F(\mathcal{I}^\bullet)$. As $F$ commutes with countable direct
products, and since the maps $\mathcal{I}_n^m \to \mathcal{I}_{n - 1}^m$
are split surjections, we get
$F(\mathcal{I}^\bullet) = \lim F(\mathcal{I}_n^\bullet)$.
The comohomology of
\begin{equation}
\label{equation-system-F}
F(\mathcal{I}_n^{-2}) \to
F(\mathcal{I}_n^{-1}) \to
F(\mathcal{I}_n^0) \to
F(\mathcal{I}_n^1)
\end{equation}
in degree $0$, resp.\ $-1$ is equal to $R^0F(\tau_{\geq -n}E)$,
resp.\ $R^{-1}F(\tau_{\geq -n}E)$ because $\mathcal{I}_n^\bullet$
is a bounded below complex of injectives representing $\tau_{\geq -n}E$.
We have a distinguished triangle
$$
H^{-n}(E)[n] \to \tau_{\geq -n}E \to \tau_{\geq - n + 1}E \to H^{-n}(E)[n + 1]
$$
in $D(\mathcal{O}_X)$. Since $H^{-n}(E)$ is quasi-coherent we have
$$
R^pF(H^{-n}(E)[n]) = R^{p + n}F(H^{-n}(E)) = 0
$$
for $p + n \geq N$ and
$$
R^pF(H^{-n}(E)[n + 1]) = R^{p + n + 1}F(H^{-n}(E)) = 0
$$
for $p + n + 1 \geq N$. We conclude that
$$
R^pF(\tau_{\geq -n}E) \to R^pF(\tau_{\geq - n + 1}E)
$$
is an isomorphism for all $n \gg p$ and an isomorphism for
$n \geq N$ for $p = 0$. Thus
Homology, Lemma \ref{homology-lemma-apply-Mittag-Leffler-again}
applies to the system of sequences (\ref{equation-system-F})
and we conclude that $R^0F(E) = \lim R^0F(\tau_{\geq - n}E)$.
By the above the system $R^0F(\tau_{\geq - n}E)$ is constant starting
with $n = N - 1$ as desired.
\end{proof}









\section{Total direct image}
\label{section-total-direct-image}

\noindent
The following lemma is the analogue of
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-vanishing-higher-direct-images}.

\begin{lemma}
\label{lemma-quasi-coherence-direct-image}
Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-separated and quasi-compact
morphism of algebraic spaces over $S$.
\begin{enumerate}
\item The functor $Rf_*$ sends $D_{\textit{QCoh}}(\mathcal{O}_X)$
into $D_{\textit{QCoh}}(\mathcal{O}_Y)$.
\item If $Y$ is quasi-compact, there exists an integer $N = N(X, Y, f)$
such that for an object $E$ of $D_{\textit{QCoh}}(\mathcal{O}_X)$
with $H^m(E) = 0$ for $m > 0$ we have
$H^m(Rf_*E) = 0$ for $m > N$.
\item In fact, if $Y$ is quasi-compact we can find $N = N(X, Y, f)$
such that for every morphism of algebraic spaces $Y' \to Y$
the same conclusion holds for the functor $R(f')_*$
where $f' : X' \to Y'$ is the base change of $f$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $E$ be an object of $D_{\textit{QCoh}}(\mathcal{O}_X)$.
To prove (1) we have to show that $Rf_*E$ has quasi-coherent
cohomology sheaves. This question is local on $Y$, hence we may
assume $Y$ is quasi-compact. Pick $N = N(X, Y, f)$ as in
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-vanishing-higher-direct-images}.
Thus $R^pf_*\mathcal{F} = 0$ for all quasi-coherent $\mathcal{O}_X$-modules
$\mathcal{F}$ and all $p \geq N$. In particular, for any affine
object $V$ of $Y_{\acute{e}tale}$ we have $H^p(V \times_Y X, \mathcal{F}) = 0$
for $p \geq N$, see
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-quasi-coherence-higher-direct-images-application}.

\medskip\noindent
Let $E$ be an object of $D_{\textit{QCoh}}(\mathcal{O}_X)$.
Choose $\mathcal{I}^\bullet = \lim \mathcal{I}_n^\bullet$
as in Lemma \ref{lemma-nice-K-injective}.
As $\mathcal{I}^\bullet$ is K-injective $Rf_*E$ is represented by
$f_*\mathcal{I}^\bullet = \lim f_*\mathcal{I}_n^\bullet$.
Let $V$ be an affine object of $Y_{\acute{e}tale}$. The cohomology
$H^m(f_*\mathcal{I}_n^\bullet(V))$ of
$$
f_*\mathcal{I}_n^{m - 1}(V) \to
f_*\mathcal{I}_n^m(V) \to
f_*\mathcal{I}_n^{m + 1}(V)
$$
is equal to $H^m(V \times_Y X, \tau_{\geq -n}E)$ because
$\mathcal{I}_n^\bullet$ is a bounded below complex of injectives
representing $\tau_{\geq -n}E$. We have a distinguished triangle
$$
H^{-n}(E)[n] \to \tau_{\geq -n}E \to \tau_{\geq - n + 1}E \to H^{-n}(E)[n + 1]
$$
in $D(\mathcal{O}_X)$. Since $H^{-n}(E)$ is quasi-coherent we have
$H^m(V \times_Y X, H^{-n}(E)[n]) = 0$ for $n + m \geq N$ by
our choice of $N$. Similarly, $H^m(V \times_Y X, H^{-n}(E)[n + 1]) = 0$
for $n + m + 1 \geq N$. We conclude that
$$
H^m(f_*\mathcal{I}_n^\bullet(V)) \to H^m(f_*\mathcal{I}_{n - 1}^\bullet(V))
$$
is an isomorphism for all $n \geq N - m$. Thus
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-inverse-limit-complexes}
applies to show that the $m$th cohomology sheaf of
$\lim f_*\mathcal{I}_n^\bullet$ agrees with the $m$th cohomology
sheaf of $f_*\mathcal{I}_n^\bullet$ for $n \geq N - m$. Since these
cohomology sheaves are quasi-coherent by
Cohomology of Spaces, Lemma \ref{spaces-cohomology-lemma-higher-direct-image}
we get (1).

\medskip\noindent
Finally, we show that (2) and (3) hold with our choice of $N$.
Namely, the stabilization proven above gives that $H^m(Rf_*E)$ is equal
to $H^m(Rf_*(\tau_{\geq -n}E))$ for all $n$ large enough which means we
can work with objects in $D^+(\mathcal{O}_X)$ in order to prove (2) and (3).
In this case we can for example use the spectral sequence
$$
R^pf_*H^q(E) \Rightarrow R^{p + q}f_*E
$$
(Derived Categories, Lemma \ref{derived-lemma-two-ss-complex-functor})
and the vanishing of $R^pf_*H^q(E)$ for $p \geq N$ to conclude.
Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-quasi-coherence-pushforward-direct-sums}
Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-separated and
quasi-compact morphism of algebraic spaces over $S$. Then
$Rf_* : D_{\textit{QCoh}}(\mathcal{O}_X) \to D_{\textit{QCoh}}(\mathcal{O}_S)$
commutes with direct sums.
\end{lemma}

\begin{proof}
Let $E_i$ be a family of objects of $D_{\textit{QCoh}}(\mathcal{O}_X)$
and set $E = \bigoplus E_i$. We want to show that the map
$$
\bigoplus Rf_*E_i \longrightarrow Rf_*E
$$
is an isomomorphism. We will show it induces an isomorphism on
cohomology sheaves in degree $0$ which will imply the lemma.
Choose an integer $N$ as in Lemma \ref{lemma-quasi-coherence-direct-image}.
Then $R^0f_*E = R^0f_*\tau_{\geq -N}E$ and
$R^0f_*E_i = R^0f_*\tau_{\geq -N}E_i$ by the lemma cited. Observe that
$\tau_{\geq -N}E = \bigoplus \tau_{\geq -N}E_i$.
Thus we may assume all of the $E_i$ have vanishing cohomology
sheaves in degrees $< -N$. Next we use the spectral sequences
$$
R^pf_*H^q(E) \Rightarrow R^{p + q}f_*E
\quad\text{and}\quad
R^pf_*H^q(E_i) \Rightarrow R^{p + q}f_*E_i
$$
(Derived Categories, Lemma \ref{derived-lemma-two-ss-complex-functor})
to reduce to the case of a direct sum of quasi-coherent sheaves.
This case is handled by
Cohomology of Spaces, Lemma \ref{spaces-cohomology-lemma-colimit-cohomology}.
\end{proof}

\begin{remark}
\label{remark-match-total-direct-images}
Let $S$ be a scheme. Let $f : X \to Y$ be a quasi-compact and quasi-separated
morphism of representable algebraic spaces $X$ and $Y$ over $S$.
Let $f_0 : X_0 \to Y_0$ be a morphism of schemes representing $f$
(awkward but temporary notation). Then we claim the diagrams
$$
\xymatrix{
D_{\textit{QCoh}}(\mathcal{O}_{X_0})
\ar[d]_{Rf_{0, *}} \ar@{=}[rrrrrr]_{\text{Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}}}
& & & & & &
D_{\textit{QCoh}}(\mathcal{O}_X) \ar[d]^{Rf_*} \\
D_{\textit{QCoh}}(\mathcal{O}_{Y_0})
\ar@{=}[rrrrrr]^{\text{Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}}}
& & & & & &
D_{\textit{QCoh}}(\mathcal{O}_Y)
}
$$
(Lemma \ref{lemma-quasi-coherence-direct-image} and
Derived Categories of Schemes, Lemma
\ref{perfect-lemma-quasi-coherence-direct-image})
and
$$
\xymatrix{
D_{\textit{QCoh}}(\mathcal{O}_{X_0})
\ar@{=}[rrrrrr]_{\text{Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}}}
& & & & & &
D_{\textit{QCoh}}(\mathcal{O}_X) \\
D_{\textit{QCoh}}(\mathcal{O}_{Y_0})
\ar[u]^{Lf^*_0}
\ar@{=}[rrrrrr]^{\text{Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}}}
& & & & & &
D_{\textit{QCoh}}(\mathcal{O}_Y) \ar[u]_{Lf^*}
}
$$
(Lemma \ref{lemma-quasi-coherence-pullback}
and Derived Categories of Schemes, Lemma
\ref{perfect-lemma-quasi-coherence-pullback})
are commutative. The result for $Lf^*$ and $Lf_0^*$ follows as the
equivalences
$D_{\textit{QCoh}}(\mathcal{O}_{X_0}) \to D_{\textit{QCoh}}(\mathcal{O}_X)$
and
$D_{\textit{QCoh}}(\mathcal{O}_{Y_0}) \to D_{\textit{QCoh}}(\mathcal{O}_Y)$
of Lemma \ref{lemma-derived-quasi-coherent-small-etale-site}
come from pulling back by the (flat) morphisms of ringed sites
$\epsilon : X_{\acute{e}tale} \to X_{0, Zar}$ and
$\epsilon : Y_{\acute{e}tale} \to Y_{0, Zar}$
and the diagram of ringed sites
$$
\xymatrix{
X_{0, Zar} \ar[d]_{f_0} & X_{\acute{e}tale} \ar[l]^\epsilon \ar[d]^f \\
Y_{0, Zar} & Y_{\acute{e}tale} \ar[l]_\epsilon
}
$$
is commutative (details omitted). In fact the commutativity of the
first diagram also follows as the proof of Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}
shows that the functor $R\epsilon_*$ gives the equivalences
$D_{\textit{QCoh}}(\mathcal{O}_X) \to D_{\textit{QCoh}}(\mathcal{O}_{X_0})$
and
$D_{\textit{QCoh}}(\mathcal{O}_Y) \to D_{\textit{QCoh}}(\mathcal{O}_{Y_0})$.
\end{remark}






\section{Derived category of coherent modules}
\label{section-derived-coherent}

\noindent
Let $S$ be a scheme. Let $X$ be a locally Noetherian algebraic space over $S$.
In this case the category
$\textit{Coh}(\mathcal{O}_X) \subset \textit{Mod}(\mathcal{O}_X)$
of coherent $\mathcal{O}_X$-modules is a weak Serre subcategory, see
Homology, Section \ref{homology-section-serre-subcategories}
and
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-coherent-abelian-Noetherian}.
Denote
$$
D_{\textit{Coh}}(\mathcal{O}_X) \subset D(\mathcal{O}_X)
$$
the subcategory of complexes whose cohomology sheaves are coherent, see
Derived Categories, Section \ref{derived-section-triangulated-sub}.
Thus we obtain a canonical functor
\begin{equation}
\label{equation-compare-coherent}
D(\textit{Coh}(\mathcal{O}_X))
\longrightarrow
D_{\textit{Coh}}(\mathcal{O}_X)
\end{equation}
see Derived Categories, Equation (\ref{derived-equation-compare}).

\begin{lemma}
\label{lemma-direct-image-coherent}
Let $S$ be a scheme. Let $f : X \to Y$ be a morphism of algebraic spaces
over $S$. Assume $f$ is locally of finite type and $Y$ is Noetherian.
Let $E$ be an object of $D^b_{\textit{Coh}}(\mathcal{O}_X)$ such that the
scheme theoretic support of $H^i(E)$ is proper over $Y$ for all $i$.
Then $Rf_*E$ is an object of $D^b_{\textit{Coh}}(\mathcal{O}_Y)$.
\end{lemma}

\begin{proof}
Consider the spectral sequence
$$
R^pf_*H^q(E) \Rightarrow R^{p + q}f_*E
$$
see Derived Categories, Lemma \ref{derived-lemma-two-ss-complex-functor}.
By assumption and
Cohomology of Spaces, Remark
\ref{spaces-cohomology-remark-scheme-theoretic-support-proper}
the sheaves $R^pf_*H^q(E)$ are coherent. Hence
$R^{p + q}f_*E$ is coherent, i.e., $E \in D_{\textit{Coh}}(\mathcal{O}_S)$.
Boundedness from below is trivial. Boundedness from above
follows from
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-vanishing-higher-direct-images}
or from
Lemma \ref{lemma-quasi-coherence-direct-image}.
\end{proof}




\section{Induction principle}
\label{section-induction}

\noindent
The following lemma is the analogue of
Cohomology of Schemes, Lemma \ref{lemma-induction-principle}.
To formulate it we introduce some notation.

\begin{definition}
\label{definition-elementary-distinguished-square}
Let $S$ be a scheme. A commutative diagram
$$
\xymatrix{
U \times_W V \ar[r] \ar[d] & V \ar[d]^f \\
U \ar[r]^j & W
}
$$
of algebraic spaces over $S$ is called an {\it elementary distinguished square}
if
\begin{enumerate}
\item $U$ is an open subspace of $W$ and $j$ is the inclusion morphism,
\item $f$ is \'etale, and
\item setting $T = W \setminus U$ (with reduced induced
subspace structure) the morphism $f^{-1}(T) \to T$ is an isomorphism.
\end{enumerate}
We will indicate this by saying: ``Let $(U \subset W, f : V \to W)$
be an elementary distinguished square.''
\end{definition}

\noindent
Note that if $(U \subset W, f : V \to W)$ is an elementary distinguished
square, then we have $W = U \cup f(V)$. Thus $\{U \to W, V \to W\}$ is
an \'etale covering of $W$. It turns out that these \'etale coverings
have nice properties and that in some sense
there are ``enough'' of them.

\begin{lemma}
\label{lemma-make-more-elementary-distinguished-squares}
Let $S$ be a scheme. Let $(U \subset W, f : V \to W)$ be an elementary
distinguished square of algebraic spaces over $S$.
\begin{enumerate}
\item If $V' \subset V$ and
$U \subset U' \subset W$ are open subspaces and $W' = U' \cup f(V')$
then $(U' \subset W', f|_{V'} : V' \to W')$ is an elementary distinguished
square.
\item If $p : W' \to W$ is a morphism of algebraic spaces, then
$(p^{-1}(U) \subset W', V \times_W W' \to W')$ is an elementary distinguished
square.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-induction-principle}
Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated
algebraic space over $S$. Let $P$ be a property of the quasi-compact
and quasi-separated objects of $X_{spaces, \acute{e}tale}$. Assume that
\begin{enumerate}
\item $P$ holds for every affine object of $X_{spaces, \acute{e}tale}$,
\item for every elementary distinguished square $(U \subset W, f : V \to W)$
such that
\begin{enumerate}
\item $W$ is a quasi-compact and quasi-separated object of
$X_{spaces, \acute{e}tale}$,
\item $U$ is quasi-compact,
\item $V$ is affine, and
\item $P$ holds for $U$, $V$, and $U \times_W V$,
\end{enumerate}
then $P$ holds for $W$.
\end{enumerate}
Then $P$ holds for every quasi-compact and quasi-separated object
of $X_{spaces, \acute{e}tale}$ and in particular for $X$.
\end{lemma}

\begin{proof}
We first claim that $P$ holds for every representable
quasi-compact and quasi-separated object of $X_{spaces, \acute{e}tale}$.
Namely, suppose that $U \to X$ is \'etale and $U$ is a
quasi-compact and quasi-separated scheme. By assumption (1)
property $P$ holds for every affine open of $U$. Moreover, if
$W, V \subset U$ are quasi-compact open with $V$ affine and $P$ holds for 
$W$, $V$, and $W \cap V$, then $P$ holds for $W \cup V$ by (2)
(as the pair $(W \subset W \cup V, V \to W \cup V)$ is an elementary
distinguished square). Thus $P$ holds for $U$ by the induction
principle for schemes, see
Cohomology of Schemes, Lemma \ref{coherent-lemma-induction-principle}.

\medskip\noindent
To finish the proof it suffices to prove $P$ holds for $X$
(because we can simply replace $X$ by any quasi-compact and quasi-separated
object of $X_{spaces, \acute{e}tale}$ we want to prove the result for).
We will use the filtration
$$
\emptyset = U_{n + 1} \subset
U_n \subset U_{n - 1} \subset \ldots \subset U_1 = X
$$
and the morphisms $f_p : V_p \to U_p$ of
Limits of Spaces, Lemma
\ref{spaces-limits-lemma-filter-quasi-compact-quasi-separated}.
We will prove that $P$ holds for $U_p$ by descending induction on $p$.
Note that $P$ holds for $U_{n + 1}$ by (1)
as an empty algebraic space is affine. Assume $P$ holds for $U_{p + 1}$.
Note that $(U_{p + 1} \subset U_p, f_p : V_p \to U_p)$ is an elementary
distinguished square, but (2) may not apply as $V_p$ may not be affine.
However, as $V_p$ is a quasi-compact scheme we may choose a finite affine open
covering $V_p = V_{p, 1} \cup \ldots \cup V_{p, m}$.
Set $W_{p, 0} = U_{p + 1}$ and
$$
W_{p, i} = U_{p + 1} \cup f_p(V_{p, 1} \cup \ldots \cup V_{p, i})
$$
for $i = 1, \ldots, m$. These are quasi-compact open subspaces of $X$.
Then we have
$$
U_{p + 1} = W_{p, 0} \subset
W_{p, 1} \subset \ldots \subset
W_{p, m} = U_p
$$
and the pairs
$$
(W_{p, 0} \subset W_{p, 1}, f_p|_{V_{p, 1}}),
(W_{p, 1} \subset W_{p, 2}, f_p|_{V_{p, 2}}),\ldots,
(W_{p, m - 1} \subset W_{p, m}, f_p|_{V_{p, m}})
$$
are elementary distinguished squares by
Lemma \ref{lemma-make-more-elementary-distinguished-squares}.
Note that $P$ holds for each $V_{p, 1}$ (as affine schemes) and for
$W_{p, i} \times_{W_{p, i + 1}} V_{p, i + 1}$ as this is a quasi-compact
open of $V_{p, i + 1}$ and hence $P$ holds for it by the first paragraph
of this proof. Thus (2) applies to each of these and we inductively
conclude $P$ holds for $W_{p, 1}, \ldots, W_{p, m} = U_p$.
\end{proof}

\begin{lemma}
\label{lemma-induction-principle-separated}
Let $S$ be a scheme. Let $X$ be a quasi-compact and quasi-separated
algebraic space over $S$. Let
$\mathcal{B} \subset \Ob(X_{spaces, \acute{e}tale})$.
Let $P$ be a property of the elements of $\mathcal{B}$.
Assume that
\begin{enumerate}
\item every $W \in \mathcal{B}$ is quasi-compact and quasi-separated,
\item if $W \in \mathcal{B}$ and $U \subset W$ is quasi-compact open, then
$U \in \mathcal{B}$,
\item if $V \in \Ob(X_{spaces, \acute{e}tale})$ is affine, then
(a) $V \in \mathcal{B}$ and (b) $P$ holds for $V$,
\item for every elementary distinguished square $(U \subset W, f : V \to W)$
such that
\begin{enumerate}
\item $W \in \mathcal{B}$,
\item $U$ is quasi-compact,
\item $V$ is affine, and
\item $P$ holds for $U$, $V$, and $U \times_W V$,
\end{enumerate}
then $P$ holds for $W$.
\end{enumerate}
Then $P$ holds for every $W \in \mathcal{B}$.
\end{lemma}

\begin{proof}
This is proved in exactly the same manner as the proof of
Lemma \ref{lemma-induction-principle}.
(We remark that (4)(d) makes sense as $U \times_W V$ is a quasi-compact
open of $V$ hence an element of $\mathcal{B}$ by conditions
(2) and (3).)
\end{proof}

\begin{remark}
\label{remark-how-to}
How to choose the collection $\mathcal{B}$ in
Lemma \ref{lemma-induction-principle-separated}?
Here are some examples:
\begin{enumerate}
\item If $X$ is quasi-compact and separated, then we can choose
$\mathcal{B}$ to be the set of quasi-compact and separated objects
of $X_{spaces, \acute{e}tale}$. Then $X \in \mathcal{B}$ and $\mathcal{B}$
satisfies (1), (2), and (3)(a).
\item If $X$ is quasi-compact with affine diagonal, then we can choose
$\mathcal{B}$ to be the set of objects
of $X_{spaces, \acute{e}tale}$ which are quasi-compact and have affine
diagonal. Again $X \in \mathcal{B}$ and $\mathcal{B}$
satisfies (1), (2), and (3)(a).
\item If $X$ is quasi-compact and quasi-separated, then the
smallest subset $\mathcal{B}$ which contains $X$ and satisfies
(1), (2), and (3)(a) is given by the rule $W \in \mathcal{B}$ if and only
if either $W$ is a quasi-compact open subspace of $X$, or
$W$ is a quasi-compact open of an affine object of $X_{spaces, \acute{e}tale}$.
\end{enumerate}
\end{remark}




\section{Mayer-Vietoris}
\label{section-mayer-vietoris}

\noindent
In this section we prove that an elementary distinguished triangle
gives rise to various Mayer-Vietoris sequences.

\medskip\noindent
Let $S$ be a scheme. Let $U \to X$ be an \'etale morphism of algebraic
spaces over $S$. In
Properties of Spaces, Section \ref{spaces-properties-section-localize}
it was shown that
$U_{spaces, \acute{e}tale} = X_{spaces, \acute{e}tale}/U$
compatible with structure sheaves. Hence in this situation we
often think of the morphism $j_U : U \to X$ as a localization morphism
(see Modules on Sites, Definition
\ref{sites-modules-definition-localize-ringed-site}).
In particular we think of pullback $j_U^*$ as restriction to $U$
and we often denote it by ${}|_U$; this is compatible with
Properties of Spaces, Equation
(\ref{spaces-properties-equation-restrict-modules}).
In particular we see that
\begin{equation}
\label{equation-stalk-restriction}
(\mathcal{F}|_U)_{\overline{u}} = \mathcal{F}_{\overline{x}}
\end{equation}
if $\overline{u}$ is a geometric point of $U$ and $\overline{x}$
the image of $\overline{u}$ in $X$.
Moreover, restriction has an exact left adjoint $j_{U!}$, see
Modules on Sites, Lemmas \ref{sites-modules-lemma-extension-by-zero} and
\ref{sites-modules-lemma-extension-by-zero-exact}.
Finally, recall that if $\mathcal{G}$ is an $\mathcal{O}_X$-module,
then
\begin{equation}
\label{equation-stalk-j-shriek}
(j_{U!}\mathcal{G})_{\overline{x}} =
\bigoplus\nolimits_{\overline{u}} \mathcal{G}_{\overline{u}}
\end{equation}
for any geometric point $\overline{x} : \Spec(k) \to X$ where the
direct sum is over those morphism $\overline{u} : \Spec(k) \to U$
such that $j_U \circ \overline{u} = \overline{x}$, see
Modules on Sites, Lemma \ref{sites-modules-lemma-stalk-j-shriek}
and
Properties of Spaces, Lemma
\ref{spaces-properties-lemma-points-small-etale-site}.

\begin{lemma}
\label{lemma-exact-sequence-lower-shriek}
Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary
distinguished square of algebraic spaces over $S$.
\begin{enumerate}
\item For a sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$
we have a short exact sequence
$$
0 \to j_{U \times_X V!}\mathcal{F}|_{U \times_X V} \to
j_{U!}\mathcal{F}|_U \oplus j_{V!}\mathcal{F}|_V \to \mathcal{F} \to 0
$$
\item For an object $E$ of $D(\mathcal{O}_X)$ we have a distinguished
triangle
$$
j_{U \times_X V!}E|_{U \times_X V} \to
j_{U!}E|_U \oplus j_{V!}E|_V \to E \to 
j_{U \times_X V!}E|_{U \times_X V}[1]
$$
in $D(\mathcal{O}_X)$.
\end{enumerate}
\end{lemma}

\begin{proof}
To show the sequence of (1) is exact we may check on stalks at
geometric points by
Properties of Spaces, Theorem
\ref{spaces-properties-theorem-exactness-stalks}.
Let $\overline{x}$ be a geometric point of $X$. By Equations
(\ref{equation-stalk-restriction}) and (\ref{equation-stalk-j-shriek})
taking stalks at $\overline{x}$ we obtain the sequence
$$
0 \to
\bigoplus\nolimits_{(\overline{u}, \overline{v})} \mathcal{F}_{\overline{x}}
\to
\bigoplus\nolimits_{\overline{u}} \mathcal{F}_{\overline{x}}
\oplus
\bigoplus\nolimits_{\overline{v}} \mathcal{F}_{\overline{x}}
\to
\mathcal{F}_{\overline{x}} \to 0
$$
This sequence is exact because for every $\overline{x}$
there either is exactly one $\overline{u}$ mapping to $\overline{x}$,
or there is no $\overline{u}$ and exactly one $\overline{v}$
mapping to $\overline{x}$.

\medskip\noindent
Proof of (2). We have seen in Cohomology on Sites, Section
\ref{sites-cohomology-section-properties-K-injective}
that the restriction functors and the extension by zero functors
on derived categories are computed by just applying the functor
to any complex. Let $\mathcal{E}^\bullet$ be a complex
of $\mathcal{O}_X$-modules representing $E$.
The distinguished triangle of the lemma is the
distinguished triangle associated (by
Derived Categories, Section
\ref{derived-section-canonical-delta-functor} and especially
Lemma \ref{derived-lemma-derived-canonical-delta-functor})
to the short exact sequence of complexes of $\mathcal{O}_X$-modules
$$
0 \to j_{U \times_X V!}\mathcal{E}^\bullet|_{U \times_X V} \to
j_{U!}\mathcal{E}^\bullet|_U \oplus j_{V!}\mathcal{E}^\bullet|_V
\to \mathcal{E}^\bullet \to 0
$$
which is short exact by (1).
\end{proof}

\begin{lemma}
\label{lemma-exact-sequence-j-star}
Let $S$ be a scheme. Let $(U \subset X, V \to X)$ be an elementary
distinguished square of algebraic spaces over $S$.
\begin{enumerate}
\item For every sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$
we have a short exact sequence
$$
0 \to \mathcal{F} \to
j_{U, *}\mathcal{F}|_U \oplus j_{V, *}\mathcal{F}|_V \to
j_{U \times_X V, *}\mathcal{F}|_{U \times_X V} \to 0
$$
\item For any object $E$ of $D(\mathcal{O}_X)$ we have a distinguished
triangle
$$
E \to 
Rj_{U, *}E|_U \oplus Rj_{V, *}E|_V \to
Rj_{U \times_X V, *}E|_{U \times_X V} \to
E[1]
$$
in $D(\mathcal{O}_X)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $W$ be an object of $X_{\acute{e}tale}$. We claim the sequence
$$
0 \to
\mathcal{F}(W) \to
\mathcal{F}(W \times_X U) \oplus \mathcal{F}(W \times_X V) \to
\mathcal{F}(W \times_X U \times_X V)
$$
is exact and that an element of the last group can locally on $W$
be lifted to the middle one.
By Lemma \ref{lemma-make-more-elementary-distinguished-squares}
the pair $(W \times_X U \subset W, V \times_X W \to W)$ is an elementary
distinguished square. Thus we may assume $W = X$ and it suffices
to prove the same thing for
$$
0 \to
\mathcal{F}(X) \to
\mathcal{F}(U) \oplus \mathcal{F}(V) \to
\mathcal{F}(U \times_X V)
$$
We have seen that
$$
0 \to j_{U \times_X V!}\mathcal{O}_{U \times_X V}
\to j_{U!}\mathcal{O}_U \oplus
j_{V!}\mathcal{O}_V \to
\mathcal{O}_X \to 0
$$
is a exact sequence of $\mathcal{O}_X$-modules in
Lemma \ref{lemma-exact-sequence-lower-shriek} and applying
the right exact functor $\Hom_{\mathcal{O}_X}(- , \mathcal{F})$
gives the sequence above. This also means that the obstruction
to lifting $s \in \mathcal{F}(U \times_X V)$ to
an element of $\mathcal{F}(U) \oplus \mathcal{F}(V)$ lies in
$\text{Ext}^1_{\mathcal{O}_X}(\mathcal{O}_X, \mathcal{F}) =
H^1(X, \mathcal{F})$. By locality of cohomology
(Cohomology on Sites, Lemma
\ref{sites-cohomology-lemma-kill-cohomology-class-on-covering})
this obstruction vanishes \'etale locally on $X$ and the proof
of (1) is complete.

\medskip\noindent
Proof of (2).
Choose a K-injective complex $\mathcal{I}^\bullet$ representing $E$
whose terms $\mathcal{I}^n$ are injective objects of
$\textit{Mod}(\mathcal{O}_X)$, see Injectives, Theorem
\ref{injectives-theorem-K-injective-embedding-grothendieck}.
Then $\mathcal{I}^\bullet|U$ is a K-injective complex
(Cohomology on Sites, Lemma
\ref{sites-cohomology-lemma-restrict-K-injective-to-open}).
Hence $Rj_{U, *}E|_U$ is represented by $j_{U, *}\mathcal{I}^\bullet|_U$.
Similarly for $V$ and $U \times_X V$. Hence the distinguished triangle
of the lemma is the distinguished triangle associated (by
Derived Categories, Section
\ref{derived-section-canonical-delta-functor} and especially
Lemma \ref{derived-lemma-derived-canonical-delta-functor})
to the short exact sequence of complexes
$$
0 \to
\mathcal{I}^\bullet \to
j_{U, *}\mathcal{I}^\bullet|_U \oplus j_{V, *}\mathcal{I}^\bullet|_V \to
j_{U \times_X V, *}\mathcal{I}^\bullet|_{U \times_X V} \to
0.
$$
This sequence is exact by (1).
\end{proof}






\section{The coherator}
\label{section-coherator}

\noindent
Let $S$ be a scheme. Let $X$ be an algebraic space over $S$.
The {\it coherator} is a functor
$$
Q_X :
\textit{Mod}(\mathcal{O}_X)
\longrightarrow
\textit{QCoh}(\mathcal{O}_X)
$$
which is right adjoint to the inclusion functor
$\textit{QCoh}(\mathcal{O}_X) \to \textit{Mod}(\mathcal{O}_X)$.
It exists for any algebraic space $X$ and moreover the adjunction mapping
$Q_X(\mathcal{F}) \to \mathcal{F}$ is an isomorphism for every
quasi-coherent module $\mathcal{F}$, see
Properties of Spaces, Proposition
\ref{spaces-properties-proposition-coherator}.
Since $Q_X$ is left exact (as a right adjoint) we can consider its
right derived extension
$$
RQ_X :
D(\mathcal{O}_X)
\longrightarrow
D(\textit{QCoh}(\mathcal{O}_X)).
$$
As this functor is constructed by applying $Q_X$ to a K-injective replacement
we see that $RQ_X$ is a right adjoint to the canonical functor
$D(\textit{QCoh}(\mathcal{O}_X)) \to D(\mathcal{O}_X)$.

\begin{lemma}
\label{lemma-affine-pushforward}
Let $S$ be a scheme. Let $f : X \to Y$ be an affine morphism of
algebraic spaces over $S$. Then $f_*$ defines a derived functor
$f_* : D(\textit{QCoh}(\mathcal{O}_X)) \to D(\textit{QCoh}(\mathcal{O}_Y))$.
This functor has the property that
$$
\xymatrix{
D(\textit{QCoh}(\mathcal{O}_X)) \ar[d]_{f_*} \ar[r] &
D_{\textit{QCoh}}(\mathcal{O}_X) \ar[d]^{Rf_*} \\
D(\textit{QCoh}(\mathcal{O}_Y)) \ar[r] &
D_{\textit{QCoh}}(\mathcal{O}_Y)
}
$$
commutes.
\end{lemma}

\begin{proof}
The functor
$f_* : \textit{QCoh}(\mathcal{O}_X) \to \textit{QCoh}(\mathcal{O}_Y)$
is exact, see
Cohomology of Spaces, Lemma
\ref{spaces-cohomology-lemma-affine-vanishing-higher-direct-images}.
Hence $f_*$ defines a derived functor
$f_* : D(\textit{QCoh}(\mathcal{O}_X)) \to D(\textit{QCoh}(\mathcal{O}_Y))$
by simply applying $f_*$ to any representative complex, see
Derived Categories, Lemma \ref{derived-lemma-right-derived-exact-functor}.
For any complex of $\mathcal{O}_X$-modules
$\mathcal{F}^\bullet$ there is a canonical map
$f_*\mathcal{F}^\bullet \to Rf_*\mathcal{F}^\bullet$.
To finish the proof we show this is a quasi-isomorphism when
$\mathcal{F}^\bullet$ is a complex with each $\mathcal{F}^n$
quasi-coherent. The statement is \'etale local on $Y$ hence we
may assume $Y$ affine. As an affine morphism is representable
we reduce to the case of schemes by the compatibility of
Remark \ref{remark-match-total-direct-images}. The case of schemes is
Derived Categories of Schemes, Lemma \ref{perfect-lemma-affine-pushforward}.
\end{proof}

\begin{lemma}
\label{lemma-affine-flat-coherator}
Let $S$ be a scheme. Let $f : X \to Y$ be an affine flat morphism of
algebraic spaces over $S$.
Then $RQ_Y \circ Rf_* = f_* \circ RQ_X$ where $f_*$ is as
in Lemma \ref{lemma-affine-pushforward}.
\end{lemma}

\begin{proof}
Since $f$ is flat, then functor $f^*$ is exact hence defines
$f^* : D(\mathcal{O}_Y) \to D(\mathcal{O}_X)$ and also
$f^* : D(\textit{QCoh}(\mathcal{O}_Y)) \to D(\textit{QCoh}(\mathcal{O}_X))$.
The functor $f^* = Lf^* : D(\mathcal{O}_Y) \to D(\mathcal{O}_X)$
is left adjoint to
$Rf_* : D(\mathcal{O}_X) \to D(\mathcal{O}_Y)$,
see Cohomology, Lemma \ref{cohomology-lemma-adjoint}.
On the other hand, the functor
$f^* : D(\textit{QCoh}(\mathcal{O}_Y)) \to D(\textit{QCoh}(\mathcal{O}_X))$
is left adjoint to
$f_* : D(\textit{QCoh}(\mathcal{O}_X)) \to D(\textit{QCoh}(\mathcal{O}_Y))$
just because these are constructed from an adjoint pair of exact functors.
Now let $A$ be an object of $D(\textit{QCoh}(\mathcal{O}_Y))$ and
$E$ an object of $D(\mathcal{O}_X)$. Then
\begin{align*}
\Hom_{D(\textit{QCoh}(\mathcal{O}_Y))}(A, RQ_Y(Rf_*E))
& =
\Hom_{D(\mathcal{O}_Y)}(A, Rf_*E) \\
& =
\Hom_{D(\mathcal{O}_X)}(f^*A, E) \\
& =
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(f^*A, RQ_X(E)) \\
& =
\Hom_{D(\textit{QCoh}(\mathcal{O}_Y))}(A, f_*RQ_X(E))
\end{align*}
This implies what we want.
\end{proof}

\begin{lemma}
\label{lemma-affine-coherator}
Let $S$ be a scheme. Let $X$ be an affine algebraic space over $S$.
Set $A = \Gamma(X, \mathcal{O}_X)$. Then
\begin{enumerate}
\item $Q_X : \textit{Mod}(\mathcal{O}_X) \to \textit{QCoh}(\mathcal{O}_X)$
is the functor
which sends $\mathcal{F}$ to the quasi-coherent $\mathcal{O}_X$-module
associated to the $A$-module $\Gamma(X, \mathcal{F})$,
\item $RQ_X : D(\mathcal{O}_X) \to D(\textit{QCoh}(\mathcal{O}_X))$
is the functor which sends $E$ to the complex of quasi-coherent
$\mathcal{O}_X$-modules associated to the object $R\Gamma(X, E)$ of $D(A)$,
\item restricted to $D_{\textit{QCoh}}(\mathcal{O}_X)$ the functor
$RQ_X$ defines a quasi-inverse to (\ref{equation-compare}).
\end{enumerate}
\end{lemma}

\begin{proof}
Let $X_0 = \Spec(A)$ be the affine scheme representing $X$.
Recall that there is a morphism of ringed sites
$\epsilon : X_{\acute{e}tale} \to X_{0, Zar}$
which induces equivalences
$$
\xymatrix{
\textit{QCoh}(\mathcal{O}_X) \ar@<1ex>[r]^{\epsilon_*} &
\textit{QCoh}(\mathcal{O}_{X_0}) \ar@<1ex>[l]^{\epsilon^*},
}
$$
see Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}.
Hence we see that $Q_X = \epsilon^* \circ Q_{X_0} \circ \epsilon_*$
by uniqueness of adjoint functors. Hence (1) follows from
the description of $Q_{X_0}$ in
Derived Categories of Schemes, Lemma \ref{perfect-lemma-affine-coherator}
and the fact that
$\Gamma(X_0, \epsilon_*\mathcal{F}) = \Gamma(X, \mathcal{F})$.
Part (2) follows from (1) and the fact that the functor
from $A$-modules to quasi-coherent $\mathcal{O}_X$-modules is exact.
The third assertion now follows from the result for schemes
(Derived Categories of Schemes, Lemma \ref{perfect-lemma-affine-coherator})
and Lemma
\ref{lemma-derived-quasi-coherent-small-etale-site}.
\end{proof}

\begin{proposition}
\label{proposition-quasi-compact-affine-diagonal}
Let $S$ be a scheme. Let $X$ be a quasi-compact algebraic space with affine
diagonal. Then the functor (\ref{equation-compare})
$$
D(\textit{QCoh}(\mathcal{O}_X))
\longrightarrow
D_{\textit{QCoh}}(\mathcal{O}_X)
$$
is an equivalence with quasi-inverse given by $RQ_X$.
\end{proposition}

\begin{proof}
Note that it is enough to prove that (\ref{equation-compare}) is
an equivalence, since then it will be the case that $RQ_X$ defines
the quasi-inverse for formal reasons (by uniqueness of adjoints and
the fact that the quasi-inverse is an adjoint).
We will use the induction principle to prove this. Let
$\mathcal{B} \subset \Ob(X_{spaces, \acute{e}tale})$ be the set of
objects which are quasi-compact and have affine diagonal.
For $U \in \mathcal{B}$ let $P(U) =$ ``the functor
$D(\textit{QCoh}(\mathcal{O}_U)) \to D_{\textit{QCoh}}(\mathcal{O}_U)$
is an equivalence''.
By Remark \ref{remark-how-to} conditions (1), (2), and (3)(a) of
Lemma \ref{lemma-induction-principle-separated} hold and we are
left with proving (3)(b) and (4). Condition (3)(b) holds by
Lemma \ref{lemma-affine-coherator}.

\medskip\noindent
Let $(U \subset W, V \to W)$ be an elementary distinguished square
with $V$ affine. Assume that $P$ holds for $U$, $V$, and $U \times_W V$.
We have to show that $P$ holds for $W$. We may replace $X$ by $W$, i.e.,
we may assume $W = X$ (we do this just to simplify the notation).

\medskip\noindent
We first prove that the functor
$D(\textit{QCoh}(\mathcal{O}_X)) \to D(\mathcal{O}_X)$
is fully faithful. Suppose that $A, B$ are objects of
$D(\textit{QCoh}(\mathcal{O}_X))$, i.e., $A$ and $B$ are given to us
as complexes of quasi-coherent $\mathcal{O}_X$-modules.
We want to show that
$$
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B)
\longrightarrow
\Hom_{D(\mathcal{O}_X)}(A, B)
$$
is bijective. Let $T = |X| \setminus |U|$. If $B$ is supported on $T$, then
the maps $B \to Rj_{V, *}(B|_V)$ is a quasi-isomorphism
(Lemma \ref{lemma-pushforward-with-support-in-open}).
The morphism $V \to X$ is affine as $V$ is affine and $X$ has affine diagonal
(Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-affine-permanence}).
Thus we have an object $j_{V, *}(B|_V)$ in $\textit{QCoh}(\mathcal{O}_X)$
and a quasi-isomorphism $j_{V, *}(B|_V) \to Rj_{V, *}B$ in $D(\mathcal{O}_X)$
(Lemma \ref{lemma-affine-pushforward}). Moreover, $j_{V, *}$ and $j_V^*$ are
adjoint functors on the derived categories of quasi-coherent modules
(see proof of Lemma \ref{lemma-affine-flat-coherator}). Hence
\begin{align*}
\text{Mor}_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B)
& =
\text{Mor}_{D(\textit{QCoh}(\mathcal{O}_V))}(A|_V, B|_V) \\
& =
\text{Mor}_{D(\mathcal{O}_V)}(A|_V, B|_V) \\
& =
\text{Mor}_{D(\mathcal{O}_X)}(A, Rj_{V, *}B|_V) \\
& =
\text{Mor}_{D(\mathcal{O}_X)}(A, B)
\end{align*}
as desired. In general, choose any quasi-isomorphism $s : B|_U \to C$ of
complexes of quasi-coherent $\mathcal{O}_U$-modules. We obtain a map
$B \to j_{U, *}B|_U \to j_{U, *}C$ and fit it into a
distinguished triangle
$$
B \to j_{U, *}C \to B' \to B[1]
$$
in $D(\textit{QCoh}(\mathcal{O}_X))$. This makes sense because $j_U : U \to X$
is quasi-compact and quasi-separated, hence $j_{U, *}$ transforms
quasi-coherent modules into quasi-coherent modules
(Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-pushforward}).
Since $s$ is a quasi-isomorphism
we see that $B'$ is supported on $T$. Hence in the diagram
$$
\xymatrix{
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B'[-1]) \ar[r] \ar[d] &
\Hom_{D(\mathcal{O}_X)}(A, B'[-1]) \ar[d] \\
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B) \ar[r] \ar[d] &
\Hom_{D(\mathcal{O}_X)}(A, B) \ar[d] \\
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, j_{U, *}C) \ar[r] \ar[d] &
\Hom_{D(\mathcal{O}_X)}(A, j_{U, *}C) \ar[d] \\
\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B') \ar[r] &
\Hom_{D(\mathcal{O}_X)}(A, B')
}
$$
we have exact columns and the top and botton horizontal arrows are
bijective. Let $\alpha : A \to B$ be a morphism between $A$ and $B$
in $D(\mathcal{O}_X)$. The restriction
$\alpha|_U$ comes from a morphism in $D(\textit{QCoh}(\mathcal{O}_U))$
by assumption. Hence there exists a choice of $s : B|_U \to C$ as above
such that $\alpha|_U$ is represented by an actual map of complexes
$A|_U \to C$. This corresponds to a map of complexes $A \to j_{U, *}C$.
In other words, the image of $\alpha$ in
$\Hom_{D(\mathcal{O}_X)}(A, j_{U, *}C)$ comes from
an element of $\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, j_{U, *}C)$.
A diagram chase then shows that $\alpha$ comes from a morphism
$A \to B$ in $D(\textit{QCoh}(\mathcal{O}_X))$. Finally, suppose
that $a : A \to B$ is a morphism of $D(\textit{QCoh}(\mathcal{O}_X))$
which becomes zero in $D(\mathcal{O}_X)$. Then by the same reasoning
as above we can pick an $s$ as above such that $\alpha$ maps to
zero in $\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, j_{U, *}C)$.
Thus we may assume that $a$ is the image of an element
of $b \in \Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, B'[-1])$.
The image of $b$ in $\Hom_{D(\mathcal{O}_X)}(A, B'[-1])$
comes from a $c' \in \Hom_{D(\mathcal{O}_X)}(A, j_{U, *}C[-1])$
(as $a$ maps to zero in the group on the right). Since we've
seen above the horizontal arrows are surjective, we see
that $c'$ comes from a $c$ in
$\Hom_{D(\textit{QCoh}(\mathcal{O}_X))}(A, j_{U, *}C)$
which implies $a = 0$ as desired.

\medskip\noindent
To finish the proof we show that the functor
$D(\textit{QCoh}(\mathcal{O}_X)) \to D_{\textit{QCoh}}(\mathcal{O}_X)$
is essentially surjective. Let $E$ be an object of
$D_{\textit{QCoh}}(\mathcal{O}_X)$. Choose a quasi-isomorphism
$E|_U \to C$ with $C$ a complex of quasi-coherent $\mathcal{O}_U$-modules.
Choose a distinguised triangle
$$
E \to j_{U, *}C \to E' \to E[1]
$$
Observe that $E'$ is supported on $T$. By
Lemma \ref{lemma-pushforward-with-support-in-open}
we see that $E' = Rj_{V, *}(E'|_V)$. Choose a quasi-isomorphism
$E'|_V \to C'$ with $C'$ in $D(\textit{QCoh}(\mathcal{O}_V))$.
Then $C'' = j_{V, *}C'$ is an object of $\textit{QCoh}(\mathcal{O}_X)$
representing $E'$ (as $V \to X$ is affine and by
Lemma \ref{lemma-affine-pushforward}).
Hence we found an isomorphism $E' \to C''$
in $D(\mathcal{O}_X)$ with $C''$ a complex of quasi-coherent
$\mathcal{O}_X$-modules. Because we've seen above the functor is
fully faithful we can pick a morphism $j_{U, *}C \to C''$ in
$D(\textit{QCoh}(\mathcal{O}_X))$ representing the composition
$j_{U, *}C \to E' \to C''$.
Choose a distinguished triangle
$$
A \to j_{U, *}C \to C'' \to A[1]
$$
in $D(\textit{QCoh}(\mathcal{O}_X))$.
Using the axioms of triangulated categories we obtain a quasi-isomorphism
$E \to A$ in $D(\mathcal{O}_X)$ which is what we had to show.
\end{proof}






\section{Pseudo-coherent and perfect complexes}
\label{section-spell-out}

\noindent
In this section we study the general notions defined in
Cohomology on Sites, Sections
\ref{sites-cohomology-section-strictly-perfect},
\ref{sites-cohomology-section-pseudo-coherent},
\ref{sites-cohomology-section-tor}, and
\ref{sites-cohomology-section-perfect}
for the \'etale site of an algebraic space. In particular we
match this with what happens for schemes.

\medskip\noindent
First we compare the notion of a pseudo-coherent complex on a
scheme and on its associated small \'etale site.

\begin{lemma}
\label{lemma-descend-finite-type}
Let $X$ be a scheme. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module.
The following are equivalent
\begin{enumerate}
\item $\mathcal{F}$ is of finite type as an $\mathcal{O}_X$-module, and
\item $\epsilon^*\mathcal{F}$ is of finite type as an
$\mathcal{O}_{\acute{e}tale}$-module on the small \'etale site of $X$.
\end{enumerate}
Here $\epsilon$ is as in (\ref{equation-epsilon}).
\end{lemma}

\begin{proof}
The implication (1) $\Rightarrow$ (2) is a general fact, see
Modules on Sites, Lemma \ref{sites-modules-lemma-local-pullback}.
Assume (2). By assumption there exists an \'etale covering
$\{f_i : X_i \to X\}$ such that
$\epsilon^*\mathcal{F}|_{(X_i)_{\acute{e}tale}}$ is generated by
finitely many sections. Let $x \in X$. We will show that $\mathcal{F}$
is generated by finitely many sections in a neighbourhood of $x$.
Say $x$ is in the image of $X_i \to X$ and denote $X' = X_i$. Let
$s_1, \ldots, s_n \in
\Gamma(X', \epsilon^*\mathcal{F}|_{X'_{\acute{e}tale}})$
be generating sections. As
$\epsilon^*\mathcal{F} =
\epsilon^{-1}\mathcal{F} \otimes_{\epsilon^{-1}\mathcal{O}_X}
\mathcal{O}_{\acute{e}tale}$
we can find an \'etale morphism $X'' \to X'$ such that $x$ is
in the image of $X' \to X$ and such that
$s_i|_{X''} = \sum s_{ij} \otimes a_{ij}$ for some sections
$s_{ij} \in \epsilon^{-1}\mathcal{F}(X'')$ and
$a_{ij} \in \mathcal{O}_{\acute{e}tale}(X'')$. Denote $U \subset X$ the image
of $X'' \to X$. This is an open subscheme as $f'' : X'' \to X$ is \'etale
(Morphisms, Lemma \ref{morphisms-lemma-etale-open}). After possibly
shrinking $X''$ more we may assume $s_{ij}$ come from elements
$t_{ij} \in \mathcal{F}(U)$ as follows from the construction of
the inverse image functor $\epsilon^{-1}$. Now we claim that
$t_{ij}$ generate $\mathcal{F}|_U$ which finishes the proof
of the lemma. Namely, the corresponding map
$\mathcal{O}_U^{\oplus N} \to \mathcal{F}|_U$ has the property
that its pullback by $f''$ to $X''$ is surjective. Since $f'' : X'' \to U$
is a surjective flat morphism of schemes, this implies that
$\mathcal{O}_U^{\oplus N} \to \mathcal{F}|_U$ is surjective by
looking at stalks and using that
$\mathcal{O}_{U, f''(z)} \to \mathcal{O}_{X'', z}$
is faithfully flat for all $z \in X''$.
\end{proof}

\noindent
In the situation above the morphism of sites $\epsilon$ is flat
hence defines a pullback on complexes of modules.

\begin{lemma}
\label{lemma-descend-pseudo-coherent}
Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$.
The following are equivalent
\begin{enumerate}
\item $E$ is $m$-pseudo-coherent, and
\item $\epsilon^*E$ is $m$-pseudo-coherent on the small \'etale site of $X$.
\end{enumerate}
Here $\epsilon$ is as in (\ref{equation-epsilon}).
\end{lemma}

\begin{proof}
The implication (1) $\Rightarrow$ (2) is a general fact, see
Cohomology on Sites, Lemma
\ref{sites-cohomology-lemma-pseudo-coherent-pullback}.
Assume $\epsilon^*E$ is $m$-pseudo-coherent.
We will use without further mention that $\epsilon^*$ is
an exact functor and that therefore
$$
\epsilon^*H^i(E) = H^i(\epsilon^*E).
$$
To show that $E$ is $m$-pseudo-coherent we may work locally on $X$,
hence we may assume that $X$ is quasi-compact (for example affine).
Since $X$ is quasi-compact every \'etale covering $\{U_i \to X\}$
has a finite refinement. Thus we see that $\epsilon^*E$ is
an object of $D^{-}(\mathcal{O}_{\acute{e}tale})$, see
comments following
Cohomology on Sites, Definition
\ref{sites-cohomology-definition-pseudo-coherent}.
By Lemma \ref{lemma-epsilon-flat} it follows that $E$ is an object of
$D^-(\mathcal{O}_X)$.

\medskip\noindent
Let $n \in \mathbf{Z}$ be the largest integer such that
$H^n(E)$ is nonzero; then $n$ is also the largest integer
such that $H^n(\epsilon^*E)$ is nonzero.
We will prove the lemma by induction on $n - m$.
If $n < m$, then the lemma is clearly true.
If $n \geq m$, then $H^n(\epsilon^*E)$ is a finite
$\mathcal{O}_{\acute{e}tale}$-module, see
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-finite-cohomology}.
Hence $H^n(E)$ is a finite $\mathcal{O}_X$-module, see
Lemma \ref{lemma-descend-finite-type}.
After replacing $X$ by the members of an open covering, we may
assume there exists a surjection $\mathcal{O}_X^{\oplus t} \to H^n(E)$.
We may locally on $X$ lift this to a map of complexes
$\alpha : \mathcal{O}_X^{\oplus t}[-n] \to E$ (details omitted).
Choose a distinguished triangle
$$
\mathcal{O}_X^{\oplus t}[-n] \to E \to C \to \mathcal{O}_X^{\oplus t}[-n + 1]
$$
Then $C$ has vanishing cohomology in degrees $\geq n$. On the other hand, the
complex $\epsilon^*C$ is $m$-pseudo-coherent, see
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-cone-pseudo-coherent}.
Hence by induction we see that $C$ is $m$-pseudo-coherent. Applying
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-cone-pseudo-coherent}
once more we conclude.
\end{proof}

\begin{lemma}
\label{lemma-descend-tor-amplitude}
Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$.
Then
\begin{enumerate}
\item $E$ has tor amplitude in $[a, b]$ if and only if
$\epsilon^*E$ has tor amplitude in $[a, b]$.
\item $E$ has finite tor dimension if and only if $\epsilon^*E$ has finite
tor dimension.
\end{enumerate}
Here $\epsilon$ is as in (\ref{equation-epsilon}).
\end{lemma}

\begin{proof}
The easy implication follows from the general result contained in
Cohomology of Sites, Lemma \ref{sites-cohomology-lemma-tor-amplitude-pullback}
(and the fact that the small \'etale site of $X$ has enough points, see
\'Etale Cohomology, Remarks \ref{etale-cohomology-remarks-enough-points}).
For the converse, assume that $\epsilon^*E$ has tor amplitude in $[a, b]$
Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. As $\epsilon$ is a flat
morphism of ringed sites (Lemma \ref{lemma-epsilon-flat})
we have
$$
\epsilon^*(E \otimes^\mathbf{L}_{\mathcal{O}_X} \mathcal{F})
=
\epsilon^*E
\otimes^\mathbf{L}_{\mathcal{O}_{\acute{e}tale}}
\epsilon^*\mathcal{F}
$$
Thus the (assumed) vanishing of cohomology sheaves on the right hand side
implies the desired vanishing of the cohomology sheaves of
$E \otimes^\mathbf{L}_{\mathcal{O}_X} \mathcal{F}$ via
Lemma \ref{lemma-epsilon-flat}.
\end{proof}

\begin{lemma}
\label{lemma-descend-perfect}
Let $X$ be a scheme. Let $E$ be an object of $D(\mathcal{O}_X)$.
Then $E$ is a perfect object of $D(\mathcal{O}_X)$ if and only if
$\epsilon^*E$ is a perfect object of $D(\mathcal{O}_{\acute{e}tale})$.
Here $\epsilon$ is as in (\ref{equation-epsilon}).
\end{lemma}

\begin{proof}
The easy implication follows from the general result contained in
Cohomology of Sites, Lemma \ref{sites-cohomology-lemma-perfect-pullback}
(and the fact that the small \'etale site of $X$ has enough points, see
\'Etale Cohomology, Remarks \ref{etale-cohomology-remarks-enough-points}).
For the converse, we can use the equivalence of
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-perfect}
and the corresponding results for pseudo-coherent and complexes of
finite tor dimension, namely
Lemmas \ref{lemma-descend-pseudo-coherent} and
\ref{lemma-descend-tor-amplitude}.
Some details omitted.
\end{proof}






\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}

