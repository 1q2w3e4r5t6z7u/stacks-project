\input{preamble}

% OK, start here.
%
\begin{document}

\title{Differential Graded Sheaves}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
This chapter is a continuation of the discussion started in
Differential Graded Algebra, Section \ref{dga-section-introduction}.
A survey paper is \cite{Keller-survey}.




\section{Conventions}
\label{section-conventions}

\noindent
In this chapter we hold on to the convention that {\it ring} means
commutative ring with $1$. If $R$ is a ring, then an {\it $R$-algebra $A$}
will be an $R$-module $A$ endowed with an $R$-bilinear map $A \times A \to A$
(multiplication) such that multiplication is associative and has an
identity.
In other words, these are unital associative $R$-algebras
such that the structure map $R \to A$ maps into the center of $A$.








\section{Sheaves of graded algebras}
\label{section-ga}

\noindent
Please skip this section.

\begin{definition}
\label{definition-ga}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. A
{\it sheaf of graded $\mathcal{O}$-algebras}
or a {\it sheaf of graded algebras} on $(\mathcal{C}, \mathcal{O})$
is given by a family $\mathcal{A}^n$ indexed by $n \in \mathbf{Z}$
of $\mathcal{O}$-modules endowed with $\mathcal{O}$-bilinear maps
$$
\mathcal{A}^n \times \mathcal{A}^m \to \mathcal{A}^{n + m},\quad
(a, b) \longmapsto ab
$$
called the multiplication maps with the following properties
\begin{enumerate}
\item multiplication is associative, and
\item there is a global section $1$ of $\mathcal{A}^0$
which is a two-sided identity for multiplication.
\end{enumerate}
We often denote such a structure $\mathcal{A}$.
A {\it homomorphism of graded $\mathcal{O}$-algebras}
$f : \mathcal{A} \to \mathcal{B}$ is a family of maps
$f^n : \mathcal{A}^n \to \mathcal{B}^n$
of $\mathcal{O}$-modules compatible with the multiplication maps.
\end{definition}

\noindent
Given a graded $\mathcal{O}$-algebra $\mathcal{A}$
and an object $U \in \Ob(\mathcal{C})$ we use the notation
$$
\mathcal{A}(U) =
\Gamma(U, \mathcal{A}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \mathcal{A}^n(U)
$$
This is a graded $\mathcal{O}(U)$-algebra.

\begin{remark}
\label{remark-functoriality-ga}
Let $(f, f^\sharp) : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C})
\to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$
be a morphism of ringed topoi. We have
\begin{enumerate}
\item Let $\mathcal{A}$ be a graded $\mathcal{O}_\mathcal{C}$-algebra.
The multiplication maps of $\mathcal{A}$ induce multiplication maps
$f_*\mathcal{A}^n \times f_*\mathcal{A}^m \to f_*\mathcal{A}^{n + m}$
and via $f^\sharp$ we may view these as $\mathcal{O}_\mathcal{D}$-bilinear
maps. We will denote $f_*\mathcal{A}$ the graded
$\mathcal{O}_\mathcal{D}$-algebra we so obtain.
\item Let $\mathcal{B}$ be a graded
$\mathcal{O}_\mathcal{D}$-algebra. 
The multiplication maps of $\mathcal{B}$ induce multiplication maps
$f^*\mathcal{B}^n \times f^*\mathcal{B}^m \to f^*\mathcal{B}^{n + m}$
and using $f^\sharp$ we may view these as $\mathcal{O}_\mathcal{C}$-bilinear
maps. We will denote $f^*\mathcal{B}$
the graded $\mathcal{O}_\mathcal{C}$-algebra we so obtain.
\item The set of homomorphisms $f^*\mathcal{B} \to \mathcal{A}$
of graded $\mathcal{O}_\mathcal{C}$-algebras is in
$1$-to-$1$ correspondence with the set of homomorphisms
$\mathcal{B} \to f_*\mathcal{A}$ of graded $\mathcal{O}_\mathcal{C}$-algebras.
\end{enumerate}
Part (3) follows immediately from the usual adjunction between $f^*$ and $f_*$
on sheaves of modules.
\end{remark}




\section{Sheaves of graded modules}
\label{section-graded-modules}

\noindent
Please skip this section.

\begin{definition}
\label{definition-gm}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{A}$ be a sheaf of graded algebras
on $(\mathcal{C}, \mathcal{O})$.
A (right) {\it graded $\mathcal{A}$-module} or (right)
{\it graded module} over $\mathcal{A}$
is given by a family $\mathcal{M}^n$ indexed by $n \in \mathbf{Z}$
of $\mathcal{O}$-modules endowed with
$\mathcal{O}$-bilinear maps
$$
\mathcal{M}^n \times \mathcal{A}^m \to \mathcal{M}^{n + m},\quad
(x, a) \longmapsto xa
$$
called the multiplication maps with the following properties
\begin{enumerate}
\item multiplication satisfies $(xa)a' = x(aa')$,
\item the identity section $1$ of $\mathcal{A}^0$
acts as the identity on $\mathcal{M}^n$ for all $n$.
\end{enumerate}
We often say ``let $\mathcal{M}$ be a graded $\mathcal{A}$-module''
to indicate this situation.
A {\it homomorphism of graded $\mathcal{A}$-modules}
$f : \mathcal{M} \to \mathcal{N}$ is a family of maps
$f^n : \mathcal{M}^n \to \mathcal{N}^n$
of $\mathcal{O}$-modules compatible with the multiplication maps.
The category of (right) graded $\mathcal{A}$-modules
is denoted $\text{Mod}_\mathcal{A}$.
\end{definition}

\noindent
We can define {\it left graded modules} in exactly the same manner
but our default in the chapter will be right modules.

\medskip\noindent
Given a graded $\mathcal{A}$-module $\mathcal{M}$
and an object $U \in \Ob(\mathcal{C})$ we use the notation
$$
\mathcal{M}(U) =
\Gamma(U, \mathcal{M}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \mathcal{M}^n(U)
$$
This is a (right) graded $\mathcal{A}(U)$-module.

\begin{lemma}
\label{lemma-gm-abelian}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $(\mathcal{A}, d)$ be a graded $\mathcal{O}$-algebra.
The category $\text{Mod}_\mathcal{A}$ is an abelian category
with arbitrary colimits in which filtered colimits are exact.
\end{lemma}

\begin{proof}
Consider a homomorphism $f : \mathcal{M} \to \mathcal{N}$
of graded $\mathcal{A}$-modules. The kernel
and cokernel of $f$ as maps of graded $\mathcal{O}$-modules
are additionally endowed with multiplication maps as in
Definition \ref{definition-gm}. Hence these are also
the kernel and cokernel in $\text{Mod}_\mathcal{A}$.
Similarly for direct sums and colimits. In other words, these operations
in $\text{Mod}_\mathcal{A}$ commute with the
forgetful functor to the category $\text{Mod}_\mathcal{O}$
of graded $\mathcal{O}$-modules. Since filtered colimits
are exact in $\text{Mod}_\mathcal{O}$, the same is true in
$\text{Mod}_\mathcal{A}$.
\end{proof}






\section{The graded category of sheaves of graded modules}
\label{section-gm-gr-cat}

\noindent
Please skip this section. This section is the analogue of
Differential Graded Algebra, Example \ref{dga-example-gm-gr-cat}.
For our conventions on graded categories, please see
Differential Graded Algebra, Section \ref{dga-section-graded}.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{A}$ be a sheaf of graded algebras
on $(\mathcal{C}, \mathcal{O})$. We will construct
a graded category $\text{Mod}^{gr}_\mathcal{A}$ over
$R = \Gamma(\mathcal{C}, \mathcal{O})$
whose associated category $(\text{Mod}^{gr}_\mathcal{A})^0$
is the category of graded $\mathcal{A}$-modules. As objects
of $\text{Mod}^{gr}_\mathcal{A}$ we take right graded
$\mathcal{A}$-modules (see
Section \ref{section-graded-modules}). Given graded
$\mathcal{A}$-modules $\mathcal{L}$ and $\mathcal{M}$ we set
$$
\Hom_{\text{Mod}^{gr}_\mathcal{A}}(\mathcal{L}, \mathcal{M}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \Hom^n(\mathcal{L}, \mathcal{M})
$$
where
$\Hom^n(\mathcal{L}, \mathcal{M})$
is the set of right $\mathcal{A}$-module maps
$f : \mathcal{L} \to \mathcal{M}$ which
are homogeneous of degree $n$. More precisely, $f$ is given
by a family of maps $f : \mathcal{L}^i \to \mathcal{M}^{i + n}$
for $i \in \mathbf{Z}$ compatible with the multiplication
maps. In terms of components, we have that
$$
\Hom^n(\mathcal{L}, \mathcal{M})
\subset
\prod\nolimits_{p + q = n}
\Hom_\mathcal{O}(\mathcal{L}^{-q}, \mathcal{M}^p)
$$
(observe reversal of indices) is the subset consisting of those
$f = (f_{p, q})$ such that
$$
f_{p, q}(m a) = f_{p - i, q + i}(m)a
$$
for local sections $a$ of $\mathcal{A}^i$ and
$m$ of $\mathcal{L}^{-q - i}$. For graded $\mathcal{A}$-modules
$\mathcal{K}$, $\mathcal{L}$, $\mathcal{M}$
we define composition in $\text{Mod}^{gr}_\mathcal{A}$ via
the maps
$$
\Hom^m(\mathcal{L}, \mathcal{M}) \times
\Hom^n(\mathcal{K}, \mathcal{L}) \longrightarrow
\Hom^{n + m}(\mathcal{K}, \mathcal{M})
$$
by simple composition of right
$\mathcal{A}$-module maps: $(g, f) \mapsto g \circ f$.





\section{Tensor product for sheaves of graded modules}
\label{section-tensor-product}

\noindent
Please skip this section. This section is the analogue of part of
Differential Graded Algebra, Section \ref{dga-section-tensor-product}.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
be a sheaf of graded algebras on $(\mathcal{C}, \mathcal{O})$.
Let $\mathcal{M}$ be a right graded $\mathcal{A}$-module
and let $\mathcal{N}$ be a left graded $\mathcal{A}$-module.
Then we define the {\it tensor product}
$\mathcal{M} \otimes_\mathcal{A} \mathcal{N}$
to be the graded $\mathcal{O}$-module whose degree $n$ term is
$$
(\mathcal{M} \otimes_\mathcal{A} \mathcal{N})^n =
\Coker\left(
\bigoplus\nolimits_{r + s + t = n} \mathcal{M}^r \otimes_\mathcal{O}
\mathcal{A}^s \otimes_\mathcal{O} \mathcal{N}^t
\longrightarrow
\bigoplus\nolimits_{p + q = n} \mathcal{M}^p \otimes_\mathcal{O} \mathcal{N}^q
\right)
$$
where the map sends the local section $x \otimes a \otimes y$
of $\mathcal{M}^r \otimes_\mathcal{O} \mathcal{A}^s
\otimes_\mathcal{O} \mathcal{N}^t$ to
$xa \otimes y - x \otimes ay$.
With this definition we have that
$(\mathcal{M} \otimes_\mathcal{A} \mathcal{N})^n$
is the sheafification of the presheaf
$U \mapsto (\mathcal{M}(U) \otimes_{\mathcal{A}(U)} \mathcal{N}(U))^n$
where the tensor product of graded modules is as defined in
Differential Graded Algebra, Section \ref{dga-section-tensor-product}.

\medskip\noindent
If we fix the left graded $\mathcal{A}$-module $\mathcal{N}$
we obtain a functor
$$
- \otimes_\mathcal{A} \mathcal{N} :
\text{Mod}_\mathcal{A}
\longrightarrow
\text{Mod}_\mathcal{O}
$$
where on the right hand side we have the category of graded
$\mathcal{O}$-modules where $\mathcal{O}$ is viewed as a
graded $\mathcal{O}$-algebra (sitting in degree $0$ to be sure).
This can be upgraded to a graded functor
$$
- \otimes_\mathcal{A} \mathcal{N} :
\text{Mod}^{gr}_\mathcal{A}
\longrightarrow
\text{Mod}^{gr}_\mathcal{O}
$$
by sending homomorphisms of degree $n$ from $\mathcal{M} \to \mathcal{M}'$
to the induced map of degree $n$ from
$\mathcal{M} \otimes_\mathcal{A} \mathcal{N}$ to
$\mathcal{M}' \otimes_\mathcal{A} \mathcal{N}$.






\section{Internal hom for sheaves of graded modules}
\label{section-internal-hom-graded}

\noindent
We urge the reader to skip this section.

\medskip\noindent
We are going to need the sheafified version of the construction
in Section \ref{section-gm-gr-cat}.
Let $(\mathcal{C}, \mathcal{O})$, $\mathcal{A}$,
$\mathcal{M}$, $\mathcal{L}$ be as in Section \ref{section-gm-gr-cat}.
Then we define
$$
\SheafHom^{gr}_\mathcal{A}(\mathcal{M}, \mathcal{L})
$$
as the graded $\mathcal{O}$-module whose degree $n$ term
$$
\SheafHom^n_\mathcal{A}(\mathcal{M}, \mathcal{L})
\subset
\prod\nolimits_{p + q = n}
\SheafHom_\mathcal{O}(\mathcal{L}^{-q}, \mathcal{M}^p)
$$
is the subsheaf consisting of those local sections $f = (f_{p, q})$ such that
$$
f_{p, q}(m a) = f_{p - i, q + i}(m)a
$$
for local sections $a$ of $\mathcal{A}^i$ and
$m$ of $\mathcal{L}^{-q - i}$. As above there is a composition map
$$
\SheafHom^{gr}_\mathcal{A}(\mathcal{L}, \mathcal{M}) \otimes_\mathcal{O}
\SheafHom^{gr}_\mathcal{A}(\mathcal{K}, \mathcal{L})
\longrightarrow
\SheafHom^{gr}_\mathcal{A}(\mathcal{K}, \mathcal{M})
$$
(where the left hand side is the tensor product of graded $\mathcal{O}$-modules
defined in Section \ref{section-tensor-product}) given by the composition map
$$
\SheafHom^m(\mathcal{L}, \mathcal{M}) \otimes_\mathcal{O}
\SheafHom^n(\mathcal{K}, \mathcal{L}) \longrightarrow
\SheafHom^{n + m}(\mathcal{K}, \mathcal{M})
$$
defined by simple composition (locally).

\medskip\noindent
With these definitions we have
$$
\Hom_{\text{Mod}^{gr}_\mathcal{A}}(\mathcal{L}, \mathcal{M}) =
\Gamma(\mathcal{C}, \SheafHom^{gr}_\mathcal{A}(\mathcal{L}, \mathcal{M}))
$$
as graded $R$-modules compatible with composition.







\section{Sheaves of graded bimodules and tensor-hom adjunction}
\label{section-graded-bimodules}

\noindent
Please skip this section.

\begin{definition}
\label{definition-bimodule}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
and $\mathcal{B}$ be a sheaves of graded algebras on
$(\mathcal{C}, \mathcal{O})$. A
{\it graded $(\mathcal{A}, \mathcal{B})$-bimodule}
is given by a family $\mathcal{M}^n$ indexed by $n \in \mathbf{Z}$
of $\mathcal{O}$-modules endowed with $\mathcal{O}$-bilinear maps
$$
\mathcal{M}^n \times \mathcal{B}^m \to \mathcal{M}^{n + m},\quad
(x, b) \longmapsto xb
$$
and
$$
\mathcal{A}^n \times \mathcal{M}^m \to \mathcal{M}^{n + m},\quad
(a, x) \longmapsto ax
$$
called the multiplication maps with the following properties
\begin{enumerate}
\item multiplication satisfies $a(a'x) = (aa')x$ and
$(xb)b' = x(bb')$,
\item $(ax)b = a(xb)$,
\item the identity section $1$ of $\mathcal{A}^0$ acts as the
identity by multiplication, and
\item the identity section $1$ of
$\mathcal{B}^0$ acts as the identity by multiplication.
\end{enumerate}
We often denote such a structure $\mathcal{M}$.
A {\it homomorphism of graded $(\mathcal{A}, \mathcal{B})$-bimodules}
$f : \mathcal{M} \to \mathcal{N}$ is a family of maps
$f^n : \mathcal{M}^n \to \mathcal{N}^n$
of $\mathcal{O}$-modules compatible with the multiplication maps.
\end{definition}

\noindent
Given a graded $(\mathcal{A}, \mathcal{B})$-bimodule $\mathcal{M}$
and an object $U \in \Ob(\mathcal{C})$ we use the notation
$$
\mathcal{M}(U) =
\Gamma(U, \mathcal{M}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \mathcal{M}^n(U)
$$
This is a graded $(\mathcal{A}(U), \mathcal{B}(U))$-bimodule.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
and $\mathcal{B}$ be a sheaves of graded algebras on
$(\mathcal{C}, \mathcal{O})$. Let $\mathcal{M}$ be a right
graded $\mathcal{A}$-module and let $\mathcal{N}$ be a
graded $(\mathcal{A}, \mathcal{B})$-bimodule. In this case the
graded tensor product (defined in Section \ref{section-tensor-product})
$$
\mathcal{M} \otimes_\mathcal{A} \mathcal{N}
$$
is a right graded $\mathcal{B}$-module with obvious multiplication maps.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
and $\mathcal{B}$ be a sheaves of graded algebras on
$(\mathcal{C}, \mathcal{O})$. Let $\mathcal{N}$ be a
graded $(\mathcal{A}, \mathcal{B})$-bimodule. Let 
$\mathcal{L}$ be a right graded $\mathcal{B}$-module.
In this case the graded internal hom
(defined in Section \ref{section-tensor-product})
$$
\SheafHom_\mathcal{B}^{gr}(\mathcal{N}, \mathcal{L})
$$
is a right graded $\mathcal{A}$-module with
multiplication maps\footnote{Our conventions are here
that this does not involve any signs.}
$$
\SheafHom^n_\mathcal{B}(\mathcal{N}, \mathcal{L})
\times \mathcal{A}^m
\longrightarrow
\SheafHom^{n + m}_\mathcal{B}(\mathcal{N}, \mathcal{L})
$$
sending a section $f = (f_{p,q})$ of
$\SheafHom^n_\mathcal{B}(\mathcal{N}, \mathcal{L})$ over $U$
and a section $a$ of $\mathcal{A}^m$ over $U$ to the section
$f a$ if $\SheafHom^{n + m}_\mathcal{B}(\mathcal{N}, \mathcal{L})$ over $U$
defined as the family of maps
$$
\mathcal{N}^{-q - m}|_U \xrightarrow{a \cdot -}
\mathcal{N}^{-q}|_U \xrightarrow{f_{p, q}}
\mathcal{M}^p|_U
$$
We omit the verification that this is well defined.

\begin{lemma}
\label{lemma-tensor-hom-adjunction-gr}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
and $\mathcal{B}$ be a sheaves of graded algebras on
$(\mathcal{C}, \mathcal{O})$. Let $\mathcal{M}$ be a right
graded $\mathcal{A}$-module. Let $\mathcal{N}$ be a
graded $(\mathcal{A}, \mathcal{B})$-bimodule. Let $\mathcal{L}$
be a right graded $\mathcal{B}$-module. With conventions as above
we have
$$
\Hom_{\text{Mod}_\mathcal{B}^{gr}}(
\mathcal{M} \otimes_\mathcal{A} \mathcal{N}, \mathcal{L}) =
\Hom_{\text{Mod}_\mathcal{A}^{gr}}(
\mathcal{M}, \SheafHom_\mathcal{B}^{gr}(\mathcal{N}, \mathcal{L}))
$$
and
$$
\SheafHom_\mathcal{B}^{gr}(
\mathcal{M} \otimes_\mathcal{A} \mathcal{N}, \mathcal{L}) =
\SheafHom_\mathcal{A}^{gr}(
\mathcal{M}, \SheafHom_\mathcal{B}^{gr}(\mathcal{N}, \mathcal{L}))
$$
functorially in $\mathcal{M}$, $\mathcal{N}$, $\mathcal{L}$.
\end{lemma}

\begin{proof}
Omitted. Hint: This follows by interpreting both sides as
$\mathcal{A}$-bilinear graded maps
$\psi : \mathcal{M} \times \mathcal{N} \to \mathcal{L}$
which are $\mathcal{B}$-linear on the right.
\end{proof}

\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let $\mathcal{A}$
and $\mathcal{B}$ be a sheaves of graded algebras on
$(\mathcal{C}, \mathcal{O})$.
As a special case of the above, suppose we are given
a homomorphism $\varphi : \mathcal{A} \to \mathcal{B}$
of graded $\mathcal{O}$-algebras. Then we obtain a functor
and a graded functor
$$
\otimes_{\mathcal{A}, \varphi} \mathcal{B} :
\text{Mod}_\mathcal{A}
\longrightarrow
\text{Mod}_\mathcal{B}
\quad\text{and}\quad
\otimes_{\mathcal{A}, \varphi} \mathcal{B} :
\text{Mod}^{gr}_\mathcal{A}
\longrightarrow
\text{Mod}^{gr}_\mathcal{B}
$$
On the other hand, we have the restriction functors
$$
res_\varphi :
\text{Mod}_\mathcal{B}
\longrightarrow
\text{Mod}_\mathcal{A}
\quad\text{and}\quad
res_\varphi :
\text{Mod}^{gr}_\mathcal{B}
\longrightarrow
\text{Mod}^{gr}_\mathcal{A}
$$
We can use the lemma above to show these functors are adjoint to
each other (as usual with restriction and base change). Namely,
let us write ${}_\mathcal{A}\mathcal{B}_\mathcal{B}$ for
$\mathcal{B}$ viewed as a graded $(\mathcal{A}, \mathcal{B})$-bimodule.
Then for any right graded $\mathcal{B}$-module $\mathcal{L}$
we have
$$
\SheafHom_\mathcal{B}^{gr}({}_\mathcal{A}\mathcal{B}_\mathcal{B}, \mathcal{L})
= res_\varphi(\mathcal{L})
$$
as right graded $\mathcal{A}$-modules. Thus
Lemma \ref{lemma-tensor-hom-adjunction-gr}
tells us that we have a functorial isomorphism
$$
\Hom_{\text{Mod}_\mathcal{B}^{gr}}(
\mathcal{M} \otimes_{\mathcal{A}, \varphi} \mathcal{B}, \mathcal{L}) =
\Hom_{\text{Mod}_\mathcal{A}^{gr}}(
\mathcal{M}, res_\varphi(\mathcal{L}))
$$
We usually drop the dependence on $\varphi$ in this formula if it
is clear from context. In the same manner we obtain
the equality
$$
\SheafHom^{gr}_\mathcal{B}(
\mathcal{M} \otimes_\mathcal{A} \mathcal{B}, \mathcal{L}) =
\SheafHom_\mathcal{A}^{gr}(\mathcal{M}, \mathcal{L})
$$
of graded $\mathcal{O}$-modules.




\section{Pull and push for sheaves of graded modules}
\label{section-functoriality-graded}

\noindent
We advise the reader to skip this section.

\medskip\noindent
Let $(f, f^\sharp) : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C})
\to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$
be a morphism of ringed topoi. Let $\mathcal{A}$ be a
graded $\mathcal{O}_\mathcal{C}$-algebra. Let $\mathcal{B}$ be a
graded $\mathcal{O}_\mathcal{D}$-algebra.
Suppose we are given a map
$$
\varphi : f^{-1}\mathcal{B} \to \mathcal{A}
$$
of graded $f^{-1}\mathcal{O}_\mathcal{D}$-algebras or equivalently
$\varphi$ can be viewed as a map
$$
\varphi : \mathcal{B} \to f_*\mathcal{A}
$$
of differential graded $\mathcal{O}_\mathcal{D}$-algebras.
See Remark \ref{remark-functoriality-ga}.

\medskip\noindent
Let us define a functor
$$
f_* :
\text{Mod}_\mathcal{A}
\longrightarrow
\text{Mod}_\mathcal{B}
$$
Given a graded $\mathcal{A}$-module $\mathcal{M}$ we define
$f_*\mathcal{M}$ to be the graded $\mathcal{B}$-module
whose degree $n$ term is $f_*\mathcal{M}^n$. As multiplication
we use
$$
f_*\mathcal{M}^n \times \mathcal{B}^m
\xrightarrow{(\text{id}, \varphi^m)}
f_*\mathcal{M}^n \times f_*\mathcal{A}^m
\xrightarrow{f_*\mu_{n, m}}
f_*\mathcal{M}^{n + m}
$$
where $\mu_{n, m} : \mathcal{M}^n \times \mathcal{A}^m
\to \mathcal{M}^{n + m}$ is the multiplication map for $\mathcal{M}$
over $\mathcal{A}$. This uses that $f_*$ commutes with products.
The construction is clearly functorial in
$\mathcal{M}$ and we obtain our functor.

\medskip\noindent
Let us define a functor
$$
f^* :
\text{Mod}_\mathcal{B}
\longrightarrow
\text{Mod}_\mathcal{A}
$$
We will define this functor as a composite of functors
$$
\text{Mod}_\mathcal{B}
\xrightarrow{f^{-1}}
\text{Mod}_{f^{-1}\mathcal{B}}
\xrightarrow{ - \otimes_{f^{-1}\mathcal{B}} \mathcal{A}}
\text{Mod}_\mathcal{A}
$$
First, given a graded $\mathcal{B}$-module $\mathcal{N}$ we define
$f^{-1}\mathcal{N}$ to be the graded $f^{-1}\mathcal{B}$-module
whose degree $n$ term is $f^{-1}\mathcal{N}^n$. As multiplication
we use
$$
f^{-1}\nu_{n, m} :
f^{-1}\mathcal{N}^n \times f^{-1}\mathcal{B}^m
\longrightarrow
f^{-1}\mathcal{N}^{n + m}
$$
where $\nu_{n, m} : \mathcal{N}^n \times \mathcal{B}^m
\to \mathcal{N}^{n + m}$ is the multiplication map for $\mathcal{N}$
over $\mathcal{B}$. This uses that $f^{-1}$ commutes with products.
The construction is clearly functorial in
$\mathcal{M}$ and we obtain our functor $f^{-1}$.
Having said this, we can use the tensor
product discussion in Section \ref{section-graded-bimodules}
to define the functor
$$
- \otimes_{f^{-1}\mathcal{B}} \mathcal{A} :
\text{Mod}_{f^{-1}\mathcal{B}}
\longrightarrow
\text{Mod}_\mathcal{A}
$$
Finally, we set
$$
f^*\mathcal{N} =
f^{-1}\mathcal{N} \otimes_{f^{-1}\mathcal{B}, \varphi} \mathcal{A}
$$
as already foretold above.

\medskip\noindent
The functors $f_*$ and $f^*$ are readily enhanced to give graded
functors
$$
f_* :
\text{Mod}^{gr}_\mathcal{A}
\longrightarrow
\text{Mod}^{gr}_\mathcal{B}
\quad\text{and}\quad
f^* :
\text{Mod}^{gr}_\mathcal{B}
\longrightarrow
\text{Mod}^{gr}_\mathcal{A}
$$
which do the same thing on underlying objects and are defined
by functoriality of the constructions on homogenous morphisms
of degree $n$.

\begin{lemma}
\label{lemma-adjunction-push-pull-gr}
In the situation above we have
$$
\Hom_{\text{Mod}_\mathcal{B}^{gr}}(
\mathcal{N}, f_*\mathcal{M}) =
\Hom_{\text{Mod}_\mathcal{A}^{gr}}(
f^*\mathcal{N}, \mathcal{M})
$$
\end{lemma}

\begin{proof}
Omitted. Hints: First prove that $f^{-1}$ and $f_*$ are adjoint
as functors between $\text{Mod}_\mathcal{B}$ and
$\text{Mod}_{f^{-1}\mathcal{B}}$ using the adjunction between
$f^{-1}$ and $f_*$ on sheaves of abelian groups.
Next, use the adjunction between base change and restriction
given in Section \ref{section-graded-bimodules}.
\end{proof}





\section{Localization and sheaves of graded modules}
\label{section-localize-graded}

\noindent
We advise the reader to skip this section.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $U \in \Ob(\mathcal{C})$ and denote
$$
j :
(\Sh(\mathcal{C}/U), \mathcal{O}_U)
\longrightarrow
(\Sh(\mathcal{C}), \mathcal{O})
$$
the corresponding localization morphism
(Modules on Sites, Section \ref{sites-modules-section-localize}).
Below we will use the following fact: for $\mathcal{O}_U$-modules
$\mathcal{M}_i$, $i = 1, 2$ and a $\mathcal{O}$-module $\mathcal{A}$
there is a canonical map
$$
j_! :
\Hom_{\mathcal{O}_U}(
\mathcal{M}_1 \otimes_{\mathcal{O}_U} \mathcal{A}|_U, \mathcal{M}_2)
\longrightarrow
\Hom_\mathcal{O}(
j_!\mathcal{M}_1 \otimes_\mathcal{O} \mathcal{A}, j_!\mathcal{M}_2)
$$
Namely, we have
$j_!(\mathcal{M}_1 \otimes_{\mathcal{O}_U} \mathcal{A}|_U) =
j_!\mathcal{M}_1 \otimes_\mathcal{O} \mathcal{A}$ by
Modules on Sites, Lemma \ref{sites-modules-lemma-j-shriek-and-tensor}.

\medskip\noindent
Let $\mathcal{A}$ be a graded $\mathcal{O}$-algebra.
We will denote $\mathcal{A}_U$ the restriction of $\mathcal{A}$
to $\mathcal{C}/U$, in other words, we have
$\mathcal{A}_U = j^*\mathcal{A} = j^{-1}\mathcal{A}$.
In Section \ref{section-functoriality-graded}
we have constructed adjoint functors
$$
j_* :
\text{Mod}^{gr}_{\mathcal{A}_U}
\longrightarrow
\text{Mod}^{gr}_\mathcal{A}
\quad\text{and}\quad
j^* :
\text{Mod}^{gr}_\mathcal{A}
\longrightarrow
\text{Mod}^{gr}_{\mathcal{A}_U}
$$
with $j^*$ left adjoint to $j_*$. We claim there is in addition an
exact functor
$$
j_! :
\text{Mod}^{gr}_{\mathcal{A}_U}
\longrightarrow
\text{Mod}^{gr}_\mathcal{A}
$$
right adjoint to $j_*$. Namely, given a graded $\mathcal{A}_U$-module
$\mathcal{M}$ we define $j_!\mathcal{M}$ to be the graded $\mathcal{A}$-module
whose degree $n$ term is $j_!\mathcal{M}^n$. As multiplication map
we use
$$
j_!\mu_{n, m} :
j_!\mathcal{M}^n \times \mathcal{A}^m \to
j_!\mathcal{M}^{n + m}
$$
where $\mu_{m, n} : \mathcal{M}^n \times \mathcal{A}^m \to \mathcal{M}^{n + m}$
is the given multiplication map. Given a homogeneous map
$f : \mathcal{M} \to \mathcal{M}'$ of degree $n$ of graded
$\mathcal{A}_U$-modules, we obtain a homogeneous map
$j_!f : j_!\mathcal{M} \to j_!\mathcal{M}'$ of degree $n$.
Thus we obtain our functor.

\begin{lemma}
\label{lemma-extension-by-zero-graded}
In the situation above we have
$$
\Hom_{\text{Mod}_\mathcal{A}^{gr}}(
j_!\mathcal{M}, \mathcal{N}) =
\Hom_{\text{Mod}_{\mathcal{A}_U}^{gr}}(
\mathcal{M}, j^*\mathcal{N})
$$
\end{lemma}

\begin{proof}
By the discussion in
Modules on Sites, Section \ref{sites-modules-section-localize}
the functors $j_!$ and $j^*$ on $\mathcal{O}$-modules are adjoint.
Thus if we only look at the $\mathcal{O}$-module structures
we know that
$$
\Hom_{\text{Mod}_\mathcal{O}^{gr}}(
j_!\mathcal{M}, \mathcal{N}) =
\Hom_{\text{Mod}_{\mathcal{O}_U}^{gr}}(
\mathcal{M}, j^*\mathcal{N})
$$
Then one has to check that these identifications map the
$\mathcal{A}$-module maps on the left hand side to the
$\mathcal{A}_U$-module maps on the right hand side.
To check this, given $\mathcal{O}_U$-linear maps
$f^n : \mathcal{M}^n \to j^*\mathcal{N}^{n + d}$
corresponding to $\mathcal{O}$-linear maps
$g^n : j_!\mathcal{M}^n \to \mathcal{N}^{n + d}$
it suffices to show that
$$
\xymatrix{
\mathcal{M}^n \otimes_{\mathcal{O}_U} \mathcal{A}_U^m
\ar[r]_{f^n \otimes 1} \ar[d] &
j^*\mathcal{N}^{n + d} \otimes_{\mathcal{O}_U} \mathcal{A}_U^m \ar[d] \\
\mathcal{M}^{n + m} \ar[r]^{f^{n + m}} &
j^*\mathcal{N}^{n + m + d}
}
$$
commutes if and only if
$$
\xymatrix{
j_!\mathcal{M}^n \otimes_\mathcal{O} \mathcal{A}^m
\ar[r]_{g^n \otimes 1} \ar[d] &
\mathcal{N}^{n + d} \otimes_\mathcal{O} \mathcal{A}_U^m \ar[d] \\
j_!\mathcal{M}^{n + m} \ar[r]^{g^{n + m}} &
\mathcal{N}^{n + m + d}
}
$$
commutes. However, we know that
\begin{align*}
\Hom_{\mathcal{O}_U}(\mathcal{M}^n \otimes_{\mathcal{O}_U} \mathcal{A}_U^m,
j^*\mathcal{N}^{n + d + m})
& =
\Hom_\mathcal{O}(j_!(\mathcal{M}^n \otimes_{\mathcal{O}_U} \mathcal{A}_U^m),
\mathcal{N}^{n + d + m}) \\
& =
\Hom_\mathcal{O}(j_!\mathcal{M}^n \otimes_\mathcal{O} \mathcal{A}^m,
\mathcal{N}^{n + d + m})
\end{align*}
by the already used
Modules on Sites, Lemma \ref{sites-modules-lemma-j-shriek-and-tensor}.
We omit the verification that shows that the obstruction to the
commutativity of the first diagram in the first group maps
to the obstruction to the commutativity of the second diagram
in the last group.
\end{proof}








\section{Shift functors on sheaves of graded modules}
\label{section-shift}

\noindent
We urge the reader to skip this section. It turns out that sheaves
of graded modules over a graded algebra are an example of the phenomenon
discussed in
Differential Graded Algebra, Remark \ref{dga-remark-graded-shift-functors}.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $\mathcal{A}$ be a sheaf of graded algebras
on $(\mathcal{C}, \mathcal{O})$.
Let $\mathcal{M}$ be a graded $\mathcal{A}$-module. Let $k \in \mathbf{Z}$.
We define the {\it $k$th shift of} $\mathcal{M}$, denoted $\mathcal{M}[k]$,
to be the graded $\mathcal{A}$-module whose $n$th part is given by
$$
(\mathcal{M}[k])^n = \mathcal{M}^{n + k}
$$
is the $(n + k)$th part of $\mathcal{M}$. As multiplication maps
$$
(\mathcal{M}[k])^n \times \mathcal{A}^m
\longrightarrow
(\mathcal{M}[k])^{n + m}
$$
we simply use the multiplication maps
$$
\mathcal{M}^{n + k} \times \mathcal{A}^m
\longrightarrow
\mathcal{M}[^{n + m + k}
$$
of $\mathcal{M}$. It is clear that we have defined a functor $[k]$,
that we have $[k + l] = [k] \circ [l]$, and that we have
$$
\Hom_{\text{Mod}^{gr}_\mathcal{A}}(\mathcal{L}, \mathcal{M}[k]) =
\Hom_{\text{Mod}^{gr}_\mathcal{A}}(\mathcal{L}, \mathcal{M})[k]
$$
functorially in $\mathcal{M}$ and $\mathcal{L}$.
Thus we see indeed that the graded category of graded $\mathcal{A}$-modules
can be recovered from the ordinary category of graded $\mathcal{A}$-modules
and the shift functors as discussed in 
Differential Graded Algebra, Remark \ref{dga-remark-graded-shift-functors}.








\section{Sheaves of differential graded algebras}
\label{section-dga}

\noindent
This section is the analogue of
Differential Graded Algebra, Section \ref{dga-section-dga}.

\begin{definition}
\label{definition-dga}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. A
{\it sheaf of differential graded $\mathcal{O}$-algebras}
or a {\it sheaf of differential graded algebras} on
$(\mathcal{C}, \mathcal{O})$ is a cochain complex
$\mathcal{A}^\bullet$ of $\mathcal{O}$-modules
endowed with $\mathcal{O}$-bilinear maps
$$
\mathcal{A}^n \times \mathcal{A}^m \to \mathcal{A}^{n + m},\quad
(a, b) \longmapsto ab
$$
called the multiplication maps with the following properties
\begin{enumerate}
\item multiplication is associative,
\item there is a global section $1$ of $\mathcal{A}^0$
which is a two-sided identity for multiplication,
\item for $U \in \Ob(\mathcal{C})$, $a \in \mathcal{A}^n(U)$, and
$b \in \mathcal{A}^m(U)$ we have
$$
\text{d}^{n + m}(ab) = \text{d}^n(a)b + (-1)^n a\text{d}^m(b)
$$
\end{enumerate}
We often denote such a structure $(\mathcal{A}, \text{d})$.
A {\it homomorphism of differential graded $\mathcal{O}$-algebras}
from $(\mathcal{A}, \text{d})$ to $(\mathcal{B}, \text{d})$ is a map
$f : \mathcal{A}^\bullet \to \mathcal{B}^\bullet$ of complexes
of $\mathcal{O}$-modules compatible with the multiplication maps.
\end{definition}

\noindent
Given a differential graded $\mathcal{O}$-algebra $(\mathcal{A}, \text{d})$
and an object $U \in \Ob(\mathcal{C})$ we use the notation
$$
\mathcal{A}(U) =
\Gamma(U, \mathcal{A}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \mathcal{A}^n(U)
$$
This is a differential graded $\mathcal{O}(U)$-algebra.

\medskip\noindent
As much as possible, we will think of a differential graded
$\mathcal{O}$-algebra $(\mathcal{A}, \text{d})$
as a graded $\mathcal{O}$-algebra $\mathcal{A}$ endowed with
the operator $\text{d} : \mathcal{A} \to \mathcal{A}$ of degree $1$
(where $\mathcal{A}$ is viewed as a graded $\mathcal{O}$-module)
satisfying the Leibniz rule given in the definition.

\begin{remark}
\label{remark-functoriality-dga}
Let $(f, f^\sharp) : (\Sh(\mathcal{C}), \mathcal{O}_\mathcal{C})
\to (\Sh(\mathcal{D}), \mathcal{O}_\mathcal{D})$
be a morphism of ringed topoi.
\begin{enumerate}
\item Let $(\mathcal{A}, \text{d})$ be a differential graded
$\mathcal{O}_\mathcal{C}$-algebra. The pushforward will be
the differential graded $\mathcal{O}_\mathcal{D}$-algebra
$(f_*\mathcal{A}, \text{d})$ where $f_*\mathcal{A}$ is as in
Remark \ref{remark-functoriality-ga} and
$\text{d} = f_*\text{d}$ as maps $f_*\mathcal{A}^n \to f_*\mathcal{A}^{n + 1}$.
We omit the verification that the Leibniz rule is satisfied.
\item Let $\mathcal{B}$ be a differential graded
$\mathcal{O}_\mathcal{D}$-algebra. The pullback will be the
differential graded $\mathcal{O}_\mathcal{C}$-algebra
$(f^*\mathcal{B}, \text{d})$ where $f^*\mathcal{B}$ is as in
Remark \ref{remark-functoriality-ga} and
$\text{d} = f^*\text{d}$ as maps $f^*\mathcal{B}^n \to f^*\mathcal{B}^{n + 1}$.
We omit the verification that the Leibniz rule is satisfied.
\item The set of homomorphisms $f^*\mathcal{B} \to \mathcal{A}$
of differential graded $\mathcal{O}_\mathcal{C}$-algebras is in
$1$-to-$1$ correspondence with the set of homomorphisms
$\mathcal{B} \to f_*\mathcal{A}$ of differential graded
$\mathcal{O}_\mathcal{D}$-algebras.
\end{enumerate}
Part (3) follows immediately from the usual adjunction between $f^*$ and $f_*$
on sheaves of modules.
\end{remark}
















\section{Sheaves of differential graded modules}
\label{section-modules}

\noindent
This section is the analogue of
Differential Graded Algebra, Section \ref{dga-section-modules}.

\begin{definition}
\label{definition-dgm}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $(\mathcal{A}, \text{d})$ be a sheaf of differential graded algebras
on $(\mathcal{C}, \mathcal{O})$.
A (right) {\it differential graded $\mathcal{A}$-module} or (right)
{\it differential graded module} over $\mathcal{A}$
is a cochain complex $\mathcal{M}^\bullet$ endowed with
$\mathcal{O}$-bilinear maps
$$
\mathcal{M}^n \times \mathcal{A}^m \to \mathcal{M}^{n + m},\quad
(x, a) \longmapsto xa
$$
called the multiplication maps with the following properties
\begin{enumerate}
\item multiplication satisfies $(xa)a' = x(aa')$,
\item the identity section $1$ of $\mathcal{A}^0$
acts as the identity on $\mathcal{M}^n$ for all $n$,
\item for $U \in \Ob(\mathcal{C})$, $x \in \mathcal{M}^n(U)$, and
$a \in \mathcal{A}^m(U)$ we have
$$
\text{d}^{n + m}(xa) = \text{d}^n(x)a + (-1)^n x\text{d}^m(a)
$$
\end{enumerate}
We often say ``let $\mathcal{M}$ be a differential graded
$\mathcal{A}$-module'' to indicate this situation.
A {\it homomorphism of differential graded $\mathcal{A}$-modules}
from $\mathcal{M}$ to $\mathcal{N}$ is a map
$f : \mathcal{M}^\bullet \to \mathcal{N}^\bullet$ of complexes
of $\mathcal{O}$-modules compatible with the multiplication maps.
The category of (right) differential graded $\mathcal{A}$-modules
is denoted $\text{Mod}_{(\mathcal{A}, \text{d})}$.
\end{definition}

\noindent
We can define {\it left differential graded modules} in exactly the same manner
but our default in the chapter will be right modules.

\medskip\noindent
Given a differential graded $\mathcal{A}$-module $\mathcal{M}$
and an object $U \in \Ob(\mathcal{C})$ we use the notation
$$
\mathcal{M}(U) =
\Gamma(U, \mathcal{M}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \mathcal{M}^n(U)
$$
This is a (right) differential graded $\mathcal{A}(U)$-module.

\begin{lemma}
\label{lemma-dgm-abelian}
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $(\mathcal{A}, d)$ be a differential graded $\mathcal{O}$-algebra.
The category $\text{Mod}_{(\mathcal{A}, \text{d})}$ is an abelian category
with arbitrary colimits in which filtered colimits are exact.
\end{lemma}

\begin{proof}
Consider a homomorphism $f : \mathcal{M} \to \mathcal{N}$
of differential graded $\mathcal{A}$-modules. The kernel
and cokernel of $f$ as maps of complexes of $\mathcal{O}$-modules
are complexes of $\mathcal{O}$-modules which are additionally
endowed with multiplication maps as in
Definition \ref{definition-dgm}. Hence these are also
the kernel and cokernel in $\text{Mod}_{(\mathcal{A}, \text{d})}$.
Similarly for direct sums and colimits. In other words, these operations
in $\text{Mod}_{(\mathcal{A}, \text{d})}$ commute with the
forgetful functor to the category $\text{Comp}(\mathcal{O})$
of complexes of $\mathcal{O}$-modules. Since filtered colimits
are exact in $\text{Comp}(\mathcal{O})$, the same is true in
$\text{Mod}_{(\mathcal{A}, \text{d})}$.
\end{proof}

\noindent
From the lemma and its proof we find that there is an exact
and faithful functor
$$
\text{Mod}_{(\mathcal{A}, \text{d})} \longrightarrow \text{Comp}(\mathcal{O})
$$
of abelian categories. For a differential graded $\mathcal{A}$-module
$\mathcal{M}$ the cohomology $\mathcal{O}$-modules, denoted $H^i(\mathcal{M})$,
are defined as the cohomology of the complex of
$\mathcal{O}$-modules corresponding to $\mathcal{M}$.
Therefore, a short exact sequence 
$0 \to \mathcal{K} \to \mathcal{L} \to \mathcal{M} \to 0$
of differential graded $\mathcal{A}$-modules
gives rise to a long exact sequence
\begin{equation}
\label{equation-les}
H^n(\mathcal{K}) \to H^n(\mathcal{L}) \to H^n(\mathcal{M}) \to
H^{n + 1}(\mathcal{K})
\end{equation}
of cohomology modules, see
Homology, Lemma \ref{homology-lemma-long-exact-sequence-cochain}.

\medskip\noindent
Moreover, from now on we borrow all the terminology used for
complexes of modules. For example, we say that a differential
graded $\mathcal{A}$-module $\mathcal{M}$ is {\it acyclic} if
$H^k(\mathcal{M}) = 0$ for all $k \in \mathbf{Z}$. We say that a
homomorphism $\mathcal{M} \to \mathcal{N}$
of differential graded $\mathcal{A}$-modules is a {\it quasi-isomorphism}
if it induces isomorphisms $H^k(\mathcal{M}) \to H^k(\mathcal{N})$
for all $k \in \mathbf{Z}$. And so on and so forth.


















\section{The differential graded category of modules}
\label{section-dgm-dg-cat}

\noindent
This section is the analogue of
Differential Graded Algebra, Example \ref{dga-example-dgm-dg-cat}.
For our conventions on differential graded categories, please
see Differential Graded Algebra, Section \ref{dga-section-dga-categories}.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site.
Let $(\mathcal{A}, \text{d})$ be a sheaf of differential graded algebras
on $(\mathcal{C}, \mathcal{O})$. We will construct
a differential graded category
$$
\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}
$$
over $R = \Gamma(\mathcal{C}, \mathcal{O})$ whose associated category
of complexes is the category of differential graded $\mathcal{A}$-modules:
$$
\text{Mod}_{(\mathcal{A}, \text{d})} =
\text{Comp}(\text{Mod}^{dg}_{(\mathcal{A}, \text{d})})
$$
As objects of $\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}$ we take right
differential graded $\mathcal{A}$-modules, see
Section \ref{section-modules}. Given differential graded
$\mathcal{A}$-modules $\mathcal{L}$ and $\mathcal{M}$ we set
$$
\Hom_{\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}}(\mathcal{L}, \mathcal{M}) =
\Hom_{\text{Mod}^{gr}_\mathcal{A}}(\mathcal{L}, \mathcal{M}) =
\bigoplus\nolimits_{n \in \mathbf{Z}} \Hom^n(\mathcal{L}, \mathcal{M})
$$
as a graded $R$-module, see Section \ref{section-gm-gr-cat}.
In other words, the $n$th graded piece
$\Hom^n(\mathcal{L}, \mathcal{M})$ is the $R$-module of right
$\mathcal{A}$-module maps homogeneous of degree $n$.
For an element $f \in \Hom^n(\mathcal{L}, \mathcal{M})$ we set
$$
\text{d}(f) =
\text{d}_\mathcal{M} \circ f - (-1)^n f \circ \text{d}_\mathcal{L}
$$
To make sense of this we think of $\text{d}_\mathcal{M}$ and
$\text{d}_\mathcal{L}$ as graded $\mathcal{O}$-module maps and
we use composition of graded $\mathcal{O}$-module maps.
It is clear that $\text{d}(f)$ is homogeneous of
degree $n + 1$ as a graded $\mathcal{O}$-module map, and it is
$\mathcal{A}$-linear because for homogeneous local sections $x$ and $a$
of $\mathcal{M}$ and $\mathcal{A}$ we have
\begin{align*}
\text{d}(f)(xa)
& =
\text{d}_\mathcal{M}(f(x) a) - (-1)^n f (\text{d}_\mathcal{L}(xa)) \\
& =
\text{d}_\mathcal{M}(f(x)) a + (-1)^{\deg(x) + n} f(x) \text{d}(a) 
- (-1)^n f(\text{d}_\mathcal{L}(x)) a - (-1)^{n + \deg(x)} f(x) \text{d}(a) \\
& = \text{d}(f)(x) a
\end{align*}
as desired (observe that this calculation would not work without the
sign in the definition of our differential on $\Hom$).

\medskip\noindent
For differential graded $\mathcal{A}$-modules
$\mathcal{K}$, $\mathcal{L}$, $\mathcal{M}$
we have already defined the composition
$$
\Hom^m(\mathcal{L}, \mathcal{M}) \times
\Hom^n(\mathcal{K}, \mathcal{L}) \longrightarrow
\Hom^{n + m}(\mathcal{K}, \mathcal{M})
$$
in Section \ref{section-gm-gr-cat} by the usual composition
of maps of sheaves. This defines a map of differential graded modules
$$
\Hom_{\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}}(\mathcal{L}, \mathcal{M})
\otimes_R
\Hom_{\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}}(\mathcal{K}, \mathcal{L})
\longrightarrow
\Hom_{\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}}(\mathcal{K}, \mathcal{M})
$$
as required in
Differential Graded Algebra, Definition \ref{dga-definition-dga-category}
because
\begin{align*}
\text{d}(g \circ f) & =
\text{d}_\mathcal{M} \circ g \circ f
- (-1)^{n + m} g \circ f \circ \text{d}_\mathcal{K} \\
& =
\left(\text{d}_\mathcal{M} \circ g - (-1)^m g \circ \text{d}_L\right) \circ f
+ (-1)^m g \circ \left(\text{d}_\mathcal{L} \circ f
- (-1)^n f \circ \text{d}_\mathcal{K}\right) \\
& =
\text{d}(g) \circ f + (-1)^m g \circ \text{d}(f)
\end{align*}
as desired.






\section{Tensor product for sheaves of differential graded modules}
\label{section-tensor-product-dg}

\noindent
This section is the analogue of part of
Differential Graded Algebra, Section \ref{dga-section-tensor-product}.

\medskip\noindent
Let $(\mathcal{C}, \mathcal{O})$ be a ringed site. Let
$(\mathcal{A}, \text{d})$
be a sheaf of differential graded algebras on $(\mathcal{C}, \mathcal{O})$.
Let $\mathcal{M}$ be a right differential graded $\mathcal{A}$-module
and let $\mathcal{N}$ be a left differential graded $\mathcal{A}$-module.
In this situation we define the {\it tensor product}
$\mathcal{M} \otimes_\mathcal{A} \mathcal{N}$ as follows.
As a graded $\mathcal{O}$-module it is given by the construction
in Section \ref{section-tensor-product}. It comes endowed
with a differential
$$
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}} :
(\mathcal{M} \otimes_\mathcal{A} \mathcal{N})^n
\longrightarrow
(\mathcal{M} \otimes_\mathcal{A} \mathcal{N})^{n + 1}
$$
defined by the rule that
$$
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}}(x \otimes y) =
\text{d}_\mathcal{M}(x) \otimes y +
(-1)^{\deg(x)}x \otimes \text{d}_\mathcal{N}(y)
$$
for homogeneous local sections $x$ and $y$ of $\mathcal{M}$ and $\mathcal{N}$.
To see that this is well defined we have to show that
$\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}}$ annihilates
elements of the form $xa \otimes y - x \otimes ay$ for homogeneous
local sections $x$, $a$, $y$ of $\mathcal{M}$, $\mathcal{A}$, $\mathcal{N}$.
We compute
\begin{align*}
&
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}}(
xa \otimes y - x \otimes ay) \\
& =
\text{d}_\mathcal{M}(xa) \otimes y + (-1)^{\deg(x) + \deg(a)}
xa \otimes \text{d}_\mathcal{N}(y)
-\text{d}_\mathcal{M}(x) \otimes ay - (-1)^{\deg(x)}
x \otimes \text{d}_\mathcal{N}(ay) \\
& =
\text{d}_\mathcal{M}(x)a \otimes y + (-1)^{\deg(x)}x\text{d}(a) \otimes y
+ (-1)^{\deg(x) + \deg(a)} xa \otimes \text{d}_\mathcal{N}(y) \\
&
-\text{d}_\mathcal{M}(x) \otimes ay - (-1)^{\deg(x)}
x \otimes \text{d}(a)y - (-1)^{\deg(x) +
\deg(a)} x\otimes a\text{d}_\mathcal{N}(y)
\end{align*}
then we observe that the elements
$$
\text{d}_\mathcal{M}(x)a \otimes y - \text{d}_\mathcal{M}(x) \otimes ay,\quad
x\text{d}(a) \otimes y - x \otimes \text{d}(a)y,\quad
\text{and}\quad
xa \otimes \text{d}_\mathcal{N}(y) - x\otimes a\text{d}_\mathcal{N}(y)
$$
map to zero in $\mathcal{M} \otimes_\mathcal{A} \mathcal{N}$
and we conclude. We omit the verification that
$\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}} \circ
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}} = 0$.

\medskip\noindent
If we fix the left differential graded $\mathcal{A}$-module $\mathcal{N}$
we obtain a functor
$$
- \otimes_\mathcal{A} \mathcal{N} :
\text{Mod}_{(\mathcal{A}, \text{d})}
\longrightarrow
\text{Comp}(\mathcal{O})
$$
where on the right hand side we have the category of complexes of
$\mathcal{O}$-modules. This can be upgraded to a functor of
differential graded categories
$$
- \otimes_\mathcal{A} \mathcal{N} :
\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}
\longrightarrow
\text{Comp}^{dg}(\mathcal{O})
$$
On underlying graded objects, we send
a homomorphism $f : \mathcal{M} \to \mathcal{M}'$ of degree $n$ 
to the degree $n$ map
$f \otimes \text{id}_\mathcal{N} :
\mathcal{M} \otimes_\mathcal{A} \mathcal{N} \to
\mathcal{M}' \otimes_\mathcal{A} \mathcal{N}$, because
this is what we did in Section \ref{section-tensor-product}.
To show that this works, we have to verify that the map
$$
\Hom_{\text{Mod}^{dg}_{(\mathcal{A}, \text{d})}}(\mathcal{M}, \mathcal{M}')
\longrightarrow
\Hom_{\text{Comp}^{dg}(\mathcal{O})}(
\mathcal{M} \otimes_\mathcal{A} \mathcal{N},
\mathcal{M}' \otimes_\mathcal{A} \mathcal{N})
$$
is compatible with differentials. To see this for $f$ as above
we have to show that
$$
(\text{d}_{\mathcal{M}'} \circ f - (-1)^n f \circ \text{d}_\mathcal{M})
\otimes \text{id}_\mathcal{N}
$$
is equal to
$$
\text{d}_{\mathcal{M}' \otimes_\mathcal{A} \mathcal{N}}
\circ (f \otimes \text{id}_\mathcal{N})
- (-1)^n (f \otimes \text{id}_\mathcal{N}) \circ
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}}
$$
Let us compute the effect of these operators on a local section
of the form $x \otimes y$ with $x$ and $y$ homogeneous local sections
of $\mathcal{M}$ and $\mathcal{N}$. For the first we obtain
$$
(\text{d}_{\mathcal{M}'}(f(x)) - (-1)^n f(\text{d}_\mathcal{M}(x))) \otimes y
$$
and for the second we obtain
\begin{align*}
&\text{d}_{\mathcal{M}' \otimes_\mathcal{A} \mathcal{N}}(f(x) \otimes y)
- (-1)^n (f \otimes \text{id}_\mathcal{N})(
\text{d}_{\mathcal{M} \otimes_\mathcal{A} \mathcal{N}}(x \otimes y) \\
& =
\text{d}_{\mathcal{M}'}(f(x)) \otimes y +
(-1)^{\deg(x) + n}f(x) \otimes \text{d}_\mathcal{N}(y) \\
&
-(-1)^n f(\text{d}_\mathcal{M}(x)) \otimes y
-(-1)^n (-1)^{\deg(x)}f(x) \otimes \text{d}_\mathcal{N}(y)
\end{align*}
which is indeeed the same local section.





\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
