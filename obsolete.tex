\input{preamble}

% OK, start here.
%
\begin{document}

\title{Obsolete}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents




\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we put some lemmas that have become ``obsolete''
(see \cite{Miller}).





\section{Lemmas related to ZMT}
\label{section-ZMT}

\noindent
The lemmas in this section were originally used in the proof of the
(algebraic version of) Zariski's Main Theorem,
Algebra, Theorem \ref{algebra-theorem-main-theorem}.

\begin{lemma}
\label{lemma-make-integral-less-trivial}
Let $\varphi : R \to S$ be a ring map.
Suppose $t \in S$ satisfies the
relation $\varphi(a_0) + \varphi(a_1)t + \ldots + \varphi(a_n) t^n = 0$.
Set $u_n = \varphi(a_n)$, $u_{n-1} = u_n t + \varphi(a_{n-1})$,
and so on till $u_1 = u_2 t + \varphi(a_1)$.
Then all of $u_n, u_{n-1}, \ldots, u_1$ and
$u_nt, u_{n-1}t, \ldots, u_1t$ are integral over $R$,
and the ideals $(\varphi(a_0), \ldots, \varphi(a_n))$ and
$(u_n, \ldots, u_1)$ of $S$ are equal.
\end{lemma}

\begin{proof}
We prove this by induction on $n$. As $u_n = \varphi(a_n)$ we
conclude from
Algebra, Lemma \ref{algebra-lemma-make-integral-trivial}
that $u_nt$ is integral over $R$. Of course
$u_n = \varphi(a_n)$ is integral over $R$. Then
$u_{n - 1} = u_n t  + \varphi(a_{n - 1})$ is integral over $R$ (see
Algebra, Lemma \ref{algebra-lemma-integral-closure-is-ring})
and we have
$$
\varphi(a_0) + \varphi(a_1)t + \ldots + \varphi(a_{n - 1})t^{n - 1} +
u_{n - 1}t^{n - 1} = 0.
$$
Hence by the induction hypothesis applied to the map
$S' \to S$ where $S'$ is the integral closure of $R$ in $S$
and the displayed equation we see that
$u_{n-1}, \ldots, u_1$ and $u_{n-1}t, \ldots, u_1t$
are all in $S'$ too. The statement on the ideals is immediate from the
shape of the elements and the fact that $u_1t + \varphi(a_0) = 0$.
\end{proof}

\begin{lemma}
\label{lemma-make-integral-not-in-ideal}
Let $\varphi : R \to S$ be a ring map.
Suppose $t \in S$ satisfies the
relation $\varphi(a_0) + \varphi(a_1)t + \ldots + \varphi(a_n) t^n = 0$.
Let $J \subset S$ be an ideal such that for at
least one $i$ we have $\varphi(a_i) \not \in J$.
Then there exists a $u \in S$, $u \not\in J$ such
that both $u$ and $ut$ are integral over $R$.
\end{lemma}

\begin{proof}
This is immediate from Lemma \ref{lemma-make-integral-less-trivial}
since one of the elements $u_i$ will not be in $J$.
\end{proof}

\noindent
The following two lemmas are a way of describing closed
subschemes of $\mathbf{P}^1_R$ cut out by one (nondegenerate)
equation.

\begin{lemma}
\label{lemma-P1}
Let $R$ be a ring.
Let $F(X, Y) \in R[X, Y]$ be homogeneous of degree
$d$. Assume that for every prime $\mathfrak p$ of $R$
at least one coefficient of $F$ is not in $\mathfrak p$.
Let $S = R[X, Y]/(F)$ as a graded ring.
Then for all $n \geq d$ the $R$-module $S_n$
is finite locally free of rank $d$.
\end{lemma}

\begin{proof}
The $R$-module $S_n$ has a presentation
$$
R[X, Y]_{n-d} \to R[X, Y]_n \to S_n \to 0.
$$
Thus by Algebra, Lemma \ref{algebra-lemma-cokernel-flat}
it is enough to show that multiplication
by $F$ induces an injective map
$\kappa(\mathfrak p)[X, Y]
\to \kappa(\mathfrak p)[X, Y]$
for all primes $\mathfrak p$.
This is clear from the assumption that
$F$ does not map to the zero polynomial mod $\mathfrak p$.
The assertion on ranks is clear from this as well.
\end{proof}

\begin{lemma}
\label{lemma-rel-prime-pols}
Let $k$ be a field. Let $F, G \in k[X, Y]$ be homogeneous
of degrees $d, e$. Assume $F, G$ relatively prime.
Then multiplication by $G$ is injective on $S = k[X, Y]/(F)$.
\end{lemma}

\begin{proof}
This is one way to define ``relatively prime''. If you have another
definition, then you can show it is equivalent to this one.
\end{proof}

\begin{lemma}
\label{lemma-P1-localize}
Let $R$ be a ring. Let $F(X, Y) \in R[X, Y]$ be homogeneous of degree
$d$. Let $S = R[X, Y]/(F)$ as a graded ring.
Let $\mathfrak p \subset R$ be a prime such that
some coefficient of $F$ is not in $\mathfrak p$.
There exists an $f \in R$ $f \not\in \mathfrak p$,
an integer $e$, and a $G \in R[X, Y]_e$
such that multiplication by $G$ induces isomorphisms
$(S_n)_f \to (S_{n + e})_f$ for all $n \geq d$.
\end{lemma}

\begin{proof}
During the course of the proof we may replace $R$ by $R_f$
for $f\in R$, $f\not\in \mathfrak p$ (finitely often).
As a first step we do such a replacement such that
some coefficient of $F$ is invertible in $R$.
In particular the modules $S_n$ are now locally
free of rank $d$ for $n \geq d$ by Lemma \ref{lemma-P1}.
Pick any $G \in R[X, Y]_e$ such that the image of
$G$ in $\kappa(\mathfrak p)[X, Y]$ is relatively
prime to the image of $F(X, Y)$ (this is possible for some $e$).
Apply Algebra, Lemma \ref{algebra-lemma-cokernel-flat} to the map
induced by multiplication by $G$ from $S_d \to S_{d + e}$.
By our choice of $G$ and Lemma \ref{lemma-rel-prime-pols}
we see
$S_d \otimes \kappa(\mathfrak p) \to S_{d + e} \otimes \kappa(\mathfrak p)$
is bijective. Thus, after replacing $R$ by $R_f$ for a suitable
$f$ we may assume that $G : S_d \to S_{d + e}$
is bijective. This in turn implies that the image
of $G$ in $\kappa(\mathfrak p')[X, Y]$ is relatively
prime to the image of $F$ for all primes $\mathfrak p'$
of $R$. And then by Algebra, Lemma \ref{algebra-lemma-cokernel-flat}
again we see that all the maps
$G : S_d \to S_{d + e}$, $n \geq d$ are isomorphisms.
\end{proof}

\begin{remark}
\label{remark-algebra}
Let $R$ be a ring. Suppose that we have $F \in R[X, Y]_d$
and $G \in R[X, Y]_e$ such that, setting $S = R[X, Y]/(F)$
we have (1) $S_n$ is finite locally free of rank $d$ for
all $n \geq d$, and (2) multiplication by $G$ defines
ismorphisms $S_n \to S_{n + e}$ for all $n \geq d$. In this
case we may define a finite, locally free $R$-algebra
$A$ as follows:
\begin{enumerate}
\item as an $R$-module $A = S_{ed}$, and
\item multiplication $A \times A \to A$ is given by
the rule that $H_1 H_2 = H_3$ if and only if $G^d H_3 = H_1 H_2$
in $S_{2ed}$.
\end{enumerate}
This makes sense because multiplication by $G^d$
induces a bijective map $S_{de} \to S_{2de}$.
It is easy to see that this defines a ring structure.
Note the confusing fact that the element $G^d$
defines the unit element of the ring $A$.
\end{remark}

\begin{lemma}
\label{lemma-finite-after-localization}
Let $R$ be a ring, let $f \in R$.
Suppose we have $S$, $S'$ and the solid arrows
forming the following commutative diagram of rings
$$
\xymatrix{
& S'' \ar@{-->}[rd] \ar@{-->}[dd] &
\\
R \ar[rr] \ar@{-->}[ru] \ar[d] &  & S \ar[d]
\\
R_f \ar[r] & S' \ar[r] & S_f
}
$$
Assume that $R_f \to S'$ is finite. Then we can find
a finite ring map $R \to S''$ and dotted arrows as
in the diagram such that $S' = (S'')_f$.
\end{lemma}

\begin{proof}
Namely, suppose that $S'$ is generated by
$x_i$ over $R_f$, $i = 1, \ldots, w$. Let $P_i(t) \in R_f[t]$
be a monic polynomial such that $P_i(x_i) = 0$.
Say $P_i$ has degree $d_i > 0$. Write
$P_i(t) = t^{d_i} + \sum_{j < d_i} (a_{ij}/f^n) t^j$
for some uniform $n$. Also write
the image of $x_i$ in $S_f$ as $g_i / f^n$
for suitable $g_i \in S$. Then we know
that the element
$\xi_i = f^{nd_i} g_i^{d_i} + \sum_{j < d_i} f^{n(d_i - j)} a_{ij} g_i^j$
of $S$ is killed by a power of $f$.
Hence upon increasing $n$ to $n'$, which replaces
$g_i$ by $f^{n' - n}g_i$ we may assume $\xi_i = 0$.
Then $S'$ is generated by the elements
$f^n x_i$, each of which is a zero of the
monic polynomial $Q_i(t) = t^{d_i} +
\sum_{j < d_i} f^{n(d_i - j)} a_{ij} t^j$
with coefficients in $R$. Also, by construction
$Q_i(f^ng_i) = 0$ in $S$. Thus we get a finite $R$-algebra
$S'' = R[z_1, \ldots, z_w]/(Q_1(z_1), \ldots, Q_w(z_w))$
which fits into a commutative diagram as above.
The map $\alpha : S'' \to S$ maps $z_i$ to $f^ng_i$ and
the map $\beta : S'' \to S'$ maps $z_i$ to $f^nx_i$.
It may not yet be the case that $\beta$ induces an
isomorphism $(S'')_f \cong S'$.
For the moment we only know that this map
is surjective. The problem is that there could be
elements $h/f^n \in (S'')_f$ which map to zero
in $S'$ but are not zero. In this case $\beta(h)$
is an element of $S$ such that $f^N \beta(h) = 0$
for some $N$. Thus $f^N h$ is an element ot the ideal
$J = \{h \in S'' \mid \alpha(h) = 0 \text{ and }
\beta(h) = 0\}$ of $S''$. OK, and it is easy to see that
$S''/J$ does the job.
\end{proof}


\section{Formally smooth ring maps}
\label{section-formally-smooth}

\begin{lemma}
\label{lemma-formally-smooth-smooth}
Let $R$ be a ring. Let $S$ be a $R$-algebra.
If $S$ is of finite presentation and formally smooth over $R$
then $S$ is smooth over $R$.
\end{lemma}

\begin{proof}
See Algebra, Proposition \ref{algebra-proposition-smooth-formally-smooth}.
\end{proof}


\section{Devissage of coherent sheaves}
\label{section-devissage}

\noindent
Lemmas that seem superfluous.

\begin{lemma}
\label{lemma-property-irreducible-higher-rank}
Let $X$ be a Noetherian scheme.
Let $Z_0 \subset X$ be an irreducible closed subset with generic point $\xi$.
Let $\mathcal{P}$ be a property of coherent sheaves on $X$ such that
\begin{enumerate}
\item For any short exact sequence of coherent sheaves if two
out of three of them have property $\mathcal{P}$ then so does the
third.
\item If $\mathcal{P}$ holds for a direct sum of coherent sheaves
then it holds for both.
\item For every integral closed subscheme $Z \subset Z_0 \subset X$,
$Z \not = Z_0$ and every quasi-coherent sheaf of ideals
$\mathcal{I} \subset \mathcal{O}_Z$ we have
$\mathcal{P}$ for $(Z \to X)_*\mathcal{I}$.
\item There exists some coherent sheaf $\mathcal{G}$ on $X$ such that
\begin{enumerate}
\item $\text{Supp}(\mathcal{G}) = Z_0$,
\item $\mathcal{G}_\xi$ is annihilated by $\mathfrak m_\xi$, and
\item property $\mathcal{P}$ holds for $\mathcal{G}$.
\end{enumerate}
\end{enumerate}
Then property $\mathcal{P}$ holds for every coherent sheaf
$\mathcal{F}$ on $X$ whose support is contained in $Z_0$.
\end{lemma}

\begin{proof}
The proof is a variant on the proof of
Cohomology of Schemes, Lemma \ref{coherent-lemma-property-irreducible}.
In exactly the same manner as in that proof we see that
any coherent sheaf whose support is strictly contained in $Z_0$
has property $\mathcal{P}$.

\medskip\noindent
Consider a coherent sheaf $\mathcal{G}$ as in (3).
By Cohomology of Schemes, Lemma \ref{coherent-lemma-prepare-filter-irreducible}
there exists a sheaf of ideals $\mathcal{I}$ on $Z_0$ and
a short exact sequence
$$
0 \to
\left((Z_0 \to X)_*\mathcal{I}\right)^{\oplus r} \to
\mathcal{G} \to
\mathcal{Q} \to 0
$$
where the support of $\mathcal{Q}$ is stricly contained in $Z_0$.
In particular $r > 0$ and $\mathcal{I}$ is nonzero
because the support of $\mathcal{G}$ is equal to $Z$.
Since $\mathcal{Q}$ has property $\mathcal{P}$ we conclude that
also $\left((Z_0 \to X)_*\mathcal{I}\right)^{\oplus r}$
has property $\mathcal{P}$.
By (2) we deduce property $\mathcal{P}$ for
$(Z_0 \to X)_*\mathcal{I}$. Slotting this into the proof of
Cohomology of Schemes, Lemma \ref{coherent-lemma-property-irreducible}
at the appropriate point gives the lemma.
Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-property-higher-rank}
Let $X$ be a Noetherian scheme.
Let $\mathcal{P}$ be a property of coherent sheaves on $X$ such that
\begin{enumerate}
\item For any short exact sequence of coherent sheaves if two
out of three of them have property $\mathcal{P}$ then so does the
third.
\item If $\mathcal{P}$ holds for a direct sum of coherent sheaves
then it holds for both.
\item For every integral closed subscheme $Z \subset X$
with generic point $\xi$ there exists
some coherent sheaf $\mathcal{G}$ such that
\begin{enumerate}
\item $\text{Supp}(\mathcal{G}) = Z$,
\item $\mathcal{G}_\xi$ is annihilated by $\mathfrak m_\xi$, and
\item property $\mathcal{P}$ holds for $\mathcal{G}$.
\end{enumerate}
\end{enumerate}
Then property $\mathcal{P}$ holds for every coherent sheaf
on $X$.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-property-irreducible-higher-rank}
in exactly the same way that
Cohomology of Schemes, Lemma \ref{coherent-lemma-property} follows from
Cohomology of Schemes, Lemma \ref{coherent-lemma-property-irreducible}.
\end{proof}




\section{Very reasonable algebraic spaces}
\label{section-very-reasonable}

\noindent
Material that is somewhat obsolete.

\begin{lemma}
\label{lemma-reasonable-kolmogorov}
Let $S$ be a scheme.
Let $X$ be a reasonable algebraic space over $S$.
Then $|X|$ is Kolmogorov (see
Topology, Definition \ref{topology-definition-generic-point}).
\end{lemma}

\begin{proof}
Follows from the definitions and
Decent Spaces, Lemma \ref{decent-spaces-lemma-kolmogorov}.
\end{proof}

\noindent
In the rest of this section we make some remarks about very reasonable
algebraic spaces. If there exists a scheme $U$ and a
surjective, \'etale, quasi-compact
morphism $U \to X$, then $X$ is very reasonable, see
Decent Spaces, Lemma \ref{decent-spaces-lemma-characterize-very-reasonable}.

\begin{lemma}
\label{lemma-scheme-very-reasonable}
A scheme is very reasonable.
\end{lemma}

\begin{proof}
This is true because the identity map is a quasi-compact, surjective
\'etale morphism.
\end{proof}

\begin{lemma}
\label{lemma-very-reasonable-Zariski-local}
Let $S$ be a scheme.
Let $X$ be an algebraic space over $S$.
If there exists a Zariski open covering $X = \bigcup X_i$ such that
each $X_i$ is very reasonable, then $X$ is very reasonable.
\end{lemma}

\begin{proof}
This is case $(\epsilon)$ of
Decent Spaces, Lemma \ref{decent-spaces-lemma-properties-local}.
\end{proof}

\begin{lemma}
\label{lemma-quasi-separated-very-reasonable}
An algebraic space which is Zariski locally quasi-separated is very reasonable.
In particular any quasi-separated algebraic space is very reasonable.
\end{lemma}

\begin{proof}
This is one of the implications of
Decent Spaces, Lemma \ref{decent-spaces-lemma-bounded-fibres}.
\end{proof}

\begin{lemma}
\label{lemma-representable-very-reasonable}
Let $S$ be a scheme.
Let $X$, $Y$ be algebraic spaces over $S$.
Let $Y \to X$ be a representable morphism.
If $X$ is very reasonable, so is $Y$.
\end{lemma}

\begin{proof}
This is case $(\epsilon)$ of
Decent Spaces, Lemma \ref{decent-spaces-lemma-representable-properties}.
\end{proof}

\begin{remark}
\label{remark-very-reasonable-Zariski-locally-quasi-separated}
Very reasonable algebraic spaces form a stricly larger collection than
Zariski locally quasi-separated algebraic spaces. Consider
an algebraic space of the form $X = [U/G]$ (see
Spaces, Definition \ref{spaces-definition-quotient})
where $G$ is a finite group acting without fixed points on a
non-quasi-separated scheme $U$. Namely, in this case
$U \times_X U = U \times G$ and clearly both projections to $U$ are
quasi-compact, hence $X$ is very reasonable. On the other hand, the diagonal
$U \times_X U \to U \times U$ is not quasi-compact, hence this
algebraic space is not quasi-separated. Now, take $U$ the infinite
affine space over a field $k$ of characteristic $\not = 2$ with
zero doubled, see
Schemes, Example \ref{schemes-example-not-quasi-separated}.
Let $0_1, 0_2$ be the two zeros of $U$. Let $G = \{+1, -1\}$, and
let $-1$ act by $-1$ on all coordinates, and by switching
$0_1$ and $0_2$. Then $[U/G]$ is very reasonable but not Zariski locally
quasi-separated (details omitted).
\end{remark}

\noindent
Warning: The following lemma should be used with caution, as the schemes
$U_i$ in it are not necessarily separated or even quasi-separated.

\begin{lemma}
\label{lemma-very-reasonable-quasi-compact-pieces}
Let $S$ be a scheme.
Let $X$ be a very reasonable algebraic space over $S$.
There exists a set of schemes
$U_i$ and morphisms $U_i \to X$ such that
\begin{enumerate}
\item each $U_i$ is a quasi-compact scheme,
\item each $U_i \to X$ is \'etale,
\item both projections $U_i \times_X U_i \to U_i$ are quasi-compact, and
\item the morphism $\coprod U_i \to X$ is surjective (and \'etale).
\end{enumerate}
\end{lemma}

\begin{proof}
Decent Spaces, Definition \ref{decent-spaces-definition-very-reasonable}
says that there exist $U_i \to X$ such that (2), (3) and (4) hold.
Fix $i$, and set $R_i = U_i \times_X U_i$, and denote $s, t : R_i \to U_i$
the projections.
For any affine open $W \subset U_i$ the open $W' = t(s^{-1}(W)) \subset U_i$
is a quasi-compact $R_i$-invariant open (see
Groupoids, Lemma \ref{groupoids-lemma-constructing-invariant-opens}).
Hence $W'$ is a quasi-compact scheme, $W' \to X$ is \'etale, and
$W' \times_X W' = s^{-1}(W') = t^{-1}(W')$ so both projections
$W' \times_X W' \to W'$ are quasi-compact. This means the family of
$W' \to X$, where $W \subset U_i$ runs through the members of affine
open coverings of the $U_i$ gives what we want.
\end{proof}













\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
