\input{preamble}

% OK, start here.
%
\begin{document}

\title{Chow homology and Chern classes}

\maketitle

\phantomsection
\label{section-phantom}


\tableofcontents



\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we discuss Chow homology groups and the construction
of chern classes of vector bundles as elements of operational
Chow cohomology groups (everything with $\mathbf{Z}$-coefficients).
We follow the first few chapters of \cite{F}, except that we have been
less precise about the supports of the cycles involved.
More classical discussions of Chow groups can be found in
\cite{Samuel}, \cite{ChevalleyI}, and \cite{ChevalleyII}.
Of course there are many others.

\medskip\noindent
To make the material a little bit more challenging we decided
to treat a somewhat more general case than is usually done.
Namely we assume our schemes $X$ are locally of finite type
over a fixed locally Noetherian base scheme which is universally
catenary and has a given dimension function. This seems to be
all that is needed to be able to define the Chow homology
groups $A_*(X)$ and the action of capping with chern classes
on them. This is an indication that we should be able to define
these also for algebraic stacks locally of finite type over such
a base.

\medskip\noindent
In another chapter we will define the intersection products
on $A_*(X)$ using Serre's Tor-formula in case $X$ is nonsingular
(see \cite{Serre_local_algebra}, or \cite{Serre_algebre_locale})
and we have a good moving lemma. See (insert future reference here).



\section{Algebraic lemmas}
\label{section-algebraic-lemmas}

\noindent
In this section we collect algebraic lemmas used below in order to
slot them into the chapter on commutative algebra later on.

\begin{lemma}
\label{lemma-pushdown-module}
Let $A$ be a local Noetherian ring with maximal ideal $\mathfrak m$.
Let $B$ be a semi-local Noetherian ring with maximal ideals $\mathfrak m_i$,
$i = 1, \ldots, n$.
Suppose that $A \to B$ is a homomorphism such that each $\mathfrak m_i$
lies over $\mathfrak m$ and such that
$$
[\kappa(\mathfrak m_i) : \kappa(\mathfrak m)] < \infty.
$$
Let $M$ be a $B$-module of finite length.
Then
$$
\text{length}_A(M) = \sum\nolimits_{i = 1, \ldots, n}
[\kappa(\mathfrak m_i) : \kappa(\mathfrak m)]
\text{length}_{B_{\mathfrak m_i}}(M_{\mathfrak m_i}),
$$
in particular $\text{length}_A(M) < \infty$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-pullback-module}
Let $A \to B$ be a flat local homomorphism of local Noetherian rings.
Assume that $\sqrt{\mathfrak m_A B} = \mathfrak m_B$.
Then for any $A$-module $M$ of finite length we have
$$
\text{length}_A(M) \text{length}_B(B/\mathfrak m_AB)
=
\text{length}_B(M \otimes_A B)
$$
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-pullback-transitive}
Let $A \to B \to C$ be flat local homomorphisms of local Noetherian rings.
Let $M$ be an $A$-module of finite length.
Then
$$
\text{length}_B(M \otimes_A B) \text{length}_C(C/\mathfrak m_B C)
=
\text{length}_C(M \otimes_A C)
$$
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-flat-pullback-pushdown-module}
Let
$$
\xymatrix{
A' = B' \otimes_B A & A \ar[l] \\
B' \ar[u] & B \ar[l] \ar[u]
}
$$
be a diagram of Noetherian rings. Assume that $A$, $A'$, $B'$ are local,
the homomorphisms $B \to A$ and $B \to B'$ are local,
$\kappa(\mathfrak m_B) \to \kappa(\mathfrak m_A)$ is finite,
$B \to B'$ is flat and $\sqrt{\mathfrak m_A B'} = \mathfrak m_{B'}$.
Then
\begin{enumerate}
\item Any prime $\mathfrak m'$ of $A'$ lying over $\mathfrak m_A$
is maximal and $[\kappa(\mathfrak m') : \kappa(\mathfrak m_{B'})] < \infty$.
Moreover, there are only a finite number, say
$\mathfrak m'_1, \ldots, \mathfrak m'_n$, of these.
\item We have
\begin{align*}
[\kappa(\mathfrak m_A) : \kappa(\mathfrak m_B)]
&
\text{length}_{B'}(B'/\mathfrak m_BB')
= \\
& \sum\nolimits_{i = 1, \ldots, n}
[\kappa(\mathfrak m'_i) : \kappa(\mathfrak m_{B'})]
\text{length}_{A'_{\mathfrak m'_i}}((A'/\mathfrak m_AA')_{\mathfrak m'_i})
\end{align*}
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-length-additive}
Let $A$ be a semi-local Noetherian ring of dimension $1$.
If $a, b \in A$ are not zero divisors then
$$
\text{length}_A(A/(ab)) =
\text{length}_A(A/(a)) +
\text{length}_A(A/(b))
$$
and these lengths are finite.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-ord}
Suppose that $K$ is a field, and $A \subset K$ is a
local\footnote{We could also define this when $A$ is only
semi-local but this is probably never really what you want!}
Noetherian subring of dimension $1$ with fraction field $K$.
In this case we define the {\it order of vanishing along $A$}
$$
\text{ord}_A : K^* \longrightarrow \mathbf{Z}
$$
by the rule
$$
\text{ord}_A(x) = \text{length}_A(A/(x))
$$
if $x \in A$ and we set
$\text{ord}_A(x/y) = \text{ord}_A(x) - \text{ord}_A(y)$
for $x, y \in A$ both nonzero.
\end{definition}

\begin{lemma}
\label{lemma-finite-extension-dim-1}
Let $A \subset B$ be a finite extension of Noetherian domains.
Assume that $A$ is a local with maximal ideal $\mathfrak m$.
Let $K = f.f.(A)$ and $L = B \otimes_A K$ so that $L$ is
a finite field extension of $K$.
Let $y \in L^*$ and $x = \text{Nm}_{L/K}(y)$.
Let $\mathfrak m_i$, $i = 1, \ldots, n$ be the maximal ideals of $B$.
Then
$$
\text{ord}_A(x) =
\sum\nolimits_i
[\kappa(\mathfrak m_i) : \kappa(\mathfrak m)]
\text{ord}_{B_{\mathfrak m_i}}(y)
$$
where $\text{ord}$ is defined as in Definition \ref{definition-ord}.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-relative-effective-cartier-algebra}
Let $A \to B$ be a ring map. Let $f \in B$. Assume that
\begin{enumerate}
\item $A \to B$ is flat,
\item $f$ is a nonzero divisor, and
\item $A \to B/fB$ is flat.
\end{enumerate}
Then for every ideal $I \subset A$ the map
$f : B/IB \to B/IB$ is injective.
\end{lemma}

\begin{proof}
Note that $IB = I \otimes_A B$ and $I(B/fB) = I\otimes_A B/fB$
by the flatness of $B$ and $B/fB$ over $A$.
In particular $IB/fIB \cong I \otimes_A B/fB$ maps injectively
into $B/fB$. Hence the result follows from the snake lemma applied
to the diagram
$$
\xymatrix{
0 \ar[r] &
I \otimes_A B \ar[r] \ar[d]^f &
B \ar[r] \ar[d]^f &
B/IB \ar[r] \ar[d]^f &
0 \\
0 \ar[r] &
I \otimes_A B \ar[r] &
B \ar[r] &
B/IB \ar[r] &
0
}
$$
with exact rows.
\end{proof}








\section{Setup}
\label{section-setup}

\noindent
We will throughout work over a locally Noetherian universally
catenary base $S$ endowed with a dimension function $\delta$.
Allthough it is likely possible to generalize (parts of) the
discussion in the chapter, it seems that this is a good first
approximation. We usually do not assume our schemes are
separated or quasi-compact. Many interesting algebraic stacks
are non-separated and/or non-quasi-compact and this is a good
case study to see how to develop a reasonable theory for those as well.
In order to reference these hypotheses we give it a number.

\begin{situation}
\label{situation-setup}
Here $S$ is a locally Noetherian, and universally catenary scheme.
Moreover, we assume $S$ is endowed with a dimension function
$\delta : S \longrightarrow \mathbf{Z}$.
\end{situation}

\noindent
See Morphisms, Definition \ref{morphisms-definition-universally-catenary}
for the notion of a universally catenary scheme, and see
Topology, Definition \ref{topology-definition-dimension-function}
for the notion of a dimension function. Recall that any locally
Noetherian catenary scheme locally has a dimension function, see
Properties, Lemma \ref{properties-lemma-catenary-dimension-function}.
Moreover, there are lots of schemes which are universally catenary,
see Morphisms, Lemma \ref{morphisms-lemma-ubiquity-uc}.

\medskip\noindent
Let $(S, \delta)$ be as in Situation \ref{situation-setup}.
Any scheme $X$ locally of finite type over $S$ is locally Noetherian
and catenary. In fact, $X$ has a canonical dimension function
$$
\delta = \delta_{X/S} : X \longrightarrow \mathbf{Z}
$$
associated to $(f : X \to S, \delta)$ given by the rule
$\delta_{X/S}(x) = \delta(f(x)) + \text{trdeg}_{\kappa(f(x))}\kappa(x)$.
See Morphisms, Lemma \ref{morphisms-lemma-dimension-function-propagates}.
Moreover, if $h : X \to Y$ is a morphism of schemes locally of finite
type over $S$, and $x \in X$, $y = h(x)$,
then obviously
$\delta_{X/S}(x) = \delta_{Y/S}(y) + \text{trdeg}_{\kappa(y)}\kappa(x)$.
We will freely use this function and its properties in the following.

\medskip\noindent
Here are the basic examples of setups as above.
In fact, the main interest lies in the case where the base
is the spectrum of a field, or the case where the base
is the spectrum of a Dedekind ring (e.g.\ $\mathbf{Z}$,
or a discrete valuation ring).

\begin{example}
\label{example-field}
Here $S = \text{Spec}(k)$ and $k$ is a field.
We set $\delta(pt) = 0$ where $pt$ indicates the unique point of $S$.
The pair $(S, \delta)$ is an example of a situation as in
Situation \ref{situation-setup} by
Morphisms, Lemma \ref{morphisms-lemma-ubiquity-uc}.
\end{example}

\begin{example}
\label{example-domain-dimension-1}
Here $S = \text{Spec}(A)$, where $A$ is a Noetherian domain
of dimension $1$.
For example we could consider $A = \mathbf{Z}$.
We set $\delta(\mathfrak p) = 0$ if
$\mathfrak p$ is a maximal ideal and $\delta(\mathfrak p) = 1$
if $\mathfrak p = (0)$ corresponds to the generic point.
This is an example of Situation \ref{situation-setup} by
Morphisms, Lemma \ref{morphisms-lemma-ubiquity-uc}.
\end{example}

\noindent
In good cases $\delta$ corresponds to the dimension function.

\begin{lemma}
\label{lemma-delta-is-dimension}
Let $(S, \delta)$ be as in Situation \ref{situation-setup}.
Assume in addition $S$ is a Jacobson scheme, and $\delta(s) = 0$ for every
closed point $s$ of $S$. Let $X$ be locally of finite type over $S$.
Let $Z \subset X$ be an integral closed subscheme and let
$\xi \in Z$ be its generic point. The following integers are the same:
\begin{enumerate}
\item $\delta_{X/S}(\xi)$,
\item $\dim(Z)$, and
\item $\dim(\mathcal{O}_{Z, z})$ where $z$ is a closed point of $Z$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $X \to S$, $\xi \in Z \subset X$ be as in the lemma.
Since $X$ is locally of finite type over $S$ we see that
$X$ is Jacobson, see
Morphisms, Lemma \ref{morphisms-lemma-Jacobson-universally-Jacobson}.
Hence closed points of $X$ are dense in every closed subset of $Z$
and map to closed points of $S$. Hence given any chain
of irreducible closed subsets of $Z$ we can end it with a closed point of $Z$.
It follows that $\dim(Z) = \text{sup}_z(\dim(\mathcal{O}_{Z, z})$
(see Properties, Lemma \ref{properties-lemma-codimension-local-ring})
where $z \in Z$ runs over the closed points of $Z$.
Note that $\dim(\mathcal{O}_{Z, z}) = \delta(\xi) - \delta(z))$
by the properties of a dimension function.
For each closed $z \in Z$ the field extension
$\kappa(z) \supset \kappa(f(z))$ is finite, see Morphisms,
Lemma \ref{morphisms-lemma-jacobson-finite-type-points}.
Hence $\delta_{X/S}(z) = \delta(f(z)) = 0$ for $z \in Z$ closed.
It follows that all three integers are equal.
\end{proof}

\noindent
In the situation of the lemma above the
value of $\delta$ at the generic point of a closed irreducible subset
is the dimension of the irreducible closed subset.
However, in general we cannot expect the equality to hold.
For example if $S = \text{Spec}(\mathbf{C}[[t]])$ and
$X = \text{Spec}(\mathbf{C}((t)))$ then we would get
$\delta(x) = 1$ for the unique point of $X$, but $\dim(X) = 0$.
Still we want to think of $\delta_{X/S}$ as giving the
dimension of the irreducible closed subschemes. Thus we introduce
the following terminology.

\begin{definition}
\label{definition-delta-dimension}
Let $(S, \delta)$ as in Sitation \ref{situation-setup}.
For any scheme $X$ locally of finite type over $S$
and any irreducible closed subset $Z \subset X$ we define
$$
\dim_\delta(Z) = \delta(\xi)
$$
where $\xi \in Z$ is the generic point of $Z$.
We will call this the {\it $\delta$-dimension of $Z$}.
If $Z$ is a closed subscheme of $X$, then we define
$\dim_\delta(Z)$ as the supremum of the $\delta$-dimensions
of its irreducible components.
\end{definition}







\section{Cycles}
\label{section-cycles}

\noindent
Since we are not assuming our schemes are quasi-compact we have
to be a little careful when defining cycles. We have to allow
infinite sums because a rational function may have infinitely many
poles for example. In any case, if $X$ is quasi-compact then a
cycle is a finite sum as usual.

\begin{definition}
\label{definition-cycles}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $k \in \mathbf{Z}$.
\begin{enumerate}
\item A collection of closed subschemes $\{Z_i\}_{i \in I}$ of $X$
is said to be {\it locally finite} if for every quasi-compact open
$U \subset X$ the set
$$
\# \{i\in I \mid Z_i \cap U \not = \emptyset\}
$$
is finite.
\item A {\it cycle on $X$} is a formal sum
$$
\alpha = \sum n_Z [Z]
$$
where the sum is over integral closed subschemes $Z \subset X$,
each $n_Z \in \mathbf{Z}$, and the collection
$\{Z; n_Z \not = 0\}$ is locally finite.
\item A {\it $k$-cycle}, on $X$ is
a cycle
$$
\alpha = \sum n_Z [Z]
$$
where $n_Z \not = 0 \Rightarrow \dim_\delta(Z) = k$.
\item The abelian group of all $k$-cycles on $X$ is denoted $Z_k(X)$.
\end{enumerate}
\end{definition}

\noindent
In other words, a $k$-cycle on $X$
is a locally finite formal $\mathbf{Z}$-linear
combination of integral closed subschemes of $\delta$-dimension $k$.
Addition of $k$-cycles $\alpha = \sum n_Z[Z]$ and 
$\beta = \sum m_Z[Z]$ is given by
$$
\alpha + \beta = \sum (n_Z + m_Z)[Z],
$$
i.e., by adding the coefficients.




\section{Cycle associated to a closed subscheme}
\label{section-cycle-of-closed-subscheme}

\begin{lemma}
\label{lemma-multiplicity-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $Z \subset X$ be a closed subscheme.
\begin{enumerate}
\item The collection of irreducible components of $Z$
is locally finite.
\item Let $Z' \subset Z$ be an irreducible component and
let $\xi \in Z'$ be its generic point.
Then
$$
\text{length}_{\mathcal{O}_{X, \xi}} \mathcal{O}_{Z, \xi} < \infty
$$
\item If $\dim_\delta(Z) \leq k$ and $\xi \in Z$ with
$\delta(\xi) = k$, then $\xi$ is a generic point of an
irreducible component of $Z$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $U \subset X$ be a quasi-compact open subscheme.
Then $U$ is a Noetherian scheme, and hence has a Noetherian
underlying topological space
(Properties, Lemma \ref{properties-lemma-Noetherian-topology}).
Hence every subspace is Noetherian and
has finitely many irreducible components
(see Topology, Lemma \ref{topology-lemma-Noetherian}).
This proves (1).

\medskip\noindent
Let $Z' \subset Z$, $\xi \in Z'$ be as in (2).
Then $\dim(\mathcal{O}_{Z, \xi}) = 0$ (for example by
Properties, Lemma \ref{properties-lemma-codimension-local-ring}).
Hence $\mathcal{O}_{Z, \xi}$ is Noetherian
local ring of dimension zero, and hence has finite length over
itself (see
Algebra, Proposition \ref{algebra-proposition-dimension-zero-ring}).
Hence, it also has finite length over $\mathcal{O}_{X, \xi}$, see
Lemma \ref{lemma-pushdown-module}.

\medskip\noindent
Assume $\xi \in Z$ and $\delta(\xi) = k$.
Consider the closure $Z' = \overline{\{\xi\}}$. It is an irreducible
closed subscheme with $\dim_\delta(Z') = k$ by definition.
Since $\dim_\delta(Z) = k$ it must be an irreducible component
of $Z$. Hence we see (3) holds.
\end{proof}

\begin{definition}
\label{definition-cycle-associated-to-closed-subscheme}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $Z \subset X$ be a closed subscheme.
\begin{enumerate}
\item For any irreducible component $Z' \subset Z$ with generic point $\xi$
the integer
$m_{Z', Z} = \text{length}_{\mathcal{O}_{X, \xi}} \mathcal{O}_{Z, \xi}$
(Lemma \ref{lemma-multiplicity-finite})
is called the {\it multiplicity of $Z'$ in $Z$}.
\item Assume $\dim_\delta(Z) \leq k$.
The {\it $k$-cycle associated to $Z$} is
$$
[Z]_k
=
\sum m_{Z', Z}[Z']
$$
where the sum is over the irreducible components of $Z$
of $\delta$-dimension $k$. (This is a $k$-cycle by
Lemma \ref{lemma-multiplicity-finite}.)
\end{enumerate}
\end{definition}

\noindent
It is important to note that we only define $[Z]_k$ if the $\delta$-dimension
of $Z$ does not exceed $k$. In other words, by convention, if we write
$[Z]_k$ then this implies that $\dim_\delta(Z) \leq k$.



\section{Cycle associated to a coherent sheaf}
\label{section-cycle-of-coherent-sheaf}



\begin{lemma}
\label{lemma-length-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module.
\begin{enumerate}
\item The collection of irreducible components of the support of
$\mathcal{F}$ is locally finite.
\item Let $Z' \subset \text{Supp}(\mathcal{F})$
be an irreducible component and
let $\xi \in Z'$ be its generic point.
Then
$$
\text{length}_{\mathcal{O}_{X, \xi}} \mathcal{F}_\xi < \infty
$$
\item If $\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$
and $\xi \in Z$ with $\delta(\xi) = k$, then $\xi$ is a
generic point of an irreducible component of $\text{Supp}(\mathcal{F})$.
\end{enumerate}
\end{lemma}

\begin{proof}
By Coherent, Lemma \ref{coherent-lemma-coherent-support-closed}
the support $Z$ of $\mathcal{F}$ is a closed subset of $X$.
We may think of $Z$ as a reduced closed subscheme of $X$
(Schemes, Lemma \ref{schemes-lemma-reduced-closed-subscheme}).
Hence (1) and (3) follow immediately by applying
Lemma \ref{lemma-multiplicity-finite} to $Z \subset X$.

\medskip\noindent
Let $\xi \in Z'$ be as in (2). In this case for any specialization
$\xi' \leadsto \xi$ in $X$ we have $\mathcal{F}_{\xi'} = 0$.
Recall that the non-maximal primes of $\mathcal{O}_{X, \xi}$ correspond
to the points of $X$ specializing to $\xi$
(Schemes, Lemma \ref{schemes-lemma-specialize-points}).
Hence $\mathcal{F}_\xi$ is a finite $\mathcal{O}_{X, \xi}$-module
whose support is $\{\mathfrak m_\xi\}$. Hence it has finite length
by Algebra, Lemma \ref{algebra-lemma-support-point}.
\end{proof}

\begin{definition}
\label{definition-cycle-associated-to-coherent-sheaf}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module.
\begin{enumerate}
\item For any irreducible component $Z' \subset \text{Supp}(\mathcal{F})$
with generic point $\xi$ the integer
$m_{Z', \mathcal{F}} = \text{length}_{\mathcal{O}_{X, \xi}} \mathcal{F}_\xi$
(Lemma \ref{lemma-length-finite})
is called the {\it multiplicity of $Z'$ in $\mathcal{F}$}.
\item Assume $\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$.
The {\it $k$-cycle associated to $\mathcal{F}$} is
$$
[\mathcal{F}]_k
=
\sum m_{Z', \mathcal{F}}[Z']
$$
where the sum is over the irreducible components of
$\text{Supp}(\mathcal{F})$ of $\delta$-dimension $k$.
(This is a $k$-cycle by Lemma \ref{lemma-length-finite}.)
\end{enumerate}
\end{definition}

\noindent
It is important to note that we only define $[\mathcal{F}]_k$
if $\mathcal{F}$ is coherent and the $\delta$-dimension
of $\text{Supp}(\mathcal{F})$ does not exceed $k$. In other words,
by convention, if we write $[\mathcal{F}]_k$ then this implies that
$\mathcal{F}$ is coherent on $X$ and
$\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$.

\begin{lemma}
\label{lemma-cycle-closed-coherent}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $Z \subset X$ be a closed subscheme.
If $\dim_\delta(Z) \leq k$, then $[Z]_k = [{\mathcal O}_Z]_k$.
\end{lemma}

\begin{proof}
This is because in this case the multiplicities $m_{Z', Z}$ and
$m_{Z', \mathcal{O}_Z}$ agree by definition.
\end{proof}





\section{Degrees of maps between integral schemes}
\label{section-degrees}

\noindent
In this section we characterize maps between schemes
which are locally of finite type and which are ``generically finite''
in some sense.


\begin{lemma}
\label{lemma-generically-finite-algebra}
Let $R \to S$ be a ring map of finite type.
Let $\mathfrak p \subset R$ be a minimal prime.
Assume that there are at most finitely many primes of $S$
lying over $\mathfrak p$. Then there exists a
$g \in R$, $g \not \in \mathfrak p$ such that the
ring map $R_g \to A_g$ is finite.
\end{lemma}

\begin{proof}
Let $x_1, \ldots, x_n$ be generators of $A$ over $R$.
Since $\mathfrak p$ is a minimal prime we have that
$\mathfrak pR_{\mathfrak p}$ is a locally nilpotent ideal
(see Algebra, Lemma \ref{algebra-lemma-minimal-prime-reduced-ring}).
Hence also $\mathfrak pA_{\mathfrak p}$ is a locally nilpotent ideal.
By assumption the finite type $\kappa(\mathfrak p)$-algebra
$A_{\mathfrak p}/\mathfrak pA_{\mathfrak p}$ has finitely many
primes. Hence (for example by
Algebra, Lemma \ref{algebra-lemma-Noether-normalization})
$\kappa(\mathfrak p) \to A_{\mathfrak p}/\mathfrak pA_{\mathfrak p}$
is a finite ring map. Thus we may find monic polynomials
$P_i \in R_{\mathfrak p}[X]$ such that $P_i(x_i)$ maps to zero
in $A_{\mathfrak p}/\mathfrak pA_{\mathfrak p}$. By what we said
above there exist $e_i \geq 1$ such that $P(x_i)^{e_i} = 0$
in $A_{\mathfrak p}$. Let $g_1 \in R$, $g_1 \not \in \mathfrak p$
be an element such that $P_i \in R[1/g_1]$ for all $i$.
Next, let $g_2 \in R$, $g_2 \not \in \mathfrak p$ be an element
such that $P(x_i) = 0$ in $A_{g_1g_2}$. Setting $g = g_1g_2$
we win.
\end{proof}


\begin{lemma}
\label{lemma-generically-finite}
Let $X$, $Y$ be schemes.
Let $f : X \to Y$ be locally of finite type.
Let $\eta \in Y$ be a generic point of an irreducible component
of $Y$. The following are equivalent:
\begin{enumerate}
\item the set $f^{-1}(\{\eta\})$ is finite,
\item there exist affine opens $U_i \subset X$, $i = 1, \ldots, n$
and $V \subset Y$ with $f(U_i) \subset V$,
$\eta \in V$ and $f^{-1}(\{\eta\}) \subset \bigcup U_i$
such that each $f|_{U_i} : U_i \to V$ is finite.
\end{enumerate}
If $f$ is quasi-separated, then these are also equivalent to
\begin{enumerate}
\item[(3)] there exist affine opens $V \subset Y$,
and $U \subset X$ with $f(U) \subset V$,
$\eta \in V$ and $f^{-1}(\{\eta\}) \subset U$
such that $f|_U : U \to V$ is finite.
\end{enumerate}
If $f$ is separated, or if $f$ is quasi-compact, then these are
also equivalent to
\begin{enumerate}
\item[(3)] there exists an affine open $V \subset Y$, $\eta \in V$
such that $f^{-1}(V) \to V$ is finite.
\end{enumerate}
\end{lemma}

\begin{proof}
It is clear that (2) implies (1). Assume that
$f^{-1}(\{\eta\}) = \{\xi_1, \ldots, \xi_n\}$ is finite.
We may replace $Y$ by an affine neighbourhood of $\eta$,
and hence we may assume that $Y$ is affine, say $Y = \text{Spec}(R)$.
Choose affine opens $U_i \subset$ with $\xi_i \in U_i$.



\end{proof}



\begin{lemma}
\label{lemma-finite-degree}
Let $X$, $Y$ be integral schemes.
Let $f : X \to Y$ be locally of finite type.
Assume $f$ is dominant.
The following are equivalent:
\begin{enumerate}
\item the extension $R(Y) \subset R(X)$ has
transcendence degree $0$,
\item the extension $R(Y) \subset R(X)$ is finite,
\item there exist nonempty affine opens $U \subset X$
and $V \subset Y$ such that $f(U) \subset V$
and $f|_U : U \to V$ is finite, and
\item the generic point of $X$ is the only point of $X$ mapping to
the generic point of $Y$.
\end{enumerate}
If $f$ is separated, or if $f$ is quasi-compact, then these are
also equivalent to
\begin{enumerate}
\item[(5)] there exists a nonempty affine open $V \subset Y$ such
that $f^{-1}(V) \to V$ is finite.
\end{enumerate}
\end{lemma}

\begin{proof}
Choose any affine opens $\text{Spec}(A) = U \subset X$
and $\text{Spec}(R) = V \subset Y$ such that $f(U) \subset V$.
Then $R$ and $A$ are domains by definition. The ring map
$R \to A$ is of finite type
(Morphisms, Lemma \ref{morphisms-lemma-locally-finite-type-characterize}).
Let $K = f.f.(R) = R(Y)$ and $L = f.f.(A) = R(X)$. Then $K \subset L$
is a finitely generated field extension. Hence we see that
(1) is equivalent to (2).

\medskip\noindent
Suppose (2) holds. Let $x_1, \ldots, x_n \in A$ be generators
of $A$ over $R$. By assumption there exist nonzero polynomials
$P_i(X) \in R[X]$ such that $P_i(x_i) = 0$. Let $f_i \in R$ be the
leading coefficient of $P_i$. Then we conclude that
$R_{f_1 \ldots f_n} \to A_{f_1 \ldots f_n}$ is finite, i.e., (3) holds.
Note that (3) implies (2). So now we see that (1), (2) and (3) are all
equivalent.

\medskip\noindent
Let $\eta$ be the generic point of $X$, and let $\eta' \in Y$ be the
generic point of $Y$. Assume (4). Then
$\dim_\eta(X_{\eta'}) = 0$ and we see that $R(X) = \kappa(\eta)$ has
transcendence degree $0$ over $R(Y) = \kappa(\eta')$ by
Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-at-a-point}.
In other words (1) holds. Assume the equivalent conditions (1), (2) and
(3). Suppose that $x \in X$ is a point mapping to $\eta'$.
As $x$ is a specialization of $\eta$,
this gives inclusions $R(Y) \subset \mathcal{O}_{X, x} \subset R(X)$,
which implies $\mathcal{O}_{X, x}$ is a field, see
Algebra, Lemma \ref{algebra-lemma-integral-over-field}.
Hence $x = \eta$. Thus we see that (1) -- (3)
are all equivalent.

\medskip\noindent
Assume $U, V$ as in (3) and assume $f$ is separated.
Then $U \to f^{-1}(V)$ is a morphism from a scheme proper over $V$
(Morphisms, Lemma \ref{morphisms-lemma-finite-proper})
into a scheme separated over $V$.
Hence $U \subset f^{-1}(V)$ is closed
(Morphisms, Lemma \ref{morphisms-lemma-image-proper-scheme-closed}).
Since $X$ is irreducible we conclude $U = f^{-1}(V)$. This
proves (5).

\medskip\noindent
Assume $f$ is quasi-compact. Let $U, V$ be as in (3).
Write $f^{-1}(V) = U_1 \cup \ldots \cup U_n$ as a finite union
of affines. Consider the proper closed set $Z_i = U_i \setminus U$.
Since $Z_i$ does not contain the generic point of $X$ we see that
$f : Z_i \to Y$ is not dominant (use property (4) and
Morphisms, Lemma \ref{morphisms-lemma-quasi-compact-dominant}).
Hence after shrinking $V$ we may assume that $U_i \subset U$
which implies that (5) holds.
\end{proof}

\begin{definition}
\label{definition-degree}
Let $X$ and $Y$ be integral schemes.
Let $f : X \to Y$ be locally of finite type and dominant.
Assume $[R(X) : R(Y)] < \infty$, or any other of the equivalent
conditions (1) -- (4) of Lemma \ref{lemma-finite-degree}.
Then the positive integer
$$
\text{deg}(X/Y) = [R(X) : R(Y)]
$$
is called the {\it degree of $X$ over $Y$}.
\end{definition}

\begin{lemma}
\label{lemma-degree-composition}
Let $X$, $Y$, $Z$ be integral schemes.
Let $f : X \to Y$ and $g : Y \to Z$ be dominant morphisms locally
of finite type. Assume that $[R(X) : R(Y)] < \infty$ and
$[R(Y) : R(Z)] < \infty$. Then
$$
\deg(X/Z) = \deg(X/Y) \deg(Y/Z).
$$
\end{lemma}

\begin{proof}
This comes from the multiplicativity of degrees in towers
of finite extensions of fields.
\end{proof}




\section{Preparation for proper pushforward}
\label{section-preparation-pushforward}

\begin{lemma}
\label{lemma-equal-dimension}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $X$, $Y$ integral and $\dim_\delta(X) = \dim_\delta(Y)$.
Then either $f(X)$ is contained in a proper closed subscheme
of $Y$, or $f$ is dominant and the extension of function fields
$R(Y) \subset R(X)$ is finite.
\end{lemma}

\begin{proof}
The closure $\overline{f(X)} \subset Y$ is irreducible as $X$
is irreducible. If $\overline{f(X)} \not = Y$, then we are done.
If $\overline{f(X)} = Y$, then $f$ is dominant and by
Morphisms,
Lemma \ref{morphisms-lemma-dominant-finite-number-irreducible-components}
we see that the generic point $\eta_Y$ of $Y$ is in the image of $f$.
Of course this implies that $f(\eta_X) = \eta_Y$, where $\eta_X \in X$
is the generic point of $X$. Since $\delta(\eta_X) = \delta(\eta_Y)$
we see that $R(Y) = \kappa(\eta_Y) \subset \kappa(\eta_X) = R(X)$
is an extension of transcendence degree $0$.
Hence Lemma \ref{lemma-finite-degree} applies.
\end{proof}

\begin{lemma}
\label{lemma-quasi-compact-locally-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $f$ is quasi-compact, and $\{Z_i\}_{i \in I}$ is a locally
finite collection of closed subsets of $X$.
Then $\{\overline{f(Z_i)}\}_{i \in I}$ is a locally finite
collection of closed subsets of $Y$.
\end{lemma}

\begin{proof}
Let $V \subset Y$ be a quasi-compact open subset.
Since $f$ is quasi-compact the open $f^{-1}(V)$ is
quasi-compact. Hence the set
$\{i \in I \mid Z_i \cap f^{-1}(V) \not = \emptyset \}$
is finite by assumption. Since this is the same
as the set
$\{i \in I \mid f(Z_i) \cap V \not = \emptyset \}$
we win.
\end{proof}









\section{Proper pushforward}
\label{section-proper-pushforward}

\begin{definition}
\label{definition-proper-pushforward}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $f$ is proper.
\begin{enumerate}
\item Let $Z \subset X$ be an integral closed subscheme
with $\dim_\delta(Z) = k$. We define
$$
f_*[Z] =
\left\{
\begin{matrix}
0 & \text{if} & \dim_\delta(f(Z))< k, \\
\deg(Z/f(Z)) [f(Z)] & \text{if} & \dim_\delta(f(Z)) = k.
\end{matrix}
\right.
$$
Here we think of $f(Z) \subset Y$ as an integral closed subscheme.
The degree of $Z$ over $f(Z)$ is finite if
$\dim_\delta(f(Z)) = \dim_\delta(Z)$
by Lemma \ref{lemma-equal-dimension}.
\item Let $\alpha = \sum n_Z [Z]$ be a $k$-cycle on $X$. The
{\it pushforward} of $\alpha$ as the sum
$$
f_* \alpha = \sum n_Z f_*[Z]
$$
where each $f_*[Z]$ is defined as above. The sum is locally finite
by Lemma \ref{lemma-quasi-compact-locally-finite} above.
\end{enumerate}
\end{definition}

\noindent
By definition the proper pushforward of cycles
$$
f_* : Z_k(X) \longrightarrow Z_k(Y)
$$
is a homomorphism of abelian groups. It turns $X \mapsto Z_k(X)$
into a covariant functor on the category of schemes locally of
finite type over $S$ with morphisms equal to proper morphisms.

\begin{lemma}
\label{lemma-compose-pushforward}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$, and $Z$ be locally of finite type over $S$.
Let $f : X \to Y$ and $g : Y \to Z$ be proper morphisms.
Then $g_* \circ f_* = (g \circ f)_*$ as maps $Z_k(X) \to Z_k(Z)$.
\end{lemma}

\begin{proof}
Let $W \subset X$ be an integral closed subscheme of dimension $k$.
Consider $W' = f(Z) \subset Y$ and $W'' = g(f(Z)) \subset Z$.
Since $f$, $g$ are proper we see that $W'$ (resp.\ $W''$) is
an integral closed subscheme of $Y$ (resp.\ $Z$).
We have to show that $g_*(f_*[W]) = (f \circ g)_*[W]$.
If $\dim_\delta(W'') < k$, then both sides are zero.
If $\dim_\delta(W'') = k$, then we see the induced morphisms
$$
W \longrightarrow
W' \longrightarrow
W''
$$
both satisfy the hypotheses of Lemma \ref{lemma-equal-dimension}. Hence
$$
g_*(f_*[W]) = \deg(W/W')\deg(W'/W'')[W''],
\quad
(f \circ g)_*[W] = \deg(W/W'')[W''].
$$
Then we can apply Lemma \ref{lemma-degree-composition} to conclude.
\end{proof}

\begin{lemma}
\label{lemma-cycle-push-sheaf}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $f$ is proper.
\begin{enumerate}
\item Let $Z \subset X$ be a closed subscheme with $\dim_\delta(Z) \leq k$.
Then
$$
f_*[Z]_k = [f_*{\mathcal O}_Z]_k.
$$
\item Let $\mathcal{F}$ be a coherent sheaf on $X$ such that
$\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$. Then
$$
f_*[\mathcal{F}]_k = [f_*{\mathcal F}]_k.
$$
\end{enumerate}
Note that the statement makes sense since $f_*\mathcal{F}$ and
$f_*\mathcal{O}_Z$ are coherent $\mathcal{O}_Y$-modules by
Coherent, Lemma \ref{coherent-lemma-proper-pushforward-coherent}.
\end{lemma}

\begin{proof}
We first prove (2).
Let $\mathcal{F}$ be a coherent sheaf on $X$ such that
$\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$.
By Coherent, Lemma \ref{coherent-lemma-coherent-support-closed}
there exists a closed subscheme $i : Z \to X$ and a coherent
$\mathcal{O}_Z$-module $\mathcal{G}$ such that
$i_*\mathcal{G} \cong \mathcal{F}$ and such that the support
of $\mathcal{F}$ is $Z$. Hence we can identify the generic points
of irreducible components of $Z$ and $\text{Supp}(\mathcal{F})$
and for each such point $\xi$ we have $\mathcal{F}_\xi \cong \mathcal{G}_\xi$.
Hence it is clear that $i_*[\mathcal{G}]_k = [\mathcal{F}]_k$.
(In other words, part (2) of the lemma holds in the special
case of closed immersions.)
Since we have $(f \circ i)_* = f_* \circ i_*$ by
Lemma \ref{lemma-compose-pushforward} we can replace $X$ by $Z$ and
$f$ by $f \circ i$, and we may assume that $\dim_\delta(X) \leq k$.

\medskip\noindent
Assume $\dim_\delta(X) \leq k$ and that $\mathcal{F}$ is
a coherent sheaf on $X$. Consider an integral closed subscheme $Z \subset Y$
with $\dim_\delta(Z) = k$. Let $\xi \in Z$ be the generic point.



Write
$$
f_*[\mathcal{F}]_k = \sum n_Z[Z],
\quad
\text{and}
\quad
[f_*\mathcal{F}]_k = \sum m_Z[Z].
$$
Let us first show that $n_Z > 0 \Leftrightarrow m_Z > 0$.
Namely, if $n_Z > 0$, then there exists an integral closed
subscheme $Z' \subset X$ with $f(Z') = Z$ such that
$\mathcal{F}_{\xi'} \not = 0$.









Omitted. This eventually comes down to the algebra
Lemma \ref{lemma-pushdown-module}.
\end{proof}



















\section{Morphisms of given relative dimension}
\label{section-relative-dimension}

\noindent
In order to be able to speak comfortably about flat morphisms of a
given relative dimension we introduce the following notion.

\begin{definition}
\label{definition-relative-dimension-d}
Let $f : X \to S$ be a morphism of schemes.
Assume $f$ is locally of finite type.
We say $f$ is of {\it relative dimension $d$} if
all nonempty fibres $X_s$ are equidimensional of dimension $d$.
\end{definition}

\noindent
This is not a particularly well behaved notion, but it works well
in a number of situations.

\begin{lemma}
\label{lemma-base-change-relative-dimension-d}
Let $f : X \to S$ be a locally finite type morphism.
If $f$ has relative dimension $d$, then so does any base
change of $f$.
\end{lemma}

\begin{proof}
This is immediate from
Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-after-base-change}.
\end{proof}

\begin{lemma}
\label{lemma-composition-relative-dimension-d}
Let $f : X \to Y$, $g : Y \to Z$ be locally of finite type.
Assume
\begin{enumerate}
\item $f$ has relative dimension $d$,
\item $g$ has relative dimension $e$, and
\item $f$ is flat.
\end{enumerate}
Then $g \circ f$ has relative dimension $d + e$.
\end{lemma}

\begin{proof}
This is immediate from
Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-at-a-point-additive}.
\end{proof}

\noindent
In general it is not possible to decompose a morphism
into its pieces where the relative dimension is a given
one. However, it is possible if the morphism has Cohen-Macaulay
fibres and is flat (plus of finite presentation).

\begin{lemma}
\label{lemma-flat-finite-presentation-CM-fibres-relative-dimension}
Let $f : X \to S$ be a morphism of schemes.
Assume that
\begin{enumerate}
\item $f$ is flat,
\item $f$ is locally of finite presentation, and
\item for every $s \in S$ the fibre $X_s$ is Cohen-Macaulay
(see Properties, Definition \ref{properties-definition-Cohen-Macaulay})
\end{enumerate}
Then there exist open and closed subschemes $X_d \subset X$
such that $X = \coprod_{d \geq 0} X_d$ and $f|_{X_d} : X_d \to S$
has relative dimension $d$.
\end{lemma}

\begin{proof}
This is immediate from
Algebra,
Lemma
\ref{algebra-lemma-relative-dimension-CM}.
\end{proof}







\section{Preparation for flat pullback}
\label{section-preparation-flat-pullback}


\begin{lemma}
\label{lemma-inverse-image-locally-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $\{Z_i\}_{i \in I}$ is a locally
finite collection of closed subsets of $Y$.
Then $\{f^{-1}(Z_i)\}_{i \in I}$ is a locally finite
collection of closed subsets of $Y$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-flat-inverse-image-dimension}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $f$ is flat of relative dimension $r$, see
Definition \ref{definition-relative-dimension-d}.
For any closed subset $Z \subset Y$ we have
$$
\dim_\delta(f^{-1}(Z)) = \dim_\delta(Z) + r.
$$
If $Z$ is irreducible and $Z' \subset f^{-1}(Z)$ is an irreducible
component, then $Z'$ dominates $Z$ and
$\dim_\delta(Z') = \dim_\delta(Z) + r$.
\end{lemma}

\begin{proof}
It suffices to prove the final statement.
We may replace $Y$ by the integral closed subscheme $Z$ and
$X$ by the scheme theoretic inverse image $f^{-1}(Z) = Z \times_Y X$.
Hence we may assume $Z = Y$ is integral and $f$ is a flat morphism
of relative dimension $r$. Since $Y$ is locally Noetherian the
morphism $f$ which is locally of finite type,
is actually locally of finite presentation. Hence
Morphisms, Lemma \ref{morphisms-lemma-fppf-open}
applies and we see that $f$ is open.
Let $\xi \in X$ be a generic point of an irreducible component
of $X$. By the openness of $f$ we see that $f(\xi)$ is the
generic point $\eta$ of $Z = Y$. Note that $\dim_\xi(X_\eta) = r$
by assumption that $f$ has relative dimension $r$. On the other
hand, since $\xi$ is a generic point of $X$ we see that
$\mathcal{O}_{X, \xi} = \mathcal{O}_{X_\eta, \xi}$ has only one
prime ideal and hence has dimension $0$. Thus by
Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-at-a-point}
we conclude that the transcendence
degree of $\kappa(\xi)$ over $\kappa(\eta)$ is $r$.
In other words, $\delta(\xi) = \delta(\eta) + r$ as desired.
\end{proof}




\section{Flat pullback}
\label{section-flat-pullback}

\noindent
In the following we use $f^{-1}(Z)$ to denote the
{\it scheme theoretic inverse image} of a closed subscheme
$Z \subset Y$ for a morphism of schemes $f : X \to Y$.
We recall that the scheme theoretic inverse image is the fibre product
$$
\xymatrix{
f^{-1}(Z) \ar[r] \ar[d] & X \ar[d] \\
Z \ar[r] & Y
}
$$
and it is also the closed subscheme of $X$ cut out by the
quasi-coherent sheaf of ideals $f^{-1}(\mathcal{I})\mathcal{O}_X$, if
$\mathcal{I} \subset \mathcal{O}_Y$ is the quasi-coherent sheaf of ideals
corresponding to $Z$ in $Y$.
(This is discussed in
Schemes, Section \ref{schemes-section-closed-immersion} and
Lemma \ref{schemes-lemma-fibre-product-immersion}
and Definition \ref{schemes-definition-inverse-image-closed-subscheme}.)

\begin{definition}
\label{definition-flat-pullback}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a morphism.
Assume $f$ is flat of relative dimension $r$.
\begin{enumerate}
\item Let $Z \subset Y$ be an integral closed subscheme of
$\delta$-dimension $k$. We define $f^*[Z]$ to be the
$(k+r)$-cycle on $X$ to the scheme theoretic inverse image
$$
f^*[Z] = [f^{-1}(Z)]_{k+r}.
$$
This makes sense since $\dim_\delta(f^{-1}(Z)) = k + r$
by Lemma \ref{lemma-flat-inverse-image-dimension}.
\item Let $\alpha = \sum n_i [Z_i]$ be
a $k$-cycle on $Y$. The {\it flat pullback of $\alpha$ by $f$}
is the sum
$$
f^* \alpha = \sum n_i f^*[Z_i]
$$
where each $f^*[Z_i]$ is defined as above.
\item We denote $f^* : Z_k(Y) \to Z_{k + r}(Y)$ the map of abelian
groups so obtained.
\end{enumerate}
\end{definition}

\noindent
An open immersion is flat. This is an important though trivial special
case of a flat morphism. If $U \subset X$ is open then sometimes the
pullback by $j : U \to X$ of a cycle is called the {\it restriction} of the
cycle to $U$. Note that in this case the maps
$$
j^* : Z_k(X) \longrightarrow Z_k(U)
$$
are all {\it surjective}. The reason is that given any integral closed
subscheme $Z' \subset U$, we can take the closure of $Z$ of $Z'$ in $X$
and think of it as a reduced closed subscheme of $X$ (see
Schemes, Lemma \ref{schemes-lemma-reduced-closed-subscheme}).
And clearly $Z \cap U = Z'$, in other words
$j^*[Z] = [Z']$ whence the surjectivity. In fact a little bit more
is true.

\begin{lemma}
\label{lemma-exact-sequence-open}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $U \subset X$ be an open subscheme, and denote
$i : Y = X \setminus U \to X$ as a reduced closed subscheme of $X$.
For every $k \in \mathbf{Z}$ the sequence
$$
\xymatrix{
Z_k(Y) \ar[r]^{i_*} & Z_k(X) \ar[r]^{j_*} & Z_k(U) \ar[r] & 0
}
$$
is an exact complex of abelian groups.
\end{lemma}

\begin{proof}
By the description above the basis elements $[Z]$ of the free
abelian group $Z_k(X)$ map either to (distinct) basis elements
$[Z \cap U]$ or to zero if $Z \subset Y$. Hence the lemma is clear.
\end{proof}

\begin{lemma}
\label{lemma-compose-flat-pullback}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X, Y, Z$ be locally of finite type over $S$.
Let $f : X \to Y$ and $g : Y \to Z$ be flat morphisms of relative dimensions
$r$ and $s$. Then $g \circ f$ is flat of relative dimension
$r + s$ and
$$
f^* \circ g^* = (g \circ f)^*
$$
as maps $Z_k(Z) \to Z_{k + r + s}(X)$.
\end{lemma}

\begin{proof}
Omitted, but see Lemma \ref{lemma-pullback-transitive}.
\end{proof}

\begin{lemma}
\label{lemma-pullback-coherent}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X, Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a flat morphism of relative dimension $r$.
Let $\mathcal{F}$ be a coherent sheaf on $Y$ with
$\dim_\delta(\text{Supp}(\mathcal{F})) \leq k$.
Then $\dim_\delta(\text{Supp}(f^*\mathcal{F})) \leq k + r$
and
$$
f^*[{\mathcal F}]_k = [f^*{\mathcal F}]_{k+r}
$$
in $Z_{k + r}(X)$.
\end{lemma}

\begin{proof}
Omitted, but see Lemma \ref{lemma-pullback-module}.
\end{proof}



\section{Push and pull}
\label{section-push-pull}

\noindent
In this section we verify that proper pushforward and flat pullback
are compatible when this makes sense.

\begin{lemma}
\label{lemma-flat-pullback-proper-pushforward}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let
$$
\xymatrix{
X' \ar[r]_{g'} \ar[d]_{f'} & X \ar[d]^f \\
Y' \ar[r]^g & Y
}
$$
be a fibre product diagram of schemes locally of finite type over $S$.
Assume $f : X \to Y$ proper and $g : Y' \to Y$ flat of relative dimension $r$.
Then also $f'$ is proper and $g'$ is flat of relative dimension $r$.
For any $k$-cycle $\alpha$ on $X$ we have
$$
g^*f_*\alpha = f'_*(g')^*\alpha
$$
in $Z_{k + r}(Y')$.
\end{lemma}

\begin{proof}
Omitted, but see Lemma \ref{lemma-flat-pullback-pushdown-module}.
\end{proof}









\section{Preparation for principal divisors}
\label{section-preparation-principal-divisors}

\noindent
Recall that if $Z$ is an irreducible closed subset of a scheme $X$,
then the codimension of $Z$ in $X$ is equal to the dimension
of the local ring $\mathcal{O}_{X, \xi}$, where $\xi \in Z$
is the generic point. See
Properties, Lemma \ref{properties-lemma-codimension-local-ring}.

\begin{definition}
\label{definition-order-vanishing}
Let $X$ be a locally Noetherian scheme. Assume $X$ is integral.
Let $f \in R(X)^*$. For every integral closed subscheme
$Z \subset X$ of codimension $1$ we define
the {\it order of vanishing of $f$ along $Z$} as the integer
$$
\text{ord}_Z(f) = \text{ord}_{\mathcal{O}_{X, \xi}}(f)
$$
where the right hand side is the notion of
Definition \ref{definition-ord} and $\xi$ is the generic point of $Z$.
\end{definition}

\begin{lemma}
\label{lemma-divisor-delta-dimension}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral. If $Z \subset X$ is an integral closed subscheme
of codimension $1$, then $\dim_\delta(Z) = \dim_\delta(X) - 1$.
\end{lemma}

\begin{proof}
This is more or less the defining property of a dimension function.
\end{proof}

\begin{lemma}
\label{lemma-divisor-locally-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral. Let $f \in R(X)^*$. Then the set
$$
\{Z \subset X \mid Z \text{ is integral, closed of codimension }1
\text{ and }\text{ord}_Z(f) \not = 0\}
$$
is locally finite in $X$.
\end{lemma}

\begin{proof}
This is true simply because there exists a nonempty open subscheme
$U \subset X$ such that $f$ corresponds to a section of
$\Gamma(U, \mathcal{O}_X^*)$, and hence the codimension $1$
irreducibles which can occur in the set of the lemma are all
irreducible components of $X \setminus U$.
Hence Lemma \ref{lemma-multiplicity-finite} gives the desired result.
\end{proof}


\section{Principal divisors}
\label{section-principal-divisors}

\noindent
The following definition is the key to everything that follows.

\begin{definition}
\label{definition-principal-divisor}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral with $\dim_\delta(X) = n$.
Let $f \in R(X)^*$. The {\it principal divisor
associated to $f$} is the $(n - 1)$-cycle
$$
\text{div}(f) = \text{div}_X(f) = \sum \text{ord}_Z(f) [Z]
$$
where the sum is over integral closed subscheme of
codimension $1$ and $\text{ord}_Z(f)$ is as in
Definition \ref{definition-order-vanishing}. This makes sense
by Lemmas \ref{lemma-divisor-delta-dimension} and
\ref{lemma-divisor-locally-finite}.
\end{definition}


\begin{lemma}
\label{lemma-div-additive}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral with $\dim_\delta(X) = n$.
Let $f, g \in R(X)^*$.
Then
$$
\text{div}(fg) = \text{div}(f) + \text{div}(g)
$$
in $Z_{n - 1}(X)$.
\end{lemma}

\begin{proof}
This is clear from the additivity of the $\text{ord}$ functions.
\end{proof}

\noindent
An important role in the discussion of principal divisors
is played by the ``universal'' principal divisor $[0] - [\infty]$
on $\mathbf{P}^1_S$. To make this more precise, let us denote
$$
D_0, D_\infty \subset
\mathbf{P}^1_S = \underline{\text{Proj}}_S(\mathcal{O}_S[X_0, X_1])
$$
the closed subscheme cut out by the section $X_1$, resp.\ $X_0$
of $\mathcal{O}(1)$. These are effective Cartier divisors, see
Divisors, Definition \ref{divisors-definition-effective-Cartier-divisor}
and Lemma \ref{divisors-lemma-characterize-OD}.
The following lemma says that loosely speaking we have
``$\text{div}(X_1/X_0) = [D_0] - [D_1]$'' and that this is the
universal principal divisor.

\begin{lemma}
\label{lemma-rational-function}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral and $n = \dim_\delta(X)$. Let $f \in R(X)^*$.
Let $U \subset X$ be a nonempty open such that $f$
corresponds to a section $f \in \Gamma(U, \mathcal{O}_X^*)$.
Let $Y \subset X \times_S \mathbf{P}^1_S$ be the
closure of the graph of $f : U \to \mathbf{P}^1_S$.
Then
\begin{enumerate}
\item the projection morphism $p : Y \to X$ is proper,
\item $p|_{p^{-1}(U)} : p^{-1}(U) \to U$ is an isomorphism,
\item the pullbacks $q^{-1}D_0$ and $q^{-1}D_\infty$ via the morphism
$q : Y \to \mathbf{P}^1_S$ are effective Cartier divisors on $Y$, and
\item we have
$$
\text{div}(f) = p_*([q^{-1}D_0]_{n - 1} - [q^{-1}D_\infty]_{n - 1})
$$
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}




\section{Two fun results on principal divisors}
\label{section-two-fun}

\noindent
The first lemma implies that the pushforward of a principal
divisor along a generically finite morphism is a principal divisor.

\begin{lemma}
\label{lemma-proper-pushforward-alteration}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$. Assume $X$, $Y$
are integral and $n = \dim_\delta(X) = \dim_\delta(Y)$.
Let $p : X \to Y$ be a dominant proper morphism.
Let $f \in R(X)^*$. Set
$$
g = \text{Nm}_{R(X)/R(Y)}(f).
$$
Then we have
$p_*\text{div}(f) = \text{div}(g)$.
\end{lemma}

\begin{proof}
Omitted, but see Lemma \ref{lemma-finite-extension-dim-1}.
\end{proof}

\noindent
The following lemma says that the degree of a principal divisor on
a proper curve is zero.

\begin{lemma}
\label{lemma-curve-principal-divisor}
Let $K$ be any field. Let $X$ be a $1$-dimensional integral scheme
endowed with a proper morphism $p : X \to \text{Spec}(K)$.
Let $f \in K(X)^*$ be an invertible rational function.
Then
$$
\sum\nolimits_{x \in X \text{ closed}}
[\kappa(x) : K] \text{ord}_{\mathcal{O}_{X, x}}(f)
=
0
$$
where $\text{ord}$ is as in Definition \ref{definition-ord}.
In other words, $p_*\text{div}(f) = 0$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}





\section{Rational equivalence}
\label{section-rational-equivalence}

\noindent
We define {\it rational equivalence} on $k$-cycles on $X$ as follows.
In this definition we allow locally finite sums of images of
principal divisors (under closed immersions). This leads to some
pretty strange phenomena, see Example \ref{example-weird}.
However, if we do not allow these then we do not know how to prove that
capping with chern classes of line bundles factors through rational
equivalence.

\begin{definition}
\label{definition-rational-equivalence}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $k \in \mathbf{Z}$.
\begin{enumerate}
\item Given any locally finite collection $\{W_j \subset X\}$
of integral closed subschemes with $\dim_\delta(W_j) = k + 1$,
and any $f_j \in R(W_j)^*$ we may consider
$$
\sum (i_j)_*\text{div}(f_j) \in Z_k(X)
$$
where $i_j : W_j \to X$ is the inclusion morphism.
This makes sense as the morphism
$\coprod i_j : \coprod W_j \to X$ is proper.
\item We say that $\alpha \in Z_k(X)$ is {\it rationally equivalent to zero}
if $\alpha$ is a cycle of the form displayed above.
\item We say $\alpha, \beta \in Z_k(X)$ are
{\it rationally equivalent} and we write $\alpha \sim_{rat} \beta$
if $\alpha - \beta$ is rationally equivalent to zero.
\item We define
$$
A_k(X) = Z_k(X) / \sim_{rat}
$$
to be the {\it Chow group of $k$-cycles on $X$}. This is sometimes called
the {\it Chow group of $k$-cycles module rational equivalence on $X$}.
\end{enumerate}
\end{definition}

\noindent
There are many other interesting (adequate) equivalence relations.
Rational equivalence is the coarsest one of them all.
A very simple but important lemma is the following.

\begin{lemma}
\label{lemma-restrict-to-open}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $U \subset X$ be an open subscheme, and denote
$i : Y = X \setminus U \to X$ as a reduced closed subscheme of $X$.
Let $k \in \mathbf{Z}$.
Suppose $\alpha, \beta \in Z_k(X)$.
If $\alpha|_U \sim_{rat} \beta|_U$ then there exist a cycle
$\gamma \in Z_k(Y)$ such that
$$
\alpha \sim_{rat} \beta + i_*\gamma.
$$
In other words, the sequence
$$
\xymatrix{
A_k(Y) \ar[r]^{i_*} & A_k(X) \ar[r]^{j_*} & A_k(U) \ar[r] & 0
}
$$
is an exact complex of abelian groups.
\end{lemma}

\begin{proof}
Let $\{W_j\}_{j \in J}$ be a locally finite collection of integral closed
subschemes of $\delta$-dimension $k + 1$, and let $f_j \in R(W_j)^*$
be elements such that $(\alpha - \beta)|_U = \sum (i_j)_*\text{div}(f_j)$
as in the definition. Set $W_j' \subset X$ equal
to the closure of $W_j$. Suppose that $V \subset X$ is a quasi-compact
open. Then also $V \cap U$ is quasi-compact open in $U$ as
$V$ is Noetherian. Hence the set
$\{j \in J \mid W_j \cap V \not = \emptyset\}
= \{j \in J \mid W'_j \cap V \not = \emptyset\}$
is finite since $\{W_j\}$ is locally finite. In other words we see that
$\{W'_j\}$ is also locally finite. Since $R(W_j) = R(W'_j)$ we see
that
$$
\alpha - \beta - \sum (i'_j)_*\text{div}(f_j)
$$
is a cycle supported on $Y$ and the lemma follows (see
Lemma \ref{lemma-exact-sequence-open}).
\end{proof}

\begin{example}
\label{example-weird}
Here is a ``strange'' example.
Suppose that $S$ is the spectrum of a field $k$
with $\delta$ as in Example \ref{example-field}.
Suppose that $X = C_1 \cup C_2 \cup \ldots$ is an infinite
union of curves $C_j \cong \mathbf{P}^1_k$ glued together
in the following way: The point $\infty \in C_j$ is glued
transversally to the point $0 \in C_{j + 1}$ for $j = 1, 2, 3, \ldots$.
Take the point $0 \in C_1$. This gives a zero cycle
$[0] \in Z_0(X)$. The ``strangeness'' in this situation is
that actually $[0] \sim_{rat} 0$! Namely we can choose
the rational function $f_j \in R(C_j)$ to be the function
which has a simple zero at $0$ and a simple pole at $\infty$
and no other zeros or poles. Then we see that the sum
$\sum (i_j)_*\text{div}(f_j)$ is exactly the $0$-cycle
$[0]$. In fact it turns out that $A_0(X) = 0$ in this example.
If you find this too bizarre, then you can just
make sure your spaces are always quasi-compact
(so $X$ does not even exist for you).
\end{example}









\section{Properties of rational equivalence}
\label{section-properties-rational-equivalence}

\begin{lemma}
\label{lemma-flat-pullback-rational-equivalence}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be schemes locally of finite type over $S$.
Let $f : X \to Y$ be a flat morphism of relative dimension $r$.
Let $\alpha \sim_{rat} \beta$ be rationally equivalent $k$-cycles on $Y$.
Then $f^*\alpha \sim_{rat} f^*\beta$ as $(k + r)$-cycles on $X$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-proper-pushforward-rational-equivalence}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be schemes locally of finite type over $S$.
Let $p : X \to Y$ be a proper morphism.
Suppose $\alpha, \beta \in Z_k(X)$ are rationally equivalent.
Then $p_*\alpha$ is rationally equivalent to $p_*\beta$.
\end{lemma}

\begin{proof}
Let $i : W \to X$ be a $(k + 1)$-dimensional integral closed subscheme.
Let $f \in R(W)^*$. Let $W' = p(W)$.
This is an integral closed subscheme of $Y$.
We get a commutative diagram of morphisms
$$
\xymatrix{
W \ar[r]_i \ar[d]_{p'} & X \ar[d]^p \\
W' \ar[r]^{i'} & Y
}
$$
Note that $p_*i_*\text{div}(f) = i'_*(p')_*\text{div}(f)$ by
Lemma \ref{lemma-compose-pushforward}. After some arguments
about locally finite sums (omitted) we see that
it suffices to show that $(p')_*\text{div}(f)$
is the divisor of a rational function on $W'$ or zero.
There are three cases to distinguish.

\medskip\noindent
The case $\dim_\delta(W') < k$. In this case automatically
$(p')_*\text{div}(f) = 0$ and there is nothing to prove.

\medskip\noindent
The case $\dim_\delta(W') = k$. Here you have to show that
$(p')_*\text{div}(f) = 0$. This eventually boils down to
the fact that the degree of a principal divisor on a proper
curve is zero. Details omitted,
but see Lemma \ref{lemma-curve-principal-divisor}.

\medskip\noindent
The case $\dim_\delta(W') = k + 1$. In this case
Lemma \ref{lemma-proper-pushforward-alteration} applies.
\end{proof}















\section{Different characterizations of rational equivalence}
\label{section-different-rational-equivalence}

\noindent
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Given any closed subscheme
$Z \subset X \times_S \mathbf{P}^1_S = X \times \mathbf{P}^1$
we let $Z_0$, resp.\ $Z_\infty$ be the scheme theoretic closed 
subscheme $Z_0 = \text{pr}_2^{-1}(D_0)$,
resp.\ $Z_\infty = \text{pr}_2^{-1}(D_\infty)$.
Here $D_0$, $D_\infty$ are as defined just above
Lemma \ref{lemma-rational-function}.

\begin{lemma}
\label{lemma-rational-equivalence-family}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $W \subset X \times_S \mathbf{P}^1_S$ be an integral
closed subscheme of $\delta$-dimension $k + 1$.
Assume $W \not = W_0$, and $W \not = W_\infty$. Then
\begin{enumerate}
\item $W_0$, $W_\infty$ are effective Cartier divisors of $W$,
\item $W_0$, $W_\infty$ can be viewed as closed subschemes
of $X$ and
$$
[W_0]_k \sim_{rat} [W_\infty]_k,
$$
\item for any $\alpha \in Z_k(X)$ with $\alpha \sim_{rat} 0$
there exists a locally finite family of
integral closed subschemes $W_i \subset X \times_S \mathbf{P}^1_S$
of $\delta$-dimension $k + 1$
as above such that $\alpha = \sum ([(W_i)_0]_k - [(W_i)_\infty]_k)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-closed-subscheme-cross-p1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $Z$ be a closed subscheme of $X \times \mathbf{P}^1$.
Assume $\dim_\delta(Z) \leq k + 1$.
Assume that any irreducible component $Z' \subset Z$
which is contained in $Z_0$ or $Z_\infty$ has
$\dim_\delta(Z') < k$. Then
$$
[Z_0]_k \sim_{rat} [Z_\infty]_k
$$
as $k$-cycles on $X$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-coherent-sheaf-cross-p1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $\mathcal{F}$ be a coherent sheaf on $X \times \mathbf{P}^1$.
Assume
$
\dim_\delta(\text{Supp}(\mathcal{F})) \leq k + 1.
$
Let $i_0, i_\infty : X \to X \times \mathbf{P}^1$ be the closed immersion
such that $i_t(x) = (x, t)$. Denote $\mathcal{F}_0 = i_0^*\mathcal{F}$ and
$\mathcal{F}_\infty = i_\infty^*\mathcal{F}$.
Assume that any irreducible component $W$ of $\text{Supp}(\mathcal{F})$
which is contained in $X \times \{0\}$ or $X \times \{\infty\}$ has
$\dim_\delta(W) < k$. Then
$$
[\mathcal{F}_0]_k \sim_{rat} [\mathcal{F}_\infty]_k
$$
as $k$-cycles on $X$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-maps-between-coherent-sheaves}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Let $\mathcal{F}$, $\mathcal{G}$ be two coherent sheaves on $X$.
Assume that
$$
\dim_\delta(\text{Supp}(\mathcal{F})),
\dim_\delta(\text{Supp}(\mathcal{G}))
\leq
k + 1.
$$
Suppose that $\alpha, \beta : \mathcal{F} \to \mathcal{G}$
are two maps such that
$$
\text{Ker}(\alpha),
\text{Ker}(\beta),
\text{Coker}(\alpha),
\text{Coker}(\beta)
$$
all have support of $\delta$-dimension $\leq k$.
Then we have
$$
[\text{Coker}(\alpha)]_k - [\text{Ker}(\alpha)]_k
\sim_{rat}
[\text{Coker}(\beta)]_k - [\text{Ker}(\beta)]_k
$$
as $k$-cycles on $X$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}








\section{Preparation for the divisor associated to an invertible sheaf}
\label{section-preparation-divisor-sheaf}

\noindent
Let $X$ be a scheme.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $\xi \in X$ be a point.
If $s_\xi, s'_\xi \in \mathcal{L}_\xi$ generate $\mathcal{L}_\xi$
as $\mathcal{O}_{X, \xi}$-module, then there exists a unit
$u \in \mathcal{O}_{X, \xi}^*$ such that $s_\xi = u s'_\xi$.
Hence the following definition makes sense.

\begin{definition}
\label{definition-order-vanishing-meromorphic}
Let $X$ be a locally Noetherian scheme. Assume $X$ is integral.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s \in \mathcal{K}_X(\mathcal{L})$ be a regular (i.e., nonzero)
meromorphic section of $\mathcal{L}$, see
Divisors, Definition \ref{divisors-definition-meromorphic-section}.
For every integral closed subscheme
$Z \subset X$ of codimension $1$ we define
the {\it order of vanishing of $s$ along $Z$} as the integer
$$
\text{ord}_{Z, \mathcal{L}}(s)
= \text{ord}_{\mathcal{O}_{X, \xi}}(s/s_\xi)
$$
where the right hand side is the notion of
Definition \ref{definition-ord}, $\xi \in Z$ is the generic point,
and $s_\xi \in \mathcal{L}_\xi$ is a generator.
\end{definition}

\begin{lemma}
\label{lemma-divisor-meromorphic-locally-finite}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s \in \mathcal{K}_X(\mathcal{L})$ be a regular (i.e., nonzero)
meromorphic section of $\mathcal{L}$. Then the set
$$
\{Z \subset X \mid Z \text{ is irreducible, closed of codimension }1
\text{ and }\text{ord}_{Z, \mathcal{L}}(s) \not = 0\}
$$
is locally finite in $X$.
\end{lemma}

\begin{proof}
This is true simply because there exists a nonempty open subscheme
$U \subset X$ such that $s$ corresponds to a section of
$\Gamma(U, \mathcal{L})$ which generates $\mathcal{L}$ over $U$.
Hence the codimension $1$
irreducibles which can occur in the set of the lemma are all
irreducible components of $X \setminus U$.
Hence Lemma \ref{lemma-multiplicity-finite} gives the desired result.
\end{proof}

\begin{lemma}
\label{lemma-divisor-meromorphic-well-defined}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s, s' \in \mathcal{K}_X(\mathcal{L})$ be nonzero
meromorphic sections of $\mathcal{L}$. Then $f = s/s'$
is an element of $R(X)$ and we have
$$
\sum \text{ord}_{Z, \mathcal{L}}(s)[Z]
=
\sum \text{ord}_{Z, \mathcal{L}}(s')[Z]
+
\text{div}(f)
$$
(where the sums are over integral closed subschemes $Z \subset X$
of $\delta$-dimension $n - 1$) as elements of $Z_{n - 1}(X)$.
\end{lemma}

\begin{proof}
This is clear from the definitions.
Note that Lemma \ref{lemma-divisor-meromorphic-locally-finite}
garantees that the sums are indeed
elements of $Z_{n - 1}(X)$.
\end{proof}









\section{The divisor associated to an invertible sheaf}
\label{section-divisor-invertible-sheaf}

\noindent
The material above allows us to define the divisor
associated to an invertible sheaf.

\begin{definition}
\label{definition-divisor-invertible-sheaf}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
\begin{enumerate}
\item For any nonzero meromorphic section $s$ of $\mathcal{L}$
we define the {\it Weil divisor associated to $s$} as
$$
\text{div}_{\mathcal{L}}(s) :=
\sum \text{ord}_{Z, \mathcal{L}}(s) [Z] \in Z_{n - 1}(X)
$$
where the sum is over integral closed subschemes $Z \subset X$
of $\delta$-dimension $n - 1$.
\item We define {\it Weil divisor associated to $\mathcal{L}$}
$$
c_1(\mathcal{L}) \cap [X] =
\text{class of }\text{div}_{\mathcal{L}}(s) \in A_{n - 1}(X)
$$
where $s$ is any nonzero meromorphic section of $\mathcal{L}$ over
$X$. This is well defined by
Lemma \ref{lemma-divisor-meromorphic-well-defined}.
\end{enumerate}
\end{definition}

\noindent
There are some cases where it is easy to compute the
Weil divisor associated to an invertible sheaf.

\begin{lemma}
\label{lemma-compute-c1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s \in \Gamma(X, \mathcal{L})$ be a nonzero global section.
Then
$$
c_1(\mathcal{L}) \cap [X] = [Z(s)]_{n - 1}
$$
in $A_{n - 1}(X)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-c1-additive}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$. Assume $X$ is
integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$, $\mathcal{N}$ be invertible $\mathcal{O}_X$-modules.
Then
$$
c_1(\mathcal{L}) \cap [X] + c_1(\mathcal{N}) \cap [X] =
c_1(\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N}) \cap [X]
$$
in $A_{n - 1}(X)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
The following lemma will be superseded by a more general result later.

\begin{lemma}
\label{lemma-flat-pullback-divisor-invertible-sheaf}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$. Assume $X$, $Y$
are integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_Y$-module.
Let $f : X \to Y$ be a flat morphism of relative dimension $r$.
Let $\mathcal{L}$ be an invertible sheaf on $Y$. Then
$$
f^*(c_1(\mathcal{L}) \cap [Y]) = c_1(f^*\mathcal{L}) \cap [X]
$$
in $A_{n - 1}(X)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}



\section{Intersecting with Cartier divisors}
\label{section-intersecting-with-divisors}

\begin{definition}
\label{definition-cap-c1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
We define, for every integer $k$, an operation
$$
c_1(\mathcal{L}) \cap - :
Z_{k + 1}(X) \to A_k(X)
$$
called {\it intersection with the first chern class of $\mathcal{L}$}.
\begin{enumerate}
\item Given an integral closed subscheme $i : W \to X$ with
$\dim_\delta(W) = k + 1$ we define
$$
c_1(\mathcal{L}) \cap [W] = i_*(c_1({i^*\mathcal{L}}) \cap [W])
$$
where the right hand side is defined in
Definition \ref{definition-divisor-invertible-sheaf}.
\item For a general $(k + 1)$-cycle $\alpha = \sum n_i [W_i]$ we set
$$
c_1(\mathcal{L}) \cap \alpha = \sum n_i c_1(\mathcal{L}) \cap [W_i]
$$
\end{enumerate}
\end{definition}

\noindent
The main goal for the next few sections is to show that intersecting with
$c_1(\mathcal{L})$ factors through rational equivalence, and is commutative.
This is not a trviality.

\begin{lemma}
\label{lemma-c1-cap-additive}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{L}$, $\mathcal{N}$ be an invertible sheaves on $X$.
Then
$$
c_1(\mathcal{L}) \cap \alpha  + c_1(\mathcal{N}) \cap \alpha =
c_1(\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N}) \cap \alpha
$$
in $A_k(X)$ for every $\alpha \in Z_{k - 1}(X)$. Moreover, 
$c_1(\mathcal{O}_X) \cap \alpha = 0$ for all $\alpha$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-flat-pullback-cap-c1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a flat morphism of relative dimension $r$.
Let $\mathcal{L}$ be an invertible sheaf on $Y$.
Let $\alpha$ be a $k$-cycle on $Y$.
Then
$$
f^*(c_1(\mathcal{L}) \cap \alpha) = c_1(f^*\mathcal{L}) \cap f^*\alpha
$$
in $A_{k + r}(X)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-pushforward-cap-c1}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $p : X \to Y$ be a proper morphism.
Let $\alpha \in Z_{k + 1}(X)$.
Let $\mathcal{L}$ be an invertible sheaf on $Y$.
Then
$$
p_*(c_1(p^*\mathcal{L}) \cap \alpha) = c_1(\mathcal{L}) \cap p_*\alpha
$$
in $A_k(Y)$.
\end{lemma}

\begin{proof}
Omitted. Idea: Denote $Z' = p(Z)$ the image. Let $s'$ be a nonzero
meromorphic section of $\mathcal{L}|_{Z'}$. Denote $s$ the corresponding
meromorphic section of $p^*\mathcal{L}|_Z$. 

\medskip\noindent
If $\dim(Z') < k$ then $s'$ is being an invertible section  over a nonempty
open of $Z'$ easily implies that $p_*(c_1(p^*\mathcal{L}) \cap [Z]) = 0$
for dimension reasons. Hence this case follows.

\medskip\noindent
If $\dim(Z') = k$, then let $\xi \in Z'$ be any point of codimension
$1$ of $Z'$. Choose an element $s_\xi \in \mathcal{L}_\xi$ which
is a local generator of $\mathcal{L}$ in a neighbourhood $U$ of $\xi$.
Consider the rational function $f' = s/s_{\xi} \in \mathbf{C}(Z')$.
Denote $f \in \mathbf{C}(Z)$ the pullback of $f'$ to a rational function on
$Z$. The result we have to show is that
$$
[\mathbf{C}(Z) : \mathbf{C}(Z')] \text{div}(f')|_{U \cap Z'} =
p_*\text{div}(f)|_{U \cap Z'}
$$
This follows from Lemma \ref{lemma-proper-pushforward-alteration} since
$$
\text{Nm}_{\mathbf{C}(Z)/\mathbf{C}(Z')}(f)
=
(f')^{[\mathbf{C}(Z) : \mathbf{C}(Z')]}
$$
by our choice of $f$.
\end{proof}

\begin{lemma}
\label{lemma-geometric-cap}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $Z \subset X$ be a closed subscheme.
Assume $\dim_\delta(Z) \leq k + 1$.
Let $s \in \Gamma(Z, \mathcal{L}|_Z)$.
Denote $Z(s) \subset Z$ the closed subscheme where $s$ vanishes.
Assume
\begin{enumerate}
\item $\dim_\delta(Z(s)) \leq k$, and
\item for every generic point $\xi$ of an irreducible component of
$Z(s)$ of dimension $k$ the multiplication by $s$
induces an injection $\mathcal{O}_{Z, \xi} \to (\mathcal{L}|_Z)_\xi$.
\end{enumerate}
Then
$$
[Z(s)]_k = c_1(\mathcal{L}) \cap [Z]_{k + 1}
$$
in $A_k(X)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}







\section{Blowing up lemmas}
\label{section-blowing-up-lemmas}


\begin{lemma}
\label{lemma-blowing-up-denominators}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ integral with $\dim_\delta(X) = n$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Let $s$ be a nonzero meromorphic section of $\mathcal{L}$.
Let $U \subset X$ be the maximal open subscheme such that
$s$ corresponds to a section of $\mathcal{L}$ over $U$.
There exists a projective morphism
$$
\pi : X' \longrightarrow X
$$
such that
\begin{enumerate}
\item $X'$ is integral,
\item $\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is an isomorphism,
\item there exist effective Cartier divisors $D, E \subset X'$
such that 
$$
\pi^*\mathcal{L} = \mathcal{O}_{X'}(D - E),
$$
\item the meromorphic section $s$ corresponds, via the isomorphism above,
to the meromorphic section $1_D \otimes (1_E)^{-1}$ (see Divisors,
Definition
\ref{divisors-definition-invertible-sheaf-effective-Cartier-divisor}),
\item we have
$$
\pi_*([D]_{n - 1} - [E]_{n - 1}) = \text{div}_{\mathcal{L}}(s)
$$
in $Z_{n - 1}(X)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
Let $X$ be a scheme. Let $\{D_i\}_{i \in I}$ be a locally finite collection
of effective Cartier divisors on $X$. Suppose given a function
$I \to \mathbf{Z}_{\geq 0}$, $i \mapsto n_i$. Then it makes sense to talk
about the effective Cartier divisor $\sum n_i D_i$. This is a mild
generalization of Divisors,
Definition \ref{divisors-definition-sum-effective-Cartier-divisors}.

\begin{lemma}
\label{lemma-blowing-up-intersections}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ integral and $\dim_\delta(X) = n$.
Let $\{D_i\}_{i \in I}$ be a locally finite collection of
effective Cartier divisors on $X$.
Assume that for all $\{i, j, k\} \subset I$, $\#\{i, j, k\} = 3$
we have $D_i \cap D_j \cap D_k = \emptyset$.
Then there exist $b : X' \to X$ and $\{D'_j\}_{j \in J}$ with
the following properties:
\begin{enumerate}
\item $b$ is proper morphism $b : X' \to X$,
\item $X'$ is integral,
\item we have $b|_{b^{-1}(U)} : b^{-1}(U) \to U$ an isomorphism, where
$U \subset X$ is the complement of the union of the pairwise
intersections of the $D_i$,
\item $\{D'_j\}_{j \in J}$ is a locally finite collection of effective
Cartier divisors on $X'$,
\item $\dim_\delta(D'_j \cap D'_{j'}) \leq n - 2$ if $j \not = j'$, and
\item $b^{-1}(D_i) = \sum n_{ij} D'_j$ for certain $n_{ij} \geq 0$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted. See \cite[Section 2.4]{F}. We have adapted the formulation
so it also works in the non finite type setting.
Note that $b$ may be the composition of infinitely many blow
ups, but over any given quasi-compact open $W \subset X$ one needs
only finitely many blow-ups (this is the result of loc.\ cit.).
\end{proof}







\section{Intersecting with effective Cartier divisors}
\label{section-intersecting-effective-Cartier}


\begin{lemma}
\label{lemma-relative-effective-cartier}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $p : X \to Y$ be a flat morphism of relative dimension $r$.
Let $i : D \to X$ be an effective Cartier divisor with the property
that $p|_D : D \to Y$ is flat of relative dimension $r - 1$.
Let $\mathcal{L} = \mathcal{O}_X(D)$.
Then
$$
c_1(\mathcal{L}) \cap p^*\alpha = i_* ((p|_D)^*\alpha)
$$
in $A_{k + r - 1}(X)$ for every $\alpha \in A_k(Y)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-support-cap-effective-Cartier}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $D$ be an effective Cartier divisor on $X$.
Let $\alpha$ be a $k$-cycle on $X$.
There exists a representative $\beta \in Z_{k - 1}(X)$ of
$c_1(\mathcal{O}_X(D)) \cap \alpha$ which is
supported on $D \cap \text{Supp}(\alpha)$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}


\begin{lemma}
\label{lemma-improved-additivity}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\{D_i\}_{i \in I}$ be a locally finite collection
of effective Cartier divisors on $X$. Let $n_i \geq 0$
and set $D = \sum n_i D_i$.
Let $\alpha \in Z_k(X)$. Choose representatives
$\alpha_i$ of $c_1(\mathcal{O}_X(D_i)) \cap \alpha$
supported on $\text{Supp}(\alpha) \cap D_i$, see
Lemma \ref{lemma-support-cap-effective-Cartier}.
Then $\sum n_i \alpha _i$ is a cycle and is equal
to $c_1(\mathcal{O}_X(D)) \cap \alpha$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-commutativity-effective-Cartier-proper-intersection}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ integral and $\dim_\delta(X) = n$.
Let $D_1$, $D_2$ be effective Cartier divisors on $X$.
Assume $\dim_\delta(D_1 \cap D_2) = n - 2$. Then
$$
c_1(\mathcal{O}_X(D_1)) \cap [D_2]_{n - 1}
=
c_1(\mathcal{O}_X(D_2)) \cap [D_1]_{n - 1}
$$
in $A_{n - 2}(X)$.
\end{lemma}

\begin{proof}
Omitted. Use the canonical sections $1_{D_i}$ and
Lemma \ref{lemma-geometric-cap}.
\end{proof}

\begin{lemma}
\label{lemma-commutativity-effective-Cartier}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ integral and $\dim_\delta(X) = n$.
Let $D_1$, $D_2$ be effective Cartier divisors on $X$.
Then
$$
c_1(\mathcal{O}_X(D_1)) \cap [D_2]_{n - 1}
=
c_1(\mathcal{O}_X(D_2)) \cap [D_1]_{n - 1}
$$
in $A_{n - 2}(X)$.
\end{lemma}

\begin{proof}
Apply Lemma \ref{lemma-blowing-up-intersections} to the set $\{D_1, D_2\}$.
Thus we get a proper birational morphism $b : X' \to X$
and a locally finite collection of effective Cartier
divisors $\{D'_j\}_{j \in J}$ of $X'$ such that
$b^{-1}D_1 = \sum n_j D'_j$ and such that
$b^{-1}D_2 = \sum m_j D'_j$ for some $n_j, m_j \geq 0$.
Moreover $\dim_\delta(D'_j \cap D'_{j'}) = n - 2$ whenever
$j \not = j'$.
Whence $[D_1]_{n - 1} = b_* ( \sum n_j[D'_j]_{n - 1} )$
and $[D_2]_{n - 1} = b_* ( \sum m_j[D'_j]_{n - 1} )$.
By the projection formula of Lemma \ref{lemma-pushforward-cap-c1}
and the additivity of Lemmas \ref{lemma-c1-cap-additive}
and \ref{lemma-improved-additivity}
it is enough to show the equalities
$$
c_1(\mathcal{O}_{X'}(D'_j)) \cap [D_{j'}]_{n - 1}
=
c_1(\mathcal{O}_{X'}(D'_{j'})) \cap [D'_j]_{n - 1}
$$
in $A_{n - 2}(X')$. This is trivial if $j = j'$ and
if $j \not = j'$, then we see this from
Lemma \ref{lemma-commutativity-effective-Cartier-proper-intersection}.
\end{proof}








\section{Commutativity}
\label{section-commutativity}



\begin{lemma}
\label{lemma-commutativity-on-integral}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ integral and $\dim_\delta(X) = n$.
Let $\mathcal{L}$, $\mathcal{N}$ be invertible on $X$.
Choose a nonzero meromorphic section $s$ of $\mathcal{L}$
and a nonzero meromorphic section $t$ of $\mathcal{N}$.
Set $\alpha = \text{div}_{\mathcal{L}}(s)$ and
$\beta = \text{div}_{\mathcal{N}}(t)$.
Then
$$
c_1(\mathcal{N}) \cap \alpha
=
c_1(\mathcal{L}) \cap \beta
$$
in $A_{n - 2}(X)$.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-blowing-up-denominators} (applied twice)
there exists a proper morphism
$\pi : X' \to X$ and effective Cartier divisors
$D_1, E_1, D_2, E_2$ on $X'$ such that
$$
b^*\mathcal{L} = \mathcal{O}_{X'}(D_1 - E_1),
\quad
b^*\mathcal{L} = \mathcal{O}_{X'}(D_2 - E_2),
$$
and such that
$$
\alpha = \pi_*([D_1]_{n - 1} - [E_1]_{n - 1}),
\quad
\beta = \pi_*([D_2]_{n - 1} - [E_2]_{n - 1}).
$$
By the projection formula of Lemma \ref{lemma-pushforward-cap-c1}
and the additivity of Lemma \ref{lemma-c1-cap-additive}
it is enough to show the equality
$$
c_1(\mathcal{O}_{X'}(D_1)) \cap [D_2]_{n - 1}
=
c_1(\mathcal{O}_{X'}(D_2)) \cap [D_1]_{n - 1}
$$
and three other similar equalities involving $D_i$ and $E_j$.
Thus the result follows from Lemma \ref{lemma-commutativity-effective-Cartier}.
\end{proof}

\begin{lemma}
\label{lemma-factors}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{L}$ be invertible on $X$.
The operation $\alpha \mapsto c_1(\mathcal{L}) \cap \alpha$
factors through rational equivalence to give an operation
$$
c_1(\mathcal{L}) \cap - : A_{k + 1}(X) \to A_k(X)
$$
\end{lemma}

\begin{proof}
Omitted. Hint:
Apply Lemma \ref{lemma-commutativity-on-integral}
with one of the invertible sheaves equal to the
trivial one.
\end{proof}

\noindent
For any integer $s \geq 0$ we will denote
$$
c_1(\mathcal{L})^s \cap - : A_{k + s}(X) \to A_k(X)
$$
the $s$-fold iterate of the operation $c_1(\mathcal{L}) \cap - $.
This makes sense by the lemma above.

\begin{lemma}
\label{lemma-cap-commutative}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{L}$, $\mathcal{N}$ be invertible on $X$.
For any $\alpha \in A_{k + 2}(X)$ we have
$$
c_1(\mathcal{L}) \cap c_1(\mathcal{N}) \cap \alpha
=
c_1(\mathcal{N}) \cap c_1(\mathcal{L}) \cap \alpha
$$
as elements of $A_k(X)$.
\end{lemma}

\begin{proof}
Omitted. Hint: use Lemma \ref{lemma-commutativity-on-integral}.
\end{proof}









\section{Affine bundles}
\label{section-affine-vector}

\begin{lemma}
\label{lemma-pullback-affine-fibres-surjective}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $f : X \to Y$ be a flat morphism of relative dimension $r$.
Assume that for every $y \in Y$, there exists an open neighbourhood
$U \subset Y$ such that $f|_{f^{-1}(U)} : f^{-1}(U) \to U$
is identified with the morphism $U \times \mathbf{A}^r \to U$.
Then $f^* : A_k(Y) \to A_{k + r}(X)$ is surjective for all
$k \in \mathbf{Z}$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}






\section{Projective space bundle formula}
\label{section-projective-space-bundle-formula}

\noindent
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Consider a finite locally free $\mathcal{O}_X$-module
$\mathcal{E}$ of rank $r$.
Our convention is that
$$
\xymatrix{
\mathbf{P}(\mathcal{E})
=
\underline{\text{Proj}}_X(\text{Sym}^*(\mathcal{E}))
\ar[r]^-\pi
& X
}
$$
over $X$ with
$\mathcal{O}_{\mathbf{P}(\mathcal{E}}(1)$ normalized so that
$\pi_*(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)) = \mathcal{E}$.
In particular there is a surjection
$\pi^*\mathcal{E} \to \mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)$.

\begin{lemma}
\label{lemma-cap-projective-bundle}
With notation as above the cycle class
$$
\pi_*\left(
c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^s \cap \pi^*\alpha
\right)
$$
is $0$ if $s < r - 1$ and is equal to $\alpha$
for any $\alpha \in A_k(X)$ for all $k$ when $s = r - 1$.
\end{lemma}

\begin{proof}
Let $Z \subset X$ be an integral closed subscheme of $\delta$-dimension $k$.
Note that $\pi^*[Z] = [\mathbf{P}(\mathcal{E}|_Z)]$.
If $s < r - 1$, then by construction
$c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^s \cap \pi^*[Z]$
is represented by a $(k + r - 1 - s)$-cycle supported on
$\mathbf{P}(\mathcal{E}|_Z)$. Hence the pushforward of this cycle
is zero for dimension reasons.
Let $\xi$ be the generic point of $Z$.
We can choose elements $e_1, \ldots, e_{r - 1} \in \mathcal{E}_\xi$
which form part of a basis of $\mathcal{E}_\xi$. These give rational
sections of $\mathcal{O}(1)$ over $\mathbf{P}(\mathcal{E}|_Z)$
whose common zero set is the closure of the image a rational section of
$\mathbf{P}(\mathcal{E}|_Z) \to Z$ union a closed subset whose
support maps to a proper closed subset of $Z$. This implies that
$$
\pi_* c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^{r - 1} \cap \pi^*[Z]
=
[Z].
$$
Details omitted.
\end{proof}

\begin{lemma}
\label{lemma-chow-ring-projective-bundle}
(Projective space bundle formula.)
With notation as above the map
\begin{align*}
\bigoplus\nolimits_{i=0}^{r-1} A_{k + i}(X)
& \longrightarrow
A_k({\bf P}({\mathcal E})), \\
(\alpha_0,\ldots,\alpha_{r-1}) &
\longmapsto
\pi^*\alpha_0 +
c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)) \cap \pi^*\alpha_1
+ \ldots + \\
&
\quad \quad \quad \quad
\quad \quad \quad \quad
\quad \quad \quad \quad
c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^{r - 1} \cap \pi^*\alpha_{r-1}
\end{align*}
is an isomorphism where $r = rank({\mathcal E})$.
\end{lemma}

\begin{proof}
Fix $k \in \mathbf{Z}$.
By the result of the previous lemma this map is injective.
We have to show it is surjective.
Let $X_i$, $i \in I$ be the irreducible components of $X$.
Then $\mathbf{P}(\mathcal{E}|_{X_i})$, $i \in I$
are the irreducible components of $\mathbf{P}(\mathcal{E})$.
If the map is surjective for each of the morphisms
$\mathbf{P}(\mathcal{E}|_{X_i}) \to X_i$, then the map is
surjective for $\mathbf{P}(\mathcal{E}|_X) \to X$.
Hence we may assume $X$ is irreducible.
Thus $\dim_\delta(X) < \infty$ and we may use
induction on $\dim_\delta(X)$.
The result is clear if $\dim_\delta(X) + r - 1 < k$.
Let $\beta \in A_k(\mathbf{P}(\mathcal{E}))$.
If for some nonempty open $U \subset X$ we have $\beta|_U \sim_{rat} 0$
then by Lemma \ref{lemma-restrict-to-open} we see that $\beta$
is rationally equivalent to a $k$-cycle on $\mathbf{P}(\mathcal{E}|_Y)$
where $Y = X \setminus U$ as a reduced closed subscheme.
Note that $\dim_\delta(Y) < \dim_\delta(X)$.
By induction the result holds
for $\mathbf{P}(\mathcal{E}|_Y) \to Y$ and hence the
result holds for $\beta$. Hence we may replace $X$ by any nonempty
open of $X$.

\medskip\noindent
In particular we may assume that $\mathcal{E} \cong \mathcal{O}_X^{\oplus r}$.
In this case $\mathbf{P}(\mathcal{E}) = X \times \mathbf{P}^{r - 1}$.
Consider the open standard affine open
$\mathbf{A}^{r - 1} \subset \mathbf{P}^{r - 1}$ with complement
$\mathbf{P}^{r - 2} \to \mathbf{P}^{r - 1}$.
This gives an open subset $X \times \mathbf{A}^{r - 1}$ and a
closed immersion
$i : X \times \mathbf{P}^{r - 2} \to X \times \mathbf{P}^{r - 1}$.
The restriction of $\beta$ to the open subset is rationally equivalent
to a pullback of a cycle $\alpha_0$ from $X$. After replacing
$\beta$ by $\beta - \pi^*\alpha_0$ we see that $\beta$ restricts
to zero on $X \times \mathbf{A}^{r - 1}$. Hence $\beta$ is
of the form $i_*\beta'$ for some $\beta' \in A_k(X \times \mathbf{P}^{r - 2})$
by Lemma \ref{lemma-restrict-to-open}. By induction on $r$ we see that
$$
\beta' =
\pi^*\alpha'_0 +
c_1(\mathcal{O}_{\mathbf{P}^{r - 2}}(1)) \cap \pi^*\alpha'_1 + \ldots +
c_1(\mathcal{O}_{\mathbf{P}^{r - 2}}(1))^{r - 2} \cap \pi^*\alpha'_{r-2}
$$
The relation in Lemma \ref{lemma-relative-effective-cartier}
and the fact that
$\mathcal{O}_{\mathbf{P}^{r - 1}}(\mathbf{P}^{r - 2})
\cong \mathcal{O}_{\mathbf{P}^{r - 1}}(1)$ implies
that
$$
i_*\beta' =
c_1(\mathcal{O}_{\mathbf{P}^{r - 1}}(1)) \cap \pi^*\alpha'_0 +
c_1(\mathcal{O}_{\mathbf{P}^{r - 1}}(1))^2 \cap \pi^*\alpha'_1 + \ldots +
c_1(\mathcal{O}_{\mathbf{P}^{r - 1}}(1))^{r - 1} \cap \pi^*\alpha'_{r-2}
$$
as desired.
\end{proof}

\begin{lemma}
\label{lemma-vectorbundle}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
Let
$$
p :
E = \underline{\text{Spec}}(\text{Sym}^*(\mathcal{E}))
\longrightarrow
X
$$
be the associated vector bundle over $X$.
Then $p^* : A_k(X) \to A_{k + r}(E)$ is an isomorphism for all $k$.
\end{lemma}

\begin{proof}
For surjectivity see Lemma \ref{lemma-pullback-affine-fibres-surjective}.

\medskip\noindent
For injectivity we use that the kernel of
$$
j^* :
A_{k + r}(\mathbf{P}(\mathcal{E} \oplus \mathcal{O}_X))
\longrightarrow
A_{k + r}(E)
$$
are the cycles supported in the hyperplace $\mathbf{P}(\mathcal{E})$
at infinity and the fact that the cycles supported there map to cycles
whose expression (in the projective space bundle formula) is a sum of
terms as above with $s \geq 1$ (see proof of projective space bundle
formula). Details omitted.
\end{proof}








\section{The Chern classes of a vector bundle}
\label{section-chern-classes-vector-bundles}

\noindent
We can use the projective space bundle formula to define the
chern classes of a rank $r$ vector bundle in terms of the expansion
of $c_1(\mathcal{O}(1))^r$ in terms of the lower powers, see
formula (\ref{equation-chern-classes}).
The reason for the signs will be explained later.

\begin{definition}
\label{definition-chern-classes}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ is integral and $n = \dim_\delta(X)$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
\begin{enumerate}
\item By Lemma \ref{lemma-chow-ring-projective-bundle} there are
elements $c_i \in A_{\dim(X) - i}(X)$, $i=0, \ldots, r$
such that $c_0 = [X]$, and
\begin{equation}
\label{equation-chern-classes}
\sum\nolimits_{i = 0}^r
(-1)^i c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^i \cap \pi^*c_{r - i}
= 0.
\end{equation}
\item With notation as above we set
$$
c_i(\mathcal{E}) \cap [X] = c_i
$$
as an element of $A_{n - i}(X)$.
We call these the {\it chern classes of $\mathcal{E}$ on $X$}.
\item The {\it total chern class of $\mathcal{E}$ on $X$}
is the combination
$$
c({\mathcal E}) \cap [X] = 
c_0({\mathcal E}) \cap [X] + c_1({\mathcal E}) \cap [X] + \ldots
+ c_r({\mathcal E}) \cap [X]
$$
which is an element of
$A_*(X) = \bigoplus_{k \in \mathbf{Z}} A_k(X)$.
\end{enumerate}
\end{definition}

\noindent
Let us check that this does not give a new notion in case the
vector bundle has rank $1$.

\begin{lemma}
\label{lemma-first-chern-class}
Let $(S, \delta)$ be as in Situation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Assume $X$ is integral and $n = \dim_\delta(X)$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
The first chern class of $\mathcal{L}$ on $X$
is equal to the Weil divisor associated to $\mathcal{L}$
by Definition \ref{definition-divisor-invertible-sheaf}.
\end{lemma}

\begin{proof}
In this proof we use $c_1(\mathcal{L}) \cap [X]$ to denote the
construction of Definition \ref{definition-divisor-invertible-sheaf}.
Since $\mathcal{L}$ has rank $1$ we have
$\mathbf{P}(\mathcal{L}) = X$ and
$\mathcal{O}_{\mathbf{P}(\mathcal{L})} = \mathcal{L}$
by our normalizations. Hence (\ref{equation-chern-classes})
reads
$$
(-1)^1 c_1(\mathcal{L}) \cap c_0 + (-1)^0 c_1 = 0
$$
Since $c_0 = [X]$, we conclude $c_1 = c_1(\mathcal{L}) \cap [X]$
as desired.
\end{proof}

\begin{remark}
\label{remark-equation-signs}
We could also rewrite equation \ref{equation-chern-classes} as
\begin{equation}
\sum\nolimits_{i = 0}^r
c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(-1))^i \cap \pi^*c_{r - i}
= 0.
\end{equation}
but we find it easier to work with the tautological quotient
sheaf $\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)$ instead of
its dual.
\end{remark}




\section{Intersecting with chern classes}
\label{section-intersecting-chern-classes}

\noindent


\begin{definition}
\label{definition-cap-chern-classes}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
We define, for every integer $k$ and any $0 \leq j \leq r$,
an operation
$$
c_j(\mathcal{E}) \cap - : Z_k(X) \to A_{k - j}(X)
$$
called {\it intersection with the $j$th chern class of $\mathcal{E}$}.
\begin{enumerate}
\item Given an integral closed subscheme $i : W \to X$ of $\delta$-dimension
$k$ we define
$$
c_j(\mathcal{E}) \cap [W] = i_*(c_j({i^*\mathcal{E}}) \cap [W])
\in
A_{k - j}(X)
$$
where $c_j({i^*\mathcal{E}}) \cap [W]$ is as defined in
Definition \ref{definition-chern-classes}.
\item For a general $k$-cycle $\alpha = \sum n_i [W_i]$ we set
$$
c_j(\mathcal{E}) \cap \alpha = \sum n_i c_j(\mathcal{E}) \cap [W_i]
$$
\end{enumerate}
\end{definition}

\noindent
Again, if $\mathcal{E}$ has rank $1$ then this agrees with our
previous definition.

\begin{lemma}
\label{lemma-determine-intersections}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
Let $\pi : \mathbf{P}(\mathcal{E}) \to X$ be the projective bundle
associated to $\mathcal{E}$.
For $\alpha \in Z_k(X)$ the elements
$c_j(\mathcal{E}) \cap \alpha$ are the unique elements
$\alpha_j$ of $A_{k - j}(X)$
such that
$$
\sum\nolimits_{i = 0}^r
(-1)^i c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))^i \cap
\pi^*(\alpha_{r - i}) = 0
$$
holds in the Chow group of $\mathbf{P}(\mathcal{E})$.
\end{lemma}

\begin{proof}
Omitted. Hint: this is true by definition for
$\alpha = [X]$ and follows by Lemma \ref{lemma-pushforward-cap-c1}
in general.
\end{proof}

\noindent
This characterization of chern classes allows us to prove many more
properties.

\begin{lemma}
\label{lemma-cap-chern-class-factors-rational-equivalence}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
If $\alpha \sim_{rat} \beta$ are rationally equivalent $k$-cycles
on $X$ then $c_j(\mathcal{E}) \cap \alpha = c_j(\mathcal{E}) \cap \beta$
in $A_{k - j}(X)$.
\end{lemma}

\begin{proof}
Omitted, but follows easily from Lemma \ref{lemma-determine-intersections}.
\end{proof}

\noindent
In other words capping with chern classes of
finite locally free sheaves factors through rational equivalence
to give maps
$$
c_j(\mathcal{E}) \cap - : A_k(X) \to A_{k - j}(X).
$$

\begin{lemma}
\label{lemma-flat-pushback-cap-cj}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
Let $p : X \to Y$ be a flat morphism of relative dimension $r$.
Let $\alpha$ be a $k$-cycle on $Y$.
Then
$$
p_*(c_j(\mathcal{E}) \cap \alpha) = c_j(p^*\mathcal{E}) \cap p_*\alpha
$$
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-pushforward-cap-cj}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$, $Y$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of rank $r$ on $X$.
Let $p : X \to Y$ be a proper morphism.
Let $\alpha$ be a $k$-cycle on $X$.
Let $\mathcal{E}$ be a finite locally free sheaf on $Y$.
Then
$$
p_*(c_j(p^*\mathcal{E}) \cap \alpha) = c_j(\mathcal{E}) \cap p_*\alpha
$$
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-cap-commutative-chern}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$, $\mathcal{F}$ be finite locally free sheaves on $X$
of ranks $r$ and $s$.
For any $\alpha \in A_k(X)$ we have
$$
c_i(\mathcal{E}) \cap c_j(\mathcal{F}) \cap \alpha
=
c_j(\mathcal{F}) \cap c_i(\mathcal{E}) \cap \alpha
$$
as elements of $A_{k - i - j}(X)$.
\end{lemma}

\begin{proof}
Consider
$$
\pi : \mathbf{P}(\mathcal{E}) \times_X \mathbf{P}(\mathcal{F})
\longrightarrow
X
$$
with invertible sheaves
$\mathcal{L} = \text{pr}_1^*\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1)$
and
$\mathcal{N} = \text{pr}_2^*\mathcal{O}_{\mathbf{P}(\mathcal{F})}(1)$.
Write $\alpha_{i, j}$ for the left hand side and $\beta_{i, j}$
for the right hand side. Also write
$\alpha_j = c_j(\mathcal{F}) \cap \alpha$ and 
$\beta_i = c_i(\mathcal{E}) \cap \alpha$.
From Lemma \ref{lemma-determine-intersections}
(pulled back to $X$ for the first two)
and the fact that intersecting with $c_1(\mathcal{L})$ and
$c_1(\mathcal{N})$ commute (Lemma \ref{lemma-cap-commutative})
and Lemma \ref{lemma-flat-pullback-cap-c1}
we see successively that
\begin{align*}
-(-1)^s c_1(\mathcal{N})^s \cap \pi^*\alpha
& =
\sum (-1)^j c_1(\mathcal{N})^j \cap \pi^*\alpha_j \\
-(-1)^r c_1(\mathcal{L})^r \cap \pi^*\alpha
& =
\sum (-1)^i c_1(\mathcal{L})^i \cap \pi^*\beta_i \\
(-1)^{r + s}c_1(\mathcal{L})^r \cap c_1(\mathcal{N})^s \cap \pi^*\alpha
& =
\sum
(-1)^{i + j}
c_1(\mathcal{L})^i \cap c_1(\mathcal{N})^j \cap \pi^*\alpha_{i, j} \\
(-1)^{r + s}c_1(\mathcal{N})^s \cap c_1(\mathcal{L})^r \cap \pi^*\alpha
& =
\sum
(-1)^{i + j}
c_1(\mathcal{N})^j \cap c_1(\mathcal{L})^i \cap \pi^*\beta_{i, j}
\end{align*}
By the projective space bundle formula (applied twice) these representations
are unique. Whence the result.
\end{proof}









\section{Polynomial relations among chern classes}
\label{section-relations-chern-classes}

\begin{definition}
\label{definition-polynomial-relation-chern-classes}
Let $P(x_{i, j}) \in \mathbf{Z}[x_{i, j}]$ be a polynomial.
We write $P$ as a finite sum
$$
\sum\nolimits_s
\sum\nolimits_{I = ((i_1, j_1), (i_2, j_2), \ldots, (i_s, j_s))}
a_I x_{i_1, j_1} \ldots x_{i_s, j_s}.
$$
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}_i$ be a finite collection of finite
locally free sheaves on $X$. We say that $P$
is a {\it polynomial relation among the chern classes}
and we write $P(c_j(\mathcal{E}_i)) = 0$
if for any morphism $f : Y \to X$ of an integral scheme
locally of finite type over $S$ the cycle
$$
\sum\nolimits_s
\sum\nolimits_{I = ((i_1, j_1), (i_2, j_2), \ldots, (i_s, j_s))}
a_I\ c_{j_1}(f^*\mathcal{E}_{i_1}) \cap \ldots
\cap c_{j_s}(f^*\mathcal{E}_{i_s}) \cap [Y]
$$
is zero in $A_*(Y)$.
\end{definition}

\noindent
This is not an elegant definition but it will do
for now. It makes sense because we showed in
Lemma \ref{lemma-cap-commutative-chern} that
capping with chern classes of vector bundles is commutative.
By our definitions and results above
this is equivalent with requiring all the
operations
$$
\sum\nolimits_s
\sum\nolimits_I
a_I\ c_{j_1}(f^*\mathcal{E}_{i_1}) \cap \ldots
\cap c_{j_s}(f^*\mathcal{E}_{i_s}) \cap - :
A_*(Y) \to A_*(Y)
$$
to be zero for all morphisms $f : Y \to X$ which are locally of finite type.

\medskip\noindent
An example of such a relation is the relation
$$
c_1(\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N})
=
c_1(\mathcal{L}) + c_1(\mathcal{N})
$$
proved in Lemma \ref{lemma-c1-cap-additive}.
More generally, here is what happens when we tensor an
arbitrary locally free sheaf by an invertible sheaf.

\begin{lemma}
\label{lemma-chern-classes-E-tensor-L}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let $\mathcal{E}$ be a finite locally free sheaf of
rank $r$ on $X$. Let $\mathcal{L}$ be an invertible
sheaf on $X$. Then
\begin{equation}
\label{equation-twist}
c_i({\mathcal E}\otimes {\mathcal L})
=
\sum\nolimits_{j = 0}^i
\binom{r - i + j}{j} c_{i - j}({\mathcal E}) c_1({\mathcal L})^j
\end{equation}
is a valid polynomial relation in the sense described above.
\end{lemma}

\begin{proof}
This should hold for any triple $(X, \mathcal{E}, \mathcal{L})$.
In particular it should hold when $X$ is integral, and in fact by
definition of a polynomial relation it is enough to prove
it holds when capping with $[X]$ for such $X$. Thus assume
that $X$ is integral. Consider the canonical morphsm
$$
\xymatrix{
{\bf P}({\mathcal E})\ar[rd] \ar[rr]_g
&
&
{\bf P}({\mathcal E} \otimes \mathcal{L})\ar[ld]
\cr
& X & 
\cr}
$$
(insert future reference here). It has the property that
$g^*{\mathcal O}_{{\bf P}({\mathcal E} \otimes \mathcal{L})}(1) 
= {\mathcal O}_{{\bf P}({\mathcal E})}(1) \otimes \pi^* {\mathcal L}$.
This means that we have
$$
\sum\nolimits_{i = 0}^r
(-1)^i
(\xi + x)^i \cap \pi^*(c_{r - i}(\mathcal{E} \otimes \mathcal{L}) \cap [X])
=
0
$$
in $A_*(\mathbf{P}(\mathcal{E}))$, where $\xi$ represents
$c_1(\mathcal{O}_{\mathbf{P}(\mathcal{E})}(1))$ and $x$
represents $c_1(\pi^*\mathcal{L})$. By simple algebra this
is equivalent to
$$
\sum\nolimits_{i = 0}^r
(-1)^i \xi^i \left(
\sum\nolimits_{j = i}^r
(-1)^{j - i}
\binom{j}{i}
x^{j - i} \cap
\pi^*(c_{r - j}(\mathcal{E} \otimes \mathcal{L}) \cap [X])
\right)
=
0
$$
Comparing with
Equation (\ref{equation-chern-classes}) it follows from this that
$$
c_{r - i}(\mathcal{E}) \cap [X] =
\sum\nolimits_{j = i}^r
\binom{j}{i}
(-c_1(\mathcal{L}))^{j - i} \cap
c_{r - j}(\mathcal{E} \otimes \mathcal{L}) \cap [X]
$$
Reworking this (getting rid of minus signs, and renumbering) we get
the desired relation.
\end{proof}

\noindent
Some example cases of (\ref{equation-twist}) are
\begin{align*}
c_1(\mathcal{E} \otimes \mathcal{L})
& =
c_1(\mathcal{E}) +
r c_1(\mathcal{L}) \\
c_2(\mathcal{E} \otimes \mathcal{L})
& =
c_2(\mathcal{E}) +
(r - 1) c_1(\mathcal{E}) c_1(\mathcal{L}) +
\binom{r}{2} c_1(\mathcal{L})^2 \\
c_3(\mathcal{E} \otimes \mathcal{L})
& =
c_3(\mathcal{E}) +
(r - 2) c_2(\mathcal{E})c_1(\mathcal{L}) + 
\binom{r - 1}{2} c_1(\mathcal{E})c_1(\mathcal{L})^2 +
\binom{r}{3} c_1(\mathcal{L})^3
\end{align*}








\section{The chern classes of the sum of invertible sheaves}
\label{section-chern-sum-linebundles}

\begin{lemma}
\label{lemma-chern-sum-linebundles}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
Let ${\mathcal L}_i$, $i = 1, \ldots, r$ be invertible
$\mathcal{O}_X$-modules on $X$. Set
$c_1({\mathcal L}_i) = x_i$. Then
$$
c({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_r)
=
\prod\nolimits_{i = 1}^r (1 + x_i) 
$$
is a valid polynomial relation among chern classes in the sense of
Definition \ref{definition-polynomial-relation-chern-classes}.
\end{lemma}

\begin{proof}
By the polynomial relation (\ref{equation-twist}) and some easy
algebra we see that it suffices to prove the relation in case
$\mathcal{L}_r \cong \mathcal{O}_X$. In this case we have
$$
i : D = \mathbf{P}({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_{r - 1})
\to
\mathbf{P}({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_r)
$$
representing $c_1(\mathcal{O}(1))$. By
Lemma \ref{lemma-relative-effective-cartier} we see that
$$
-(-1)^r c_1(\mathcal{O}(1))^r \cap
[\mathbf{P}({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_r)]
=
i_* (-1)^{r + 1} c_1(\mathcal{O}(1))^{r - 1} \cap
[\mathbf{P}({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_{r - 1})]
$$
Hence it follows that
$$
c_j({\mathcal L}_1 \oplus \ldots \oplus
\mathcal{L}_{r - 1} \oplus {\mathcal O}_X)
=
c_j({\mathcal L}_1 \oplus \ldots \oplus {\mathcal L}_{r - 1})
$$
for all $j$. This argument works on all $Y$ mapping into $X$ in other
words we find the polynomial relation
We win by induction on $r$.
\end{proof}


\section{Additivity of chern classes}
\label{section-additivity-chern-classes}

\begin{lemma}
\label{lemma-additivity-chern-classes}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be a scheme locally of finite type over $S$.
Suppose that ${\mathcal E}$ sits in an
exact sequence
$$
0
\to
{\mathcal E}_1
\to 
{\mathcal E}
\to 
{\mathcal E}_2
\to 
0
$$
of finite locally free sheaves $\mathcal{E}_i$ of rank $r_i$.
Then
$$
c({\mathcal E}) = c({\mathcal E}_1) c({\mathcal E}_2)
$$
is a polynomial relation among chern classes.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}


\section{The splitting principle}
\label{section-splitting-principle}


\begin{lemma}
\label{lemma-splitting-principle}
Let $(S, \delta)$ be as in Sitation \ref{situation-setup}.
Let $X$ be locally of finite type over $S$.
For any finite locally free sheaf ${\mathcal E}$ on $X$
there exists a flat morphism or fixed dimension $r$
$f : Y \to X$ such that
\begin{enumerate}
\item $f^* : A_*(X) \to A_{* + r}(Y)$ is injective, and
\item $f^*{\mathcal E}$ has a filtration
with succesive quotients ${\mathcal L}_1, \ldots, {\mathcal L}_r$
for some invertible ${\mathcal O}_Y$-modules ${\mathcal L}_i$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted. Hint: Flag varieties.
\end{proof}

\noindent
Using the above we formally write
$$
c({\mathcal E}) = \prod\nolimits (1+x_i)
$$
and we call $x_i$ the {\it Chern roots} of ${\mathcal E}$.
Of course it really doesn't make sense in the cohomology 
of $X$, but it does make sense in some other variety
$Y$ such that the cohomology of $X$ injects into it.
As is customary, any symmetric polynomial in the $x_i$
then corresponds to a cohomology class on $X$ because
the chern classes of ${\mathcal E}$ are up to sign the 
elementary symmetric functions in the $x_i$.

\medskip\noindent
It is especially nice to work in the
Chow groups of the Flag variety of ${\mathcal E}$ because
$ \bigoplus A_*(\text{Flag}({\mathcal E})) =
\big(\bigoplus A^{i}(X)\big) [x_1,\ldots,x_r]/I $
where $I$ is smallest ideal such that the following
equation holds true:
$ \prod_{i=1}^r (T - x_i) =  T^r - c_1({\mathcal E}) T^{r-1}+ \ldots
+ (-1)^r c_r({\mathcal E})$. This can be proved by repeated application
of the projective space bundle formula. (And of course there
is a corresponding statement for the odd cohomology.)





\section{Chern classes and tensor product}
\label{section-chern-classes-tensor}

\noindent
We define the {\it Chern character} of a finite locally free
sheaf of rank $r$ to be the expression
$$
ch({\mathcal E}) := \sum\nolimits_{i=1}^r e^{x_i}
$$
if the $x_i$ are the chern roots of ${\mathcal E}$. By the above
we have, in case of an exact sequence
$
0
\to
{\mathcal E}_1
\to 
{\mathcal E}
\to 
{\mathcal E}_2
\to 
0
$
that $ch({\mathcal E}) = ch({\mathcal E}_1) + ch({\mathcal E}_2)$. 
Using the Chern character we can express the compatibility
of the chern classes and tensor product as follows:
$$
ch({\mathcal E}_1 \otimes_{{\mathcal O}_X} {\mathcal E}_2) =
ch({\mathcal E}_1) ch({\mathcal E}_2)
$$
The proof follows directly from the splitting principle.














\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
