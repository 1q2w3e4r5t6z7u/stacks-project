\input{preamble}

% OK, start here.
%
\begin{document}

\title{Etale Cohomology: Sites}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents





\section{The \'etale site}
\label{section-etale-site}

\noindent
At this point we start exploring the \'etale site of a scheme in
more detail. As a first step we discuss a little the notion of an
\'etale morphism.





\section{\'Etale morphisms}
\label{section-etale-morphism}

\noindent
For more details, see
Morphisms, Section \ref{morphisms-section-etale}
for the formal definition and
Etale Morphisms, Sections
\ref{etale-section-etale-morphisms},
\ref{etale-section-structure-etale-map},
\ref{etale-section-etale-smooth},
\ref{etale-section-topological-etale},
\ref{etale-section-functorial-etale}, and
\ref{etale-section-properties-permanence}
for a survey of interesting properties of \'etale morphisms.

\medskip\noindent
Recall that an algebra $A$ over an algebraically closed field $k$ is
{\it smooth} if it is of finite type and the module of differentials
$\Omega_{A/k}$ is finite locally free of rank equal to the dimension.
A scheme $X$ over $k$ is {\it smooth} over $k$ if it is locally of finite
type and each affine open is the spectrum of a smooth $k$-algebra.
If $k$ is not algebraically closed then an $A$-algebra is said to be
a smooth $k$-algebra if $A \otimes_k \overline{k}$ is a smooth
$\overline{k}$-algebra. A ring map $A \to B$ is smooth if it is
flat, finitely presented, and for all primes $\mathfrak p \subset A$
the fibre ring $\kappa(\mathfrak p) \otimes_A B$ is smooth over the residue
field $\kappa(\mathfrak p)$. More generally, a morphism of schemes is
{\it smooth} if it is flat, finitely presented, and the geometric fibers
are smooth.

\medskip\noindent
For these facts please see
Morphisms, Section \ref{morphisms-section-smooth}.
Using this we may define an \'etale morphism as follows.

\begin{definition}
\label{definition-etale-morphism}
A morphism of schemes is {\it \'etale} if it is smooth of relative dimension 0.
\end{definition}

\noindent
In particular, a morphism of schemes $X \to S$ is \'etale if it is smooth
and $\Omega_{X/S} = 0$.

\begin{proposition}
\label{proposition-etale-morphisms}
(Facts on \'etale morphisms)
\begin{enumerate}
\item Let $k$ be a field. A morphism of schemes $U \to \text{Spec}(k)$ is
\'etale if and only if $U \cong \coprod_{i \in I} \text{Spec}(k_i)$
such that for each $i \in I$
the ring $k_i$ is a field which is a finite separable extension of $k$.
\item Let $\varphi : U \to S$ be a morphism of schemes. The following
conditions are equivalent:
\begin{enumerate}
\item $\varphi$ is \'etale,
\item $\varphi$ is locally finitely presented, flat, and all its fibres are
\'etale,
\item $\varphi$ is flat and unramified.
\end{enumerate}
\item A ring map $A \to B$ is \'etale if and only if
$B \cong A[x_1, \dots, x_n]/(f_1,\dots,f_n)$
such that $\Delta = \det \left( \frac{\partial f_i}{\partial x_j} \right)$
is invertible in $B$.
\item The base change of an \'etale morphism is \'etale.
\item Compositions of \'etale morphisms are \'etale.
\item Fibre products and products of \'etale morphisms are \'etale.
\item An \'etale morphism has relative dimension 0.
\item Let $Y \to X$ be an \'etale morphism.
If $X$ is reduced (respectively regular) then so is $Y$.
\item Etale morphims are open.
\item If $X \to S$ and $Y \to S$ are \'etale, then any
$S$-morphism $X \to Y$ is also \'etale.
\end{enumerate}
\end{proposition}

\begin{proof}
We have proved these facts (and more) in the preceding chapters.
Here is a list of references:
(1) Morphisms, Lemma \ref{morphisms-lemma-etale-over-field}.
(2) Morphisms, Lemmas \ref{morphisms-lemma-etale-flat-etale-fibres}
and \ref{morphisms-lemma-flat-unramified-etale}.
(3) Algebra, Lemma \ref{algebra-lemma-etale-standard-smooth}.
(4) Morphisms, Lemma \ref{morphisms-lemma-base-change-etale}.
(5) Morphisms, Lemma \ref{morphisms-lemma-composition-etale}.
(6) Follows formally from (4) and (5).
(7) Morphisms, Lemmas \ref{morphisms-lemma-etale-locally-quasi-finite}
and \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
(8) See Algebra, Lemmas \ref{algebra-lemma-reduced-goes-up} and
\ref{algebra-lemma-Rk-goes-up}, see also more results of this kind
in Etale Morphisms, Section \ref{etale-section-properties-permanence}.
(9) See Morphisms, Lemma \ref{morphisms-lemma-fppf-open} and
\ref{morphisms-lemma-etale-flat}.
(10) See Morphisms, Lemma \ref{morphisms-lemma-etale-permanence}.
\end{proof}

\begin{definition}
\label{definition-standard-etale}
A ring map $A \to B$ is called {\it standard \'etale} if
$B \cong \left(A[t]/(f)\right)_{g}$ with $f, g \in A[t]$, with $f$ monic,
and $\text{d}f/\text{d}t$ invertible in $B$.
\end{definition}

\noindent
It is true that a standard \'etale ring map is \'etale. Namely, suppose
that $B = \left(A[t]/(f)\right)_{g}$ with $f, g \in A[t]$, with $f$ monic,
and $\text{d}f/\text{d}t$ invertible in $B$. Then $A[t]/(f)$ is a finite
free $A$-module of rank equal to the degree of the monic polynomial $f$.
Hence $B$, as a localization of this free algebra is finitely presented
and flat over $A$. To finish the proof that $B$ is \'etale it suffices
to show that the fibre rings
$$
\kappa(\mathfrak p) \otimes_A B
\cong
\kappa(\mathfrak p) \otimes_A (A[t]/(f))_g
\cong
\kappa(\mathfrak p)[t, 1/\overline{g}]/(\overline{f})
$$
are finite products of finite separable field extensions.
Here $\overline{f}, \overline{g} \in \kappa(\mathfrak p)[t]$ are
the images of $f$ and $g$. Let
$$
\overline{f} = \overline{f}_1 \ldots \overline{f}_a
\overline{f}_{a + 1}^{e_1} \ldots \overline{f}_{a + b}^{e_b}
$$
be the factorization of $\overline{f}$ into powers of pairwise distinct
irreducible monic factors $\overline{f}_i$ with $e_1, \ldots, e_b > 0$.
By assumption $\text{d}\overline{f}/\text{d}t$ is invertible in
$\kappa(\mathfrak p)[t, 1/\overline{g}]$. Hence we see that
at least all the $\overline{f}_i$, $i > a$ are invertible. We conclude
that
$$
\kappa(\mathfrak p)[t, 1/\overline{g}]/(\overline{f})
\cong
\prod\nolimits_{i \in I} \kappa(\mathfrak p)[t]/(\overline{f}_i)
$$
where $I \subset \{1, \ldots, a\}$ is the subset of indices $i$ such that
$\overline{f}_i$ does not divide $\overline{g}$. Moreover, the image of
$\text{d}\overline{f}/\text{d}t$ in the factor
$\kappa(\mathfrak p)[t]/(\overline{f}_i)$ is clearly equal to a
unit times $\text{d}\overline{f}_i/\text{d}t$. Hence we conclude that
$\kappa_i = \kappa(\mathfrak p)[t]/(\overline{f}_i)$ is a finite field
extension of $\kappa(\mathfrak p)$ generated by one element whose
minimal polynomial is separable, i.e., the field extension
$\kappa(\mathfrak p) \subset \kappa_i$ is finite separable as desired.

\medskip\noindent
It turns out that any etale ring map is locally standard etale.
To formulate this we introduce the following notation.
A ring map $A \to B$ is {\it \'etale at a prime $\mathfrak q$} of $B$ if there
exists $h \in B$, $h \not \in \mathfrak q$ such that $A \to B_h$ is \'etale.
Here is the result.

\begin{theorem}
\label{theorem-standard-etale}
A ring map $A \to B$ is \'etale at a prime $\mathfrak q$ if and only if there
exists $g \in B$, $g \not \in \mathfrak q$ such that $B_g$ is standard
\'etale over $A$.
\end{theorem}

\begin{proof}
See
Algebra, Proposition \ref{algebra-proposition-etale-locally-standard}.
\end{proof}





\section{\'Etale coverings}
\label{section-etale-covering}

\noindent
We recall the definition.

\begin{definition}
\label{definition-etale-covering}
An {\it \'etale covering} of a scheme $U$ is a family of morphisms
of schemes
$\{\varphi_i : U_i \to U\}_{i \in I}$ such that
\begin{enumerate}
\item each $\varphi_i$ is an \'etale morphism ;
\item the $U_i$ cover $U$, i.e., $U = \bigcup_{i\in I}\varphi_i(U_i)$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-etale-fpqc}
Any \'etale covering is an fpqc covering.
\end{lemma}

\begin{proof}
(See also
Topologies,
Lemma \ref{topologies-lemma-zariski-etale-smooth-syntomic-fppf-fpqc}.)
Let $\{\varphi_i : U_i \to U\}_{i \in I}$ be an \'etale covering.
Since an \'etale morphism is flat, and the elements of the covering should
cover its target, the property fp (faithfully flat) is satisfied.
To check the property qc (quasi-compact), let $V \subset U$ be an affine
open, and write $\varphi_i^{-1} = \bigcup_{j \in J_i} V_{ij}$
for some affine opens $V_{ij} \subset U_i$. Since $\varphi_i$ is open
(as \'etale morphisms are open), we see that
$V = \bigcup_{i\in I} \bigcup_{j \in J_i} \varphi_i(V_{ij})$
is an open covering of $U$.
Further, since $V$ is quasi-compact, this covering has a finite
refinement.
\end{proof}

\noindent
So any statement which is true for fpqc coverings
remains true {\it a fortiori} for \'etale coverings. For
instance, the \'etale site is subcanonical.

\begin{definition}
\label{definition-big-etale-site}
(For more details see Section \ref{section-big-small}, or
Topologies, Section \ref{topologies-section-etale}.)
Let $S$ be a scheme.
The {\it big \'etale site over $S$} is the site
$(\textit{Sch}/S)_{etale}$, see
Definition \ref{definition-tau-site}.
The {\it small \'etale site over $S$} is the site $S_{etale}$, see
Definition \ref{definition-tau-site}.
We define similarly the {\it big} and {\it small Zariski sites} on $S$,
denoted $(\textit{Sch}/S)_{Zar}$ and $S_{Zar}$.
\end{definition}

\noindent
Loosely speaking the big \'etale site of $S$ is made up out of schemes over $S$
and coverings the \'etale coverings. The small \'etale site of $S$ is made up
out of schemes \'etale over $S$ with coverings the \'etale coverings.
Actually any morphism between objects of $S_{etale}$ is \'etale, in virtue of
Proposition \ref{proposition-etale-morphisms},
hence to check that $\{U_i \to U\}_{i \in I}$ in $S_{etale}$
is a covering it suffices to check that $\coprod U_i \to U$ is surjective.

\medskip\noindent
The small \'etale site has fewer objects than the big \'etale site, it
contains only the ``opens'' of the \'etale topology on $S$. It is a full
subcategory of the big \'etale site, and its topology is induced from the
topology on the big site. Hence it is true that the restriction functor
from the big \'etale site to the small one is exact and maps injectives to
injectives. This has the following consequence.

\begin{proposition}
\label{proposition-cohomology-restrict-small-site}
Let $S$ be a scheme and $\mathcal{F}$ an abelian sheaf on
$(\textit{Sch}/S)_{etale}$.
Then $\mathcal{F}|_{S_{etale}}$ is a sheaf on $S_{etale}$ and
$$
H^p_{etale}(S, \mathcal{F}|_{S_{etale}}) = H^p_{etale}(S, \mathcal{F})
$$
for all $p \geq 0$.
\end{proposition}

\begin{proof}
This is a special case of Lemma \ref{lemma-compare-cohomology-big-small}.
\end{proof}

\noindent
In accordance with the general notation introduced in
Section \ref{section-big-small}
we write $H_{etale}^p(S, \mathcal{F})$ for the above cohomology group.





%9.24.09
\section{Kummer theory}
\label{section-kummer}

\noindent
Let $n \in \mathbf{N}$ and consider the functor $\mu_n$ defined by
$$
\begin{matrix}
\textit{Sch}^{opp} & \longrightarrow & \textit{Ab} \\
S & \longmapsto &
\mu_n(T)
=
\{t \in \Gamma(S, \mathcal{O}_S^*) \mid t^n = 1 \}.
\end{matrix}
$$
By
Groupoids, Example \ref{groupoids-example-roots-of-unity}
this is a representable functor, and the scheme representing it
is denoted $\mu_n$ also. By
Lemma \ref{lemma-representable-sheaf-fpqc}
this functor satisfies the sheaf condition for the fpqc topology
(in particular, it is also satisfies the sheaf condition for the
\'etale, Zariski, etc topology).

\begin{lemma}
\label{lemma-kummer-sequence}
If $n\in \mathcal{O}_S^*$ then
$$
0 \to
\mu_{n, S} \to
\mathbf{G}_{m, S} \xrightarrow{(\cdot)^n}
\mathbf{G}_{m, S} \to 0
$$
is a short exact sequence of sheaves on both the small and
big \'etale site of $S$.
\end{lemma}

\begin{remark}
\label{remark-no-kummer-sequence-zariski}
This lemma is false when ``\'etale'' is replaced with ``Zariski''.
Since the \'etale topology is stronger than the smooth topology, see
Topologies, Lemma \ref{topologies-lemma-zariski-etale-smooth}
it follows that the sequence is also exact in the smooth topology.
\end{remark}

\begin{proof}
By definition the sheaf $\mu_{n, S}$ is the kernel of the map
$(\cdot)^n$. Hence it suffices to show that the last map is surjective.
Let $U$ be a scheme over $S$. Let
$f \in \mathbf{G}_m(U) = \Gamma(U, \mathcal{O}_U^*)$.
We need to show that we can find an \'etale cover of
$U$ over the members of which the restriction of $f$ is an $n$th power.
Set
$$
U' =
\underline{\text{Spec}}_U(\mathcal{O}_U[T]/(T^n-f))
\xrightarrow{\pi}
U.
$$
(See
Constructions, Section \ref{constructions-section-spec-via-glueing} or
\ref{constructions-section-spec}
for a discussion of the relative spectrum.)
Let $\text{Spec}(A) \subset U$ be an affine open, and say $f|_U$ corresponds
to the unit $a \in A^*$. Then $\pi^{-1}(U) = \text{Spec}(B)$ with
$B = A[T]/(T^n - a)$. The ring map $A \to B$ is finite free of rank $n$,
hence it is faithfully flat, and hence we conclude that
$\text{Spec}(B) \to \text{Spec}(A)$ is surjective. Since this holds for every
affine open in $U$ we conclude that $\pi$ is surjective.
In addition, $n$ and $T^{n - 1}$ are invertible in $B$, so
$nT^{n-1} \in B^*$ and the ring map $A \to B$ is standard \'etale,
in particular \'etale. Since this holds for every affine open of $U$
we conclude that $\pi$ is etale. Hence
$\mathcal{U} = \{\pi : U' \to U\}$ is an \'etale covering.
Moreover, $f|_{U'} = (f')^n$ where $f'$ is the class of $T$
in $\Gamma(U', \mathcal{O}_{U'}^*)$, so $\mathcal{U}$ has the desired property.
\end{proof}

\noindent
By Lemmas \ref{theorem-picard-group} and \ref{lemma-kummer-sequence}
and general properties of cohomology we obtain
the long exact cohomology sequence
$$
\xymatrix{
0 \ar[r] &
H_{etale}^0(S, \mu_{n, S}) \ar[r] &
\Gamma(S, \mathcal{O}_S^*) \ar^{(\cdot)^n}[r] &
\Gamma(S, \mathcal{O}_S^*) \ar@(rd,ul)[rdllllr]
\\
& H_{etale}^1(S, \mu_{n, S}) \ar[r] &
\text{Pic}(S) \ar^{(\cdot)^n}[r] &
\text{Pic} (S) \ar@(rd,ul)[rdllllr] \\
& H_{etale}^2(S, \mu_{n, S}) \ar[r] &
\cdots
}
$$
at least if $n$ is invertible on $S$. When $n$ is not invertible on $S$
we can apply the following lemma.

\begin{lemma}
\label{lemma-kummer-sequence-syntomic}
For any $n \in \mathbf{N}$ the sequence
$$
0 \to
\mu_{n, S} \to
\mathbf{G}_{m, S} \xrightarrow{(\cdot)^n}
\mathbf{G}_{m, S} \to 0
$$
is a short exact sequence of sheaves on the site
$(\textit{Sch}/S)_{fppf}$ and $(\textit{Sch}/S)_{synomtic}$.
\end{lemma}

\begin{remark}
\label{remark-no-kummer-sequence-smooth-etale-zariski}
This lemma is false for the smooth, etale, or Zariski topology.
\end{remark}

\begin{proof}
By definition the sheaf $\mu_{n, S}$ is the kernel of the map
$(\cdot)^n$. Hence it suffices to show that the last map is surjective.
Since the syntomic topology is stronger than the fppf topology, see
Topologies, Lemma \ref{topologies-lemma-zariski-etale-smooth-syntomic-fppf},
it suffices to prove this for the syntomic topology.
Let $U$ be a scheme over $S$. Let
$f \in \mathbf{G}_m(U) = \Gamma(U, \mathcal{O}_U^*)$.
We need to show that we can find a synomtic cover of
$U$ over the members of which the restriction of $f$ is an $n$th power.
Set
$$
U' =
\underline{\text{Spec}}_U(\mathcal{O}_U[T]/(T^n-f))
\xrightarrow{\pi}
U.
$$
(See
Constructions, Section \ref{constructions-section-spec-via-glueing} or
\ref{constructions-section-spec}
for a discussion of the relative spectrum.)
Let $\text{Spec}(A) \subset U$ be an affine open, and say $f|_U$ corresponds
to the unit $a \in A^*$. Then $\pi^{-1}(U) = \text{Spec}(B)$ with
$B = A[T]/(T^n - a)$. The ring map $A \to B$ is finite free of rank $n$,
hence it is faithfully flat, and hence we conclude that
$\text{Spec}(B) \to \text{Spec}(A)$ is surjective. Since this holds for every
affine open in $U$ we conclude that $\pi$ is surjective.
In addition, $B$ is a global relative complete intersection over $A$, so
the ring map $A \to B$ is standard syntomic,
in particular syntomic. Since this holds for every affine open of $U$
we conclude that $\pi$ is syntomic. Hence
$\mathcal{U} = \{\pi : U' \to U\}$ is a syntomic covering.
Moreover, $f|_{U'} = (f')^n$ where $f'$ is the class of $T$
in $\Gamma(U', \mathcal{O}_{U'}^*)$, so $\mathcal{U}$ has the desired property.
\end{proof}

\noindent
By Lemmas \ref{theorem-picard-group} and \ref{lemma-kummer-sequence-syntomic}
and general properties of cohomology we obtain
the long exact cohomology sequence
$$
\xymatrix{
0 \ar[r] &
H_{fppf}^0(S, \mu_{n, S}) \ar[r] &
\Gamma(S, \mathcal{O}_S^*) \ar^{(\cdot)^n}[r] &
\Gamma(S, \mathcal{O}_S^*) \ar@(rd,ul)[rdllllr]
\\
& H_{fppf}^1(S, \mu_{n, S}) \ar[r] &
\text{Pic}(S) \ar^{(\cdot)^n}[r] &
\text{Pic} (S) \ar@(rd,ul)[rdllllr] \\
& H_{fppf}^2(S, \mu_{n, S}) \ar[r] &
\cdots
}
$$
for any scheme $S$ and any integer $n$. Of course there is a similar sequence
with syntomic cohomology.

\medskip\noindent
Let $n \in \mathbf{N}$ and let $S$ be any scheme.
There is another more direct way to describe the first cohomology group with
values in $\mu_n$. Consider pairs
$(\mathcal{L}, \alpha)$ where $\mathcal{L}$ is an invertible sheaf on $S$
and $\alpha : \mathcal{L}^{\otimes n} \to \mathcal{O}_S$ is a trivialization
of the $n$th tensor power of $\mathcal{L}$.
Let $(\mathcal{L}', \alpha')$ be a second such pair.
An isomorphism $\varphi : (\mathcal{L}, \alpha) \to (\mathcal{L}', \alpha')$
is an isomorphism $\varphi : \mathcal{L} \to \mathcal{L}'$ of invertible
sheaves such that the diagram
$$
\xymatrix{
\mathcal{L}^{\otimes n} \ar[d]_{\varphi^{\otimes n}} \ar[r]_\alpha &
\mathcal{O}_S \ar[d]^1 \\
(\mathcal{L}')^{\otimes n} \ar[r]^{\alpha'} &
\mathcal{O}_S \\
}
$$
commutes. Thus we have
\begin{equation}
\label{equation-isomorphisms-pairs}
\text{Isom}_S((\mathcal{L}, \alpha), (\mathcal{L}', \alpha'))
=
\left\{
\begin{matrix}
\emptyset & \text{if} & \text{they are not isomorphic} \\
H^0(S, \mu_{n, S})\cdot \varphi & \text{if} &
\varphi \text{ isomorphism of pairs}
\end{matrix}
\right.
\end{equation}
Moreover, given two pairs $(\mathcal{L}, \alpha)$, $(\mathcal{L}', \alpha')$
the tensor product
$$
(\mathcal{L}, \alpha) \otimes (\mathcal{L}', \alpha')
=
(\mathcal{L} \otimes \mathcal{L}', \alpha \otimes \alpha')
$$
is another pair. The pair $(\mathcal{O}_S, 1)$ is an identity for this
tensor product operation, and an inverse is given by
$$
(\mathcal{L}, \alpha)^{-1} = (\mathcal{L}^{\otimes -1}, \alpha^{\otimes -1}).
$$
Hence the collection of isomorphism classes of pairs forms an abelian group.
Note that
$$
(\mathcal{L}, \alpha)^{\otimes n}
=
(\mathcal{L}^{\otimes n}, \alpha^{\otimes n})
\xrightarrow{\alpha}
(\mathcal{O}_S, 1)
$$
hence every element of this group has order dividing $n$. We warn the reader
that this group is in general {\bf not} the $n$-torsion in $\text{Pic}(S)$.

\begin{lemma}
\label{lemma-describe-h1-mun}
Let $S$ be a scheme. There is a canonical identification
$$
H_{etale}^1(S, \mu_n) =
\text{group of pairs }(\mathcal{L}, \alpha)\text{ up to isomorphism as above}
$$
if $n$ is invertible on $S$. In general we have
$$
H_{fppf}^1(S, \mu_n) =
\text{group of pairs }(\mathcal{L}, \alpha)\text{ up to isomorphism as above}.
$$
The same result holds with fppf replaced by syntomic.
\end{lemma}

\begin{proof}
We first prove the second isomorphism.
Let $(\mathcal{L}, \alpha)$ be a pair as above.
Choose an affine open covering $S = \bigcup U_i$ such that
$\mathcal{L}|_{U_i} \cong \mathcal{O}_{U_i}$. Say $s_i \in \mathcal{L}(U_i)$
is a generator. Then $\alpha(s_i^{\otimes n}) = f_i \in \mathcal{O}_S^*(U_i)$.
Writing $U_i = \text{Spec}(A_i)$ we see there exists a global
relative complete intersection $A_i \to B_i = A_i[T]/(T^n - f_i)$
such that $f_i$ maps to an $n$th power in $B_i$. In other words, setting
$V_i = \text{Spec}(B_i)$ we obtain a syntomic covering
$\mathcal{V} = \{V_i \to S\}_{i \in I}$ and trivializations
$\varphi_i : (\mathcal{L}, \alpha)|_{V_i} \to (\mathcal{O}_{V_i}, 1)$.

\medskip\noindent
We will use this result (the existence of the covering $\mathcal{V}$)
to associate to this pair a cohomology class in
$H^1_{syntomic}(S, \mu_{n, S})$. We give two (equivalent) constructions.

\medskip\noindent
First construction: using \u Cech cohomology.
Over the double overlaps $V_i \times_S V_j$ we have the isomorphism
$$
(\mathcal{O}_{V_i \times_S V_j}, 1)
\xrightarrow{\text{pr}_0^*\varphi_i^{-1}}
(\mathcal{L}|_{V_i \times_S V_j}, \alpha|_{V_i \times_S V_j})
\xrightarrow{\text{pr}_1^*\varphi_j}
(\mathcal{O}_{V_i \times_S V_j}, 1)
$$
of pairs. By (\ref{equation-isomorphisms-pairs}) this is given by an
element $\zeta_{ij} \in \mu_n(V_i \times_S V_j)$. We omit the verification
that these $\zeta_{ij}$'s give a $1$-cocycle, i.e., give
an element $(\zeta_{i_0i_1}) \in \check C(\mathcal{V}, \mu_n)$
with $d(\zeta_{i_0i_1}) = 0$. Thus its class is an element in
$\check H^1(\mathcal{V}, \mu_n)$ and by
Theorem \ref{theorem-cech-ss}
it maps to a cohomology class in $H^1_{syntomic}(S, \mu_{n, S})$.

\medskip\noindent
Second construction: Using torsors. Consider the presheaf
$$
\mu_n(\mathcal{L}, \alpha) :
U
\longmapsto
\text{Isom}_U((\mathcal{O}_U, 1), (\mathcal{L}, \alpha)|_U))
$$
on $(\textit{Sch}/S)_{syntomic}$.
We may view this as a subpresheaf of
$\textit{Hom}_{\mathcal{O}}(\mathcal{O}, \mathcal{L})$ (internal hom
sheaf, see
Modules on Sites, Section \ref{sites-modules-section-tensor-and-internal-hom}).
Since the conditions defining this subpresheaf are local, we see that it is
a sheaf.
By (\ref{equation-isomorphisms-pairs}) this sheaf has a free action of
the sheaf $\mu_{n, S}$. Hence the only thing we have to check is that
it locally has sections. This is true because of the existence of the
trivializing cover $\mathcal{V}$. Hence $\mu_n(\mathcal{L}, \alpha)$
is a $\mu_{n, S}$-torsor and by
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-torsors-h1}
we obtain a corresponding element of $H^1_{syntomic}(S, \mu_{n, S})$.

\medskip\noindent
Ok, now we have to still show the following
\begin{enumerate}
\item The two constructions give the same cohomology class.
\item Isomorphic pairs give rise to the same cohomology class.
\item The cohomology class of
$(\mathcal{L}, \alpha) \otimes (\mathcal{L}', \alpha')$
is the sum of the cohomology classes of
$\mathcal{L}, \alpha)$ and $(\mathcal{L}', \alpha')$.
\item If the cohomology class is trivial, then the pair is trivial.
\item Any element of $H^1_{syntomic}(S, \mu_{n, S})$ is the
cohomology class of a pair.
\end{enumerate}
We omit the proof of (1). Part (2) is clear from the second construction,
since isomorphic torsors give the same cohomology classes.
Part (3) is clear from the first construction, since the resulting
Cech classes add up. Part (4) is clear from the second construction
since a torsor is trivial if and only if it has a global section, see
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-trivial-torsor}.

\medskip\noindent
Part (5) can be seen as follows (allthough a direct proof would be
preferable). Suppose $\xi \in H^1_{syntomic}(S, \mu_{n, S})$.
Then $\xi$ maps to an element
$\overline{\xi} \in H^1_{syntomic}(S, \mathbf{G}_{m, S})$
with $n \overline{\xi} = 0$. By
Theorem \ref{theorem-picard-group}
we see that $\overline{\xi}$ corresponds to an invertible sheaf $\mathcal{L}$
whose $n$th tensor power is isomorphic to $\mathcal{O}_S$.
Hence there exists a pair $(\mathcal{L}, \alpha')$ whose cohomology
class $\xi'$ has the same image $\overline{\xi'}$ in
$H^1_{syntomic}(S, \mathbf{G}_{m, S})$. Thus it suffices to show
that $\xi - \xi'$ is the class of a pair. By construction, and the
long exact cohomology sequence above, we see that
$\xi - \xi' = \partial(f)$ for some $f \in H^0(S, \mathcal{O}_S^*)$.
Consider the pair $(\mathcal{O}_S, f)$. We omit the verification
that the cohomology class of this pair is $\partial(f)$, which
finishes the proof of the first identification (with fppf replaced
with synomtic).

\medskip\noindent
To see the first, note that if $n$ is invertible on $S$, then the
covering $\mathcal{V}$ constructed in the first part of the proof
is actually an \'etale covering (compare with the proof of
Lemma \ref{lemma-kummer-sequence}). The rest of the proof is independent
of the topology, apart from the very last argument which uses that
the Kummer sequence is excact, i.e., uses Lemma \ref{lemma-kummer-sequence}.
\end{proof}






\section{Neighborhoods, stalks and points}
\label{section-stalks}

\begin{definition}
\label{definition-geometric-point}
Let $S$ be a scheme.
\begin{enumerate}
\item A {\it geometric point} of $S$ is a morphism
$\text{Spec}(k) \to S$ where $k$ is separably closed\footnote{In other
chapters of the stacks project we may use algebraically closed instead.}.
Such a point is usually denoted $\overline{s}$, i.e., by an overlined
small case letter, and in this case the scheme $\text{Spec}(k)$ is denoted
$\overline{s}$ as well.
\item An {\it \'etale neighborhood} of a geometric point $\overline{s}$
of $S$ is a commutative diagram
$$
\xymatrix{
& U \ar^{\varphi}[d] \\
{\bar s} \ar^{\bar s}[r] \ar^{\bar u}[ur] & S
}
$$
where $\varphi$ is an \'etale morphism of schemes.
We write $(\mathcal{U}, \overline{u}) \to (S, \overline{s})$.
\item A {\it morphism of \'etale neighborhoods}
$(U, \overline{u}) \to (U', \overline{u}')$
is an $S$-morphism $h: U \to U'$
such that $\overline{u}' = h \circ \overline{u}$.
\end{enumerate}
\end{definition}

\begin{remark}
\label{remark-etale-between-etale}
Since $U$ and $U'$ are \'etale over $S$, any $S$-morphism
between them is also \'etale, see
Proposition \ref{proposition-etale-morphisms}.
In particular all morphisms of \'etale neighborhoods are \'etale.
\end{remark}

\begin{lemma}
\label{lemma-cofinal-etale}
Let $S$ be a scheme, and let $\overline{s}$ be a geometric point of $S$.
The category of \'etale neighborhoods is cofiltered. More precisely:
\begin{enumerate}
\item Let $(U_i, \overline{u}_i)_{i=1, 2}$ be two \'etale neighborhoods of
$\overline{s}$ in $S$. Then there exists a third \'etale neighborhood
$(U, \overline{u})$ and morphims $(U, \overline{u}) \to (U_i, \overline{u}_i)$,
$i = 1, 2$.
\item Let $h_1, h_2: (U, \overline{u}) \to (U', \overline{u}')$ be two
morphisms between \'etale neighborhoods of $\overline{s}$. Then there exist an
\'etale neighborhood $(U'', \overline{u}'')$ and a morphism
$h : (U'', \overline{u}'') \to (U, \overline{u})$
which equalizes $h_1$ and $h_2$, i.e., such that
$h_1 \circ h = h_2 \circ h$.		
\end{enumerate}
\end{lemma}

\begin{proof}
For part (1), consider the fibre product $U = U_1 \times_S U_2$.
It is \'etale over both $U_1$ and $U_2$ because \'etale morphisms are
preserved under base change, see
Proposition \ref{proposition-etale-morphisms}.
The map $\overline{s} \to U$ defined by $(\overline{u}_1, \overline{u}_2)$
gives it the structure of an \'etale neighborhood mapping to both
$U_1$ and $U_2$. For part (2), define $U''$ as the fibre product
$$
\xymatrix{
U'' \ar[r] \ar[d] & U \ar^{(h_1,h_2)}[d] \\
U' \ar^-\Delta[r] & U' \times_S U'.
}
$$
Since $\overline{u}$ and $\overline{u}'$ agree over $S$ with $\overline{s}$,
we see that $\overline{u}'' = (\overline{u}, \overline{u}')$ is a geometric
point of $U''$. In particular $U'' \not = \emptyset$.
Moreover, since $U'$ is \'etale over $S$, so is the fibre product
$U'\times_S U'$ (see
Proposition \ref{proposition-etale-morphisms}).
Hence the vertical arrow $(h_1, h_2)$ is etale by
Remark \ref{remark-etale-between-etale} above.
Therefore $U''$ is \'etale over $U'$ by base change, and hence also
etale over $S$ (because compositions of \'etale morphisms are \'etale).
Thus $(U'', \overline{u}'')$ is a solution to the problem.
\end{proof}

\begin{lemma}
\label{lemma-geometric-lift-to-cover}
Let $S$ be a scheme.
Let $\overline{s}$ be a geometric point of $S$.
Let $(U, \overline{u})$ an \'etale neighborhood of $\overline{s}$.
Let $\mathcal{U} = \{\varphi_i : U_i \to U \}_{i\in I}$ be an \'etale covering.
Then there exist $i \in I$ and $\overline{u}_i : \overline{s} \to U_i$
such that $\varphi_i : (U_i, \overline{u}_i) \to (U, \overline{u})$
is a morphism of \'etale neighborhoods.
\end{lemma}

\begin{proof}
As $U = \bigcup_{i\in I} \varphi_i(U_i)$, the fibre product
$\overline{s} \times_{\overline{u}, U, \varphi_i} U_i$ is not empty
for some $i$. Then look at the cartesian diagram
$$
\xymatrix{
\overline{s} \times_{\overline{u}, U, \varphi_i} U_i
\ar[d]^{\text{pr}_1} \ar[r]_-{\text{pr}_2} & U_i
\ar[d]^{\varphi_i} \\
\text{Spec}(k) = \overline{s} \ar@/^1pc/[u]^\sigma
\ar[r]^-{\overline{u}} & U
}
$$
The projection $\text{pr}_1$ is the base change of an \'etale morphisms so it
is \'etale, see
Proposition \ref{proposition-etale-morphisms}.
Therefore, $\overline{s} \times_{\overline{u}, U, \varphi_i} U_i$
is a disjoint union of finite separable extensions of $k$, by
Proposition \ref{proposition-etale-morphisms}. Here
$\overline{s} = \text{Spec}(k)$. But $k$ is separably closed, so all
these extensions are trivial, and there exists a section $\sigma$ of
$\text{pr}_1$. The composition
$\text{pr}_2 \circ \sigma$ gives a map compatible with $\overline{u}$.
\end{proof}

\begin{definition}
\label{definition-stalk}
Let $S$ be a scheme.
Let $\mathcal{F}$ be a presheaf on $S_{etale}$.
Let $\overline{s}$ be a geometric point of $S$.
The {\it stalk} of $\mathcal{F}$ at $\overline{s}$ is
$$
\mathcal{F}_{\bar s}
=
\text{colim}_{(U, \overline{u})}\ \mathcal{F}(U)
$$
where $(U, \overline{u})$ runs over all \'etale
neighborhoods of $\overline{s}$ in $S$.
\end{definition}

\noindent
By lemma \ref{lemma-cofinal-etale}, this colimit is over a filtered
index category.
In other words, an element of $\mathcal{F}_{\overline{u}}$ can be
though of as a triple $(U, \overline{u}, s)$ where $s \in \mathcal{F}(U)$.
Two triples $(U, \overline{u}, s)$, $(U', \overline{u}', s')$
define the same element of the stalk if there exists a third
\'etale neighbourhood $(U'', \overline{u}'')$ and morphisms of \'etale
neighbourhoods $h : (U'', \overline{u}'') \to (U, \overline{u})$,
$h' : (U'', \overline{u}'') \to (U', \overline{u}')$ such that
$h^*s = (h')^*s'$ in $\mathcal{F}(U'')$. See
Categories, Section \ref{categories-section-directed-colimits}.
See
Sites, Section \ref{sites-section-points}
for more information of the general notion
of a stalk functor, and points of a site.

\medskip\noindent
If $\mathcal{F}$ happens to be a sheaf on the big \'etale site
of $S$, then we define $\mathcal{F}_{\overline{s}}$ as the stalk
of the restriction $\mathcal{F}|_{S_{etale}}$ of $\mathcal{F}$
to the small \'etale site. In particular, in this case we can define
the stalk of $\mathcal{F}$ at any geometric point of any
scheme $T/S \in \text{Ob}((\textit{Sch}/S)_{etale})$.

\begin{definition}
\label{definition-etale-local-rings}
Let $S$ be a scheme, and let $\overline{s}$ be a geometric point of $S$.
We define the {\it \'etale local ring of $S$ at $\overline{s}$}
to be the stalk of the sheaf $\mathbf{G}_{a, S} = \mathcal{O}$
at $\overline{s}$, that is
$$
\mathcal{O}_{S, \bar{s}}^\text{sh}
=
\text{colim}_{(U, \overline{u})}\ \Gamma(U, \mathcal{O}_U).
$$
\end{definition}

\noindent
We will later identify these rings as the strict henselization of
the local ring of $S$ at the point $s$ (the image of $\overline{s}$).

\begin{lemma}
\label{lemma-stalk-exact}
The stalk functor
$$
\begin{matrix}
\textit{PAb}(S_{etale}) & \longrightarrow & \textit{Ab}\\
\mathcal{F} & \longmapsto & \mathcal{F}_{\overline{s}}
\end{matrix}
$$
is exact. Furthermore,
$(\mathcal{F}^\#)_{\overline{s}} = \mathcal{F}_{\overline{s}}$
and hence it induces an exact functor
$$
\textit{Ab}(S_{etale})\to \textit{Ab},
\quad \mathcal{F} \longmapsto \mathcal{F}_{\overline{s}}.
$$
\end{lemma}

\begin{proof}
We first indicate how this follows from the general site-theoretic results of
Sites, Section \ref{sites-section-points}.
We will also give a direct proof below.
Namely, given $\overline{s}$ consider the functor
$$
p : S_{etale} \longrightarrow \textit{Sets},
\quad
U \longmapsto |U_{\overline{s}}|
$$
Here $|U_{\overline{s}}|$ denotes the underlying set of the geometric fibre
$U_{\overline{s}}$ of $U$ over $\overline{s}$. In the proof of
Lemma \ref{lemma-geometric-lift-to-cover} we have seen that the scheme
$U_{\overline{s}}$ is a disjoint union of schemes isomorphic to $\overline{s}$.
Thus we can also think of
$|U_{\overline{s}}|$ as the set of geometric points of $U$ lying over
$\overline{s}$, i.e., as the collection of morphisms
$\overline{u} : \overline{s} \to U$ fitting into the diagram of
Definition \ref{definition-geometric-point}. Having said this we
see that $p(U \times_V W) = p(U) \times_{p(V)} p(W)$ whenever
$U \to V$ and $W \to V$ are morphisms in $S_{etale}$. Moreover, given
a covering $\{U_i \to U\}_{i \in I}$ in $S_{etale}$ we see that
$\coprod p(U_i) \to p(U)$ is surjective by
Lemma \ref{lemma-geometric-lift-to-cover}.
Moreover, it is clear from the definitions that our functor
$\mathcal{F} \mapsto \mathcal{F}_{\overline{s}}$ is the same as
the functor $\mathcal{F} \mapsto \mathcal{F}_p$ associated to $p$ in
Sites, Section \ref{sites-section-points}.
Hence
Sites, Remark \ref{sites-remark-improve-proposition-points-limits}
applies. The discussions in that remark imply our functor defines
a {\it point} of the site $S_{etale}$
and that the assertions of the lemma hold.

\medskip\noindent
Now we turn to a direct proof of the lemma.
Exactness as a functor on $\textit{PAb}(S_{etale})$ is formal from the
fact that directed colimits commute with all colimits and with finite
limits. The identification of the stalks is {\it via} the map
$$
\kappa :
\mathcal{F}_{\overline{s}}
\longrightarrow
(\mathcal{F}^\#)_{\overline{s}}
$$
induced by the natural morphism $\mathcal{F}\to \mathcal{F}^\#$, see
Theorem \ref{theorem-sheafification}.
We claim that this map is an isomorphism of abelian groups. We will show
injectivity and omit the proof of surjectivity.

\medskip\noindent
Let $\sigma\in \mathcal{F}_{\overline{s}}$.
There exists an \'etale neighborhood
$(U, \overline{u})\to (S, \overline{s})$ such that $\sigma$ is the image of some
section $s \in \mathcal{F}(U)$. If $\kappa(\sigma) = 0$ in
$(\mathcal{F}^\#)_{\overline{s}}$ then there exists a morphism of \'etale
neighborhoods $(U', \overline{u}')\to (U, \overline{u})$ such that
$s|_{U'}$ is zero in $\mathcal{F}^\#(U')$. It follows there
exists an \'etale covering
$\{U_i'\to U'\}_{i\in I}$ such that $s|_{U_i'}=0$ in
$\mathcal{F}(U_i')$ for all $i$. By Lemma \ref{lemma-geometric-lift-to-cover}
there exist $i \in I$ and a morphism
$\overline{u}_i': \overline{s} \to U_i'$ such that
$(U_i', \overline{u}_i') \to (U', \overline{u}')\to (U, \overline{u})$
are morphisms of \'etale neighborhoods. Hence $\sigma = 0$
since $(U_i', \overline{u}_i') \to (U, \overline{u})$
is a morphism of etale neighbourhoods such that
we have $s|_{U'_i}=0$. This proves $\kappa$ is injective.

\medskip\noindent
To show that the functor $\textit{Ab}(S_{et}) \to \textit{Ab}$ is
exact, consider any short exact sequence in $\textit{Ab}(S_{et})$:
$
0\to \mathcal{F}\to \mathcal{G}\to \mathcal H \to 0.
$
This gives us the exact sequence of presheaves
$$
0 \to \mathcal{F}\to \mathcal{G} \to \mathcal H\to \mathcal H/^p\mathcal{G} \to
0,
$$
where $/^p$ denotes the quotient in $\textit{PAb}(S_{et})$. Taking stalks at
$\overline{s}$, we see that $(\mathcal H /^p\mathcal{G})_{\bar{s}} = (\mathcal H
/\mathcal{G})_{\bar{s}} = 0$, since the sheafification of $\mathcal
H/^p\mathcal{G}$ is $0$.
Therefore,
$$
0\to \mathcal{F}_{\overline{s}	} \to \mathcal{G}_{\overline{s}} \to
\mathcal{H}_{\overline{s}} \to 0 = (\mathcal H/^p\mathcal{G})_{\overline{s}}
$$
is exact, since taking stalks is exact as a functor from presheaves.
\end{proof}

\begin{theorem}
\label{theorem-exactness-stalks}
Let $S$ be a scheme. A sequence of abelian sheaves on $S_{etale}$ is exact
if and only if it is exact on all stalks at geometric points of $S$.
\end{theorem}

\begin{proof}
The necessity of exactness on stalks follows from
Lemma \ref{lemma-stalk-exact}.
For the converse, it suffices to show that a map of sheaves is surjective
(respectively injective) if and only if it is surjective (respectively
injective) on all stalks. We prove this in the case of surjectivity, and omit
the proof in the case of injectivity.

\medskip\noindent
Let $\alpha : \mathcal{F} \to \mathcal{G}$ be a map of abelian sheaves such
that $\mathcal{F}_{\overline{s}} \to \mathcal{G}_{\overline{s}}$
is surjective for all geometric points. Fix $U \in \text{Ob}(S_{etale})$
and $s \in \mathcal{G}(\mathcal{U})$. For every $u \in U$ choose some
$\overline{u} \to U$ lying over $u$ and an \'etale neighborhood
$(V_u , \overline{v}_u) \to (U, \overline{u})$ such that
$s|_{V_u} = \alpha(s_{V_u})$ for some
$s_{V_u} \in \mathcal{F}(V_u)$.
This is possible since $\alpha$ is surjective on
stalks. Then $\{V_u \to U\}_{u \in U}$
is an \'etale covering on which the restrictions of $s$
are in the image of the map $\alpha$.
Thus, $\alpha$ is surjective, see
Sites, Section \ref{sites-section-sheaves-injective}.
\end{proof}

\begin{remarks}
\label{remarks-enough-points}
On points of the geometric sites.
\begin{enumerate}
\item In the terminology of
Sites, Definition \ref{sites-definition-enough-points}
the proof of
Theorem \ref{theorem-exactness-stalks}
shows that the small \'etale site of $S$ has enough points.
\item In fact the big \'etale site of $S$ also has enough points, by
considering all geometric points of all objects of this site (see
remark following
Definition \ref{definition-stalk}).
\item It turns out that the big fppf, syntomic, and smooth sites also have
enough points. This can be deduced from Deligne's result
Sites, Proposition \ref{sites-proposition-criterion-points}
applied to $(\textit{Aff}/S)_{fppf}$ and using that the topos defined by
this site equals the topos defined by $(\textit{Sch}/S)_{fppf}$, see
Topologies, Lemma \ref{topologies-lemma-affine-big-site-fppf}
(similarly for the other cases).
\item Note that if $\overline{s} : \text{Spec}(k) \to S$ is a geometric
point with $k$ algebraically closed, then $\overline{s}$ lifts
to a member of any fppf covering of $S$. Using this one can show, entirely
as in the first part of the proof of
Lemma \ref{lemma-stalk-exact},
that this leads to a point of the fppf site of $S$.
Then one can argue as in the proof of
Theorem \ref{theorem-exactness-stalks}
to show directly that $(\textit{Sch}/S)_{fppf}$ has enough points.
\end{enumerate}
\end{remarks}




\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
