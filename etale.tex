\input{preamble}

% OK, start here.
%
\begin{document}

\title{Etale morphisms of schemes}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents



\section{Introduction}
\label{section-introduction}

\noindent
In this Chapter, we informally discuss etale morphisms of schemes,
and we will mainly stick to the Noetherian case. Our principal goal
is to collect for the reader with enough commutative algebra results
to start reading a treatise on etale cohomology. An auxiliary goal is to
provide enough evidence to ensure that the reader stops calling the phrase
``the etale topology of schemes'' an exercise in general nonsense, if (s)he
does indulge in such blasphemy.

\medskip\noindent
Almost all the material presented here is taken, without too many
modifications, from \cite{SGA1} and \cite{Ner}. We will refer to the other
chapters of the stacks project for standard results in algebraic geometry
(on schemes and commutative algebra). We will provide detailed
proofs of the new results that we state here in limited generality.




\section{Conventions}
\label{section-conventions}

\noindent
In this chapter, most schemes will be assumed locally Noetherian
and most rings will be assumed Noetherian. But in all the statements
we will reiterate this, and make sure we list all the hypotheses.
On the other hand, here are some general facts that we will use
frequently and are useful to keep in mind:
\begin{enumerate}
\item A ring homomorphism $A \to B$ of finite type with $A$ Noetherian
is of finite presentation. See Algebra,
Lemma \ref{algebra-lemma-Noetherian-finite-type-is-finite-presentation}.
\item A morphism (locally) of finite type between locally Noetherian schemes
is automatically (locally) of finite presentation.
See Morphisms,
Lemma \ref{morphisms-lemma-noetherian-finite-type-finite-presentation}.
\item Add more like this here.
\end{enumerate}




\section{Unramified morphisms}
\label{section-unramified-definition}

\noindent
We first define the notion of unramified morphisms for local rings, and then
globalise it to get one for arbitrary schemes.

\begin{definition}
\label{definition-unramified-rings}
Let $A$, $B$ be Noetherian local rings. A local homomorphism $A \to B$
is said to be a {\it unramified homomorphism of local rings}\footnote{%
This is nonstandard notation. The correct terminology is
``formally unramified for the $\mathfrak m$-adic topologies''
(insert future reference here). However, it is convenient for a quick
discussion as in this section. After
Lemma \ref{lemma-characterize-unramified-completions}, we can instead say
that $A \to B$ induces an unramified ring map on completions.}
if
\begin{enumerate}
\item $\mathfrak m_AB = \mathfrak m_B$, and
\item $\kappa(\mathfrak m_A)$ is a finite separable extension of
$\kappa(\mathfrak m_B)$.
\end{enumerate}
\end{definition}

\noindent
This definition is a little different from the
definition in Algebra, Section \ref{algebra-section-unramified}.
In that section a ring map $R \to S$ is defined to be unramified if and
only if it is of finite presentation, and $\Omega_{S/R} = 0$.
It is shown in
Algebra, Lemmas \ref{algebra-lemma-unramified-at-prime} and
\ref{algebra-lemma-characterize-unramified} that given a ring
map $R \to S$ of finite presentation, and a prime $\mathfrak q$ of $S$
lying over $\mathfrak p \subset R$, then we have
$$
R \to S\text{ is unramified at }\mathfrak q
\Leftrightarrow
\mathfrak pS_{\mathfrak q} = \mathfrak q S_{\mathfrak q}
\text{ and }
\kappa(\mathfrak p) \subset \kappa(\mathfrak q)\text{ finite separable}
$$
Thus we see that for a local homomorphism of local rings the properties
of our definition above are closely related to the question of
being unramified. In fact, we have proved the following lemma.

\begin{lemma}
\label{lemma-characterize-unramified-Noetherian}
Let $A \to B$ be of finite type with $A$ a Noetherian ring.
Let $\mathfrak q$ be a prime of $B$ lying over $\mathfrak p \subset A$.
Then $A \to B$ is unramified at $\mathfrak q$ if and only if
$A_{\mathfrak p} \to B_{\mathfrak q}$ is an unramified homomorphism
of local rings.
\end{lemma}

\begin{proof}
See discussion above.
\end{proof}

\noindent
We will characterize the property of being unramified in terms
of completions. For a Noetherian local ring $A$
we denote $A^\wedge$ the completion of $A$ with respect to the
maximal ideal. It is also a Noetherian local ring, see
Algebra, Lemma \ref{algebra-lemma-completion-Noetherian}.

\begin{lemma}
\label{lemma-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism.
\begin{enumerate}
\item if $A \to B$ is an unramified homomorphism of local rings,
then $B^\wedge$ is a finite $A^\wedge$ module,
\item if $A \to B$ is an unramified homomorphism of local rings and
$\kappa(\mathfrak m_A) = \kappa(\mathfrak m_B)$,
then $A^\wedge \to B^\wedge$ is surjective,
\item if $A \to B$ is an unramified homomorphism of local rings and $\kappa(\mathfrak m_A)$
is separably closed, then $A^\wedge \to B^\wedge$ is surjective,
\item if $A$ and $B$ are complete discrete valuation rings, then
$A \to B$ is an unramified homomorphism of local rings
if and only the uniformizer for
$A$ maps to a uniformizer for $B$, and the residue field extension
is finite separable.
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) is a special case of
Algebra, Lemma \ref{algebra-lemma-finite-after-completion}.
For part (2), note that the $\kappa(\mathfrak m_A)$-vector space
$B^\wedge/\mathfrak m_{A^\wedge}B^\wedge$
is generated by $1$. Hence by Nakayama's lemma
(Algebra, Lemma \ref{algebra-lemma-NAK}) the map
$A^\wedge \to B^\wedge$ is surjective.
Part (3) is a special case of part (2).
Part (4) is immediate from the definitions.
\end{proof}

\begin{lemma}
\label{lemma-characterize-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism.
The following are equivalent
\begin{enumerate}
\item $A \to B$ is an unramified homomorphism of local rings
\item $A^\wedge \to B^\wedge$ is an unramified homomorphism of local rings, and
\item $A^\wedge \to B^\wedge$ is unramified.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (1) and (2) follows from the fact that
$\mathfrak m_AA^\wedge$ is the maximal ideal of $A^\wedge$
(and similarly for $B$) and faithful flatness of $B \to B^\wedge$.
For example if $A^\wedge \to B^\wedge$ is unramified, then
$\mathfrak m_AB^\wedge = (\mathfrak m_AB)B^\wedge = \mathfrak m_BB^\wedge$
and hence $\mathfrak m_AB = \mathfrak m_B$.

\medskip\noindent
Assume the equivalent conditions (1) and (2).
By Lemma \ref{lemma-unramified-completions}
we see that $A^\wedge \to B^\wedge$ is
finite. Hence $A^\wedge \to B^\wedge$ is of finite presentation, and by
Algebra, Lemma \ref{algebra-lemma-characterize-unramified}
we conclude that $A^\wedge \to B^\wedge$ is unramified at
$\mathfrak m_{B^\wedge}$. Since $B^\wedge$ is local we conclude
that $A^\wedge \to B^\wedge$ is unramified.

\medskip\noindent
Assume (3). By Algebra, Lemma \ref{algebra-lemma-unramified-at-prime}
we conclude that $A^\wedge \to B^\wedge$ is an unramified homomorphism
of local rings, i.e., (2) holds.
\end{proof}

\begin{definition}
\label{definition-unramified-schemes}
(See Morphisms, Definition \ref{morphisms-definition-unramified}.)
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$.
\begin{enumerate}
\item We say $f$ is {\it unramified at $x$} if
$\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$
is an unramified homomorphism of local rings.
\item The morphism $f : X \to Y$ is said to be {\it unramified}
if it is unramified at all points of $X$.
\end{enumerate}
\end{definition}

\noindent
Let us prove that this definition agrees with the definition in the
chapter on morphisms of schemes. This in particular garantees that the
set of points where a morphism is unramified is open.

\begin{lemma}
\label{lemma-unramified-defintion}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$. The morphism $f$ is unramified at $x$ in
the sense of Definition \ref{definition-unramified-schemes}
if and only if it is unramified in
the sense of Morphisms, Definition \ref{morphisms-definition-unramified}.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-characterize-unramified-Noetherian}
and the definitions.
\end{proof}

\noindent
Here are some results on unramified morphisms.
The formulations as given in this list apply only to
morphisms locally of finite type between locally Noetherian schemes.
In each case we give a reference to the general result as
proved earlier in the project, but in some cases one can
prove the result more easily in the Noetherian case.
Here is the list:
\begin{enumerate}
\item Unramifiedness is local on the source and the target in the Zariski
topology.
\item Unramified morphisms are stable under base change and composition.
See Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified}
and \ref{morphisms-lemma-composition-unramified}.
\item Unramified morphisms of schemes are locally quasi-finite
and quasi-compact unramified morphisms are quasi-finite.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-quasi-finite}
\item Unramified morphisms have relative dimension $0$. See
Morphisms, Definition \ref{morphisms-definition-relative-dimension-d}
and
Morphisms, Lemma \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
\item A morphism is unramified if and only if all its fibres are unramified.
That is, unramifiedness can be checked on the scheme theoretic fibres. See
Morphisms, Lemma \ref{morphisms-lemma-unramfied-etale-fibres}.
\end{enumerate}

\section{Three other characterizations of unramified morphisms}
\label{section-three-other}

\noindent
The following theorem gives three equivalent notions of being
unramified at a point. See
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}
for (part of) the statement for general schemes.

\begin{theorem}
\label{theorem-unramified-equivalence}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism of schemes which is locally of finite type.
Let $x$ be a point of $X$. The following are equivalent
\begin{enumerate}
\item $f$ is unramified at $x$,
\item the stalk $\Omega_{X/Y, x}$ of the module of relative differentials
at $x$ is trivial,
\item there exist open neighbourhoods $U$ of $x$ and $V$ of $f(x)$, and a
commutative diagram
$$
\xymatrix{
U \ar[rr]_i \ar[rd] & & \mathbf{A}^n_V \ar[ld] \\
& V
}
$$
where $i$ is a closed immersion defined by a
quasi-coherent sheaf of ideals $\mathcal{I}$ such that the differentials
$\text{d}g$ for $g \in \mathcal{I}_{i(x)}$ generate
$\Omega_{\mathbf{A}^n_V/V, i(x)}$, and
\item the diagonal $\Delta_{X/Y} : X \to X \times_Y X$
is a local isomorphism at $x$.
\end{enumerate}
\end{theorem}

\begin{proof}
The equivalence of (1) and (2) is proved in
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}.

\medskip\noindent
If $f$ is unramified at $x$, then $f$ is unramified in an open
neighbourhood of $x$; this does not follow immediately
from Definition \ref{definition-unramified-schemes} of this chapter
but it does follow from
Morphisms, Definition \ref{morphisms-definition-unramified} which we
proved to be equivalent in
Lemma \ref{lemma-unramified-defintion}.
Choose affine opens $V \subset Y$, $U \subset X$
with $f(U) \subset V$ and $x \in U$, such that $f$ is
unramified on $U$, i.e., $f|_U : U \to V$ is unramified.
By Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramfied-morphism}
the morphism $U \to U \times_V U$
is an open immersion. This proves that (1) implies (4).

\medskip\noindent
If $\Delta_{X/Y}$ is a local isomorphism at $x$, then
$\Omega_{X/Y, x} = 0$ by construction of the sheaf of relative
differentials (see
Morphisms, Definition \ref{morphisms-definition-sheaf-differentials}).
Hence we see that (4) implies (2).
At this point we know that (1), (2) and (4) are all equivalent.

\medskip\noindent
Assume (3). The assumption on the diagram combined with
Morphisms, Lemma \ref{morphisms-lemma-differentials-relative-immersion}
show that $\Omega_{U/V, x} = 0$. Since $\Omega_{U/V, x} = \Omega_{X/Y, x}$
we conclude (2) holds.

\medskip\noindent
Finally, assume that (2) holds. To prove (3) we may localize on
$X$ and $Y$ and assume that $X$ and $Y$ are affine.
Say $X = \text{Spec}(B)$ and $Y = \text{Spec}(A)$.
The point $x \in X$ corresponds to a prime $\mathfrak q \subset B$.
Our assumption is that $\Omega_{B/A, \mathfrak q} = 0$
(see Morphisms, Lemma \ref{morphisms-lemma-differentials-affine} for the
relationship between differentials on schemes and modules
of differentials in commutative algebra).
Since $Y$ is locally Noetherian and $f$ locally of finite type
we see that $A$ is Noetherian and
$B \cong A[x_1, \ldots, x_n]/(f_1, \ldots, f_m)$, see
Properties, Lemma \ref{properties-lemma-locally-Noetherian} and
Morphisms, Lemma \ref{morphisms-lemma-locally-finite-type-characterize}.
In particular, $\Omega_{B/A}$ is a finite $B$-module. Hence we
can find a single $g \in B$, $g \not \in \mathfrak q$ such that
the principal localization $(\Omega_{B/A})_g$ is zero. Hence after
replacing $B$ by $B_g$ we see that $\Omega_{B/A} = 0$ (formation
of modules of differentials commutes with localization, see
Algebra, Lemma \ref{algebra-lemma-differentials-localize}). This means that
$\text{d}(f_j)$ generate the kernel of the canonical map
$\Omega_{A[x_1, \ldots, x_n]/A} \otimes_A B \to \Omega_{B/A}$.
Thus the surjection $A[x_1, \ldots, x_n] \to B$ of $A$-algebras gives the
commutative diagram of (3), and the theorem is proved.
\end{proof}

\noindent
How can we use this lemma? Well, here are a few remarks:
\begin{enumerate}
\item Suppose that
$f : X \to Y$ and $g : Y \to Z$ are two morphisms locally of finite
type between locally Noetherian schemes. There is a canonical short
exact sequence
$$
f^*(\Omega_{Y/Z}) \to \Omega_{X/Z} \to \Omega_{X/Y} \to 0
$$
see Morphisms, Lemma \ref{morphisms-lemma-triangle-differentials}.
The theorem therefore implies that if $g \circ f$ is unramified,
then so is $f$. This is
Morphisms, Lemma \ref{morphisms-lemma-unramified-permanence}.
\item The definition of $\Omega_{X/Y}$ as the pullback
$\Delta^*(\mathcal{J}/\mathcal{J}^2)$ of the conormal sheaf
of the diagonal morphism (see
Morphisms, Definition \ref{morphisms-definition-sheaf-differentials})
allows us to conclude that if $X \to Y$ is a monomorphism of
locally Noetherian schemes, then $X \to Y$ is unramified.
In particular, open and closed immersions of locally Noetherian schemes
are unramified. See
Morphisms, Lemmas \ref{morphisms-lemma-open-immersion-unramified}
and
\ref{morphisms-lemma-closed-immersion-unramified}.
\item The theorem also implies that the set of points
where a morphism $f : X \to Y$ (locally of finite type of locally Noetherian
schemes) is the support of the coherent sheaf $\Omega_{X/Y}$.
This allows one to give a scheme theoretic definition to the
``ramification locus''.
\end{enumerate}

\section{The functorial characterisation of unramified morphisms}
\label{section-functorial-unramified}

\noindent
In basic algebraic geometry we learn that some classes of morphisms can be
characterised functorially, and that such descriptions are quite useful.
Unramified morphisms too have such a characterisation.

\begin{theorem}
\label{theorem-formally-unramified}
Let $f : X \to S$ be a morphism of schemes.
Assume $S$ is a locally Noetherian scheme, and $f$ is locally of finite type.
Then the following are equivalent:
\begin{enumerate}
\item $f$ is unramified,
\item the morphism $f$ is formally unramified:
for any affine $S$-scheme $T$ and subscheme $T_0$ of $T$
defined by a square-zero ideal,
the natural map
$$
\text{Hom}_S(T, X) \longrightarrow \text{Hom}_S(T_0, X)
$$
is injective.
\end{enumerate}
\end{theorem}

\begin{proof}
See More on Morphisms,
Lemma \ref{more-morphisms-lemma-unramified-formally-unramified}
for a more general statement and proof.
What follows is a sketch of the proof in the current case.

\medskip\noindent
Firstly, one checks both properties are local on the source and the target.
This we may assume that $S$ and $X$ are affine.
Say $X = \text{Spec}(B)$ and $S = \text{Spec}(R)$.
Say $T = \text{Spec}(C)$. Let $J$ be the square-zero ideal of $C$
with $T_0 = \text{Spec}(C/J)$. Assume that we are given the diagram
$$
\xymatrix{
& B \ar[d]^\phi \ar[rd]^{\bar{\phi}}	
& \\
R \ar[r] \ar[ur] & C \ar[r]						
& C/J
}
$$
Secondly, one checks that the association $\phi' \mapsto \phi' - \phi$
gives a bijection between the set of liftings of $\bar{\phi}$ and the module
$\text{Der}_R(B, J)$. Thus, we obtain the implication (1) $\Rightarrow$ (2)
(via the description of unramified morphisms having trivial module
of differentials, see Theorem \ref{theorem-unramified-equivalence}.

\medskip\noindent
To obtain the reverse implication, consider the surjection
$q : C = (B \otimes_R B)/I^2 \to B = C/J$ defined by the square zero ideal
$J = I/I^2$ where $I$ is the kernel of the multiplication map
$B \otimes_R B \to B$. We already have a lifting $B \to C$ defined by, say,
$b \mapsto b \otimes 1$. Thus, by the same reasoning as above, we obtain a
bijective correspondence between liftings of $\mathrm{id} : B \to C/J$ and
$\text{Der}_R(B, J)$. The hypothesis therefore implies that the latter module is
trivial. But we know that $J \cong \Omega^1_{B/R}$. Thus, $B/R$ is unramified.
\end{proof}

\section{Some topological properties of unramified morphisms}
\label{section-topological-unramified}

\noindent
The first topological result that will be of utility to us is one which says
that unramified and separated morphisms have ``nice'' sections.
The material in this section does not require any Noetherian hypotheses.

\begin{proposition}
\label{proposition-properties-sections}
(Sections of unramified morphisms.)
\begin{enumerate}
\item Any section of an unramified morphism is an open immersion.
\item Any section of a separated morphism is a closed immersion.
\item Any section of an unramified separated morphism is open and closed.
\end{enumerate}
\end{proposition}

\begin{proof}
Fix a base scheme $S$.
If $f : X' \to X$ is any $S$-morphism, then the graph
$\Gamma_f : X' \to X' \times_S X$
is obtained as the base change of the diagonal
$\Delta_{X/S} : X \to X \times_S X$ via the projection
$X' \times_S X \to X \times_S X$.
If $g : X \to S$ is separated (resp. unramified)
then the diagonal is a closed immersion (resp. open immersion)
by Schemes, Definition \ref{schemes-definition-separated}
(resp.\ Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramfied-morphism}).
Hence so is the graph as a base change (by
Schemes, Lemma \ref{schemes-lemma-base-change-immersion}).
In the special case $X' = S$, we obtain (1), resp.\ (2).
Part (3) follows on combining (1) and (2).
\end{proof}

\noindent
We can now explicitly describe the sections of unramified morphisms.

\begin{theorem}
\label{theorem-sections-unramified-maps}
Let $Y$ be a connected scheme.
Let $f : X \to Y$ be unramified and separated.
Every section of $f$ is an isomorphism onto a connected component.
There exists a bijective correspondence
$$
\text{sections of }f
\leftrightarrow
\left\{
\begin{matrix}
\text{connected components }X'\text{ of }X\text{ such that}\\
\text{the induced map }X' \to Y\text{ is an isomorphism}
\end{matrix}
\right\}
$$
In particular, given $x \in X$ there is at most one
section passing through $x$.
\end{theorem}

\begin{proof}
Direct from Proposition \ref{proposition-properties-sections} part (3).
\end{proof}

\noindent
The preceding theorem gives us some idea of the ``rigidity'' of unramified
morphisms. Further indication is provided by the following proposition which,
besides being intrinsically interesting, is also useful in the
theory of the algebraic fundamental group (see \cite[Expose V]{SGA1}).

\begin{proposition}
\label{proposition-equality}
Let $S$ is be a scheme.
Let $\pi : X \to S$ be unramified and separated.
Let $Y$ be an $S$-scheme and $y \in Y$ a point.
Let $f, g : Y \to X$ be two $S$-morphisms. Assume
\begin{enumerate}
\item $Y$ is connected
\item $x = f(y) = g(y)$, and
\item the induced maps $f^\sharp, g^\sharp : \kappa(x) \to \kappa(y)$
on residue fields are equal.
\end{enumerate}
Then $f = g$.
\end{proposition}

\begin{proof}
The maps $f, g : Y \to X$ define maps $f', g' : Y \to X_Y = Y \times_S X$
which are sections of the structure map $X_Y \to Y$.
Note that $f = g$ if and only if $f' = g'$.
The structure map $X_Y \to Y$ is the base change of $\pi$ and hence
unramified and separated also (see
Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified} and
Schemes, Lemma \ref{schemes-lemma-separated-permanence}).
Thus according to Theorem \ref{theorem-sections-unramified-maps}
it suffices to prove that $f'$ and $g'$ pass through the same
point of $X_Y$. And this is exactly what the hypotheses (2) and (3)
garantee, namely $f'(y) = g'(y) \in X_Y$.
\end{proof}

\noindent
The topological results presented above will be used to give a functorial
characterisation of etale morphisms similar to Theorem
\ref{theorem-formally-unramified}.




\section{Examples of unramified morphisms}
\label{section-examples}

\noindent
Here are a few examples.

\begin{example}
\label{example-etale-field-extensions}
Let $k$ be a field.
Unramified quasi-compact morphisms $X \to \text{Spec}(k)$ are affine.
This is true because $X$ has dimension $0$ and is Noetherian,
hence is a finite discrete set, and each point gives an affine open,
so $X$ is a finite disjoint union of affines hence affine.
Noether normalisation forces $X$ to be the spectrum of a finite
$k$-algebra $A$.
This algebra is a product of finite separable field extensions of $k$.
Thus, an unramified quasi-compact morphism to $\text{Spec}(k)$
corresponds to a finite number of finite separable field extensions of $k$.
In particular, an unramified morphism with a connected source and a one point
target is forced to be a finite separable field extension.
As we will see later, $X \to \text{Spec}(k)$ is etale if and
only if it is unramified. Thus, in this case at least, we obtain a very easy
description of the etale topology of a scheme. Of course, the cohomology of
this topology is another story.
\end{example}

\begin{example}
\label{example-standard-etale}
Property (3) in \ref{theorem-unramified-equivalence} gives us a canonical
source of examples for unramified morphisms.
Fix a ring $R$ and an integer $n$. Let $I = (g_1, \cdots, g_m)$ be an
ideal in $R[x_1, \cdots, x_n]$. Let $\mathfrak q \subset R[x_1, \ldots, x_n]$
be a prime. Assume $I \subset \mathfrak q$ and that the matrix
$$
\left(\frac{\partial g_i}{\partial x_j}\right) \bmod \mathfrak q
\quad\in\quad
\text{Mat}(n \times m, \kappa(\mathfrak q))
$$
has rank $n$. Then the morphism
$f : Z = \text{Spec}(R[x_1, \cdots, x_n]/I) \to \text{Spec}(R)$
is unramified at the point $x \in Z \subset \mathbf{A}^n_R$ corresponding
to $\mathfrak q$. Clearly we must have $m \geq n$.
In the extreme case $m = n$, i.e., the differential of the map
$\mathbf{A}^n_R \to \mathbf{A}^n_R$ defined by the $g_i$'s
is an isomorphism of the tangent spaces, then $f$ is also flat
$x$ and, hence, is an etale map (see Algebra,
Definition \ref{algebra-definition-standard-smooth},
Lemma \ref{algebra-lemma-standard-smooth} and
Example \ref{algebra-example-make-standard-smooth}).
\end{example}

\begin{example}
\label{example-number-theory-etale}
Fix an extension of number fields $L/K$ with rings of integers
$\mathcal{O}_L$ and $\mathcal{O}_K$. The injection $K \to L$ defines a
morphism $f : \text{Spec}(\mathcal{O}_L) \to \text{Spec}(\mathcal{O}_K)$.
As discussed above, the points where $f$ is unramified in our sense
correspond to the set of points where $f$ is unramified in the conventional
sense. In the conventional sense, the locus of ramification in
$\text{Spec}(\mathcal{O}_L)$ can be defined by vanishing set of the
different; this is an ideal in $\mathcal{O}_L$. In fact, the different is
nothing but the annihilator of the module
$\Omega_{\mathcal{O}_L/\mathcal{O}_K}$. Similarly, the
discriminant is an ideal in $\mathcal{O}_K$, namely it is the
norm of the different.
The vanishing set of the discriminant is precisely the set
of points of $K$ which ramify in $L$.
Thus, denoting by $X$ the complement of the closed subset
defined by the different in $\text{Spec}(\mathcal{O}_L)$,
we obtain a morphism $X \to \text{Spec}(\mathcal{O}_L)$ which is unramified.
Furthermore, this morphism is also flat, as any local homomorphism
of discrete valuation rings is flat, and hence this morphism is
actually etale. If $L/K$ is Galois, then denoting by
$Y$ the complement of the closed subset defined by the discriminant in
$\text{Spec}(\mathcal{O}_K)$, we see that we get even a
finite etale morphism $X \to Y$.
Thus, this is an example of a finite etale covering.
\end{example}





\section{Flat morphisms}
\label{section-flat-moprhisms}

\noindent
This section simply exists to summarise the properties of flatness that will
be useful to us. Thus, we will be content with stating the theorems precisely
and giving references for the proofs.

\medskip\noindent
After briefly recalling the necessary facts about flat modules over Noetherian
rings, we state a theorem of Grothendieck which gives sufficient conditions
for ``hyperplane sections'' of certain modules to be flat.

\begin{definition}
\label{definition-flat-rings}
Flatness of modules and rings.
\begin{enumerate}
\item A module $N$ over a ring $A$ is said to be {\it flat}
if the functor $M \mapsto M \otimes_A N$ is exact.
\item If this functor is also faithful, we say that
$N$ is {\it faithfully flat} over $A$.
\item A morphism of rings $f : A \to B$ is said to be
{\it flat (resp. faithfully flat)}
if the functor $M \mapsto M \otimes_A B$ is exact
(resp. faithful and exact).
\end{enumerate}
\end{definition}

\noindent
Here is a list of facts with references to the algebra chapter.
\begin{enumerate}
\item Free and projective modules are flat. This is clear for free modules
and follows for projective modules as they are direct summands of free
modules and $\otimes$ commutes with direct sums.
\item Flatness is a local property, that is, $M$ is flat over $A$
if and only if $M_{\mathfrak p}$ is flat over $A_{\mathfrak p}$ for all
$\mathfrak p \in \text{Spec}(A)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}.
\item If $M$ is a flat $A$-module and $A \to B$ is a ring map,
then $M \otimes_A B$ is a flat $B$-module. See
Algebra, Lemma \ref{algebra-lemma-flat-base-change}.
\item Finite flat modules over local rings are free.
See Algebra, Lemma \ref{algebra-lemma-finite-flat-local}.
\item If $f : A \to B$ is a morphism of arbitrary rings,
$f$ is flat if and only if the induced maps
$A_{f^{-1}(\mathfrak q)} \to B_{\mathfrak q}$ are flat for all
$\mathfrak q \in \text{Spec}(B)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}
\item If $f : A \to B$ is a local homomorphism of local rings,
$f$ is flat if and only if it is faithfully flat.
See Algebra, Lemma \ref{algebra-lemma-local-flat-ff}.
\item A map $A \to B$ of rings is faithfully flat if and only if it is
flat and the induced map on spectra is surjective.
See Algebra, Lemma \ref{algebra-lemma-ff-rings}.
\item If $A$ is a noetherian local ring, the completion
$A^\wedge$ is faithfully flat over $A$.
See Algebra, Lemma \ref{algebra-lemma-completion-faithfully-flat}.
\item Let $A$ be a Noetherian local ring and $M$ an $A$-module.
Then $M$ is flat over $A$ if and only if $M \otimes_A A^\wedge$
is flat over $A^\wedge$. (Combine the previous statement with
Algebra, Lemma \ref{algebra-lemma-flatness-descends}.)
\end{enumerate}
Before we move on to the geometric category, we present Grothendieck's
theorem, which provides a convenient recipe for producing flat
modules.

\begin{theorem}
\label{theorem-flatness-grothendieck}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be a local homomorphism.
If $M$ is a finite $B$-module that is flat as an $A$-module,
and $t \in \mathfrak m_B$ is an element such that multiplication
by $t$ is injective on $M/\mathfrak m_AM$, then $M/tM$ is also $A$-flat.
\end{theorem}

\begin{proof}
See Algebra, Lemma \ref{algebra-lemma-mod-injective}.
See also \cite[Section 20]{MatCA}.
\end{proof}

\begin{definition}
\label{definition-flat-schemes}
(See Morphisms, Definition \ref{morphisms-definition-flat}).
Let $f : X \to Y$ be a morphism of schemes.
\begin{enumerate}
\item Let $x \in X$. We say $f$ is {\it flat at $x \in X$}
if $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is flat.
\item We say $f$ is {\it flat} if it is flat at all points of $X$.
\item A morphism $f : X \to Y$ that is flat and surjective is sometimes
said to be {\it faithfully flat}.
\end{enumerate}
\end{definition}

\noindent
Once again, here is a list of results:
\begin{enumerate}
\item The property (of a morphism) of being flat is, by fiat,
local in the Zariski topology on the source and the target.
\item Open immersions are flat. (This is clear because it induces isomorphisms
on local rings.)
\item Flat morphisms are stable under base change and composition.
Morphisms, Lemmas \ref{morphisms-lemma-base-change-flat} and
\ref{morphisms-lemma-composition-flat}.
\item If $f : X \to Y$ is flat, then the pullback functor
$\text{QCoh}(\mathcal{O}_Y) \to \text{QCoh}(\mathcal{O}_X)$ is exact.
This is immediate by looking at stalks.
\item Let $f : X \to Y$ be a morphism of schemes, and assume $Y$
is quasi-compact and quasi-separated. In this case
if the functor $f^*$ is exact then $f$ is flat.
(Proof omitted. Hint: Use
Properties, Lemma \ref{properties-lemma-extend-trivial} to see that
$Y$ has ``enough'' ideal sheaves and use the characterization of
flatness in Algebra, Lemma \ref{algebra-lemma-flat}.)
\end{enumerate}

\section{Some topological properties of flat morphisms}
\label{section-topological-flat}

\noindent
We ``recall'' below some openness properties that flat morphisms enjoy.

\begin{theorem}
\label{theorem-flat-open}
For a morphism of finite type $f : X \to Y$, the set of points in $X$ where $f$
is flat is an open set. Moreover, if $f$ is flat at all points of $X$, it is
an open map. Thus, a flat morphism can be factored as a faithfully flat
morphism followed by an open immersion.
\end{theorem}

\begin{proof}
A proof of the first claim can be found in \cite{EGA}, IV, Section 11 or in
\cite{SGA1}, Expos\'e IV, Section 6. The second claim depends on three
results. The first one is Chevalley's theorem which states that $f$ preserves
constructible sets (this doesn't require flatness); the second one is the
easy fact that constructible sets (of a noetherian scheme) are open if and
only they are stable under generalisation; the last one is the fact that the
``going-down'' theorem holds for faithfully flat morphisms of rings. A proof
of all three of these facts and how they imply the claim can be found in
section 6 of \cite{MatCA}
\end{proof}

\begin{theorem}
\label{theorem-flat-is-quotient}
A faithfully flat quasi-compact morphism is a quotient map for
the Zariski topology.
\end{theorem}

\begin{proof}
If $f : X \to Y$ is a surjective flat quasi-compact morphism, then $f$ sends
constructible sets to pro-constructible sets (application of Chevalley's
theorem using the fact that, over a ring $R$, any $R$-algebra is a direct
limit of finitely generated $R$-algebras). Such sets are closed if and only
if they are stable under specialisation. Using this fact, the surjectivity
of $f$, and the fact that the ``going-down'' theorem holds for faithfully
flat morphisms of rings, one can easily show that $f$ is a quotient map for
the Zariski topology. Like the previous theorem, a proof of this theorem too
can be found in section 6 of \cite{MatCA}.
\end{proof}

\noindent
An important reason to study flat morphisms is that they provide the adequate
framework for capturing the notion of a family of schemes parametrised by the
points of another scheme. Naively one may think that any morphism $f : X \to S$
should be thought of as a family parametrised by the points of $S$. However,
without a flatness restriction on $f$, really bizarre things can happen in
this so-called family. For instance, we aren't guaranteed that relative
dimension (dimension of the fibres) is constant in a family. Other numerical
invariants, such as the Hilbert polynomial, too may change from fibre to
fibre. Flatness prevents such things from happening and, therefore, provides
some ``continuity'' to the fibres.

\section{\'Etale morphisms}
\label{section-etale-moprhisms}

\noindent
In this section, we will define \'etale morphisms and prove a number of
important properties about them. The most important one, no doubt, is the
functorial characterisation presented in Theorem \ref{theorem-formally-etale}.
Following this, we will also discuss a few properties of rings which are
insensitive to an \'etale extension (i.e: properties which hold for a ring
if and only if they hold for all its \'etale extensions) to motivate the basic
tenet of \'etale cohomology -- \'etale morphisms are the algebraic analogue of
local isomorphisms.

\medskip\noindent
As the title suggests, we will define the class of \'etale morphisms -- the
class of morphisms (whose surjective families) we shall deem to be coverings
in the category of schemes over a base scheme $S$ in order to define the
\'etale site $S_{et}$. Intuitively, an \'etale morphism is supposed to
capture the idea of a covering space and, therefore, should be close to a
local isomorphism. If we're working with varieties over algebraically closed
fields, this last statement can be made into a definition provided we replace
``local isomorphism'' with ``formal local isomorphism'' (isomorphism after
completion). One can then give a definition over any base field by asking
that the base change to the algebraic closure be \'etale (in the
aforementioned sense). But, rather than proceeding via such aesthetically
displeasing constructions, we will adopt a cleaner, albeit slightly more
abstract, algebraic approach.

\begin{definition}
\label{definition-etale-ring}
A morphism $f : A \to B$ of local rings is
{\it \'etale} if it is flat and unramified.
\end{definition}

\noindent
As we have already discussed the sorites for flat and unramified morphisms,
there's not much more to discuss here. One thing that we would like to point
out, however, is that \'etaleness can be checked after completion. Moreover,
by combining flatness with basic properties of complete local rings, we see
that if $f : A \to B$ is \'etale, then, in fact, $\widehat{B}$ is a finite flat
$\widehat{A}$-module and, hence, $\widehat{B} \cong \big(\widehat{A}\big)^n$.
The integer $n$ is nothing other than the (separable) degree $[k(B) : k(A)]$.
In particular, if $k(A)$ is separably closed, we obtain that
$\widehat{A} \to \widehat{B}$ is an isomorphism, which vindicates our earlier
claims. Lastly, if $f : A \to B$ is \'etale, the unramifiedness forces
$\dim(B) \leq  \dim(A)$ while (faithful) flatness forces the other
inequality. Thus, we obtain that $\dim(B) = \dim(A)$.

\begin{definition}
\label{definition-etale-schemes-1}
A morphism $f : X \to Y$ of schemes is said to
{\it \'etale at $x \in X$} if it is
flat and unramified at $x$ (and, therefore, of finite type in a neighbourhood
of $x$). The morphism is said to be
{\it \'etale} if it is \'etale at all its points.
\end{definition}

\noindent
Note that the unramifiedness hypothesis forces \'etale morphisms to be
locally of finite type; flatness then forces such morphisms to be open.
Since unramifiedness and flatness are both open properties, the \'etale
locus of a morphism is open. Moreover, it's trivially verified that
\'etaleness, besides being local on the source and the target, is stable
under base change and composition.

\section{The structure theorem for \'etale morphisms}
\label{section-structure-etale-map}

\noindent
We present a theorem which describes the local structure of \'etale morphisms
with great clarity. Besides its obvious independent importance, this theorem
also allows us to make the transition to another definition of \'etale
morphisms that captures the geometric intuition better than the one we've
used so far.

\begin{theorem}[Structure Theorem]
\label{theorem-structure-etale}
Let $f : A \to B$ be an unramified morphism of local rings with the property
that $B$ is the localisation of a finitely generated $A$-algebra. Then there
exists a finite $A$-algebra $A'$, a maximal ideal $p \in A'$, a generator
$u$ of $A'$ (as an $A$-algebra), a monic polynomial $F \in A[t]$ such that
$F(u) = 0$ and $F'(u) \notin p$ and an isomorphism $B \to A'_p$ as
$A$-algebras. Furthermore, we may choose $A' \cong A[t]/(F)$ if $f$
is \'etale.
\end{theorem}

\begin{proof}
The first step is to use Zariski's main
theorem\footnote{The classical version, as explained in Section 4.4 of
Chapter 1 of \cite{EGA}, III suffices for our purposes; we do not need the
full power of Deligne's generalised version of the main theorem.} to
construct a finite $A$-algebra $A'$ and a maximal ideal $p$ of $A'$ such
that $A'_p \cong B$ as an $A$-algebra. The next step is to combine the
primitive element theorem with Nakayama's lemma to be able to assume that
$A'$ is monogenic. The last step is to show that this $A'$ works. A
carefully written out proof can be found in section 7 of expos\'e 1 of
\cite{SGA1}.
\end{proof}

\noindent
Via standard lifting arguments, one then obtains the following geometric
statement which will be of essential use to us.

\begin{theorem}
\label{theorem-geometric-structure}
Let $f : X \to Y$ be an \'etale morphism. Then, for every $x \in X$, there
exist affine neighbourhoods $V = \text{Spec}(R)$ and $U = \text{Spec}(S)$ of
$f(x)$
and $x$ respectively such that $f(U) \subset V$ and that $U$ is $V$-isomorphic
to an open subscheme of $\text{Spec}(R[t]/g)_{g'}$ for some monic polynomial
$g \in R[t]$  (with $g' = dg/dt$ and that $U$ is $V$-isomorphic to an open
subscheme of $\text{Spec}(R[t]/g)_{g'}$ for some monic polynomial $g \in R[t]$
(with $g' = dg/dt$).
\end{theorem}

\section{An equivalent definition}
\label{section-definition-equivalent}

\noindent
We now give another (equivalent) definition of \'etale morphisms which,
besides having some geometric interpretation, is often easily verified in
practice. More importantly perhaps, this definition also naturally leads
one to the notion of smoothness. As smooth morphisms don't directly concern
us, we don't discuss them here and, instead, refer the interested reader to
chapter 2 of the Neron models book (\cite{Ner}) for an almost perfect
account of the basic theory of smoothness, especially its relationship to
differential calculus.

\begin{definition}
\label{definition-etale-differential}
A morphism $f : X \to Y$ (of schemes) is said to be
{\it \'etale} if the following
two properties hold:
\begin{enumerate}
\item for every $x \in X$, there exists an open neighbourhood $U$ of $x$ and an
immersion $g : U \to \mathbf{A}^n_Y$, and
\item if $\mathcal{J}$ is the sheaf of ideals that defines $g$, then, locally at
$g(x)$, $\mathcal{J}$ can be generated by sections $g_1, \cdots, g_n$ such that
the
differentials $dg_i$ form a basis for $\Omega^1_{\mathbf{A}^n_Y}$ at $g(x)$.
\end{enumerate}
\end{definition}

\begin{proof}[Proof of equivalence]
Note that the first property simply expresses the fact that $f$ is locally of
finite type. Thus, \'etale morphisms for the old definition satisfy the first
property. To show that they satisfy the second one as well, we use Theorem
\ref{theorem-geometric-structure}. Following the notation of that theorem,
we may assume that $U = \text{Spec}  R[t, x, y]/(g, xg' - 1, ya - 1)$ where
$V = \text{Spec}(R)$ is an open subscheme of $Y$ with $U \subset f^{-1}(V)$, $g$
is a polynomial in $t$, $g' = dg/dt$ and $a$ is a polynomial in $t$ and $x$.
It is then trivially verified that the obvious morphism
$U \to \mathbf{A}^3_V \to \mathbf{A}^3_Y$ is an immersion with the requisite
properties.

\medskip\noindent
For the converse direction, let $f : X \to Y$ be a morphism verifying properties
$1$ and $2$. By the first property, we get that $f$ is locally of finite type.
It remains to show that $f$ is unramified and flat.

\medskip\noindent
To see that $f$ is unramified, using Theorem
\ref{theorem-unramified-equivalence}, it suffices to show that
$\Omega^1_{X/Y} = 0$. Since this is a local statement, after fixing $x \in X$,
we immediately reduce to the case where $Y = \text{Spec}(R)$ and $g : X \to
\mathbf{A}^n_Y$ is
a closed subscheme defined by $J = (g_1, \cdots, g_n)$ with the property that
the differentials $dg_i$ form a basis for $\Omega^1_{\mathbf{A}^n_Y}$ at
$g(x)$. We
are now in a position to use the exact sequence
$$
g^*(\mathcal{J}/\mathcal{J}^2) \to g^*(\Omega^1_{\mathbf{A}^n_Y/Y} \to
\Omega^1_{X/Y} \to 0
$$
where $\mathcal{J}$ is the sheaf of ideals associated to $J$. The hypothesis
implies
that the fibre of $\Omega^1_{X/Y}$ is $0$ at $x$ which implies that
$\Omega^1_{X/Y}$ is trivial at $x$ by Nakayama's lemma. Thus, we've shown
that $f$ is unramified.

\medskip\noindent
To prove flatness, we once again reduce to the local case. Following the
same notation as that introduced above, we need to show that
$R[x_1, \cdots, x_n]/(g_1, \cdots, g_n)$ is flat over $R$ where the $x_i$ are
coordinates on $\mathbf{A}^n_Y$ and $(\frac{\partial g_i}{\partial x_j})$ is
invertible at $g(x)$. The flatness would follow from Grothendieck's flatness
theorem (Theorem \ref{theorem-flatness-grothendieck}) if we showed that
$g_1, \cdots, g_n$ was a $k(R)$-regular sequence inside
$k(R)[x_1, \cdots, x_n]$. We know that
$k(R)[x_1, \cdots, x_n]/(g_1, \cdots, g_n)$
is \'etale over $k(R)$ (we just showed it was unramified, and any morphism to
a field is flat) and, consequently, of dimension $0$. Hence,
$\mathrm{ht}(g_1, \cdots, g_n) = n$ by basic dimension theory. Since
$k(R)[x_1, \cdots, x_n]$ is a Cohen-Macaulay ring, it follows, from Theorem
17.4 in \cite{Ma} for instance, that $g_1, \cdots, g_n$ is a $k(R)$-regular
sequence which finishes the proof. For a proof that avoids the use of
Cohen-Macaulay rings, we refer the reader to Theorem 3 of Section 3.10 of
Mumford's exposition (\cite{RB}).
\end{proof}

\section{Some topological properties of etale morphisms}
\label{section-topological-etale}

\noindent
We present a few of the fundamental topological properties of \'etale
morphisms as explained in, say, \cite{SGA1}, expos\'e 1, section 5. Of key
importance here is Theorem \ref{theorem-formally-etale-step-0} which, besides
providing one direction of the equivalence promised by the functorial
characterisation, also gives motivation to view \'etaleness as essentially
a topological property. But first, we give what Grothendieck calls the
fundamental theorem for \'etale morphisms.

\begin{theorem}
\label{theorem-etale-radiciel-open}
Let $f : X \to Y$ be a separated morphism of finite type. Then $f$ is an open
immersion if and only if it \'etale and
radiciel\footnote{Recall (\cite{EGA}, I, chapter 1, section 3.5) that
$f : X \to Y$ is radiciel if $X(K) \to Y(K)$ is injective for every field $K$,
and that this is equivalent to requiring that $f$ be injective and that the
maps $\kappa(f(x)) \to \kappa(x)$ be epimorphisms in the category of fields
(purely inseparable extensions). Lastly, this is also equivalent to requiring
that $f$ be universally injective}.
\end{theorem}

\begin{proof}
It is clear that open immersions are \'etale and radiciel. For the converse
direction, we are told that $f$ is \'etale and universally injective. As it
is a flat morphism of finite type, it also universally open. Hence, it is
universally a homeomorphism onto its image. Replacing $Y$ with $f(X)$, we may
assume that $f : X \to Y$ is a universal homeomorphism.  Now, if $f$ had a
section, the section would have to be an open immersion (because $f$ is
unramified) that is surjective (because $f$ is a homeomorphism). That is, it
would be an isomorphism and that would prove our claim. On the other hand, to
show that $f$ is an isomorphism, it clearly suffices to work after a faithfully
flat base change. But $f$ itself provides such a base change! And once we base
change via $f$, the diagonal provides a section. The claim follows.
\end{proof}

\noindent
Next, we present an extremely crucial theorem which, roughly speaking, says
that \'etaleness is a topological property.

\begin{theorem}
\label{theorem-etale-topological}
Let $X$ and $Y$ be two separated noetherian schemes over a base scheme $S$
such that $X$ is \'etale over $S$ . Let $S_0$ be a subscheme of $S$ defined
by a nilpotent ideal, and denote by $X_0$ (resp. $Y_0$) the pullback
$X \times_S S_0$ (resp. $Y \times_S S_0$). Then the map
$\text{Hom}_S(Y, X) \to \text{Hom}_{S_0}(Y_0, X_0)$ is bijective.
\end{theorem}

\begin{proof}
After base changing via $Y \to S$, we may assume that $Y = S$ in which case
the theorem states that any $Y$-morphism $Y_0 \to X$ actually factors
uniquely through a section $Y \to X$. For existence, assume that we are
given $t : Y_0 \to X$. Since $|Y_0| = |Y|$, by Theorem
\ref{theorem-sections-unramified-maps}, the section $t$ is uniquely
determined by a connected component $X_i$ of $X$ such that
$X_i \times_Y Y_0 \to Y_0$ is an isomorphism (with inverse defined by
$(t, \mathrm{id})$). In particular, $X_i \to Y$ is a universal homeomorphism
and therefore radiciel. Since $X_i \to X$ and $X \to Y$ are \'etale, it
follows from Theorem \ref{theorem-etale-radiciel-open} that $X_i \to Y$ is an
isomorphism and, therefore, it has an inverse which is the required section.
The uniqueness follows from repeated application of Theorem
\ref{theorem-formally-unramified}, or directly from Theorem
\ref{theorem-sections-unramified-maps}, or, if one carefully observes,
from our proof itself.
\end{proof}

\noindent
From the proof of preceeding theorem, we also obtain one direction of the
promised functorial characterisation of \'etale morphisms.

\begin{theorem}
\label{theorem-formally-etale-step-0}
Let $f : X \to S$ be an \'etale morphism. Then for all $S$-schemes $Y \to S$
which are affine, and subschemes $Y_0$ of $Y$ defined by square-zero ideals,
the natural map $\text{Hom}_S(Y, X) \to \text{Hom}_S(Y_0, X)$ is bijective.
\end{theorem}

\section{The functorial characterisation}
\label{section-functorial-etale}

\noindent
We finally present the promised functorial characterisation. Note that this
takes our count of (equivalent) definitions of \'etale morphisms to four --
the one we originally gave, the one provided by the structure theorem, the
alternative one and the one obtained from the functorial characterisation.

\begin{theorem}
\label{theorem-formally-etale}
Let $f : X \to S$ be a morphism that is locally of finite type. Then the
following are equivalent
\begin{enumerate}
\item $f$ is \'etale
\item For all $S$-schemes $Y \to S$ which are affine, and subschemes $Y_0$
of $Y$ defined by square-zero ideals, the natural map
$\text{Hom}_S(Y, X) \to \text{Hom}_S(Y_0, X)$ is bijective.
\end{enumerate}
\end{theorem}

\begin{proof}
The forward implication was proven in Theorem
\ref{theorem-formally-etale-step-0}. For the reverse implication, we use
Definition \ref{definition-etale-differential}. We may assume that $X$ is
defined as a closed subscheme $g: X \to \mathbf{A}^n_S$ by an ideal
$\mathcal{J}$. Using the
alternative definition, it suffices to show that the natural map
$g^*(\mathcal{J}/\mathcal{J}^2) \to g^*(\Omega^1_{\mathbf{A}^n_S/S})$ is an
isomorphism. Since this is
a local problem, we may assume that $S = \text{Spec}(R)$,
$\mathbf{A}^n_S = \text{Spec}(A)$ and $X = \text{Spec}(B)$ where
$A = R[x_1, \cdots, x_n]$ and $B$ is a quotient of $A$ by
an ideal $I$. We have the canonical isomorphism $B \to (A/I^2)/(I/I^2)$
which, by the functorial hypothesis, lifts to an $R$-linear map
$B \to A/I^2$. Therefore, the exact sequence
$0 \to I/I^2 \to A/I^2 \to A/I \to 0$ splits. If we denote the first map
by $i$, the second map by $v$ and the splitting $A/I \to A/I^2$ by $\phi$,
then $\tau = \mathrm{id} - (\phi \circ v)$ defines an $A$-derivation
$A/I^2 \to I/I^2$. Consequently, we obtain a map
$\Omega^1_{A/R} \otimes_A B \to I/I^2$ which gives an inverse to the
natural map $I/I^2 \to \Omega^1_{A/R} \otimes_A B$ thereby showing that
the latter is an isomorphism, as was required.
\end{proof}

\noindent
This characterisation says that solutions to the equations defining $X$ can
be lifted uniquely through nilpotent thickenings.

\section{Permanence properties}
\label{section-properties-permanence}

\noindent
We have already seen that the Krull dimension is insensitive to an \'etale
extension. In what follows, we present a few other such ``permanence''
properties of \'etale morphisms.

\begin{proposition}
\label{proposition-etale-dimension}
Let $f : A \to B$ be an \'etale map of local rings. Then
$\mathrm{depth}(A) = \mathrm{depth}(B)$
\end{proposition}

\begin{proof}
This follows fairly easily from the observation that, on tensoring with
$B$, the Koszul complex of the ideal $r(A)$ of $A$ gives the Koszul complex
of the ideal $r(B)$ of $B$, and that $A \to B$ is faithfully flat.
\end{proof}

\begin{proposition}
\label{proposition-etale-regular}
Let $f : A \to B$ be an \'etale map of local rings. Then $A$ is regular if and
only if $B$ is so.
\end{proposition}

\begin{proof}
By the \'etaleness of $A \to B$ and the local flatness criterion
(\cite{MatCA}, theorem 49), one sees that
$gr^*(B) \cong gr^*(A) \otimes_{k(A)} k(B)$ as graded algebras. Thus,
by looking at the degree $1$ components, we see that the embedded
dimensions of $A$ and $B$ co-incide. By the \'etaleness of $A \to B$,
the (Krull) dimensions of the two rings co-incide as well. Thus, $A$ is
regular if and only if $B$ is so.
\end{proof}

\begin{proposition}
\label{proposition-etale-reduced}
Let $f : A \to B$ be an \'etale map of local rings. Then $A$ is reduced if and
only if $B$ is so.
\end{proposition}

\begin{proof}
It's clear from the faithful flatness of $A \to B$ that if $B$ is reduced, so
is $A$. Conversely, lets assume $A$ is reduced and show that $B$ is so. By
assumption, if $\{p_i\}$ is the set of minimal primes of $A$, the natural map
$A \to \prod_i A/p_i$ is injective. By the flatness of $B$,
$B \to \prod_i B/p_iB$ is also injective; hence, it suffices to show that each
of $B/p_iB$ is reduced. Thus, after base changing to an irreducible component,
we may assume that $A$ is a domain with field of fractions $K$. By the
flatness of $B$, the natural map $B \to B \otimes_A K$ is injective; hence,
it suffices to show the latter is reduced. Since $K \to B \otimes_A K$ is
\'etale, we are reduced to the case where $A$ is a field. By virtue of
Example \ref{example-etale-field-extensions}, we see that $B$ is a product of
fields,
and therefore reduced.
\end{proof}


\begin{proposition}
\label{proposition-etale-normal}
Let $f : A \to B$ be an \'etale map of local rings. Then $A$ is normal if and
only if $B$ is so.
\end{proposition}

\begin{proof}
We use Serre's normality criterion for a noetherian local ring $A$ of
dimension $\neq 0$. Recall that this says that $A$ is normal if and only if
it is regular in codimension $1$, and for every prime $p$ of height $\geq 2$,
$\mathrm{depth}(A_p) \geq 2$. Since $A \to B$ is an \'etale map of local
rings, it's faithfully flat. Moreover, if $p \in \text{Spec}(B)$ lies over
$q \in \text{Spec}(A)$, then $A_q \to B_p$ is \'etale. Hence, the height $1$
(resp. $\geq 2$) primes of $B$ lie over all the height $1$ (resp. $\geq 2$)
primes of $A$. The result now follows from the permanence of regularity and
depth for \'etale extensions.
\end{proof}

\begin{proposition}
\label{proposition-etale-CM}
Let $f : A \to B$ be an \'etale map of local rings. Then $A$ is Cohen-Macaulay
if and only if $B$ is so.
\end{proposition}
\begin{proof}
A local ring $A$ is Cohen-Macaulay if and only
$\mathrm{dim}(A) = \mathrm{depth}(A)$. As each of these invariants is
preserved under an \'etale extension, the claim follows.
\end{proof}

\noindent
The preceeding propositions give some indication as to why we'd like to think
of \'etale maps as ``local isomorphisms''. Another property that gives an
excellent indication that we have the ``right'' definition is the fact that
for $\mathbf{C}$-schemes of finite type, a morphism is \'etale if and only if
the
associated morphism on analytic spaces (the $\mathbf{C}$-valued points given the
complex topology) is a local isomorphism in the analytic sense (open
embedding locally on the source). This fact can be proven with the aid of the
structure theorem and the fact that the analytification commutes with the
formation of the completed local rings -- the details are left to the reader.


\input{chapters}


\bibliography{my}
\bibliographystyle{alpha}

\end{document}
