\input{preamble}

% OK, start here.
%
\begin{document}

\title{\'Etale Morphisms of Schemes}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents



\section{Introduction}
\label{section-introduction}

\noindent
In this Chapter, we discuss \'etale morphisms of schemes. We illustrate
some of the more important concepts by working with the Noetherian case.
Our principal goal is to collect for the reader enough commutative
algebra results to start reading a treatise on \'etale cohomology. An
auxiliary goal is to provide enough evidence to ensure that the reader stops
calling the phrase ``the \'etale topology of schemes'' an exercise in general
nonsense, if (s)he does indulge in such blasphemy.

\medskip\noindent
We will refer to the other
chapters of the stacks project for standard results in algebraic geometry
(on schemes and commutative algebra). We will provide detailed
proofs of the new results that we state here.




\section{Conventions}
\label{section-conventions}

\noindent
In this chapter, frequently schemes will be assumed locally Noetherian
and frequently rings will be assumed Noetherian. But in all the statements
we will reiterate this when necessary, and make sure we list all the
hypotheses! On the other hand, here are some general facts that we will use
often and are useful to keep in mind:
\begin{enumerate}
\item A ring homomorphism $A \to B$ of finite type with $A$ Noetherian
is of finite presentation. See Algebra,
Lemma \ref{algebra-lemma-Noetherian-finite-type-is-finite-presentation}.
\item A morphism (locally) of finite type between locally Noetherian schemes
is automatically (locally) of finite presentation.
See Morphisms,
Lemma \ref{morphisms-lemma-noetherian-finite-type-finite-presentation}.
\item Add more like this here.
\end{enumerate}




\section{Unramified morphisms}
\label{section-unramified-definition}

\noindent
We first define the notion of unramified morphisms for local rings, and then
globalize it to get one for arbitrary schemes.

\begin{definition}
\label{definition-unramified-rings}
Let $A$, $B$ be Noetherian local rings. A local homomorphism $A \to B$
is said to be {\it unramified homomorphism of local rings} if
\begin{enumerate}
\item $\mathfrak m_AB = \mathfrak m_B$,
\item $\kappa(\mathfrak m_B)$ is a finite separable extension of
$\kappa(\mathfrak m_A)$, and
\item $B$ is essentially of finite type over $A$ (this means
that $B$ is the localization of a finite type $A$-algebra at a prime).
\end{enumerate}
\end{definition}

\noindent
This is the local version of the
definition in Algebra, Section \ref{algebra-section-unramified}.
In that section a ring map $R \to S$ is defined to be unramified if and
only if it is of finite type, and $\Omega_{S/R} = 0$.
It is shown in
Algebra, Lemmas \ref{algebra-lemma-unramified-at-prime} and
\ref{algebra-lemma-characterize-unramified} that given a ring
map $R \to S$ of finite type, and a prime $\mathfrak q$ of $S$
lying over $\mathfrak p \subset R$, then we have
$$
R \to S\text{ is unramified at }\mathfrak q
\Leftrightarrow
\mathfrak pS_{\mathfrak q} = \mathfrak q S_{\mathfrak q}
\text{ and }
\kappa(\mathfrak p) \subset \kappa(\mathfrak q)\text{ finite separable}
$$
Thus we see that for a local homomorphism of local rings the properties
of our definition above are closely related to the question of
being unramified. In fact, we have proved the following lemma.

\begin{lemma}
\label{lemma-characterize-unramified-Noetherian}
\begin{slogan}
Unramifiedness is a stalk local condition.
\end{slogan}
Let $A \to B$ be of finite type with $A$ a Noetherian ring.
Let $\mathfrak q$ be a prime of $B$ lying over $\mathfrak p \subset A$.
Then $A \to B$ is unramified at $\mathfrak q$ if and only if
$A_{\mathfrak p} \to B_{\mathfrak q}$ is an unramified homomorphism
of local rings.
\end{lemma}

\begin{proof}
See discussion above.
\end{proof}

\noindent
We will characterize the property of being unramified in terms
of completions. For a Noetherian local ring $A$
we denote $A^\wedge$ the completion of $A$ with respect to the
maximal ideal. It is also a Noetherian local ring, see
Algebra, Lemma \ref{algebra-lemma-completion-Noetherian-Noetherian}.

\begin{lemma}
\label{lemma-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism.
\begin{enumerate}
\item if $A \to B$ is an unramified homomorphism of local rings,
then $B^\wedge$ is a finite $A^\wedge$ module,
\item if $A \to B$ is an unramified homomorphism of local rings and
$\kappa(\mathfrak m_A) = \kappa(\mathfrak m_B)$,
then $A^\wedge \to B^\wedge$ is surjective,
\item if $A \to B$ is an unramified homomorphism of local rings
and $\kappa(\mathfrak m_A)$
is separably closed, then $A^\wedge \to B^\wedge$ is surjective,
\item if $A$ and $B$ are complete discrete valuation rings, then
$A \to B$ is an unramified homomorphism of local rings
if and only the uniformizer for $A$ maps to a uniformizer for $B$,
and the residue field extension is finite separable (and $B$ is
essentially of finite type over $A$).
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) is a special case of
Algebra, Lemma \ref{algebra-lemma-finite-after-completion}.
For part (2), note that the $\kappa(\mathfrak m_A)$-vector space
$B^\wedge/\mathfrak m_{A^\wedge}B^\wedge$
is generated by $1$. Hence by Nakayama's lemma
(Algebra, Lemma \ref{algebra-lemma-NAK}) the map
$A^\wedge \to B^\wedge$ is surjective.
Part (3) is a special case of part (2).
Part (4) is immediate from the definitions.
\end{proof}

\begin{lemma}
\label{lemma-characterize-unramified-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism such that $B$ is
essentially of finite type over $A$.
The following are equivalent
\begin{enumerate}
\item $A \to B$ is an unramified homomorphism of local rings
\item $A^\wedge \to B^\wedge$ is an unramified homomorphism of local rings, and
\item $A^\wedge \to B^\wedge$ is unramified.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (1) and (2) follows from the fact that
$\mathfrak m_AA^\wedge$ is the maximal ideal of $A^\wedge$
(and similarly for $B$) and faithful flatness of $B \to B^\wedge$.
For example if $A^\wedge \to B^\wedge$ is unramified, then
$\mathfrak m_AB^\wedge = (\mathfrak m_AB)B^\wedge = \mathfrak m_BB^\wedge$
and hence $\mathfrak m_AB = \mathfrak m_B$.

\medskip\noindent
Assume the equivalent conditions (1) and (2).
By Lemma \ref{lemma-unramified-completions}
we see that $A^\wedge \to B^\wedge$ is
finite. Hence $A^\wedge \to B^\wedge$ is of finite presentation, and by
Algebra, Lemma \ref{algebra-lemma-characterize-unramified}
we conclude that $A^\wedge \to B^\wedge$ is unramified at
$\mathfrak m_{B^\wedge}$. Since $B^\wedge$ is local we conclude
that $A^\wedge \to B^\wedge$ is unramified.

\medskip\noindent
Assume (3). By Algebra, Lemma \ref{algebra-lemma-unramified-at-prime}
we conclude that $A^\wedge \to B^\wedge$ is an unramified homomorphism
of local rings, i.e., (2) holds.
\end{proof}

\begin{definition}
\label{definition-unramified-schemes}
(See Morphisms, Definition \ref{morphisms-definition-unramified}
for the definition in the general case.)
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$.
\begin{enumerate}
\item We say $f$ is {\it unramified at $x$} if
$\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$
is an unramified homomorphism of local rings.
\item The morphism $f : X \to Y$ is said to be {\it unramified}
if it is unramified at all points of $X$.
\end{enumerate}
\end{definition}

\noindent
Let us prove that this definition agrees with the definition in the
chapter on morphisms of schemes. This in particular guarantees that the
set of points where a morphism is unramified is open.

\begin{lemma}
\label{lemma-unramified-definition}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$. The morphism $f$ is unramified at $x$ in
the sense of Definition \ref{definition-unramified-schemes}
if and only if it is unramified in
the sense of Morphisms, Definition \ref{morphisms-definition-unramified}.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-characterize-unramified-Noetherian}
and the definitions.
\end{proof}

\noindent
Here are some results on unramified morphisms.
The formulations as given in this list apply only to
morphisms locally of finite type between locally Noetherian schemes.
In each case we give a reference to the general result as
proved earlier in the project, but in some cases one can
prove the result more easily in the Noetherian case.
Here is the list:
\begin{enumerate}
\item Unramifiedness is local on the source and the target in the Zariski
topology.
\item Unramified morphisms are stable under base change and composition.
See Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified}
and \ref{morphisms-lemma-composition-unramified}.
\item Unramified morphisms of schemes are locally quasi-finite
and quasi-compact unramified morphisms are quasi-finite.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-quasi-finite}
\item Unramified morphisms have relative dimension $0$. See
Morphisms, Definition \ref{morphisms-definition-relative-dimension-d}
and
Morphisms, Lemma \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
\item A morphism is unramified if and only if all its fibres are unramified.
That is, unramifiedness can be checked on the scheme theoretic fibres. See
Morphisms, Lemma \ref{morphisms-lemma-unramified-etale-fibres}.
\item Let $X$ and $Y$ be unramified over a base scheme $S$.
Any $S$-morphism from $X$ to $Y$ is unramified.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-permanence}.
\end{enumerate}

\section{Three other characterizations of unramified morphisms}
\label{section-three-other}

\noindent
The following theorem gives three equivalent notions of being
unramified at a point. See
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}
for (part of) the statement for general schemes.

\begin{theorem}
\label{theorem-unramified-equivalence}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism of schemes which is locally of finite type.
Let $x$ be a point of $X$. The following are equivalent
\begin{enumerate}
\item $f$ is unramified at $x$,
\item the stalk $\Omega_{X/Y, x}$ of the module of relative differentials
at $x$ is trivial,
\item there exist open neighbourhoods $U$ of $x$ and $V$ of $f(x)$, and a
commutative diagram
$$
\xymatrix{
U \ar[rr]_i \ar[rd] & & \mathbf{A}^n_V \ar[ld] \\
& V
}
$$
where $i$ is a closed immersion defined by a
quasi-coherent sheaf of ideals $\mathcal{I}$ such that the differentials
$\text{d}g$ for $g \in \mathcal{I}_{i(x)}$ generate
$\Omega_{\mathbf{A}^n_V/V, i(x)}$, and
\item the diagonal $\Delta_{X/Y} : X \to X \times_Y X$
is a local isomorphism at $x$.
\end{enumerate}
\end{theorem}

\begin{proof}
The equivalence of (1) and (2) is proved in
Morphisms, Lemma \ref{morphisms-lemma-unramified-at-point}.

\medskip\noindent
If $f$ is unramified at $x$, then $f$ is unramified in an open
neighbourhood of $x$; this does not follow immediately
from Definition \ref{definition-unramified-schemes} of this chapter
but it does follow from
Morphisms, Definition \ref{morphisms-definition-unramified} which we
proved to be equivalent in
Lemma \ref{lemma-unramified-definition}.
Choose affine opens $V \subset Y$, $U \subset X$
with $f(U) \subset V$ and $x \in U$, such that $f$ is
unramified on $U$, i.e., $f|_U : U \to V$ is unramified.
By Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism}
the morphism $U \to U \times_V U$
is an open immersion. This proves that (1) implies (4).

\medskip\noindent
If $\Delta_{X/Y}$ is a local isomorphism at $x$, then
$\Omega_{X/Y, x} = 0$ by
Morphisms, Lemma \ref{morphisms-lemma-differentials-diagonal}.
Hence we see that (4) implies (2).
At this point we know that (1), (2) and (4) are all equivalent.

\medskip\noindent
Assume (3). The assumption on the diagram combined with
Morphisms, Lemma \ref{morphisms-lemma-differentials-relative-immersion}
show that $\Omega_{U/V, x} = 0$. Since $\Omega_{U/V, x} = \Omega_{X/Y, x}$
we conclude (2) holds.

\medskip\noindent
Finally, assume that (2) holds. To prove (3) we may localize on
$X$ and $Y$ and assume that $X$ and $Y$ are affine.
Say $X = \Spec(B)$ and $Y = \Spec(A)$.
The point $x \in X$ corresponds to a prime $\mathfrak q \subset B$.
Our assumption is that $\Omega_{B/A, \mathfrak q} = 0$
(see Morphisms, Lemma \ref{morphisms-lemma-differentials-affine} for the
relationship between differentials on schemes and modules
of differentials in commutative algebra).
Since $Y$ is locally Noetherian and $f$ locally of finite type
we see that $A$ is Noetherian and
$B \cong A[x_1, \ldots, x_n]/(f_1, \ldots, f_m)$, see
Properties, Lemma \ref{properties-lemma-locally-Noetherian} and
Morphisms, Lemma \ref{morphisms-lemma-locally-finite-type-characterize}.
In particular, $\Omega_{B/A}$ is a finite $B$-module. Hence we
can find a single $g \in B$, $g \not \in \mathfrak q$ such that
the principal localization $(\Omega_{B/A})_g$ is zero. Hence after
replacing $B$ by $B_g$ we see that $\Omega_{B/A} = 0$ (formation
of modules of differentials commutes with localization, see
Algebra, Lemma \ref{algebra-lemma-differentials-localize}). This means that
$\text{d}(f_j)$ generate the kernel of the canonical map
$\Omega_{A[x_1, \ldots, x_n]/A} \otimes_A B \to \Omega_{B/A}$.
Thus the surjection $A[x_1, \ldots, x_n] \to B$ of $A$-algebras gives the
commutative diagram of (3), and the theorem is proved.
\end{proof}

\noindent
How can we use this theorem? Well, here are a few remarks:
\begin{enumerate}
\item Suppose that
$f : X \to Y$ and $g : Y \to Z$ are two morphisms locally of finite
type between locally Noetherian schemes. There is a canonical short
exact sequence
$$
f^*(\Omega_{Y/Z}) \to \Omega_{X/Z} \to \Omega_{X/Y} \to 0
$$
see Morphisms, Lemma \ref{morphisms-lemma-triangle-differentials}.
The theorem therefore implies that if $g \circ f$ is unramified,
then so is $f$. This is
Morphisms, Lemma \ref{morphisms-lemma-unramified-permanence}.
\item Since $\Omega_{X/Y}$ is isomorphic to the conormal sheaf
of the diagonal morphism
(Morphisms, Lemma \ref{morphisms-lemma-differentials-diagonal})
we see that if $X \to Y$ is a monomorphism of
locally Noetherian schemes and locally of finite type,
then $X \to Y$ is unramified.
In particular, open and closed immersions of locally Noetherian schemes
are unramified. See
Morphisms, Lemmas
\ref{morphisms-lemma-open-immersion-unramified} and
\ref{morphisms-lemma-closed-immersion-unramified}.
\item The theorem also implies that the set of points
where a morphism $f : X \to Y$ (locally of finite type of locally Noetherian
schemes) is not unramified is
the support of the coherent sheaf $\Omega_{X/Y}$.
This allows one to give a scheme theoretic definition to the
``ramification locus''.
\end{enumerate}

\section{The functorial characterization of unramified morphisms}
\label{section-functorial-unramified}

\noindent
In basic algebraic geometry we learn that some classes of morphisms can be
characterized functorially, and that such descriptions are quite useful.
Unramified morphisms too have such a characterization.

\begin{theorem}
\label{theorem-formally-unramified}
Let $f : X \to S$ be a morphism of schemes.
Assume $S$ is a locally Noetherian scheme, and $f$ is locally of finite type.
Then the following are equivalent:
\begin{enumerate}
\item $f$ is unramified,
\item the morphism $f$ is formally unramified:
for any affine $S$-scheme $T$ and subscheme $T_0$ of $T$
defined by a square-zero ideal,
the natural map
$$
\Hom_S(T, X) \longrightarrow \Hom_S(T_0, X)
$$
is injective.
\end{enumerate}
\end{theorem}

\begin{proof}
See More on Morphisms,
Lemma \ref{more-morphisms-lemma-unramified-formally-unramified}
for a more general statement and proof.
What follows is a sketch of the proof in the current case.

\medskip\noindent
Firstly, one checks both properties are local on the source and the target.
This we may assume that $S$ and $X$ are affine.
Say $X = \Spec(B)$ and $S = \Spec(R)$.
Say $T = \Spec(C)$. Let $J$ be the square-zero ideal of $C$
with $T_0 = \Spec(C/J)$. Assume that we are given the diagram
$$
\xymatrix{
& B \ar[d]^\phi \ar[rd]^{\bar{\phi}}
& \\
R \ar[r] \ar[ur] & C \ar[r]
& C/J
}
$$
Secondly, one checks that the association $\phi' \mapsto \phi' - \phi$
gives a bijection between the set of liftings of $\bar{\phi}$ and the module
$\text{Der}_R(B, J)$. Thus, we obtain the implication (1) $\Rightarrow$ (2)
via the description of unramified morphisms having trivial module
of differentials, see Theorem \ref{theorem-unramified-equivalence}.

\medskip\noindent
To obtain the reverse implication, consider the surjection
$q : C = (B \otimes_R B)/I^2 \to B = C/J$ defined by the square zero ideal
$J = I/I^2$ where $I$ is the kernel of the multiplication map
$B \otimes_R B \to B$. We already have a lifting $B \to C$ defined by, say,
$b \mapsto b \otimes 1$. Thus, by the same reasoning as above, we obtain a
bijective correspondence between liftings of $\text{id} : B \to C/J$ and
$\text{Der}_R(B, J)$. The hypothesis therefore implies that the latter module is
trivial. But we know that $J \cong \Omega_{B/R}$. Thus, $B/R$ is unramified.
\end{proof}



\section{Topological properties of unramified morphisms}
\label{section-topological-unramified}

\noindent
The first topological result that will be of utility to us is one which says
that unramified and separated morphisms have ``nice'' sections.
The material in this section does not require any Noetherian hypotheses.

\begin{proposition}
\label{proposition-properties-sections}
Sections of unramified morphisms.
\begin{enumerate}
\item Any section of an unramified morphism is an open immersion.
\item Any section of a separated morphism is a closed immersion.
\item Any section of an unramified separated morphism is open and closed.
\end{enumerate}
\end{proposition}

\begin{proof}
Fix a base scheme $S$.
If $f : X' \to X$ is any $S$-morphism, then the graph
$\Gamma_f : X' \to X' \times_S X$
is obtained as the base change of the diagonal
$\Delta_{X/S} : X \to X \times_S X$ via the projection
$X' \times_S X \to X \times_S X$.
If $g : X \to S$ is separated (resp. unramified)
then the diagonal is a closed immersion (resp. open immersion)
by Schemes, Definition \ref{schemes-definition-separated}
(resp.\ Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism}).
Hence so is the graph as a base change (by
Schemes, Lemma \ref{schemes-lemma-base-change-immersion}).
In the special case $X' = S$, we obtain (1), resp.\ (2).
Part (3) follows on combining (1) and (2).
\end{proof}

\noindent
We can now explicitly describe the sections of unramified morphisms.

\begin{theorem}
\label{theorem-sections-unramified-maps}
Let $Y$ be a connected scheme.
Let $f : X \to Y$ be unramified and separated.
Every section of $f$ is an isomorphism onto a connected component.
There exists a bijective correspondence
$$
\text{sections of }f
\leftrightarrow
\left\{
\begin{matrix}
\text{connected components }X'\text{ of }X\text{ such that}\\
\text{the induced map }X' \to Y\text{ is an isomorphism}
\end{matrix}
\right\}
$$
In particular, given $x \in X$ there is at most one
section passing through $x$.
\end{theorem}

\begin{proof}
Direct from Proposition \ref{proposition-properties-sections} part (3).
\end{proof}

\noindent
The preceding theorem gives us some idea of the ``rigidity'' of unramified
morphisms. Further indication is provided by the following proposition
which, besides being intrinsically interesting, is also useful in the
theory of the algebraic fundamental group (see \cite[Expos\'e V]{SGA1}).
See also the more general
Morphisms, Lemma \ref{morphisms-lemma-value-at-one-point}.

\begin{proposition}
\label{proposition-equality}
Let $S$ is be a scheme.
Let $\pi : X \to S$ be unramified and separated.
Let $Y$ be an $S$-scheme and $y \in Y$ a point.
Let $f, g : Y \to X$ be two $S$-morphisms. Assume
\begin{enumerate}
\item $Y$ is connected
\item $x = f(y) = g(y)$, and
\item the induced maps $f^\sharp, g^\sharp : \kappa(x) \to \kappa(y)$
on residue fields are equal.
\end{enumerate}
Then $f = g$.
\end{proposition}

\begin{proof}
The maps $f, g : Y \to X$ define maps $f', g' : Y \to X_Y = Y \times_S X$
which are sections of the structure map $X_Y \to Y$.
Note that $f = g$ if and only if $f' = g'$.
The structure map $X_Y \to Y$ is the base change of $\pi$ and hence
unramified and separated also (see
Morphisms, Lemmas \ref{morphisms-lemma-base-change-unramified} and
Schemes, Lemma \ref{schemes-lemma-separated-permanence}).
Thus according to Theorem \ref{theorem-sections-unramified-maps}
it suffices to prove that $f'$ and $g'$ pass through the same
point of $X_Y$. And this is exactly what the hypotheses (2) and (3)
guarantee, namely $f'(y) = g'(y) \in X_Y$.
\end{proof}

\begin{lemma}
\label{lemma-finitely-many-maps-to-unramified}
Let $S$ be a Noetherian scheme. Let $X \to S$ be a quasi-compact unramified
morphism. Let $Y \to S$ be a morphism with $Y$ Noetherian. Then
$\Mor_S(Y, X)$ is a finite set.
\end{lemma}

\begin{proof}
Assume first $X \to S$ is separated (which is often the case in practice).
Since $Y$ is Noetherian it has finitely many connected components. Thus we
may assume $Y$ is connected. Choose a point $y \in Y$ with image $s \in S$.
Since $X \to S$ is unramified and quasi-compact
then fibre $X_s$ is finite, say $X_s = \{x_1, \ldots, x_n\}$
and $\kappa(s) \subset \kappa(x_i)$ is a finite field extension.
See Morphisms, Lemma \ref{morphisms-lemma-unramified-quasi-finite},
\ref{morphisms-lemma-residue-field-quasi-finite}, and
\ref{morphisms-lemma-quasi-finite}.
For each $i$ there are at most finitely many $\kappa(s)$-algebra
maps $\kappa(x_i) \to \kappa(y)$ (by elementary field theory).
Thus $\Mor_S(Y, X)$ is finite by
Proposition \ref{proposition-equality}.

\medskip\noindent
General case. There exists a nonempty open $U \subset X$ such
that $X_U \to U$ is finite (in particular separated), see
Morphisms, Lemma \ref{morphisms-lemma-generically-finite}
(the lemma applies since we've already seen above that a quasi-compact
unramified morphism is quasi-finite and since $X \to S$ is quasi-separated by
Morphisms, Lemma \ref{morphisms-lemma-finite-type-Noetherian-quasi-separated}).
Let $Z \subset S$ be the reduced closed subscheme supported on
the complement of $U$. By Noetherian induction, we see that
$\Mor_Z(Y_Z, X_Z)$ is finite (details omitted).
By the result of the first paragraph the set
$\Mor_U(Y_U, X_U)$ is finite. Thus it suffices to show that
$$
\Mor_S(Y, X) \longrightarrow \Mor_Z(Y_Z, X_Z) \times \Mor_U(Y_U, X_U)
$$
is injective. This follows from the fact that the set of points where
two morphisms $a, b : Y \to X$ agree is open in $Y$, due to the fact
that $\Delta : X \to X \times_S X$ is open, see
Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism}.
\end{proof}







\section{Universally injective, unramified morphisms}
\label{section-universally-injective-unramified}

\noindent
Recall that a morphism of schemes $f : X \to Y$ is universally
injective if any base change of $f$ is injective (on underlying
topological spaces), see
Morphisms, Definition \ref{morphisms-definition-universally-injective}.
Universally injective and unramified morphisms can be
characterized as follows.

\begin{lemma}
\label{lemma-universally-injective-unramified}
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is unramified and a monomorphism,
\item $f$ is unramified and universally injective,
\item $f$ is locally of finite type and a monomorphism,
\item $f$ is universally injective, locally of finite type, and
formally unramified,
\item $f$ is locally of finite type and $X_y$ is either empty
or $X_y \to y$ is an isomorphism for all $y \in Y$.
\end{enumerate}
\end{lemma}

\begin{proof}
We have seen in
More on Morphisms, Lemma
\ref{more-morphisms-lemma-unramified-formally-unramified}
that being formally unramified and locally of finite type is the same thing
as being unramified. Hence (4) is equivalent to (2).
A monomorphism is certainly universally injective and
formally unramified hence (3) implies (4).
It is clear that (1) implies (3). Finally, if (2) holds, then
$\Delta : X \to X \times_S X$ is both an open immersion
(Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramified-morphism})
and surjective
(Morphisms, Lemma \ref{morphisms-lemma-universally-injective})
hence an isomorphism, i.e., $f$ is a monomorphism. In this way we see that
(2) implies (1).

\medskip\noindent
Condition (3) implies (5) because monomorphisms are preserved under
base change
(Schemes, Lemma \ref{schemes-lemma-base-change-monomorphism})
and because of the description of monomorphisms towards the spectra of fields
in
Schemes, Lemma \ref{schemes-lemma-mono-towards-spec-field}.
Condition (5) implies (4) by
Morphisms, Lemmas \ref{morphisms-lemma-universally-injective} and
\ref{morphisms-lemma-unramified-etale-fibres}.
\end{proof}

\noindent
This leads to the following useful characterization of closed immersions.

\begin{lemma}
\label{lemma-characterize-closed-immersion}
Let $f : X \to S$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is a closed immersion,
\item $f$ is a proper monomorphism,
\item $f$ is proper, unramified, and universally injective,
\item $f$ is universally closed, unramified, and a monomorphism,
\item $f$ is universally closed, unramified, and universally injective,
\item $f$ is universally closed, locally of finite type, and a monomorphism,
\item $f$ is universally closed, universally injective, locally of
finite type, and formally unramified.
\end{enumerate}
\end{lemma}

\begin{proof}
The equivalence of (4) -- (7) follows immediately from
Lemma \ref{lemma-universally-injective-unramified}.

\medskip\noindent
Let $f : X \to S$ satisfy (6). Then $f$ is separated, see
Schemes, Lemma \ref{schemes-lemma-monomorphism-separated}
and has finite fibres. Hence
More on Morphisms, Lemma \ref{more-morphisms-lemma-characterize-finite}
shows $f$ is finite. Then
Morphisms, Lemma \ref{morphisms-lemma-finite-monomorphism-closed}
implies $f$ is a closed immersion, i.e., (1) holds.

\medskip\noindent
Note that (1) $\Rightarrow$ (2) because a closed immersion is
proper and a monomorphism
(Morphisms, Lemma \ref{morphisms-lemma-closed-immersion-proper}
and
Schemes, Lemma \ref{schemes-lemma-immersions-monomorphisms}).
By
Lemma \ref{lemma-universally-injective-unramified}
we see that (2) implies (3). It is clear that (3) implies (5).
\end{proof}

\noindent
Here is another result of a similar flavor.

\begin{lemma}
\label{lemma-finite-unramified-one-point}
Let $\pi : X \to S$ be a morphism of schemes. Let $s \in S$.
Assume that
\begin{enumerate}
\item $\pi$ is finite,
\item $\pi$ is unramified,
\item $\pi^{-1}(\{s\}) = \{x\}$, and
\item $\kappa(s) \subset \kappa(x)$ is purely
inseparable\footnote{In view of condition (2)
this is equivalent to $\kappa(s) = \kappa(x)$.}.
\end{enumerate}
Then there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is a closed immersion.
\end{lemma}

\begin{proof}
The question is local on $S$. Hence we may assume that $S = \Spec(A)$.
By definition of a finite morphism this implies $X = \Spec(B)$.
Note that the ring map $\varphi : A \to B$ defining $\pi$
is a finite unramified ring map.
Let $\mathfrak p \subset A$ be the prime corresponding to $s$.
Let $\mathfrak q \subset B$ be the prime corresponding to $x$. By
Conditions (2), (3) and (4) imply that
$B_{\mathfrak q}/\mathfrak pB_{\mathfrak q} = \kappa(\mathfrak p)$.
Algebra, Lemma \ref{algebra-lemma-unique-prime-over-localize-below}
we have $B_{\mathfrak q} = B_{\mathfrak p}$
(note that a finite ring map satisfies going up, see
Algebra, Section \ref{algebra-section-going-up}.)
Hence we see that
$B_{\mathfrak p}/\mathfrak pB_{\mathfrak p} = \kappa(\mathfrak p)$.
As $B$ is a finite $A$-module we see from Nakayama's lemma (see
Algebra, Lemma \ref{algebra-lemma-NAK})
that $B_{\mathfrak p} = \varphi(A_{\mathfrak p})$. Hence (using the finiteness
of $B$ as an $A$-module again) there exists a
$f \in A$, $f \not \in \mathfrak p$ such that $B_f = \varphi(A_f)$
as desired.
\end{proof}

\noindent
The topological results presented above will be used to give a functorial
characterization of \'etale morphisms similar to Theorem
\ref{theorem-formally-unramified}.




\section{Examples of unramified morphisms}
\label{section-examples}

\noindent
Here are a few examples.

\begin{example}
\label{example-etale-field-extensions}
Let $k$ be a field.
Unramified quasi-compact morphisms $X \to \Spec(k)$ are affine.
This is true because $X$ has dimension $0$ and is Noetherian,
hence is a finite discrete set, and each point gives an affine open,
so $X$ is a finite disjoint union of affines hence affine.
Noether normalization forces $X$ to be the spectrum of a finite
$k$-algebra $A$.
This algebra is a product of finite separable field extensions of $k$.
Thus, an unramified quasi-compact morphism to $\Spec(k)$
corresponds to a finite number of finite separable field extensions of $k$.
In particular, an unramified morphism with a connected source and a one point
target is forced to be a finite separable field extension.
As we will see later, $X \to \Spec(k)$ is \'etale if and
only if it is unramified. Thus, in this case at least, we obtain a very easy
description of the \'etale topology of a scheme. Of course, the cohomology of
this topology is another story.
\end{example}

\begin{example}
\label{example-standard-etale}
Property (3) in
Theorem \ref{theorem-unramified-equivalence}
gives us a canonical source of examples for unramified morphisms.
Fix a ring $R$ and an integer $n$. Let $I = (g_1, \ldots, g_m)$ be an
ideal in $R[x_1, \ldots, x_n]$. Let $\mathfrak q \subset R[x_1, \ldots, x_n]$
be a prime. Assume $I \subset \mathfrak q$ and that the matrix
$$
\left(\frac{\partial g_i}{\partial x_j}\right) \bmod \mathfrak q
\quad\in\quad
\text{Mat}(n \times m, \kappa(\mathfrak q))
$$
has rank $n$. Then the morphism
$f : Z = \Spec(R[x_1, \ldots, x_n]/I) \to \Spec(R)$
is unramified at the point $x \in Z \subset \mathbf{A}^n_R$ corresponding
to $\mathfrak q$. Clearly we must have $m \geq n$.
In the extreme case $m = n$, i.e., the differential of the map
$\mathbf{A}^n_R \to \mathbf{A}^n_R$ defined by the $g_i$'s
is an isomorphism of the tangent spaces, then $f$ is also flat
$x$ and, hence, is an \'etale map (see Algebra,
Definition \ref{algebra-definition-standard-smooth},
Lemma \ref{algebra-lemma-standard-smooth} and
Example \ref{algebra-example-make-standard-smooth}).
\end{example}

\begin{example}
\label{example-number-theory-etale}
Fix an extension of number fields $L/K$ with rings of integers
$\mathcal{O}_L$ and $\mathcal{O}_K$. The injection $K \to L$ defines a
morphism $f : \Spec(\mathcal{O}_L) \to \Spec(\mathcal{O}_K)$.
As discussed above, the points where $f$ is unramified in our sense
correspond to the set of points where $f$ is unramified in the conventional
sense. In the conventional sense, the locus of ramification in
$\Spec(\mathcal{O}_L)$ can be defined by vanishing set of the
different; this is an ideal in $\mathcal{O}_L$. In fact, the different is
nothing but the annihilator of the module
$\Omega_{\mathcal{O}_L/\mathcal{O}_K}$. Similarly, the
discriminant is an ideal in $\mathcal{O}_K$, namely it is the
norm of the different.
The vanishing set of the discriminant is precisely the set
of points of $K$ which ramify in $L$.
Thus, denoting by $X$ the complement of the closed subset
defined by the different in $\Spec(\mathcal{O}_L)$,
we obtain a morphism $X \to \Spec(\mathcal{O}_L)$ which is unramified.
Furthermore, this morphism is also flat, as any local homomorphism
of discrete valuation rings is flat, and hence this morphism is
actually \'etale. If $L/K$ is Galois, then denoting by
$Y$ the complement of the closed subset defined by the discriminant in
$\Spec(\mathcal{O}_K)$, we see that we get even a
finite \'etale morphism $X \to Y$.
Thus, this is an example of a finite \'etale covering.
\end{example}





\section{Flat morphisms}
\label{section-flat-morphisms}

\noindent
This section simply exists to summarize the properties of flatness that will
be useful to us. Thus, we will be content with stating the theorems precisely
and giving references for the proofs.

\medskip\noindent
After briefly recalling the necessary facts about flat modules over Noetherian
rings, we state a theorem of Grothendieck which gives sufficient conditions
for ``hyperplane sections'' of certain modules to be flat.

\begin{definition}
\label{definition-flat-rings}
Flatness of modules and rings.
\begin{enumerate}
\item A module $N$ over a ring $A$ is said to be {\it flat}
if the functor $M \mapsto M \otimes_A N$ is exact.
\item If this functor is also faithful, we say that
$N$ is {\it faithfully flat} over $A$.
\item A morphism of rings $f : A \to B$ is said to be
{\it flat (resp. faithfully flat)}
if the functor $M \mapsto M \otimes_A B$ is exact
(resp. faithful and exact).
\end{enumerate}
\end{definition}

\noindent
Here is a list of facts with references to the algebra chapter.
\begin{enumerate}
\item Free and projective modules are flat. This is clear for free modules
and follows for projective modules as they are direct summands of free
modules and $\otimes$ commutes with direct sums.
\item Flatness is a local property, that is, $M$ is flat over $A$
if and only if $M_{\mathfrak p}$ is flat over $A_{\mathfrak p}$ for all
$\mathfrak p \in \Spec(A)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}.
\item If $M$ is a flat $A$-module and $A \to B$ is a ring map,
then $M \otimes_A B$ is a flat $B$-module. See
Algebra, Lemma \ref{algebra-lemma-flat-base-change}.
\item Finite flat modules over local rings are free.
See Algebra, Lemma \ref{algebra-lemma-finite-flat-local}.
\item If $f : A \to B$ is a morphism of arbitrary rings,
$f$ is flat if and only if the induced maps
$A_{f^{-1}(\mathfrak q)} \to B_{\mathfrak q}$ are flat for all
$\mathfrak q \in \Spec(B)$.
See Algebra, Lemma \ref{algebra-lemma-flat-localization}
\item If $f : A \to B$ is a local homomorphism of local rings,
$f$ is flat if and only if it is faithfully flat.
See Algebra, Lemma \ref{algebra-lemma-local-flat-ff}.
\item A map $A \to B$ of rings is faithfully flat if and only if it is
flat and the induced map on spectra is surjective.
See Algebra, Lemma \ref{algebra-lemma-ff-rings}.
\item If $A$ is a noetherian local ring, the completion
$A^\wedge$ is faithfully flat over $A$.
See Algebra, Lemma \ref{algebra-lemma-completion-faithfully-flat}.
\item Let $A$ be a Noetherian local ring and $M$ an $A$-module.
Then $M$ is flat over $A$ if and only if $M \otimes_A A^\wedge$
is flat over $A^\wedge$. (Combine the previous statement with
Algebra, Lemma \ref{algebra-lemma-flatness-descends}.)
\end{enumerate}
Before we move on to the geometric category, we present Grothendieck's
theorem, which provides a convenient recipe for producing flat
modules.

\begin{theorem}
\label{theorem-flatness-grothendieck}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be a local homomorphism.
If $M$ is a finite $B$-module that is flat as an $A$-module,
and $t \in \mathfrak m_B$ is an element such that multiplication
by $t$ is injective on $M/\mathfrak m_AM$, then $M/tM$ is also $A$-flat.
\end{theorem}

\begin{proof}
See Algebra, Lemma \ref{algebra-lemma-mod-injective}.
See also \cite[Section 20]{MatCA}.
\end{proof}

\begin{definition}
\label{definition-flat-schemes}
(See Morphisms, Definition \ref{morphisms-definition-flat}).
Let $f : X \to Y$ be a morphism of schemes.
Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module.
\begin{enumerate}
\item Let $x \in X$. We say $\mathcal{F}$ is
{\it flat over $Y$ at $x \in X$} if $\mathcal{F}_x$
is a flat $\mathcal{O}_{Y, f(x)}$-module.
This uses the map $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ to
think of $\mathcal{F}_x$ as a $\mathcal{O}_{Y, f(x)}$-module.
\item Let $x \in X$. We say $f$ is {\it flat at $x \in X$}
if $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is flat.
\item We say $f$ is {\it flat} if it is flat at all points of $X$.
\item A morphism $f : X \to Y$ that is flat and surjective is sometimes
said to be {\it faithfully flat}.
\end{enumerate}
\end{definition}

\noindent
Once again, here is a list of results:
\begin{enumerate}
\item The property (of a morphism) of being flat is, by fiat,
local in the Zariski topology on the source and the target.
\item Open immersions are flat. (This is clear because it induces isomorphisms
on local rings.)
\item Flat morphisms are stable under base change and composition.
Morphisms, Lemmas \ref{morphisms-lemma-base-change-flat} and
\ref{morphisms-lemma-composition-flat}.
\item If $f : X \to Y$ is flat, then the pullback functor
$\QCoh(\mathcal{O}_Y) \to \QCoh(\mathcal{O}_X)$ is exact.
This is immediate by looking at stalks.
\item Let $f : X \to Y$ be a morphism of schemes, and assume $Y$
is quasi-compact and quasi-separated. In this case
if the functor $f^*$ is exact then $f$ is flat.
(Proof omitted. Hint: Use
Properties, Lemma \ref{properties-lemma-extend-trivial} to see that
$Y$ has ``enough'' ideal sheaves and use the characterization of
flatness in Algebra, Lemma \ref{algebra-lemma-flat}.)
\end{enumerate}



\section{Topological properties of flat morphisms}
\label{section-topological-flat}

\noindent
We ``recall'' below some openness properties that flat morphisms enjoy.

\begin{theorem}
\label{theorem-flat-open}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism which is locally of finite type.
Let $\mathcal{F}$ be a coherent $\mathcal{O}_X$-module.
The set of points in $X$ where $\mathcal{F}$ is flat over $S$ is an open set.
In particular the set of points where $f$ is flat is open in $X$.
\end{theorem}

\begin{proof}
See More on Morphisms, Theorem \ref{more-morphisms-theorem-openness-flatness}.
\end{proof}

\begin{theorem}
\label{theorem-flat-map-open}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism which is flat and locally of finite type.
Then $f$ is (universally) open.
\end{theorem}

\begin{proof}
See Morphisms, Lemma \ref{morphisms-lemma-fppf-open}.
\end{proof}

\begin{theorem}
\label{theorem-flat-is-quotient}
A faithfully flat quasi-compact morphism is a quotient map for
the Zariski topology.
\end{theorem}

\begin{proof}
See Morphisms, Lemma \ref{morphisms-lemma-fpqc-quotient-topology}.
\end{proof}

\noindent
An important reason to study flat morphisms is that they provide the adequate
framework for capturing the notion of a family of schemes parametrized by the
points of another scheme. Naively one may think that any morphism $f : X \to S$
should be thought of as a family parametrized by the points of $S$. However,
without a flatness restriction on $f$, really bizarre things can happen in
this so-called family. For instance, we aren't guaranteed that relative
dimension (dimension of the fibres) is constant in a family. Other numerical
invariants, such as the Hilbert polynomial, too may change from fibre to
fibre. Flatness prevents such things from happening and, therefore, provides
some ``continuity'' to the fibres.


\section{\'Etale morphisms}
\label{section-etale-morphisms}

\noindent
In this section, we will define \'etale morphisms and prove a number of
important properties about them. The most important one, no doubt, is the
functorial characterization presented in Theorem \ref{theorem-formally-etale}.
Following this, we will also discuss a few properties of rings which are
insensitive to an \'etale extension (properties which hold for a ring
if and only if they hold for all its \'etale extensions) to motivate the basic
tenet of \'etale cohomology -- \'etale morphisms are the algebraic analogue of
local isomorphisms.

\medskip\noindent
As the title suggests, we will define the class of \'etale morphisms -- the
class of morphisms (whose surjective families) we shall deem to be coverings
in the category of schemes over a base scheme $S$ in order to define the
\'etale site $S_\etale$. Intuitively, an \'etale morphism is supposed
to capture the idea of a covering space and, therefore, should be close to a
local isomorphism. If we're working with varieties over algebraically closed
fields, this last statement can be made into a definition provided we replace
``local isomorphism'' with ``formal local isomorphism'' (isomorphism after
completion). One can then give a definition over any base field by asking
that the base change to the algebraic closure be \'etale (in the
aforementioned sense). But, rather than proceeding via such aesthetically
displeasing constructions, we will adopt a cleaner, albeit slightly more
abstract, algebraic approach.

\begin{definition}
\label{definition-etale-ring}
Let $A$, $B$ be Noetherian local rings.
A local homomorphism $f : A \to B$ is said to be a
{\it \'etale homomorphism of local rings}
if it is flat and unramified homomorphism of local rings
(please see Definition \ref{definition-unramified-rings}).
\end{definition}

\noindent
This is the local version of the definition of an \'etale ring map in
Algebra, Section \ref{algebra-section-etale}.
The exact definition
given in that section is that it is a smooth ring map of relative
dimension $0$. It is shown (in
Algebra, Lemma \ref{algebra-lemma-etale-standard-smooth})
that an \'etale $R$-algebra $S$ always has a presentation
$$
S = R[x_1, \ldots, x_n]/(f_1, \ldots, f_n)
$$
such that
$$
g =
\det
\left(
\begin{matrix}
\partial f_1/\partial x_1 &
\partial f_2/\partial x_1 &
\ldots &
\partial f_n/\partial x_1 \\
\partial f_1/\partial x_2 &
\partial f_2/\partial x_2 &
\ldots &
\partial f_n/\partial x_2 \\
\ldots & \ldots & \ldots & \ldots \\
\partial f_1/\partial x_n &
\partial f_2/\partial x_n &
\ldots &
\partial f_n/\partial x_n
\end{matrix}
\right)
$$
maps to an invertible element in $S$. The following two lemmas link the two
notions.

\begin{lemma}
\label{lemma-characterize-etale-Noetherian}
Let $A \to B$ be of finite type with $A$ a Noetherian ring.
Let $\mathfrak q$ be a prime of $B$ lying over $\mathfrak p \subset A$.
Then $A \to B$ is \'etale at $\mathfrak q$ if and only if
$A_{\mathfrak p} \to B_{\mathfrak q}$ is an \'etale homomorphism
of local rings.
\end{lemma}

\begin{proof}
See Algebra, Lemmas \ref{algebra-lemma-etale} (flatness of \'etale maps),
\ref{algebra-lemma-etale-at-prime} (\'etale maps are unramified)
and \ref{algebra-lemma-characterize-etale} (flat and unramified maps
are \'etale).
\end{proof}

\begin{lemma}
\label{lemma-characterize-etale-completions}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a local homomorphism such that $B$ is essentially of
finite type over $A$.
The following are equivalent
\begin{enumerate}
\item $A \to B$ is an \'etale homomorphism of local rings
\item $A^\wedge \to B^\wedge$ is an \'etale homomorphism of local rings, and
\item $A^\wedge \to B^\wedge$ is \'etale.
\end{enumerate}
Moreover, in this case $B^\wedge \cong (A^\wedge)^{\oplus n}$ as
$A^\wedge$-modules for some $n \geq 1$.
\end{lemma}

\begin{proof}
To see the equivalences of (1), (2) and (3), as we have the corresponding
results for unramified ring maps
(Lemma \ref{lemma-characterize-unramified-completions})
it suffices to prove that
$A \to B$ is flat if and only if $A^\wedge \to B^\wedge$ is flat.
This is clear from our lists of properties of flat maps since
the ring maps $A \to A^\wedge$ and $B \to B^\wedge$ are faithfully flat.
For the final statement, by Lemma \ref{lemma-unramified-completions}
we see that $B^\wedge$ is a finite flat $A^\wedge$ module.
Hence it is finite free by our list
of properties on flat modules in Section \ref{section-flat-morphisms}.
\end{proof}

\noindent
The integer $n$ which occurs in the lemma above
is nothing other than the degree
$[\kappa(\mathfrak m_B) : \kappa(\mathfrak m_A)]$ of the residue field
extension. In particular, if $\kappa(\mathfrak m_A)$
is separably closed, we see that $A^\wedge \to B^\wedge$
is an isomorphism, which vindicates our earlier claims.

\begin{definition}
\label{definition-etale-schemes-1}
(See Morphisms, Definition \ref{morphisms-definition-etale}.)
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be a morphism of schemes which is locally of finite type.
\begin{enumerate}
\item Let $x \in X$. We say $f$ is {\it \'etale at $x \in X$} if
$\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is an
\'etale homomorphism of local rings.
\item The morphism is said to be {\it \'etale} if it is \'etale at all its
points.
\end{enumerate}
\end{definition}

\noindent
Let us prove that this definition agrees with the definition in the
chapter on morphisms of schemes. This in particular guarantees that the
set of points where a morphism is \'etale is open.

\begin{lemma}
\label{lemma-etale-definition}
Let $Y$ be a locally Noetherian scheme.
Let $f : X \to Y$ be locally of finite type.
Let $x \in X$. The morphism $f$ is \'etale at $x$ in
the sense of Definition \ref{definition-etale-schemes-1}
if and only if it is unramified at $x$ in
the sense of Morphisms, Definition \ref{morphisms-definition-etale}.
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-characterize-etale-Noetherian}
and the definitions.
\end{proof}

\noindent
Here are some results on \'etale morphisms.
The formulations as given in this list apply only to
morphisms locally of finite type between locally Noetherian schemes.
In each case we give a reference to the general result as
proved earlier in the project, but in some cases one can
prove the result more easily in the Noetherian case.
Here is the list:
\begin{enumerate}
\item An \'etale morphism is unramified. (Clear from our definitions.)
\item \'Etaleness is local on the source and the target in the Zariski
topology.
\item \'Etale morphisms are stable under base change and composition.
See Morphisms, Lemmas \ref{morphisms-lemma-base-change-etale}
and \ref{morphisms-lemma-composition-etale}.
\item \'Etale morphisms of schemes are locally quasi-finite
and quasi-compact \'etale morphisms are quasi-finite. (This is
true because it holds for unramified morphisms as seen earlier.)
\item \'Etale morphisms have relative dimension $0$. See
Morphisms, Definition \ref{morphisms-definition-relative-dimension-d}
and
Morphisms, Lemma \ref{morphisms-lemma-locally-quasi-finite-rel-dimension-0}.
\item A morphism is \'etale if and only if it is flat and
all its fibres are \'etale. See
Morphisms, Lemma \ref{morphisms-lemma-etale-flat-etale-fibres}.
\item \'Etale morphisms are open. This is true because an \'etale
morphism is flat, and Theorem \ref{theorem-flat-map-open}.
\item Let $X$ and $Y$ be \'etale over a base scheme $S$.
Any $S$-morphism from $X$ to $Y$ is \'etale.
See Morphisms, Lemma \ref{morphisms-lemma-etale-permanence}.
\end{enumerate}






\section{The structure theorem}
\label{section-structure-etale-map}

\noindent
We present a theorem which describes the local structure of \'etale
and unramified morphisms. Besides its obvious independent importance,
this theorem also allows us to make the transition to another
definition of \'etale morphisms that captures the geometric intuition better
than the one we've used so far.

\medskip\noindent
To state it we need the notion of a {\it standard \'etale ring map}, see
Algebra, Definition \ref{algebra-definition-standard-etale}.
Namely, suppose that $R$ is a ring and $f, g \in R[t]$ are polynomials
such that
\begin{enumerate}
\item[(a)] $f$ is a monic polynomial, and
\item[(b)] $f' = \text{d}f/\text{d}t$ is invertible in the localization
$R[t]_g/(f)$.
\end{enumerate}
Then the map
$$
R \longrightarrow R[t]_g/(f) = R[t, 1/g]/(f)
$$
is a standard \'etale algebra, and any standard \'etale algebra is isomorphic
to one of these. It is a pleasant exercise to prove that such a ring map
is flat, and unramified and hence \'etale (as expected of course).
A special case of a standard \'etale ring map is any ring map
$$
R \longrightarrow R[t]_{f'}/(f) = R[t, 1/f']/(f)
$$
with $f$ a monic polynomial, and any standard \'etale algebra is (isomorphic to)
a principal localization of one of these.

\begin{theorem}
\label{theorem-structure-etale}
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then there exist $f, g \in A[t]$ such that
\begin{enumerate}
\item $B' = A[t]_g/(f)$ is standard \'etale -- see (a) and (b) above, and
\item $B$ is isomorphic to a localization of $B'$ at a prime.
\end{enumerate}
\end{theorem}

\begin{proof}
Write $B = B'_{\mathfrak q}$ for some finite type $A$-algebra $B'$
(we can do this because $B$ is essentially of finite type over $A$).
By Lemma \ref{lemma-characterize-etale-Noetherian}
we see that $A \to B'$ is \'etale at $\mathfrak q$.
Hence we may apply
Algebra, Proposition \ref{algebra-proposition-etale-locally-standard}
to see that a principal localization of $B'$ is standard \'etale.
\end{proof}

\noindent
Here is the version for unramified homomorphisms of local rings.

\begin{theorem}
\label{theorem-structure-unramified}
Let $f : A \to B$ be an unramified morphism of local rings.
Then there exist $f, g \in A[t]$ such that
\begin{enumerate}
\item $B' = A[t]_g/(f)$ is standard \'etale -- see (a) and (b) above, and
\item $B$ is isomorphic to a quotient of a localization of $B'$ at a prime.
\end{enumerate}
\end{theorem}

\begin{proof}
Write $B = B'_{\mathfrak q}$ for some finite type $A$-algebra $B'$
(we can do this because $B$ is essentially of finite type over $A$).
By Lemma \ref{lemma-characterize-unramified-Noetherian}
we see that $A \to B'$ is unramified at $\mathfrak q$.
Hence we may apply
Algebra, Proposition \ref{algebra-proposition-unramified-locally-standard}
to see that a principal localization of $B'$ is a quotient of a
standard \'etale $A$-algebra.
\end{proof}

\noindent
Via standard lifting arguments, one then obtains the following geometric
statement which will be of essential use to us.

\begin{theorem}
\label{theorem-geometric-structure}
Let $\varphi : X \to Y$ be a morphism of schemes.
Let $x \in X$.
If $\varphi$ is \'etale at $x$, then there exist exist affine opens
$V \subset Y$ and $U \subset X$ with $x \in U$ and $\varphi(U) \subset V$
such that we have the following diagram
$$
\xymatrix{
X \ar[d] & U \ar[l] \ar[d] \ar[r]_-j & \Spec(R[t]_{f'}/(f)) \ar[d] \\
Y & V \ar[l] \ar@{=}[r] & \Spec(R)
}
$$
where $j$ is an open immersion, and $f \in R[t]$ is monic.
\end{theorem}

\begin{proof}
This is equivalent to
Morphisms, Lemma \ref{morphisms-lemma-etale-locally-standard-etale}
although the statements differ slightly.
\end{proof}


\section{\'Etale and smooth morphisms}
\label{section-etale-smooth}

\noindent
An \'etale morphism is smooth of relative dimension zero.
The projection $\mathbf{A}^n_S \to S$ is a standard example
of a smooth morphism of relative dimension $n$.
It turns out that any smooth morphism is \'etale locally
of this form. Here is the precise statement.

\begin{theorem}
\label{theorem-smooth-etale-over-n-space}
Let $\varphi : X \to Y$ be a morphism of schemes.
Let $x \in X$.
If $\varphi$ is smooth at $x$, then
there exist exist and integer $n \geq 0$ and affine opens
$V \subset Y$ and $U \subset X$ with $x \in U$ and $\varphi(U) \subset V$
such that there exists a commutative diagram
$$
\xymatrix{
X \ar[d] & U \ar[l] \ar[d] \ar[r]_-\pi &
\mathbf{A}^n_R \ar[d] \ar@{=}[r] &  \Spec(R[x_1, \ldots, x_n]) \ar[dl] \\
Y & V \ar[l] \ar@{=}[r] & \Spec(R)
}
$$
where $\pi$ is \'etale.
\end{theorem}

\begin{proof}
See
Morphisms, Lemma \ref{morphisms-lemma-smooth-etale-over-affine-space}.
\end{proof}




\section{Topological properties of \'etale morphisms}
\label{section-topological-etale}

\noindent
We present a few of the topological properties of \'etale and
unramified morphisms. First, we give what Grothendieck
calls the {\it fundamental property of \'etale morphisms}, see
\cite[Expos\'e I.5]{SGA1}.

\begin{theorem}
\label{theorem-etale-radicial-open}
Let $f : X \to Y$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is an open immersion,
\item $f$ is universally injective and \'etale, and
\item $f$ is a flat monomorphism, locally of finite presentation.
\end{enumerate}
\end{theorem}

\begin{proof}
An open immersion is universally injective
since any base change of an open immersion
is an open immersion. Moreover, it is \'etale by
Morphisms, Lemma \ref{morphisms-lemma-open-immersion-etale}.
Hence (1) implies (2).

\medskip\noindent
Assume $f$ is universally injective and \'etale.
Since $f$ is \'etale it is flat and locally of finite presentation, see
Morphisms, Lemmas \ref{morphisms-lemma-etale-flat} and
\ref{morphisms-lemma-etale-locally-finite-presentation}.
By
Lemma \ref{lemma-universally-injective-unramified}
we see that $f$ is a monomorphism. Hence (2) implies (3).

\medskip\noindent
Assume $f$ is flat, locally of finite presentation, and a monomorphism.
Then $f$ is open, see
Morphisms, Lemma \ref{morphisms-lemma-fppf-open}.
Thus we may replace $Y$ by $f(X)$ and we may assume $f$ is
surjective. Then $f$ is open and bijective hence a homeomorphism.
Hence $f$ is quasi-compact. Hence
Descent, Lemma
\ref{descent-lemma-flat-surjective-quasi-compact-monomorphism-isomorphism}
shows that $f$ is an isomorphism and we win.
\end{proof}

\noindent
Here is another result of a similar flavor.

\begin{lemma}
\label{lemma-finite-etale-one-point}
Let $\pi : X \to S$ be a morphism of schemes. Let $s \in S$.
Assume that
\begin{enumerate}
\item $\pi$ is finite,
\item $\pi$ is \'etale,
\item $\pi^{-1}(\{s\}) = \{x\}$, and
\item $\kappa(s) \subset \kappa(x)$ is purely
inseparable\footnote{In view of condition (2)
this is equivalent to $\kappa(s) = \kappa(x)$.}.
\end{enumerate}
Then there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is an isomorphism.
\end{lemma}

\begin{proof}
By
Lemma \ref{lemma-finite-unramified-one-point}
there exists an open neighbourhood $U$ of $s$ such that
$\pi|_{\pi^{-1}(U)} : \pi^{-1}(U) \to U$ is a closed immersion.
But a morphism which is \'etale and a closed immersion is an
open immersion (for example by
Theorem \ref{theorem-etale-radicial-open}).
Hence after shrinking $U$ we obtain an isomorphism.
\end{proof}




\section{Topological invariance of the \'etale topology}
\label{section-topological-invariance}

\noindent
Next, we present an extremely crucial theorem which, roughly speaking, says
that \'etaleness is a topological property.

\begin{theorem}
\label{theorem-etale-topological}
Let $X$ and $Y$ be two schemes over a base scheme $S$.
Let $S_0$ be a closed subscheme of $S$ whose ideal sheaf has square zero.
Denote $X_0$ (resp.\ $Y_0$) the base change $S_0 \times_S X$
(resp.\ $S_0 \times_S Y$).
If $X$ is \'etale over $S$, then the map
$$
\Mor_S(Y, X) \longrightarrow \Mor_{S_0}(Y_0, X_0)
$$
is bijective.
\end{theorem}

\begin{proof}
After base changing via $Y \to S$, we may assume that $Y = S$.
In this case the theorem states that any $S$-morphism $\sigma_0 : S_0 \to X$
actually factors uniquely through a section $S \to X$ of the
\'etale structure morphism $X \to S$.

\medskip\noindent
Existence. Since we have equality of underlying topological spaces
$|S_0| = |S|$ and $|X_0| = |X|$,
by Theorem \ref{theorem-sections-unramified-maps},
the section $\sigma_0$ is uniquely determined by a connected component
$X'$ of $X$ such that the base change
$X'_0 = S_0 \times_S X'$ maps isomorphically to $S_0$.
In particular, $X' \to S$ is a universal homeomorphism
and therefore universally injective. Since $X' \to S$ is \'etale, it
follows from Theorem \ref{theorem-etale-radicial-open}
that $X' \to S$ is an isomorphism and, therefore, it has
an inverse $\sigma$ which is the required section.

\medskip\noindent
Uniqueness. This follows from Theorem
\ref{theorem-formally-unramified}, or directly from Theorem
\ref{theorem-sections-unramified-maps}, or, if one carefuly observes,
from our proof itself.
\end{proof}

\noindent
From the proof of preceeding theorem, we also obtain one direction of the
promised functorial characterization of \'etale morphisms. The following
theorem will be strengthened in
\'Etale Cohomology,
Theorem \ref{etale-cohomology-theorem-topological-invariance}.

\begin{theorem}[Une equivalence remarquable de cat\'egories]
\label{theorem-remarkable-equivalence}
Let $S$ be a scheme.
Let $S_0 \subset S$ be a closed subscheme defined by an ideal
with square zero.
The functor
$$
X \longmapsto X_0 = S_0 \times_S X
$$
defines an equivalence of categories
$$
\{
\text{schemes }X\text{ \'etale over }S
\}
\leftrightarrow
\{
\text{schemes }X_0\text{ \'etale over }S_0
\}
$$
\end{theorem}

\begin{proof}
By Theorem \ref{theorem-etale-topological}
we see that this functor is fully faithful.
It remains to show that the functor is essentially surjective.
Let $Y \to S_0$ be an \'etale morphism of schemes.

\medskip\noindent
Suppose that the result holds if $S$ and $Y$ are affine.
In that case, we choose an affine open covering
$Y = \bigcup V_j$ such that each $V_j$ maps
into an affine open of $S$. By assumption (affine case) we can
find \'etale morphisms $W_j \to S$ such that $W_{j, 0} \cong V_j$
(as schemes over $S_0$). Let $W_{j, j'} \subset W_j$
be the open subscheme whose underlying topological space
corresponds to $V_j \cap V_{j'}$. Because we have isomorphisms
$$
W_{j, j', 0} \cong V_j \cap V_{j'} \cong W_{j', j, 0}
$$
as schemes over $S_0$ we see by fully faithfulness that we
obtain isomorphisms
$\theta_{j, j'} : W_{j, j'} \to W_{j', j}$ of schemes over $S$.
We omit the verification that these isomorphisms satisfy the
cocycle condition of Schemes, Section \ref{schemes-section-glueing-schemes}.
Applying Schemes, Lemma \ref{schemes-lemma-glue-schemes}
we obtain a scheme $X \to S$ by
glueing the schemes $W_j$ along the identifications $\theta_{j, j'}$.
It is clear that $X \to S$ is \'etale and $X_0 \cong Y$ by construction.

\medskip\noindent
Thus it suffices to show the lemma in case $S$ and $Y$ are affine.
Say $S = \Spec(R)$ and $S_0 = \Spec(R/I)$ with $I^2 = 0$.
By Algebra, Lemma \ref{algebra-lemma-etale-standard-smooth} we know that
$Y$ is the spectrum of a ring $\overline{A}$ with
$$
\overline{A} = (R/I)[x_1, \ldots, x_n]/(\overline{f}_1, \ldots, \overline{f}_n)
$$
such that
$$
\overline{g} =
\det
\left(
\begin{matrix}
\partial \overline{f}_1/\partial x_1 &
\partial \overline{f}_2/\partial x_1 &
\ldots &
\partial \overline{f}_n/\partial x_1 \\
\partial \overline{f}_1/\partial x_2 &
\partial \overline{f}_2/\partial x_2 &
\ldots &
\partial \overline{f}_n/\partial x_2 \\
\ldots & \ldots & \ldots & \ldots \\
\partial \overline{f}_1/\partial x_n &
\partial \overline{f}_2/\partial x_n &
\ldots &
\partial \overline{f}_n/\partial x_n
\end{matrix}
\right)
$$
maps to an invertible element in $A$. Choose any lifts
$f_i \in R[x_1, \ldots, x_n]$. Since $I$ is nilpotent it
follows that the determinant of the matrix of partials of the
$f_i$ is invertible in the algebra $A$ defined by
$$
A = R[x_1, \ldots, x_n]/(f_1, \ldots, f_n)
$$
Hence $R \to A$ is \'etale and $(R/I) \otimes_R A \cong \overline{A}$.
To prove the general case one argues with glueing affine pieces.
\end{proof}



\section{The functorial characterization}
\label{section-functorial-etale}

\noindent
We finally present the promised functorial characterization.
Thus there are four ways to think about \'etale morphisms of schemes:
\begin{enumerate}
\item as a smooth morphism of relative dimension $0$,
\item as locally finitely presented, flat, and unramified morphisms,
\item using the structure theorem, and
\item using the functorial characterization.
\end{enumerate}

\begin{theorem}
\label{theorem-formally-etale}
Let $f : X \to S$ be a morphism that is locally of finite presentation.
The following are equivalent
\begin{enumerate}
\item $f$ is \'etale,
\item for all affine $S$-schemes $Y$, and closed subschemes $Y_0 \subset Y$
defined by square-zero ideals, the natural map
$$
\Mor_S(Y, X) \longrightarrow \Mor_S(Y_0, X)
$$
is bijective.
\end{enumerate}
\end{theorem}

\begin{proof}
This is
More on Morphisms, Lemma \ref{more-morphisms-lemma-etale-formally-etale}.
\end{proof}

\noindent
This characterization says that solutions to the equations defining $X$ can
be lifted uniquely through nilpotent thickenings.



\section{\'Etale local structure of unramified morphisms}
\label{section-unramified-etale-local}

\noindent
In the chapter
More on Morphisms, Section \ref{more-morphisms-section-etale-localization}
the reader can find some results on the \'etale local structure of
quasi-finite morphisms. In this section we want to combine this
with the topological properties of unramified morphisms we have seen
in this chapter. The basic overall picture to keep in mind is
$$
\xymatrix{
V \ar[r] \ar[dr] & X_U \ar[d] \ar[r] & X \ar[d]^f \\
& U \ar[r] & S
}
$$
see
More on Morphisms, Equation (\ref{more-morphisms-equation-basic-diagram}).
We start with a very general case.

\begin{lemma}
\label{lemma-unramified-etale-local}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is unramified at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and opens $V_{i, j} \subset X_U$, $i = 1, \ldots, n$, $j = 1, \ldots, m_i$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is a closed immersion passing through $u$,
\item $u$ is not in the image of $V_{i, j} \cap V_{i', j'}$ unless
$i = i'$ and $j = j'$, and
\item any point of $(X_U)_u$ mapping to $x_i$ is in some $V_{i, j}$.
\end{enumerate}
\end{lemma}

\begin{proof}
By
Morphisms, Definition \ref{morphisms-definition-unramified}
there exists an open neighbourhood of each $x_i$ which is locally of finite
type over $S$. Replacing $X$ by an open neighbourhood of $\{x_1, \ldots, x_n\}$
we may assume $f$ is locally of finite type. Apply
More on Morphisms, Lemma
\ref{more-morphisms-lemma-etale-makes-quasi-finite-finite-multiple-points-var}
to get the \'etale neighbourhood $(U, u)$ and the opens $V_{i, j}$ finite over
$U$. By
Lemma \ref{lemma-finite-unramified-one-point}
after possibly shrinking $U$ we get that $V_{i, j} \to U$ is a closed
immersion.
\end{proof}

\begin{lemma}
\label{lemma-unramified-etale-local-technical}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is separated and $f$ is unramified at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U =
W \amalg \coprod\nolimits_{i, j} V_{i, j}
$$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is a closed immersion passing through $u$,
\item the fibre $W_u$ contains no point mapping to any $x_i$.
\end{enumerate}
In particular, if $f^{-1}(\{s\}) = \{x_1, \ldots, x_n\}$, then
the fibre $W_u$ is empty.
\end{lemma}

\begin{proof}
Apply
Lemma \ref{lemma-unramified-etale-local}.
We may assume $U$ is affine, so $X_U$ is separated.
Then $V_{i, j} \to X_U$ is a closed map, see
Morphisms, Lemma \ref{morphisms-lemma-image-proper-scheme-closed}.
Suppose $(i, j) \not = (i', j')$.
Then $V_{i, j} \cap V_{i', j'}$ is closed in $V_{i, j}$ and
its image in $U$ does not contain $u$.
Hence after shrinking $U$ we may assume that
$V_{i, j} \cap V_{i', j'} = \emptyset$. Moreover, $\bigcup V_{i, j}$ is
a closed and open subscheme of $X_U$ and hence has an open and closed
complement $W$. This finishes the proof.
\end{proof}

\noindent
The following lemma is in some sense much weaker than the preceding one
but it may be useful to state it explicitly here. It says that a finite
unramified morphism is \'etale locally on the base a closed immersion.

\begin{lemma}
\label{lemma-finite-unramified-etale-local}
Let $f : X \to S$ be a finite unramified morphism of schemes.
Let $s \in S$.
There exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U = \coprod\nolimits_j V_j
$$
such that each $V_j \to U$ is a closed immersion.
\end{lemma}

\begin{proof}
Since $X \to S$ is finite the fibre over $S$ is a finite set
$\{x_1, \ldots, x_n\}$ of points of $X$. Apply
Lemma \ref{lemma-unramified-etale-local-technical}
to this set (a finite morphism is separated, see
Morphisms, Section \ref{morphisms-section-integral}).
The image of $W$ in $U$ is a closed
subset (as $X_U \to U$ is finite, hence proper) which does not
contain $u$. After removing this from $U$ we see that $W = \emptyset$
as desired.
\end{proof}




\section{\'Etale local structure of \'etale morphisms}
\label{section-etale-local-etale}

\noindent
This is a bit silly, but perhaps helps form intuition about \'etale
morphisms. We simply copy over the results of
Section \ref{section-unramified-etale-local}
and change ``closed immersion'' into ``isomorphism''.

\begin{lemma}
\label{lemma-etale-etale-local}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is \'etale at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and opens $V_{i, j} \subset X_U$, $i = 1, \ldots, n$, $j = 1, \ldots, m_i$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is an isomorphism,
\item $u$ is not in the image of $V_{i, j} \cap V_{i', j'}$ unless
$i = i'$ and $j = j'$, and
\item any point of $(X_U)_u$ mapping to $x_i$ is in some $V_{i, j}$.
\end{enumerate}
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-unramified-etale-local}.
Now $V_{i, j} \to U$ is a closed immersion and \'etale.
Hence it is an open immersion, for example by
Theorem \ref{theorem-etale-radicial-open}.
Replace $U$ by the intersection of the images of $V_{i, j} \to U$
to get the lemma.
\end{proof}

\begin{lemma}
\label{lemma-etale-etale-local-technical}
Let $f : X \to S$ be a morphism of schemes.
Let $x_1, \ldots, x_n \in X$ be points having the same image $s$ in $S$.
Assume $f$ is separated and $f$ is \'etale at each $x_i$.
Then there exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U =
W \amalg \coprod\nolimits_{i, j} V_{i, j}
$$
such that
\begin{enumerate}
\item $V_{i, j} \to U$ is an isomorphism,
\item the fibre $W_u$ contains no point mapping to any $x_i$.
\end{enumerate}
In particular, if $f^{-1}(\{s\}) = \{x_1, \ldots, x_n\}$, then
the fibre $W_u$ is empty.
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-unramified-etale-local-technical}.
As in the proof of
Lemma \ref{lemma-etale-etale-local}
the morphisms $V_{i, j} \to U$ are open immersions and
we win after replacing $U$ by the intersection of their
images.
\end{proof}

\noindent
The following lemma is in some sense much weaker than the preceding one
but it may be useful to state it explicitly here. It says that a finite
\'etale morphism is \'etale locally on the base a
``topological covering space'', i.e., a finite product of copies of the base.

\begin{lemma}
\label{lemma-finite-etale-etale-local}
Let $f : X \to S$ be a finite \'etale morphism of schemes.
Let $s \in S$. There exists an \'etale neighbourhood $(U, u) \to (S, s)$
and a disjoint union decomposition
$$
X_U = \coprod\nolimits_j V_j
$$
such that each $V_j \to U$ is an isomorphism.
\end{lemma}

\begin{proof}
An \'etale morphism is unramified, hence we may apply
Lemma \ref{lemma-finite-unramified-etale-local}.
As in the proof of
Lemma \ref{lemma-etale-etale-local}
we see that $V_{i, j} \to U$ is an open immersion and we win
after replacing $U$ by the intersection of their images.
\end{proof}




\section{Permanence properties}
\label{section-properties-permanence}

\noindent
In what follows, we present a few ``permanence''
properties of \'etale homomorphisms of Noetherian local rings
(as defined in Definition \ref{definition-etale-ring}). See
More on Algebra, Sections \ref{more-algebra-section-permanence-completion} and
\ref{more-algebra-section-permanence-henselization}
for the analogue of this material for the completion and
henselization of a Noetherian local ring.

\begin{lemma}
\label{lemma-etale-dimension}
Let $A$, $B$ be Noetherian local rings.
Let $A \to B$ be a \'etale homomorphism of local rings.
Then $\dim(A) = \dim(B)$.
\end{lemma}

\begin{proof}
See for example
Algebra, Lemma \ref{algebra-lemma-dimension-base-fibre-equals-total}.
\end{proof}

\begin{proposition}
\label{proposition-etale-depth}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $\text{depth}(A) = \text{depth}(B)$
\end{proposition}

\begin{proof}
See Algebra, Lemma \ref{algebra-lemma-apply-grothendieck}.
\end{proof}

\begin{proposition}
\label{proposition-etale-CM}
\begin{slogan}
Being Cohen-Macaulay ascends and descends along \'etale maps.
\end{slogan}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is Cohen-Macaulay if and only if $B$ is so.
\end{proposition}

\begin{proof}
A local ring $A$ is Cohen-Macaulay if and only $\dim(A) = \text{depth}(A)$.
As both of these invariants is preserved under an \'etale extension,
the claim follows.
\end{proof}

\begin{proposition}
\label{proposition-etale-regular}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is regular if and only if $B$ is so.
\end{proposition}

\begin{proof}
If $B$ is regular, then $A$ is regular by
Algebra, Lemma \ref{algebra-lemma-flat-under-regular}.
Assume $A$ is regular. Let $\mathfrak m$ be the maximal ideal
of $A$. Then $\dim_{\kappa(\mathfrak m)} \mathfrak m/\mathfrak m^2 =
\dim(A) = \dim(B)$ (see Lemma \ref{lemma-etale-dimension}).
On the other hand, $\mathfrak mB$ is the maximal ideal of
$B$ and hence $\mathfrak m_B/\mathfrak m_B = \mathfrak mB/\mathfrak m^2B$
is generated by at most $\dim(B)$ elements. Thus $B$ is regular.
(You can also use the slightly more general
Algebra, Lemma \ref{algebra-lemma-flat-over-regular-with-regular-fibre}.)
\end{proof}


\begin{proposition}
\label{proposition-etale-reduced}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is reduced if and only if $B$ is so.
\end{proposition}

\begin{proof}
It is clear from the faithful flatness of $A \to B$ that if $B$ is reduced, so
is $A$. See also Algebra, Lemma \ref{algebra-lemma-descent-reduced}.
Conversely, assume $A$ is reduced. By assumption $B$ is a localization
of a finite type $A$-algebra $B'$ at some prime $\mathfrak q$.
After replacing $B'$ by a localization we may assume that $B'$
is \'etale over $A$, see Lemma \ref{lemma-characterize-etale-Noetherian}.
Then we see that Algebra, Lemma \ref{algebra-lemma-reduced-goes-up} applies to
$A \to B'$ and $B'$ is reduced. Hence $B$ is reduced.
\end{proof}

\begin{remark}
\label{remark-technicality-needed}
The result on ``reducedness'' does not hold with a weaker
definition of \'etale local ring maps $A \to B$ where one
drops the assumption that $B$ is essentially of finite type over $A$.
Namely, it can happen that a Noetherian local domain $A$ has nonreduced
completion $A^\wedge$, see
Examples, Section \ref{examples-section-local-completion-nonreduced}.
But the ring map $A \to A^\wedge$ is flat, and $\mathfrak m_AA^\wedge$
is the maximal ideal of $A^\wedge$ and of course $A$ and $A^\wedge$ have
the same residue fields. This is why it is important to consider
this notion only for ring extensions which are essentially of finite type
(or essentially of finite presentation if $A$ is not Noetherian).
\end{remark}

\begin{proposition}
\label{proposition-etale-normal}
Let $A$, $B$ be Noetherian local rings.
Let $f : A \to B$ be an \'etale homomorphism of local rings.
Then $A$ is a normal domain if and only if $B$ is so.
\end{proposition}

\begin{proof}
See
Algebra, Lemma \ref{algebra-lemma-descent-normal}
for descending normality. Conversely, assume $A$ is normal.
By assumption $B$ is a localization of a finite type $A$-algebra
$B'$ at some prime $\mathfrak q$. After replacing $B'$ by a localization
we may assume that $B'$ is \'etale over $A$, see
Lemma \ref{lemma-characterize-etale-Noetherian}.
Then we see that
Algebra, Lemma \ref{algebra-lemma-normal-goes-up}
applies to $A \to B'$ and we conclude that $B'$ is normal.
Hence $B$ is a normal domain.
\end{proof}

\noindent
The preceeding propositions give some indication as to why we'd like to think
of \'etale maps as ``local isomorphisms''. Another property that gives an
excellent indication that we have the ``right'' definition is the fact that
for $\mathbf{C}$-schemes of finite type, a morphism is \'etale if and only if
the associated morphism on analytic spaces (the $\mathbf{C}$-valued points given
the complex topology) is a local isomorphism in the analytic sense (open
embedding locally on the source). This fact can be proven with the aid of the
structure theorem and the fact that the analytification commutes with the
formation of the completed local rings -- the details are left to the reader.







\section{Relative morphisms}
\label{section-relative-morphisms}

\noindent
We interrupt the discussion of \'etale morphisms to prove a
representability result which we will use in the next section
to discuss the category of finite \'etale coverings.
The material in this section is discussed in the correct
generality in Criteria for Representability, Section
\ref{criteria-section-relative-morphisms}.

\medskip\noindent
Let $S$ be a scheme. Let $Z$ and $X$ be schemes over $S$.
Given a scheme $T$ over $S$ we can consider morphisms
$b : T \times_S Z \to T \times_S X$ over $S$. Picture
\begin{equation}
\label{equation-hom}
\vcenter{
\xymatrix{
T \times_S Z \ar[rd] \ar[rr]_b & &
T \times_S X \ar[ld] & Z \ar[rd] & & X \ar[ld] \\
& T \ar[rrr] & & & S
}
}
\end{equation}
Of course, we can also think of $b$ as a morphism
$b : T \times_S Z \to X$ such that
$$
\xymatrix{
T \times_S Z \ar[r] \ar[d] \ar@/^1pc/[rrr]_-b &
Z \ar[rd] & & X \ar[ld] \\
T \ar[rr] & & S
}
$$
commutes. In this situation we can define a functor
\begin{equation}
\label{equation-hom-functor}
\mathit{Mor}_S(Z, X) : (\Sch/S)^{opp} \longrightarrow \textit{Sets},
\quad
T \longmapsto \{b\text{ as above}\}
\end{equation}
Here is a basic representability result.

\begin{lemma}
\label{lemma-hom-from-finite-free-into-affine}
Let $Z \to S$ and $X \to S$ be morphisms of affine schemes.
Assume $\Gamma(Z, \mathcal{O}_Z)$ is a finite free
$\Gamma(S, \mathcal{O}_S)$-module. Then $\mathit{Mor}_S(Z, X)$
is representable by an affine scheme over $S$.
\end{lemma}

\begin{proof}
Write $S = \Spec(R)$. Choose a basis $\{e_1, \ldots, e_m\}$
for $\Gamma(Z, \mathcal{O}_Z)$ over $R$. Choose a presentation
$$
\Gamma(X, \mathcal{O}_X) = R[\{x_i\}_{i \in I}]/(\{f_k\}_{k \in K}).
$$
We will denote $\overline{x}_i$ the image of $x_i$ in this quotient.
Write
$$
P = R[\{a_{ij}\}_{i \in I, 1 \leq j \leq m}].
$$
Consider the $R$-algebra map
$$
\Psi :
R[\{x_i\}_{i \in I}]
\longrightarrow
P \otimes_R \Gamma(Z, \mathcal{O}_Z), \quad
x_i \longmapsto \sum\nolimits_j a_{ij} \otimes e_j.
$$
Write $\Psi(f_k) = \sum c_{kj} \otimes e_j$ with $c_{kj} \in P$.
Finally, denote $J \subset P$ the ideal generated by the elements
$c_{kj}$, $k \in K$, $1 \leq j \leq m$. We claim that
$W = \Spec(P/J)$ represents the functor $\mathit{Mor}_S(Z, X)$.

\medskip\noindent
First, note that by construction $P/J$ is an $R$-algebra, hence
a morphism $W \to S$. Second, by construction the map
$\Psi$ factors through $\Gamma(X, \mathcal{O}_X)$, hence we obtain
an $P/J$-algebra homomorphism
$$
P/J \otimes_R \Gamma(X, \mathcal{O}_X)
\longrightarrow
P/J \otimes_R \Gamma(Z, \mathcal{O}_Z)
$$
which determines a morphism
$b_{univ} : W \times_S Z \to W \times_S X$.
By the Yoneda lemma $b_{univ}$ determines a
transformation of functors $W \to \mathit{Mor}_S(Z, X)$ which we
claim is an isomorphism. To show that it is an isomorphism it suffices
to show that it induces a bijection of sets
$W(T) \to \mathit{Mor}_S(Z, X)(T)$ over any affine
scheme $T$.

\medskip\noindent
Suppose $T = \Spec(R')$ is an affine scheme over $S$
and $b \in \mathit{Mor}_S(Z, X)(T)$. The structure morphism $T \to S$
defines an $R$-algebra structure on $R'$ and $b$ defines an $R'$-algebra map
$$
b^\sharp :
R' \otimes_R \Gamma(X, \mathcal{O}_X)
\longrightarrow
R' \otimes_R \Gamma(Z, \mathcal{O}_Z).
$$
In particular we can write
$b^\sharp(1 \otimes \overline{x}_i) = \sum \alpha_{ij} \otimes e_j$
for some $\alpha_{ij} \in R'$. This corresponds to an $R$-algebra map
$P \to R'$ determined by the rule $a_{ij} \mapsto \alpha_{ij}$. This
map factors through the quotient $P/J$ by the construction of the ideal
$J$ to give a map $P/J \to R'$. This in turn corresponds to a morphism
$T \to W$ such that $b$ is the pullback of $b_{univ}$.
Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-hom-from-finite-locally-free-into-affine}
Let $Z \to S$ and $X \to S$ be morphisms of schemes.
If $Z \to S$ is finite locally free and $X \to S$ is affine,
then $\mathit{Mor}_S(Z, X)$ is representable by a scheme
affine over $S$.
\end{lemma}

\begin{proof}
Choose an affine open covering $S = \bigcup U_i$ such that
$\Gamma(Z \times_S U_i, \mathcal{O}_{Z \times_S U_i})$ is
finite free over $\mathcal{O}_S(U_i)$. Let $F_i \subset \mathit{Mor}_S(Z, X)$
be the subfunctor which assigns to $T/S$ the empty set if
$T \to S$ does not factor through $U_i$ and $\mathit{Mor}_S(Z, X)(T)$
otherwise. Then the collection of these subfunctors satisfy the conditions
(2)(a), (2)(b), (2)(c) of
Schemes, Lemma \ref{schemes-lemma-glue-functors} which proves the lemma.
Condition (2)(a) follows from
Lemma \ref{lemma-hom-from-finite-free-into-affine}
and the other two follow from straightforward arguments.
\end{proof}

\noindent
The condition on the morphism $f : X \to S$ in the lemma below is very
useful to prove statements like it. It holds if one of the following
is true: $X$ is quasi-affine, $f$ is quasi-affine, $f$ is quasi-projective,
$f$ is locally projective, there exists an ample invertible sheaf on $X$,
there exists an $f$-ample invertible sheaf on $X$, or
there exists an $f$-very ample invertible sheaf on $X$.

\begin{lemma}
\label{lemma-hom-from-finite-locally-free-representable}
Let $Z \to S$ and $X \to S$ be morphisms of schemes.
Assume
\begin{enumerate}
\item $Z \to S$ is finite locally free, and
\item for all $(s, x_1, \ldots, x_d)$ where $s \in S$ and
$x_1, \ldots, x_d \in X_s$ there exists an affine open $U \subset X$
with $x_1, \ldots, x_d \in U$.
\end{enumerate}
Then $\mathit{Mor}_S(Z, X)$ is representable by a scheme.
\end{lemma}

\begin{proof}
Consider the set $I$ of pairs $(U, V)$ where $U \subset X$ and $V \subset S$
are affine open and $U \to S$ factors through $V$. For $i \in I$ denote
$(U_i, V_i)$ the corresponding pair. Set
$F_i = \mathit{Mor}_{V_i}(Z_{V_i}, U_i)$.
It is immediate that $F_i$ is a subfunctor of $\mathit{Mor}_S(Z, X)$.
Then we claim that conditions
(2)(a), (2)(b), (2)(c) of
Schemes, Lemma \ref{schemes-lemma-glue-functors} which proves the lemma.

\medskip\noindent
Condition (2)(a) follows from
Lemma \ref{lemma-hom-from-finite-locally-free-into-affine}.

\medskip\noindent
To check condition (2)(b) consider $T/S$ and $b \in \mathit{Mor}_S(Z, X)$.
Thinking of $b$ as a morphism $T \times_S Z \to X$ we find an open
$b^{-1}(U_i) \subset T \times_S Z$. Clearly, $b \in F_i(T)$
if and only if $b^{-1}(U_i) = T \times_S Z$. Since the projection
$p : T \times_S Z \to T$ is finite hence closed, the set
$U_{i, b} \subset T$ of points $t \in T$ with
$p^{-1}(\{t\}) \subset b^{-1}(U_i)$ is open.
Then $f : T' \to T$ factors through $U_{i, b}$ if and only
if $b \circ f \in F_i(T')$ and we are done checking (2)(b).

\medskip\noindent
Finally, we check condition (2)(c) and this is where our condition
on $X \to S$ is used. Namely, consider
$T/S$ and $b \in \mathit{Mor}_S(Z, X)$.
It suffices to prove that every $t \in T$
is contained in one of the opens $U_{i, b}$ defined
in the previous paragraph.
This is equivalent to the condition that
$b(p^{-1}(\{t\})) \subset U_i$ for some $i$
where $p : T \times_S Z \to T$ is the projection and
$b : T \times_S Z \to X$ is the given morphism.
Since $p$ is finite, the set $b(p^{-1}(\{t\})) \subset X$
is finite and contained in the fibre of $X \to S$ over
the image $s$ of $t$ in $S$.
Thus our condition on $X \to S$ exactly shows a
suitable pair exists.
\end{proof}

\begin{lemma}
\label{lemma-hom-from-finite-locally-free-separated-lqf}
Let $Z \to S$ and $X \to S$ be morphisms of schemes.
Assume $Z \to S$ is finite locally free and $X \to S$
is separated and locally quasi-finite.
Then $\mathit{Mor}_S(Z, X)$ is representable by a scheme.
\end{lemma}

\begin{proof}
This follows from
Lemma \ref{lemma-hom-from-finite-locally-free-representable}
and More on Morphisms, Lemma
\ref{more-morphisms-lemma-separated-locally-quasi-finite-over-affine}.
\end{proof}








\section{Schemes \'etale over a point}
\label{section-schemes-etale-point}

\noindent
In this section we describe schemes \'etale over the spectrum of a field.
Before we state the result we introduce the category of $G$-sets for a
topological group $G$.

\begin{definition}
\label{definition-G-set-continuous}
Let $G$ be a topological group.
A {\it $G$-set}, sometime called a {\it discrete $G$-set},
is a set $X$ endowed with a left action $a : G \times X \to X$
such that $a$ is continuous when $X$ is given the discrete topology and
$G \times X$ the product topology.
A {\it morphism of $G$-sets} $f : X \to Y$ is simply any $G$-equivariant
map from $X$ to $Y$.
The category of $G$-sets is denoted {\it $G\textit{-Sets}$}.
\end{definition}

\noindent
The condition that $a : G \times X \to X$ is continuous signifies
simply that the stabilizer of any  $x \in X$ is open in $G$.
If $G$ is an abstract group $G$ (i.e., a group but not a topological group)
then this agrees with our preceding definition (see for example
Sites, Example \ref{sites-example-site-on-group})
provided we endow $G$ with the discrete topology.

\medskip\noindent
Recall that if $K \subset L$ is an infinite Galois extension then the
Galois group $G = \text{Gal}(L/K)$ comes endowed with a canonical
topology, see Fields, Section \ref{fields-section-infinite-galois}.

\begin{lemma}
\label{lemma-sheaves-point}
Let $K$ be a field. Let $K^{sep}$ a separable closure of $K$.
Consider the profinite group $G = \text{Gal}(K^{sep}/K)$.
The functor
$$
\begin{matrix}
\text{schemes \'etale over }K &
\longrightarrow &
G\textit{-Sets} \\
X/K & \longmapsto &
\Mor_{\Spec(K)}(\Spec(K^{sep}), X)
\end{matrix}
$$
is an equivalence of categories.
\end{lemma}

\begin{proof}
A scheme $X$ over $K$ is \'etale over $K$ if and only if
$X \cong \coprod_{i\in I} \Spec(K_i)$ with
each $K_i$ a finite separable extension of $K$
(Morphisms, Lemma \ref{morphisms-lemma-etale-over-field}).
The functor of the lemma associates to $X$ the $G$-set
$$
\coprod\nolimits_i \Hom_K(K_i, K^{sep})
$$
with its natural left $G$-action. Each element has an open stabilizer
by definition of the topology on $G$. Conversely, any $G$-set $S$
is a disjoint union of its orbits. Say $S = \coprod S_i$. Pick $s_i \in S_i$
and denote $G_i \subset G$ its open stabilizer. By Galois theory
(Fields, Theorem \ref{fields-theorem-inifinite-galois-theory})
the fields $(K^{sep})^{G_i}$ are finite separable field extensions of $K$, and
hence the scheme
$$
\coprod\nolimits_i \Spec((K^{sep})^{G_i})
$$
is \'etale over $K$. This gives an inverse to the functor of the lemma.
Some details omitted.
\end{proof}

\begin{remark}
\label{remark-covering-surjective}
Under the correspondence of Lemma \ref{lemma-sheaves-point},
the coverings in the small \'etale site
$\Spec(K)_\etale$ of $K$ correspond to surjective families of
maps in $G\textit{-Sets}$.
\end{remark}









\section{Galois categories}
\label{section-galois}

\noindent
In this section we discuss some of the material the reader can
find in \cite[Expos\'e V, Sections 4, 5, and 6]{SGA1}.
Recall that by our conventions categories have a set of objects and
for any pair of objects a set of morphisms. The following lemma tells
us that the group of automorphisms of a functor to the category
of finite sets is automatically a profinite topological group.

\begin{lemma}
\label{lemma-aut-inverse-limit}
Let $\mathcal{C}$ be a category and let $F : \mathcal{C} \to \textit{Sets}$
be a functor. Then
$$
\text{Aut}(F) = \lim_{I \subset \Ob(\mathcal{C})\text{ finite}}
\Im(\text{Aut}(F) \to \prod\nolimits_{X \in I} \text{Aut}(F(X)))
$$
If $F(X)$ is finite for all $X$, then
$\text{Aut}(F) \subset \prod_{X \in \Ob(\mathcal{C})} \text{Aut}(F(X))$
is a closed subgroup.
\end{lemma}

\begin{proof}
The lemma proves itself.
\end{proof}

\begin{example}
\label{example-galois-category-G-sets}
Let $G$ be a topological group. An important example will be the
forgetful functor
\begin{equation}
\label{equation-forgetful}
\textit{Finite-}G\textit{-Sets} \longrightarrow \textit{Sets}
\end{equation}
where $\textit{Finite-}G\textit{-Sets}$ is the full subcategory of
$G\textit{-Sets}$ whose objects are the finite $G$-sets.
The category $G\textit{-Sets}$ of $G$-sets is defined in
Definition \ref{definition-G-set-continuous}.
\end{example}

\noindent
Let $G$ be a topological group. The {\it profinite completion} of $G$
will be the profinite group
$$
G^\wedge =
\lim_{U \subset G\text{ open, normal, finite idex}} G/U
$$
with its profinite topology. Observe that the limit is cofiltered
as a finite intersection of open, normal subgroups of finite index
is another.

\begin{lemma}
\label{lemma-single-out-profinite}
Let $G$ be a topological group. The automorphism group of the functor
(\ref{equation-forgetful}) endowed with its profinite topology from
Lemma \ref{lemma-aut-inverse-limit} is the profinite completion of $G$.
\end{lemma}

\begin{proof}
Denote $F_G$ the functor (\ref{equation-forgetful}). Any morphism
$X \to Y$ in $\textit{Finite-}G\textit{-Sets}$ commutes with the action
of $G$. Thus any $g \in G$ defines an automorphism of $F_G$ and
we obtain a canonical homomorphism $G \to \text{Aut}(F_G)$ of groups.
Observe that any finite $G$-set $X$ is a finite disjoint union of
$G$-sets of the form $G/H_i$ with canonical $G$-action where
$H_i \subset G$ is an open subgroup of finite index. Then
$U_i = \bigcap gH_ig^{-1}$ is open, normal, and has finite index.
Moreover $U_i$ acts trivially on $G/H_i$ hence
$U = \bigcap U_i$ acts trivially on $F(X)$.
From Lemma \ref{lemma-aut-inverse-limit} we conclude there is an induced
continuous group homomorphism
$$
G^\wedge \longrightarrow \text{Aut}(F_G)
$$
Moreover, since $G/U$ acts faithfully on $G/U$ this map is
injective. If the image is dense, then the map is surjective and hence a
homeomorphism by Topology, Lemma \ref{topology-lemma-bijective-map}.

\medskip\noindent
Let $\gamma \in \text{Aut}(F_G)$ and let $X \in \Ob(\mathcal{C})$.
We will show there is a $g \in G$ such that $\gamma$ and $g$
induce the same action on $F_G(X)$. This will finish the proof.
As before we see that $X$ is a finite disjoint union of $G/H_i$.
With $U_i$ and $U$ as above, the finite $G$-set $Y = G/U$
surjects onto $G/H_i$ for all $i$ and hence it suffices to
find $g \in G$ such that $\gamma$ and $g$ induce the same action
on $F_G(G/U) = G/U$. Let $e \in G$ be the neutral element and
say that $\gamma(eU) = g_0U$ for some $g_0 \in G$. For any
$g_1 \in G$ the morphism
$$
R_{g_1} : G/U \longrightarrow G/U,\quad gU \longmapsto gg_1U
$$
of $\textit{Finite-}G\textit{-Sets}$ commutes with the action of
$\gamma$. Hence
$$
\gamma(g_1U) = \gamma(R_{g_1}(eU)) = R_{g_1}(\gamma(eU)) =
R_{g_1}(g_0U) = g_0g_1U
$$
Thus we see that $g = g_0$ works.
\end{proof}

\noindent
Recall that an exact functor is one which commutes with all
finite limits and finite colimits. In particular such a functor
commutes with equalizers, coequalizers, fibred products,
pushouts, etc.

\begin{lemma}
\label{lemma-second-fundamental-functor}
Let $G$ be a topological group. Let
$F : \textit{Finite-}G\textit{-Sets} \to \textit{Sets}$
be an exact functor with $F(X)$ finite for all $X$.
Then $F$ is isomorphic to the functor (\ref{equation-forgetful}).
\end{lemma}

\begin{proof}
Let $X$ be a nonempty object of $\textit{Finite-}G\textit{-Sets}$.
The diagram
$$
\xymatrix{
X \ar[r] \ar[d] & \{*\} \ar[d] \\
\{*\} \ar[r] & \{*\}
}
$$
is cocartesian. Hence we conclude that $F(X)$ is nonempty.
Let $U \subset G$ be an open, normal subgroup with finite index.
Observe that
$$
G/U \times G/U = \coprod\nolimits_{gU \in G/U} G/U
$$
where the summand corresponding to $gU$ corresponds to the orbit of
$(eU, gU)$ on the left hand side. Then we see that
$$
F(G/U) \times F(G/U) = F(G/U \times G/U) = \coprod\nolimits_{gU \in G/U} F(G/U)
$$
Hence $|F(G/U)| = |G/U|$ as $F(G/U)$ is nonempty. Thus we see that
$$
\lim_{U \subset G\text{ open, normal, finite idex}} F(G/U)
$$
is nonempty (Categories, Lemma \ref{categories-lemma-nonempty-limit}).
Pick $\gamma = (\gamma_U)$ an element in this limit.
Denote $F_G$ the functor (\ref{equation-forgetful}). We can identify
$F_G$ with the functor
$$
X \longmapsto \colim_U \Mor(G/U, X)
$$
where $f : G/U \to X$ corresponds to $f(eU) \in X = F_G(X)$
(details omitted). Hence the element $\gamma$ determines
a well defined map
$$
t : F_G \longrightarrow F
$$
Namely, given $x \in X$ choose $U$ and $f : G/U \to X$ sending
$eU$ to $x$ and then set $t_X(x) = F(f)(\gamma_U)$.
We will show that $t$ induces a bijective map
$t_{G/U} : F_G(G/U) \to F(G/U)$ for any $U$.
This implies in a straightforward manner that $t$
is an isomorphism (details omitted).
Since $|F_G(G/U)| = |F(G/U)|$ it suffices to show
that $t_{G/U}$ is surjective. The image contains at least
one element, namely
$t_{G/U}(eU) = F(\text{id}_{G/U})(\gamma_U) = \gamma_U$.
For $g \in G$ denote $R_g : G/U \to G/U$ right multiplication.
Then set of fixed points of $F(R_g) : F(G/U) \to F(G/U)$
is equal to $F(\emptyset) = \emptyset$ if $g \not \in U$ because $F$
commutes with equalizers. It follows that if
$g_1, \ldots, g_{|G/U|}$ is a system of representatives
for $G/U$, then the elements $F(R_{g_i})(\gamma_U)$ are pairwise distinct
and hence fill out $F(G/U)$. Then
$$
t_{G/U}(g_iU) = F(R_{g_i})(\gamma_U)
$$
and the proof is complete.
\end{proof}

\begin{example}
\label{example-from-C-F-to-G-sets}
Let $\mathcal{C}$ be a category and let $F : \mathcal{C} \to \textit{Sets}$
be a functor such that $F(X)$ is finite for all $X \in \Ob(\mathcal{C})$.
By Lemma \ref{lemma-aut-inverse-limit} we see that $G = \text{Aut}(F)$
comes endowed with the structure of a profinite topological group in a
canonical manner. We obtain a functor
\begin{equation}
\label{equation-remember}
\mathcal{C} \longrightarrow \textit{Finite-}G\textit{-Sets},\quad
X \longmapsto F(X)
\end{equation}
where $F(X)$ is endowed with the induced action of $G$. This action
is continuous because the kernel of $G \to \text{Aut}(F(X))$ is
open in $G$ by construction.
\end{example}

\noindent
The purpose of defining Galois categories is to single out those
pairs $(\mathcal{C}, F)$ for which the functor (\ref{equation-remember})
is an equivalence. Our definition of a Galois category is as follows.

\begin{definition}
\label{definition-galois-category}
\begin{reference}
Different from the definition in \cite[Expos\'e V, Definition 5.1]{SGA1}.
Compare with \cite[Definition 7.2.1]{BS}.
\end{reference}
Let $\mathcal{C}$ be a category and let $F : \mathcal{C} \to \textit{Sets}$
be a functor. The pair $(\mathcal{C}, F)$ is a {\it Galois category} if
\begin{enumerate}
\item $\mathcal{C}$ has finite limits and finite colimits,
\item
\label{item-connected-components}
every object of $\mathcal{C}$ is a finite (possibly empty)
coproduct of connected objects,
\item $F(X)$ is finite for all $X \in \Ob(\mathcal{C})$, and
\item $F$ reflects isomorphisms and is exact.
\end{enumerate}
Here we say $X \in \Ob(\mathcal{C})$ is connected if
it is not initial and for any monomorphism $Y \to X$
either $Y$ is initial or $Y \to X$ is an isomorphism.
\end{definition}

\noindent
{\bf Warning:} This definition is not the same (although eventually we'll
see it is equivalent) as the definition given in most references.
Namely, in \cite[Expos\'e V, Definition 5.1]{SGA1} a Galois category is
defined to be a category equivalent to $\textit{Finite-}G\textit{-Sets}$
for some profinite group $G$. Then Grothendieck characterizes
Galois categories by a list of axioms (G1) -- (G6) which are weaker
than our axioms above. The motivation for our choice is to stress the
existence of finite limits and finite colimits and exactness of the
functor $F$. The price we'll pay for this later is that we'll have
to work a bit harder to apply the results of this section.

\begin{lemma}
\label{lemma-epi-mono}
Let $(\mathcal{C}, F)$ be a Galois category. Let
$X \to Y \in \text{Arrows}(\mathcal{C})$. Then
\begin{enumerate}
\item $F$ is faithful,
\item $X \to Y$ is a monomorphism
$\Leftrightarrow F(X) \to F(Y)$ is injective,
\item $X \to Y$ is an epimorphism
$\Leftrightarrow F(X) \to F(Y)$ is surjective,
\item an object $A$ of $\mathcal{C}$ is initial if and only if
$F(A) = \emptyset$,
\item an object $Z$ of $\mathcal{C}$ is final if and only if
$F(Z)$ is a singleton,
\item if $X$ and $Y$ are connected, then $X \to Y$ is an epimorphism,
\item
\label{item-one-element}
if $X$ is connected and $a, b : X \to Y$ are two morphisms
then $a = b$ as soon as $F(a)$ and $F(b)$ agree on one element of $F(X)$,
\item if $X = \coprod_{i = 1, \ldots, n} X_i$ and
$Y = \coprod_{j = 1, \ldots, m} Y_j$ where $X_i$, $Y_j$ are connected,
then there is map $\alpha : \{1, \ldots, n\} \to \{1, \ldots, m\}$
such that $X \to Y$ comes from a collection of morphisms
$X_i \to Y_{\alpha(i)}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Proof of (1). Suppose $a, b : X \to Y$ with $F(a) = F(b)$.
Let $E$ be the equalizer of $a$ and $b$. Then $F(E) = F(X)$
and we see that $E = X$ because $F$ reflects isomorphisms.

\medskip\noindent
Proof of (2). This is true because $F$ turns the morphism $X \to X \times_Y X$
into the map $F(X) \to F(X) \times_{F(Y)} F(X)$ and $F$ reflects isomorphisms.

\medskip\noindent
Proof of (3). This is true because $F$ turns the morphism $Y \amalg_X Y \to Y$
into the map $F(Y) \amalg_{F(X)} F(Y) \to F(Y)$ and $F$ reflects isomorphisms.

\medskip\noindent
Proof of (4). There exists an initial object $A$ and certainly
$F(A) = \emptyset$. On the other hand, if $X$ is an object with
$F(X) = \emptyset$, then the unique map $A \to X$ induces a bijection
$F(A) \to F(X)$ and hence $A \to X$ is an isomorphism.

\medskip\noindent
Proof of (5). There exists a final object $Z$ and certainly
$F(Z)$ is a singleton. On the other hand, if $X$ is an object with
$F(X)$ a singleton, then the unique map $X \to Z$ induces a bijection
$F(X) \to F(Z)$ and hence $X \to Z$ is an isomorphism.

\medskip\noindent
Proof of (6). The equalizer $E$ of the two maps $Y \to Y \amalg_X Y$ is not
an initial object of $\mathcal{C}$ because $X \to Y$ factors through $E$
and $F(X) \not = \emptyset$. Hence $E = Y$ and we conclude.

\medskip\noindent
Proof of (\ref{item-one-element}).
The equalizer $E$ of $a$ and $b$ comes with a monomorphism
$E \to X$ and $F(E) \subset F(X)$ is the set of elements where
$F(a)$ and $F(b)$ agree. To finish use that either $E$ is initial
or $E = X$.

\medskip\noindent
Proof of (8). For each $i, j$ we see that $E_{ij} = X_i \times_Y Y_j$
is either initial or equal to $X_i$. Picking $s \in F(X_i)$
we see that $E_{ij} = X_i$ if and only if $s$ maps to an element
of $F(Y_j) \subset F(Y)$, hence this happens for a unique $j = \alpha(i)$.
\end{proof}

\noindent
By the lemma above we see that, given a connected object $X$ of a
Galois categoey $(\mathcal{C}, F)$, the automorphism group
$\text{Aut}(X)$ has order at most $|F(X)|$. Namely, given $s \in F(X)$
and $g \in \text{Aut}(X)$ we see that $g(s) = s$ if and only
if $g = \text{id}_X$ by (\ref{item-one-element}).
We say $X$ is {\it Galois} if equality holds.
Equivalently, $X$ is Galois if it is connected and
$\text{Aut}(X)$ acts transitively on $F(X)$.

\begin{lemma}
\label{lemma-galois}
Let $(\mathcal{C}, F)$ be a Galois category. For any connected object $X$
of $\mathcal{C}$ there exists a Galois object $Y$ and a morphism $Y \to X$.
\end{lemma}

\begin{proof}
We will use the results of Lemma \ref{lemma-epi-mono} without further mention.
Let $n = |F(X)|$. Consider $X^n$ endowed with its natural action of
$S_n$. Let
$$
X^n = \coprod\nolimits_{t \in T} Z_t
$$
be the decomposition into connected objects. Pick a $t$ such that
$F(Z_t)$ contains $(s_1, \ldots, s_n)$ with $s_i$ pairwise distinct.
If $(s'_1, \ldots, s'_n) \in F(Z_t)$ is another element, then we
claim $s'_i$ are pairwise distinct as well. Namely, if not, say
$s'_i = s'_j$, then $Z_t$ is the image of an connected component of
$X^{n - 1}$ under the diagonal morphism
$$
\Delta_{ij} : X^{n - 1} \longrightarrow X^n
$$
Since morphisms of connected objects are epimorphisms and induce
surjections after applying $F$ it would follow that $s_i = s_j$
which is not the case.

\medskip\noindent
Let $G \subset S_n$ be the subgroup of elements with $g(Z_t) = Z_t$.
Looking at the action of $S_n$ on
$$
F(X)^n = F(X^n) = \coprod\nolimits_{t' \in T} F(Z_{t'})
$$
we see that $G = \{g \in S_n \mid g(s_1, \ldots, s_n) \in F(Z_t)\}$.
Now pick a second element $(s'_1, \ldots, s'_n) \in F(Z_t)$.
Above we have seen that $s'_i$ are pairwise distinct. Thus we can
find a $g \in S_n$ with $g(s_1, \ldots, s_n) = (s'_1, \ldots, s'_n)$.
In other words, the action of $G$ on $F(Z_t)$ is transitive and
the proof is complete.
\end{proof}

\noindent
Here is a key lemma.

\begin{lemma}
\label{lemma-tame}
\begin{reference}
Compare with \cite[Definition 7.2.4]{BS}.
\end{reference}
Let $(\mathcal{C}, F)$ be a Galois category. Let $G = \text{Aut}(F)$
be as in Example \ref{example-from-C-F-to-G-sets}. For any connected
$X$ in $\mathcal{C}$ the action of $G$ on $F(X)$ is transitive.
\end{lemma}

\begin{proof}
We will use the results of Lemma \ref{lemma-epi-mono} without further mention.
Let $I$ be the set of isomorphism classes of Galois objects in $\mathcal{C}$.
For each $i \in I$ let $X_i$ be a representative of the isomorphism class.
Choose $\gamma_i \in F(X_i)$ for each $i \in I$.
We define a partial ordering on $I$ by setting $i \geq i'$ if
and only if there is a morphism $f_{ii'} : X_i \to X_{i'}$.
Given such a morphism we can post-compose by an automorphism
$X_{i'} \to X_{i'}$ to assure that $F(f_{ii'})(\gamma_i) = \gamma_{i'}$.
With this normalization the morphsm $f_{ii'}$ is unique.

\medskip\noindent
We claim that the functor $F$ is isomorphic to the functor $F'$
which sends $X$ to
$$
F'(X) = \colim_I \Mor_\mathcal{C}(X_i, X)
$$
via the transformation of functors $t : F' \to F$ defined as follows:
given $f : X_i \to X$ we set $t_X(f) = F(f)(\gamma_i)$.
Using (\ref{item-one-element}) we find that $t_X$ is injective.
To show surjectivity, let $\gamma \in F(X)$. Then we can immediately
reduce to the case where $X$ is connected by the definition of
a Galois category. Then we may assume $X$ is Galois by
Lemma \ref{lemma-galois}. In this case $X$ is isomorphic to $X_i$
for some $i$ and we can choose the isomorphism $X_i \to X$ such
that $\gamma_i$ maps to $\gamma$ (by definition of Galois objects).
We conclude that $t$ is an isomorphism.

\medskip\noindent
Set $A_i = \text{Aut}(X_i)$.
We claim that for $i \geq i'$ there is a canonical map
$h_{ii'} : A_i \to A_{i'}$ such that for all $a \in A_i$
the diagram
$$
\xymatrix{
X_i \ar[d]_a \ar[r]_{f_{ii'}} & X_{i'} \ar[d]^{h_{ii'}(a)} \\
X_i \ar[r]^{f_{ii'}} & X_{i'}
}
$$
commutes. Namely, just let $h_{ii'}(a) = a' : X_{i'} \to X_{i'}$
be the unique automorphism such that
$F(a')(\gamma_{i'}) = F(f_{ii'} \circ a)(\gamma_i)$.
As before this makes the diagram commute and moreover the choice
is unique.
It follows that
$h_{i'i''} \circ h_{ii'} = h_{ii''}$
if $i \geq i' \geq i''$.
Since $F(X_i) \to F(X_{i'})$ is surjective we see that
$A_i \to A_{i'}$ is surjective.
Taking the inverse limit we obtain a group
$$
A = \lim_I A_i
$$
This is a profinite group since the automorphism groups are finite
and moreover $A \to A_i$ is surjective for all $i$.

\medskip\noindent
Since elements of $A$ act on the inverse system $X_i$ we get an action of
$A$ (on the right) on $F'$ by pre-composing. In other words, we get
a homomorphism $A^{opp} \to G$. Since $A \to A_i$ is surjective we conclude
that $G$ acts transitively on $F(X_i)$ for all $i$. Since every connected
object is dominated by one of the $X_i$ we conclude the lemma is true.
\end{proof}

\begin{proposition}
\label{proposition-galois}
\begin{reference}
This is a weak version of \cite[Expos\'e V]{SGA1}.
The proof is borrowed from \cite[Theorem 7.2.5]{BS}.
\end{reference}
Let $(\mathcal{C}, F)$ be a Galois category. Let $G = \text{Aut}(F)$
be as in Example \ref{example-from-C-F-to-G-sets}. The functor
$F : \mathcal{C} \to \textit{Finite-}G\textit{-Sets}$
(\ref{equation-remember}) an equivalence.
\end{proposition}

\begin{proof}
We will use the results of Lemma \ref{lemma-epi-mono} without further mention.
In particular we know the functor is faithful.
By Lemma \ref{lemma-tame} we know that for any connected $X$ the
action of $G$ on $F(X)$ is transitive. Hence $F$ preserves
the decomposition into connected components (existence of which is
an axioms of a Galois category). Let $X$ and $Y$ be objects and let
$s : F(X) \to F(Y)$ be a map. Then the graph
$\Gamma_s \subset F(X) \times F(Y)$ of $s$
is a union of connected components. Hence there exists a
union of connected components $Z$ of $X \times Y$,
which comes equipped with a monomorphism $Z \to X \times Y$,
with $F(Z) = \Gamma_s$. Since $F(Z) \to F(X)$ is bijective
we see that $Z \to X$ is an isomorphism and we conclude
that $s = F(f)$ where $f : X \cong Z \to Y$ is the composition.
Hence $F$ is fully faithful.

\medskip\noindent
To finish the proof we show that $F$ is essentially surjective.
It suffices to show that $G/H$ is in the essential image for
any open subgroup $H \subset G$ of finite index.
By definition of the topology on $G$ there exists a finite
collection of objects $X_i$ such that
$$
\Ker(G \longrightarrow \prod\nolimits_i \text{Aut}(F(X_i)))
$$
is contained in $H$. We may assume $X_i$ is connected
for all $i$. We can choose a Galois object $Y$ mapping
to a connected component of $\prod X_i$ using
Lemma \ref{lemma-galois}. Then
$U = \Ker(G \to \text{Aut}(Y))$ is contained in $H$.
In fact $F(Y) = G/U$ by our definition of Galois objects.
Finally, we get an action of the finite group $M = H/U$
on $Y$ and we set $X = Y/M$, i.e., $X$ is the coequalizer
of all the arrows $m : Y \to Y$, $m \in M$.
Since $F$ is exact we see that $F(X) = G/H$ and the
proof is complete.
\end{proof}

\begin{lemma}
\label{lemma-functoriality-galois}
Let $(\mathcal{C}, F)$ and $(\mathcal{C}', F')$ be Galois categories.
Let $H : \mathcal{C} \to \mathcal{C}'$ be an exact functor.
There exists an isomorphism $t : F' \circ H \to F$.
The choice of $t$ determines a continuous homomorphism
$h : G' = \text{Aut}(F') \to \text{Aut}(F) = G$ and
a $2$-commutative diagram
$$
\xymatrix{
\mathcal{C} \ar[r]_H \ar[d] & \mathcal{C}' \ar[d] \\
\textit{Finite-}G\textit{-Sets} \ar[r]^h &
\textit{Finite-}G'\textit{-Sets}
}
$$
The map $h$ is independent of $t$ up
to an inner automorphism of $G$.
Conversely, given a continuous homomorphism $h : G' \to G$ there
is an exact functor $H : \mathcal{C} \to \mathcal{C}'$ and an
isomorphism $t$ recovering $h$ as above.
\end{lemma}

\begin{proof}
By Proposition \ref{proposition-galois} and
Lemma \ref{lemma-single-out-profinite} we may assume
$\mathcal{C} = \textit{Finite-}G\textit{-Sets}$ and $F$ is the
forgetful functor and similarly for $\mathcal{C}'$. Thus the existence of
$t$ follows from Lemma \ref{lemma-second-fundamental-functor}. The map $h$
comes from transport of structure via $t$. The commutativity of the
diagram is obvious. Uniqueness of $h$ up to innner conjugation by
an element of $G$ comes from the fact that the choice of $t$ is
unique up to an element of $G$. The final statement is straightforward.
\end{proof}

\begin{lemma}
\label{lemma-functoriality-galois-surjective}
Let $(\mathcal{C}, F)$ and $(\mathcal{C}', F')$ be Galois categories.
Let $H : \mathcal{C} \to \mathcal{C}'$ be an exact functor.
Let $h : G' = \text{Aut}(F') \to \text{Aut}(F) = G$ be the corresponding
continuous homomorphism as in Lemma \ref{lemma-functoriality-galois}.
The following are equivalent
\begin{enumerate}
\item $h$ is surjective, and
\item $H$ is fully faithful.
\end{enumerate}
\end{lemma}

\begin{proof}
Here we are just saying that given a continuous group homomorphism
$h : G \to G'$ of profinite groups the corresponding functor
$\textit{Finite-}G\textit{-Sets} \to \textit{Finite-}G'\textit{-Sets}$
is fully faithful if and only if $h$ is surjective. This is clear
because $h$ is not surjective if and only if there exists a finite discrete
$G'$-set $M$ with a nontrivial action such that $G$ acts trivially on $M$.
\end{proof}

\begin{lemma}
\label{lemma-functoriality-galois-injective}
Let $(\mathcal{C}, F)$ and $(\mathcal{C}', F')$ be Galois categories.
Let $H : \mathcal{C} \to \mathcal{C}'$ be an exact functor.
Let $h : G' = \text{Aut}(F') \to \text{Aut}(F) = G$ be the corresponding
continuous homomorphism as in Lemma \ref{lemma-functoriality-galois}.
The following are equivalent
\begin{enumerate}
\item $h$ is injective, and
\item for every connected object $X'$ of $\mathcal{C}'$
there exists an object $X$ of $\mathcal{C}$ and a diagram
$$
X' \leftarrow Y' \rightarrow H(X)
$$
in $\mathcal{C}'$ where $Y' \to X'$ is an epimorphism and
$Y' \to H(X)$ is a monomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Using the lemma we translate this into a question for the corresponding
functor between the categories of finite $G$-sets and finite $G'$-sets.

\medskip\noindent
Let $h : G' \to G$ be an injective continuous group homomorphism
of profinite groups. Let $H' \subset G'$ be an open subgroup.
Since the topology on $G'$ is the induced topology from $G$
there exists an open subgroup $H \subset G$ such that $h^{-1}H \subset H'$.
Then the desired diagram is
$$
G'/H' \leftarrow G'/h^{-1}H \rightarrow G/H
$$

\medskip\noindent
Conversely, assume (2) holds for the functor
$\textit{Finite-}G\textit{-Sets} \to \textit{Finite-}G'\textit{-Sets}$.
Let $g' \in \Ker(h)$. Pick any open subgroup $H' \subset G'$.
By assumption there exists a finite $G$-set $X$ and a diagram
$$
G'/H' \leftarrow Y' \rightarrow X
$$
of $G'$-sets with the left arrow surjective and the right arrow injective.
Since $g'$ is in the kernel of $h$ we see that $g'$ acts trivally on $X$.
Hence $g'$ acts trivially on $Y'$ and hence trivially on $G'/H'$.
Thus $g' \in H'$. As this holds for all open subgroups we conclude
that $g'$ is the identity element as desired.
\end{proof}






\section{Finite \'etale morphisms}
\label{section-finite-etale}

\noindent
In this section we prove enough basic results on finite \'etale
morphisms to be able to construct the \'etale fundamental group.

\medskip\noindent
Let $X$ be a scheme. We will use the notation $\textit{F\'Et}_X$
to denote the category of scheme finite and \'etale over $X$.
Thus
\begin{enumerate}
\item an object of $\textit{F\'Et}_X$ is a finite \'etale morphism
$Y \to X$ with target $X$, and
\item a morphism in $\textit{F\'Et}_X$
from $Y \to X$ to $Y' \to X$ is a morphism $Y \to Y'$ making
the diagram
$$
\xymatrix{
Y \ar[rr] \ar[rd] & &  Y' \ar[ld] \\
& X
}
$$
commute.
\end{enumerate}
We will often call an object of $\textit{F\'Et}_X$ a
{\it finite \'etale cover} of $X$ (even if $Y$ is empty).
It turns out that there is a stack $p : \textit{F\'Et} \to \Sch$
over the category of schemes whose fibre over $X$ is the category
$\textit{F\'Et}_X$ just defined. See Examples of Stacks, Section
\ref{examples-stacks-section-finite-etale}.

\begin{example}
\label{example-finite-etale-geometric-point}
Let $k$ be an algebraically closed field and $X = \Spec(k)$. In this case
$\textit{F\'Et}_X$ is equivalent to the category of finite sets. This works
more generally when $k$ is separably algebraically closed. The reason is
that a scheme \'etale over $k$ is the disjoint union of spectra of
fields finite separable over $k$, see
Morphisms, Lemma \ref{morphisms-lemma-etale-over-field}.
\end{example}

\begin{lemma}
\label{lemma-finite-etale-covers-limits-colimits}
Let $X$ be a scheme. The category $\textit{F\'Et}_X$ has finite limits and
finite colimits and for any morphism $X' \to X$ the base change functor
$\textit{F\'Et}_X \to \textit{F\'Et}_{X'}$ is exact.
\end{lemma}

\begin{proof}
Finite limits and left exactness. By
Categories, Lemma \ref{categories-lemma-finite-limits-exist}
it suffices to show that $\textit{F\'Et}_X$ has a final object
and fibred products. This is clear because the category of
all schemes over $X$ has a final object (namely $X$) and fibred products
and fibred products of schemes finite \'etale over $X$ are
finite \'etale over $X$. Moreover, it is clear that base
change commutes with these operations and hence base change
is left exact (Categories, Lemma
\ref{categories-lemma-characterize-left-exact}).

\medskip\noindent
Finite colimits and right exactness. By
Categories, Lemma \ref{categories-lemma-colimits-exist}
it suffices to show that $\textit{F\'Et}_X$ has finite
coproducts and coequalizers. Finite coproducts are given
by disjoint unions (the empty coproduct is the empty scheme).
Let $a, b : Z \to Y$ be two morphisms of $\textit{F\'Et}_X$.
Since $Z \to X$ and $Y \to X$ are finite \'etale we can write
$Z = \underline{\Spec}(\mathcal{C})$ and $Y = \underline{\Spec}(\mathcal{B})$
for some finite locally free $\mathcal{O}_X$-algebras $\mathcal{C}$
and $\mathcal{B}$. The morphisms $a, b$ induce two maps
$a^\sharp, b^\sharp : \mathcal{B} \to \mathcal{C}$.
Let $\mathcal{A} = \text{Eq}(a^\sharp, b^\sharp)$ be their
equalizer. If
$$
\underline{\Spec}(\mathcal{A}) \longrightarrow X
$$
is finite \'etale, then it is clear that this is the coequalizer
(after all we can write any object of $\textit{F\'Et}_X$
as the relative spectrum of a sheaf of $\mathcal{O}_X$-algebras).
This we may do after replacing $X$ by the members of an \'etale
covering (Descent, Lemmas \ref{descent-lemma-descending-property-finite}
and \ref{descent-lemma-descending-property-separated}).
Thus by Lemma \ref{lemma-finite-etale-etale-local} we may assume that
$Y = \coprod_{i = 1, \ldots, n} X$ and $Z = \coprod_{j = 1, \ldots, m} X$.
Then
$$
\mathcal{C} = \prod\nolimits_{1 \leq j \leq m} \mathcal{O}_X
\quad\text{and}\quad
\mathcal{B} = \prod\nolimits_{1 \leq i \leq n} \mathcal{O}_X
$$
After a further replacement by the members of an open covering
we may assume that $a, b$ correspond to
maps $a_s, b_s : \{1, \ldots, m\} \to \{1, \ldots, n\}$, i.e.,
the summand $X$ of $Z$ corresponding to the index $j$ maps into
the summand $X$ of $Y$ corresponding to the index $a_s(j)$, resp.\ $b_s(j)$
under the morphism $a$, resp.\ $b$.
Let $\{1, \ldots, n\} \to T$ be the coequalizer of $a_s, b_s$.
Then we see that
$$
\mathcal{A} = \prod\nolimits_{t \in T} \mathcal{O}_X
$$
whose spectrum is certainly finite \'etale over $X$. We
omit the verification that this is compatible with base change.
Thus base change is a right exact functor.
\end{proof}

\begin{remark}
\label{remark-colimits-commute-forgetful}
Let $X$ be a scheme. Consider the natural functors
$F_1 : \textit{F\'Et}_X \to \Sch$ and $F_2 : \textit{F\'Et}_X \to \Sch/X$.
Then
\begin{enumerate}
\item The functors $F_1$ and $F_2$ commute with finite colimits.
\item The functor $F_2$ commutes with finite limits,
\item The functor $F_1$ commutes with connected finite limits, i.e.,
with equalizers and fibre products.
\end{enumerate}
The results on limits are immediate from the discussion in
the proof of Lemma \ref{lemma-finite-etale-covers-limits-colimits}
and Categories, Lemma \ref{categories-lemma-connected-limit-over-X}.
It is clear that $F_1$ and $F_2$ commute with finite coproducts.
By the dual of Categories, Lemma
\ref{categories-lemma-characterize-left-exact}
we need to show that $F_1$ and $F_2$ commute with coequalizers.
In the proof of Lemma \ref{lemma-finite-etale-covers-limits-colimits}
we saw that coequalizers in $\textit{F\'Et}_X$ look \'etale locally
like this
$$
\xymatrix{
\coprod_{j \in J} U \ar@<1ex>[r]^a \ar@<-1ex>[r]_b &
\coprod_{i \in I} U \ar[r] &
\coprod_{t \in \text{Coeq}(a, b)} U
}
$$
which is certainly a coequalizer in the category of schemes.
Hence the statement follows from the fact that being a coequalizer
is fpqc local as formulate precisely in
Descent, Lemma \ref{descent-lemma-coequalizer-fpqc-local}.
\end{remark}

\begin{lemma}
\label{lemma-internal-hom-finite-etale}
Let $X$ be a scheme. Given $U, V$ finite \'etale over $X$ there
exists a scheme $W$ finite \'etale over $X$ such that
$$
\Mor_X(X, W) = \Mor_X(U, V)
$$
and such that the same remains true after any base change.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-hom-from-finite-locally-free-separated-lqf}
there exists a scheme $W$ representing $\mathit{Mor}_X(U, V)$.
(Use that an \'etale morphism is locally quasi-finite by
Morphisms, Lemmas \ref{morphisms-lemma-etale-locally-quasi-finite}
and that a finite morphism is separated.)
This scheme clearly satisfies the formula after any base change.
To finish the proof we have to show that $W \to X$ is finite \'etale.
This we may do after replacing $X$ by the members of an \'etale
covering (Descent, Lemmas \ref{descent-lemma-descending-property-finite}
and \ref{descent-lemma-descending-property-separated}).
Thus by Lemma \ref{lemma-finite-etale-etale-local}
we may assume that $U = \coprod_{i = 1, \ldots, n} X$
and $V = \coprod_{j = 1, \ldots, m} X$.
In this case
$W = \coprod_{\alpha : \{1, \ldots, n\} \to \{1, \ldots, m\}} X$
by inspection (details omitted) and the proof is complete.
\end{proof}

\noindent
Let $X$ be a scheme. A {\it geometric point} of $X$ is a morphism
$\Spec(k) \to X$ where $k$ is algebraically closed. Such a point is
usually denoted $\overline{x}$, i.e., by an overlined small case letter.
We often use $\overline{x}$ to denote the scheme $\Spec(k)$ as well as
the morphism, and we use $\kappa(\overline{x})$
to denote $k$. We say $\overline{x}$ {\it lies over} $x$
to indicate that $x \in X$ is the image of $\overline{x}$.
We will discuss this further in
\'Etale Cohomology, Section \ref{etale-cohomology-section-stalks}.
Given $\overline{x}$ and an \'etale morphism $U \to X$ we can
consider
$$
|U_{\overline{x}}| : \text{the underlying set of points of the
scheme }U_{\overline{x}} = U \times_X \overline{x}
$$
Since $U_{\overline{x}}$ as a scheme over $\overline{x}$
is a disjoint union of copies of $\overline{x}$
(Morphisms, Lemma \ref{morphisms-lemma-etale-over-field})
we can also describe this set as
$$
|U_{\overline{x}}| =
\left\{
\begin{matrix}
\text{commutative} \\
\text{diagrams}
\end{matrix}
\vcenter{
\xymatrix{
\overline{x} \ar[rd]_{\overline{x}} \ar[r]_{\overline{u}} & U \ar[d] \\
& X
}
}
\right\}
$$
The assignement $U \mapsto |U_{\overline{x}}|$ is a functor
which is often denoted $F_{\overline{x}}$.

\begin{lemma}
\label{lemma-finite-etale-connected-galois-category}
Let $X$ be a connected scheme. Let $\overline{x}$ be a geometric point.
The functor
$$
F_{\overline{x}} : \textit{F\'Et}_X \longrightarrow \textit{Sets},\quad
Y \longmapsto |Y_{\overline{x}}|
$$
defines a Galois category (Definition \ref{definition-galois-category}).
\end{lemma}

\begin{proof}
After identifying $\textit{F\'Et}_{\overline{x}}$ with the category of
finite sets (Example \ref{example-finite-etale-geometric-point})
we see that our functor $F_{\overline{x}}$
is nothing but the base change functor for the morphism $\overline{x} \to X$.
Thus we see that $\textit{F\'Et}_X$ has finite limits and finite colimits
and that $F_{\overline{x}}$ is exact by
Lemma \ref{lemma-finite-etale-covers-limits-colimits}.
We will also use that finite limits in $\textit{F\'Et}_X$
agree with the corresponding finite limits in the category
of schemes over $X$, see Remark \ref{remark-colimits-commute-forgetful}.

\medskip\noindent
If $Y' \to Y$ is a monomorphism in $\textit{F\'Et}_X$
then we see that $Y' \to Y' \times_Y Y'$ is an isomorphism, and
hence $Y' \to Y$ is a monomorphism of schemes. It follows that
$Y' \to Y$ is an open immersion
(Theorem \ref{theorem-etale-radicial-open}). Since
$Y'$ is finite over $X$ and $Y$ separated over $X$,
the morphism $Y' \to Y$ is finite
(Morphisms, Lemma \ref{morphisms-lemma-finite-permanence}), hence closed
(Morphisms, Lemma \ref{morphisms-lemma-finite-proper}),
hence it is the inclusion of an open and closed subscheme of $Y$.
It follows that $Y$ is a connected objects of the category
$\textit{F\'Et}_X$ (as in Definition \ref{definition-galois-category})
if and only if $Y$ is connected as a scheme. Then it follows from
Topology, Lemma \ref{topology-lemma-finite-fibre-connected-components}
that $Y$ is a finite coproduct of its connected components
both as a scheme and in the sense of
Definition \ref{definition-galois-category}.

\medskip\noindent
Let $Y \to Z$ be a morphism in $\textit{F\'Et}_X$ which induces a
bijection $F_{\overline{x}}(Y) \to F_{\overline{x}}(Z)$. We have to
show that $Y \to Z$ is an isomorphism. By the above we may assume
$Z$ is connected. Since $Y \to Z$ is finite \'etale and hence finite
locally free it suffices to show that $Y \to Z$ is finite locally
free of degree $1$. This is true in a neighbourhood of any point of
$Z$ lying over $\overline{x}$ and since $Z$ is connected and
the degree is locally constant we conclude.
\end{proof}

\noindent
Next we define Grothendieck's algebraic fundamental group.

\begin{definition}
\label{definition-fundamental-group}
Let $X$ be a connected scheme. Let $\overline{x}$ be a geometric point
of $X$. The {\it fundamental group} of $X$ with
{\it base point} $\overline{x}$ is the group
$$
\pi_1(X, \overline{x}) = \text{Aut}(F_{\overline{x}})
$$
of automorphisms of the fibre functor
$F_{\overline{x}} : \textit{F\'Et}_X \to \textit{Sets}$
endowed with its canonical profinite topology from
Lemma \ref{lemma-aut-inverse-limit}.
\end{definition}

\noindent
Combining the above with the material from Section \ref{section-galois}
we obtain the following theorem.

\begin{theorem}
\label{theorem-fundamental-group}
Let $X$ be a connected scheme. Let $\overline{x}$ be a geometric point
of $X$.
\begin{enumerate}
\item The fibre functor $F_{\overline{x}}$ defines an equivalence of
categories
$$
\textit{F\'Et}_X \longrightarrow
\textit{Finite-}\pi_1(X, \overline{x})\textit{-Sets}
$$
\item Given a second geometric point $\overline{x}'$ of $X$ there
exists an isomorphism $t : F_{\overline{x}} \to F_{\overline{x}'}$.
This gives an isomorphism $\pi_1(X, \overline{x}) \to \pi_1(X, \overline{x}')$
compatible with the equivalences in (1). This isomorphism is
independent of $t$ up to innner conjugation.
\item Given a morphism $f : X \to Y$ of connected schemes denote
$\overline{y} = f \circ \overline{x}$. There is a canonical
continuous homomorphism
$$
f_* : \pi_1(X, \overline{x}) \to \pi_1(Y, \overline{y})
$$
such that the diagram
$$
\xymatrix{
\textit{F\'Et}_Y \ar[r]_{\text{base change}} \ar[d]_{F_{\overline{y}}} &
\textit{F\'Et}_X \ar[d]^{F_{\overline{x}}} \\
\textit{Finite-}\pi_1(Y, \overline{y})\textit{-Sets} \ar[r]^{f_*} &
\textit{Finite-}\pi_1(X, \overline{x})\textit{-Sets}
}
$$
is commutative.
\end{enumerate}
\end{theorem}

\begin{proof}
Part (1) follows from Lemma \ref{lemma-finite-etale-connected-galois-category}
and Proposition \ref{proposition-galois}.
Part (2) is a special case of Lemma \ref{lemma-functoriality-galois}.
For part (3) observe that the diagram
$$
\xymatrix{
\textit{F\'Et}_Y \ar[r] \ar[d]_{F_{\overline{y}}} &
\textit{F\'Et}_X \ar[d]^{F_{\overline{x}}} \\
\textit{Sets} \ar@{=}[r] & \textit{Sets}
}
$$
is commutative (actually commutative, not just $2$-commutative) because
$\overline{y} = f \circ \overline{x}$. Hence
we can apply Lemma \ref{lemma-functoriality-galois} with the implied
transformation of functors to get (3).
\end{proof}

\begin{lemma}
\label{lemma-fundamental-group-Galois-group}
Let $k$ be a field and let $\overline{k}$ be an algebraic closure.
Set $X = \Spec(k)$ and denote $\overline{x} : \Spec(\overline{k}) \to X$
be the geometric point corresponding to our chose algebraic closure.
Let $k \subset k^{sep} \subset \overline{k}$ be the separable
algebraic closure. There is a canonical isomorphism
$$
\text{Gal}(k^{sep}/k) \longrightarrow \pi_1(X, \overline{x})
$$
of profinite topological groups.
\end{lemma}

\begin{proof}
We first carefully construct the map. Observe that
$\text{Gal}(k^{sep}/k) = \text{Aut}(\overline{k}/k)$
as $\overline{k}$ is the perfection of $k^{sep}$.
Then recall that $\pi_1(X, \overline{x}) = \text{Aut}(F_{\overline{x}})$
where $F_{\overline{x}}$ is the functor
$$
Y \longmapsto F_{\overline{x}}(Y) = \Mor_X(\Spec(\overline{k}), Y)
$$
Consider the map
$$
\text{Aut}(\overline{k}/k) \times F_{\overline{x}}(Y)
\to F_{\overline{x}}(Y),\quad
(\sigma, \overline{y}) \mapsto
\sigma \cdot \overline{y} = \overline{y} \circ \Spec(\sigma)
$$
This is an action because
$$
\sigma\tau \cdot \overline{y} =
\overline{y} \circ \Spec(\sigma\tau) =
\overline{y} \circ \Spec(\tau) \circ \Spec(\sigma) =
\sigma \cdot (\tau \cdot \overline{y})
$$
The action is functorial in $Y \in \textit{F\'Et}_X$ and we
obtain the canonical map.

\medskip\noindent
Using our map above for every object $Y$ in $\textit{F\'Et}_X$
the finite set $F_{\overline{x}}(Y)$ gets a canonical
$\text{Gal}(k^{sep}/k)$-action. To finish the proof it suffices
to show that each $F_{\overline{x}}(Y)$ is an object of
$\textit{Finite-}\text{Gal}(k^{sep}/k)\textit{-Sets}$
and that in this way we obtain an equivalence of categories
$\textit{F\'Et}_X \to \textit{Finite-}\text{Gal}(k^{sep}/k)\textit{-Sets}$.
This is sufficient by the recognition results in
Proposition \ref{proposition-galois} and
Lemma \ref{lemma-single-out-profinite}.
To see this one shows that the construction given here
is the same as the construction in the equivalence
Lemma \ref{lemma-sheaves-point}
and that the equivalence of that lemma induces an equivalence between
the category of finite \'etale schemes over $\Spec(K)$
and finite $G$-sets. We omit the details.
\end{proof}








\input{chapters}


\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
