\input{preamble}

% OK, start here.
%
\begin{document}

\title{Moduli of Curves}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents




\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we discuss some of the familiar moduli stacks of curves.
A reference is the celebrated article of Deligne and Mumford, see \cite{DM}.




\section{Conventions and abuse of language}
\label{section-conventions}

\noindent
We continue to use the conventions and the abuse of language
introduced in
Properties of Stacks, Section \ref{stacks-properties-section-conventions}.
Unless otherwise mentioned our base scheme will be $\Spec(\mathbf{Z})$.







\section{The stack of curves}
\label{section-stack-curves}

\noindent
This section is the continuation of Quot, Section \ref{quot-section-curves}.
Let $\Curvesstack$ be the stack whose category of sections over a
scheme $S$ is the category of families of curves over $S$.
We already know that $\Curvesstack$ is an
algebraic stack over $\mathbf{Z}$, see Quot, Theorem
\ref{quot-theorem-curves-algebraic}.

\medskip\noindent
Often base change is denoted by a subscript, but we cannot use
this notation for $\Curvesstack$ because $\Curvesstack_S$
is our notation for the fibre category over $S$.
This is why in Quot, Remark \ref{quot-remark-curves-base-change}
we used $B\text{-}\Curvesstack$ for the base change
$$
B\text{-}\Curvesstack = \Curvesstack \times B
$$
to the algebraic space $B$. The product on the right is over the
final object, i.e., over $\Spec(\mathbf{Z})$. The object on the left
is the stack classifying families of curves on the category of schemes
over $B$. In particular, if $k$ is a field, then
$$
k\text{-}\Curvesstack = \Curvesstack \times \Spec(k)
$$
is the moduli stack classifying families of curves on the category
of schemes over $k$.
Before we continue, here is a sanity check.

\begin{lemma}
\label{lemma-extend-curves-to-spaces}
Let $T \to B$ be a morphism of algebraic spaces. The category
$$
\Mor_B(T, B\text{-}\Curvesstack) = \Mor(T, \Curvesstack)
$$
is the category of families of curves over $T$.
\end{lemma}

\begin{proof}
A family of curves over $T$ is a morphism $f : X \to T$ of algebraic
spaces, which is flat, proper, of finite presentation, and has
relative dimension $\leq 1$ (Morphisms of Spaces, Definition
\ref{spaces-morphisms-definition-relative-dimension}).
This is exactly the same as the definition in
Quot, Situation \ref{quot-situation-curves}
except that $T$ the base is allowed to be an algebraic space.
Our default base category for algebraic stacks/spaces
is the category of schemes, hence the lemma does not follow
immediately from the definitions. Having said this, we encourage
the reader to skip the proof.

\medskip\noindent
By the product description of $B\text{-}\Curvesstack$ given above,
it suffices to prove the lemma in the absolute case. Choose a scheme
$U$ and a surjective \'etale morphism $p : U \to T$.
Let $R = U \times_T U$ with projections $s, t : R \to U$.

\medskip\noindent
Let $v : T \to \Curvesstack$ be a morphism. Then $v \circ p$
corresponds to a family of curves $X_U \to U$. The canonical
$2$-morphism $v \circ p \circ t \to v \circ p \circ s$
is an isomorphism $\varphi : X_U \times_{U, s} R \to X_U \times_{U, t} R$.
This isomorphism satisfies the cocycle condition on
$R \times_{s, t} R$.
By Bootstrap, Lemma \ref{bootstrap-lemma-descend-algebraic-space}
we obtain a morphism of algebraic spaces $X \to T$
whose pullback to $U$ is equal to $X_U$ compatible with $\varphi$.
Since $\{U \to T\}$ is an \'etale covering, we see that
$X \to T$ is flat, proper, of finite presentation by
Descent on Spaces, Lemmas
\ref{spaces-descent-lemma-descending-property-flat},
\ref{spaces-descent-lemma-descending-property-proper}, and
\ref{spaces-descent-lemma-descending-property-finite-presentation}.
Also $X \to T$ has relative dimension $\leq 1$ because this is
an \'etale local property. Hence $X \to T$ is a family of curves over $T$.

\medskip\noindent
Conversely, let $X \to T$ be a family of curves. Then the
base change $X_U$ determines a morphism $w : U \to \Curvesstack$
and the canonical isomorphism $X_U \times_{U, s} R \to X_U \times_{U, t} R$
determines a $2$-arrow $w \circ s \to w \circ t$ satisfying the
cocycle condition. Thus a morphism $v : T = [U/R] \to \Curvesstack$
by the universal property of the quotient $[U/R]$, see
Groupoids in Spaces, Lemma
\ref{spaces-groupoids-lemma-quotient-stack-2-coequalizer}.
(Actually, it is much easier in this case to go back to before
we introduced our abuse of language and direct construct
the functor $\Sch/T \to \Curvesstack$ which ``is'' the
morphsim $T \to \Curvesstack$.)

\medskip\noindent
We omit the verification that the constructions given above
extend to morphisms between objects and are mutually quasi-inverse.
\end{proof}






\section{The stack of polarized curves}
\label{section-polarized-curves}

\noindent
In this section we work out some of the material
discussed in Quot, Remark \ref{quot-remark-alternative-approach-curves}.
Consider the $2$-fibre product
$$
\xymatrix{
\Curvesstack \times_{\Spacesstack'_{fp, flat, proper}}
\Polarizedstack \ar[r] \ar[d] &
\Polarizedstack \ar[d] \\
\Curvesstack \ar[r] &
\Spacesstack'_{fp, flat, proper}
}
$$
We denote this $2$-fibre product by
$$
\textit{PolarizedCurves} =
\Curvesstack
\times_{\Spacesstack'_{fp, flat, proper}}
\Polarizedstack
$$
This fibre product parametrizes polarized curves, i.e., families
of curves endowed with a relatively ample invertible sheaf.
More precisely, an object of
$\textit{PolarizedCurves}$
is a pair $(X \to S, \mathcal{L})$ where
\begin{enumerate}
\item $X \to S$ is a morphism of schemes which is proper, flat,
of finite presentation, and has relative dimension $\leq 1$, and
\item $\mathcal{L}$ is an invertible $\mathcal{O}_X$-module
which is relatively ample on $X/S$.
\end{enumerate}
A morphism $(X' \to S', \mathcal{L}') \to (X \to S, \mathcal{L})$
between objects of
$\textit{PolarizedCurves}$
is given by a triple $(f, g, \varphi)$
where $f : X' \to X$ and $g : S' \to S$
are morphisms of schemes which fit into a commutative diagram
$$
\xymatrix{
X' \ar[d] \ar[r]_f & X \ar[d] \\
S' \ar[r]^g & S
}
$$
inducing an isomorphism $X' \to S' \times_S X$, in other words, the
diagram is cartesian, and $\varphi : f^*\mathcal{L} \to \mathcal{L}'$
is an isomorphism. Composition is defined in the obvious manner.

\begin{lemma}
\label{lemma-polarized-curves-in-polarized}
The morphism
$\textit{PolarizedCurves} \to
\Polarizedstack$ is an open and closed immersion.
\end{lemma}

\begin{proof}
This is true because the $1$-morphism
$\Curvesstack \to \Spacesstack'_{fp, flat, proper}$
is representable by open and closed immersions, see
Quot, Lemma \ref{quot-lemma-curves-open-and-closed-in-spaces}.
\end{proof}

\begin{lemma}
\label{lemma-polarized-curves-over-curves}
The morphism
$\textit{PolarizedCurves} \to \Curvesstack$
is smooth and surjective.
\end{lemma}

\begin{proof}
Surjective. Given a field $k$ and a proper $1$-dimensional algebraic space
$X$ over $k$, i.e., an object of $\Curvesstack$ over $k$.
By Spaces over Fields, Lemma
\ref{spaces-over-fields-lemma-codim-1-point-in-schematic-locus}
the algebraic space $X$ is a scheme. Hence $X$
is a proper scheme of dimension $\leq 1$ over $k$.
By Varieties, Lemma \ref{varieties-lemma-dim-1-proper-projective}
we see that $X$ is H-projective over $\kappa$.
In particular, there exists an ample invertible $\mathcal{O}_X$-module
$\mathcal{L}$ on $X$. Then $(X, \mathcal{L})$ is an object
of $\textit{PolarizedCurves}$ over
$k$ which maps to $X$.

\medskip\noindent
Smooth. Let $X \to S$ be an object of $\Curvesstack$, i.e., a
morphism $S \to \Curvesstack$. It is clear that
$$
\textit{PolarizedCurves}
\times_{\Curvesstack} S
\subset \Picardstack_{X/S}
$$
is the substack of objects $(T/S, \mathcal{L}/X_T)$ such that
$\mathcal{L}$ is ample on $X_T/T$. This is an open substack by
Descent on Spaces, Lemma \ref{spaces-descent-lemma-ample-in-neighbourhood}.
Since $\Picardstack_{X/S} \to S$ is smooth by
Moduli Stacks, Lemma \ref{moduli-lemma-pic-curves-smooth}
we win.
\end{proof}












\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
