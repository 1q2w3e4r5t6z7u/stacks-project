\input{preamble}

% OK, start here.
%
\begin{document}

\title{Descent}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In the chapter on topologies on schemes
(see Topologies, Section \ref{topologies-section-introduction}) we introduced
Zariski, etale, fppf, smooth, syntomic and fpqc coverings of schemes.
In this chapter we discuss what kind of structures over schemes
can be descended through such coverings.
See for example \cite{Gr-I}, \cite{Gr-II}, \cite{Gr-III},
\cite{Gr-IV}, \cite{Gr-V}, and \cite{Gr-VI}.
This is also meant to introduce the notions of
descent, descent data, effective descent data, in the less formal
setting of descent questions for quasi-coherent sheaves, schemes, etc.
The formal notion, that of a stack over a site, is discussed in
the chapter on stacks (see Stacks, Section \ref{stacks-section-introduction}).

\section{Descent data for quasi-coherent sheaves}
\label{section-equivalence}

\noindent
In this chapter we will use the convention where
the projection maps $\text{pr}_i : X \times \ldots \times X \to X$
are labeled starting with $i = 0$. Hence we have
$\text{pr}_0, \text{pr}_1 : X \times X  \to X$,
$\text{pr}_0, \text{pr}_1, \text{pr}_2 : X \times X \times X  \to X$,
etc.


\begin{definition}
\label{definition-descent-datum-quasi-coherent}
Let $S$ be a scheme. Let $\{f_i : S_i \to S\}_{i \in I}$ be a family
of morphisms with target $S$.
\begin{enumerate}
\item A {\it descent datum $(\mathcal{F}_i, \varphi_{ij})$
for quasi-coherent sheaves} with respect to the given family
is given by a quasi-coherent sheaf $\mathcal{F}_i$ on $S_i$ for
each $i \in I$, an isomorphism of quasi-coherent
$\mathcal{O}_{S_i \times_S S_j}$-modules
$\varphi_{ij} : \text{pr}_0^*\mathcal{F}_i \to \text{pr}_1^*\mathcal{F}_j$
for each pair $(i, j) \in I^2$
such that for every triple of indices $(i, j, k) \in I^3$ the
diagram
$$
\xymatrix{
\text{pr}_0^*\mathcal{F}_i \ar[rd]_{\text{pr}_{01}^*\varphi_{ij}}
\ar[rr]_{\text{pr}_{02}^*\varphi_{ik}} & &
\text{pr}_2^*\mathcal{F}_k \\
& \text{pr}_1^*\mathcal{F}_j \ar[ru]_{\text{pr}_{12}^*\varphi_{jk}} &
}
$$
of $\mathcal{O}_{S_i \times_S S_j \times_S S_k}$-modules
commutes. This is called the {\it cocycle condition}.
\item A {\it morphism $\psi : (\mathcal{F}_i, \varphi_{ij}) \to
(\mathcal{F}'_i, \varphi'_{ij})$ of descent data} is given
by a family $\psi = (\psi_i)_{i\in I}$ of morphisms of
$\mathcal{O}_{S_i}$-modules $\psi_i : \mathcal{F}_i \to \mathcal{F}'_i$
such that all the diagrams
$$
\xymatrix{
\text{pr}_0^*\mathcal{F}_i \ar[r]_{\varphi_{ij}} \ar[d]_{\text{pr}_0^*\psi_i}
& \text{pr}_1^*\mathcal{F}_j \ar[d]^{\text{pr}_1^*\psi_j} \\
\text{pr}_0^*\mathcal{F}'_i \ar[r]^{\varphi'_{ij}} &
\text{pr}_1^*\mathcal{F}'_j \\
}
$$
commute.
\end{enumerate}
\end{definition}

\noindent
A good example to keep in mind is the following.
Suppose that $S = \bigcup S_i$ is an open covering.
In that case we have seen descent data for sheaves of sets in
Sheaves, Section \ref{sheaves-section-glueing-sheaves}
where we called them ``glueing data for sheaves of sets
with respect to the given covering''. Moreover, we proved
that the category of glueing data is equivalent to the category
of sheaves on $S$. We will show the analogue in the setting above when
$\{S_i \to S\}_{i\in I}$ is an fpqc covering.

\medskip\noindent
In the extreme case where the covering $\{S \to S\}$
is given by $\text{id}_S$ a descent datum is necessarily
of the form $(\mathcal{F}, \text{id}_{\mathcal{F}})$. The cocycle
condition garantees that the identity on $\mathcal{F}$ is the
only permitted map in this case. The following lemma shows
in particular that to every quasi-coherent sheaf of
$\mathcal{O}_S$-modules there is associated a unique
descent datum with respect to any given family.

\begin{lemma}
\label{lemma-refine-descent-datum}
Let $S$ be a scheme.
Let $\mathcal{U} = \{U_i \to S\}_{i \in I}$ and
$\mathcal{V} = \{V_j \to S\}_{j \in J}$
be families of morphisms with target $S$.
Assume $\mathcal{U}$ is a refinement of $\mathcal{V}$, so
there exist $\alpha : I \to J$, and morphisms $g_i : U_i \to V_{\alpha(i)}$
over $S$, see Sites, Definition \ref{sites-definition-morphism-coverings}.
Let $(\mathcal{F}_j, \varphi_{jj'})$ be a descent
datum for quasi-coherent sheaves with respect to the
family $\{V_j \to S\}_{j \in J}$. Then
\begin{enumerate}
\item The system
$$
\left(g_i^*\mathcal{F}_{\alpha(i)}, \ 
(g_i \times g_{i'})^*\varphi_{\alpha(i)\alpha(i')}\right)
$$
is a descent datum with respect to the family $\{U_i \to S\}_{i \in I}$.
\item This construction is functorial in the descent datum
$(\mathcal{F}_j, \varphi_{jj'})$.
\item Given a second $\alpha' : I \to J$ and
$g'_i : U_i \to V_{\alpha'(i)}$ there exists a functorial
isomorphism of descent data
$(g_i^*\mathcal{F}_{\alpha(i)},
(g_i \times g_{i'})^*\varphi_{\alpha(i)\alpha(i')})
\cong
((g'_i)^*\mathcal{F}_{\alpha'(i)},
(g'_i \times g'_{i'})^*\varphi_{\alpha'(i)\alpha'(i')})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
Any family $\mathcal{U} = \{S_i \to S\}_{i \in I}$ is a refinement of
the trivial covering $\{S \to S\}$ in a unique way. For
a quasi-coherent sheaf $\mathcal{F}$ on $S$ we denote simply
$(\mathcal{F}|_{S_i}, can)$ the descent datum with respect to
$\mathcal{U}$ obtained by the procedure above.

\begin{definition}
\label{definition-descent-datum-effective-quasi-coherent}
Let $S$ be a scheme.
Let $\{S_i \to S\}_{i \in I}$ be a family of morphisms
with target $S$.
\begin{enumerate}
\item Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_S$-module.
We call the unique descent on $\mathcal{F}$ datum with respect to the covering
$\{S \to S\}$ the {\it trivial descent datum}.
\item The pullback of the trival descent datum to
$\{S_i \to S\}$ is called the {\it canonical descent datum}.
Notation: $(\mathcal{F}|_{S_i}, can)$.
\item A descent datum $(\mathcal{F}_i, \varphi_{ij})$
for quasi-coherent sheaves with respect to the given covering
is said to be {\it effective} if there exists a quasi-coherent
sheaf $\mathcal{F}$ on $S$ such that $(\mathcal{F}_i, \varphi_{ij})$
is isomorphic to $(\mathcal{F}|_{S_i}, can)$.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma-zariski-descent-effective}
Let $S$ be a scheme.
Let $S = \bigcup U_i$ be an open covering.
Any descent datum on quasi-coherent sheaves
for the family $\mathcal{U} = \{U_i \to S\}$ is
effective. Moreover, the functor from the category of
quasi-coherent $\mathcal{O}_S$-modules to the category
of descent data with respect to $\mathcal{U}$ is fully faithful.
\end{lemma}

\begin{proof}
This follows immediately from
Sheaves, Section \ref{sheaves-section-glueing-sheaves}
and the fact that being quasi-coherent is a local property, see
Modules, Definition \ref{modules-definition-quasi-coherent}.
\end{proof}

\noindent
To prove more we first need to study the case of modules over rings.










\section{Descent for modules}
\label{section-descent-modules}

\noindent
Let $R \to A$ be a ring map.
By Simplicial, Example \ref{simplicial-example-push-outs-simplicial-object}
this gives rise to a cosimplicial $R$-algebra
$$
\xymatrix{
A
\ar@<1ex>[r]
\ar@<-1ex>[r]
&
A\otimes_R A
\ar@<0ex>[l]
\ar@<2ex>[r]
\ar@<0ex>[r]
\ar@<-2ex>[r]
&
A \otimes_R A \otimes_R A
\ar@<1ex>[l]
\ar@<-1ex>[l]
}
$$
Let us denote this $(A/R)_\bullet$ so that $(A/R)_n$ is the $(n + 1)$-fold
tensor product of $A$ over $R$. Given a map
$\varphi : [n] \to [m]$ the $R$-algebra map $(A/R)_\bullet(\varphi)$
is the map
$$
a_0 \otimes \ldots \otimes a_n
\longmapsto
\prod\nolimits_{\varphi(i) = 0} a_i
\otimes
\prod\nolimits_{\varphi(i) = 1} a_i
\otimes \ldots \otimes
\prod\nolimits_{\varphi(i) = m} a_i
$$
where we use the convention that the empty product is $1$. Thus the first
few maps, notation as in
Simplicial, Section \ref{simplicial-section-cosimplicial-object}, are
$$
\begin{matrix}
\delta^1_0 & : & a_0 & \mapsto & 1 \otimes a_0 \\
\delta^1_1 & : & a_0 & \mapsto & a_0 \otimes 1 \\
\sigma^0_0 & : & a_0 \otimes a_1 & \mapsto & a_0a_1 \\
\delta^2_0 & : & a_0 \otimes a_1 & \mapsto & 1 \otimes a_0 \otimes a_1 \\
\delta^2_1 & : & a_0 \otimes a_1 & \mapsto & a_0 \otimes 1 \otimes a_1 \\
\delta^2_2 & : & a_0 \otimes a_1 & \mapsto & a_0 \otimes a_1 \otimes 1 \\
\sigma^1_0 & : & a_0 \otimes a_1 \otimes a_2 & \mapsto & a_0a_1 \otimes a_2 \\
\sigma^1_1 & : & a_0 \otimes a_1 \otimes a_2 & \mapsto & a_0 \otimes a_1a_2
\end{matrix}
$$
and so on.

\medskip\noindent
An $R$-module $M$ gives rise to a cosimplicial $(A/R)_\bullet$-module
$(A/R)_\bullet \otimes_R M$. In other words
$M_n = (A/R)_n \otimes_R M$ and using the $R$-algebra maps
$(A/R)_n \to (A/R)_m$ to define the corresponding maps on
$M \otimes_R (A/R)_\bullet$.

\medskip\noindent
The analogue to a descent datum
for quasi-coherent sheaves in the setting of modules is the following.

\begin{definition}
\label{definition-descent-datum-modules}
Let $R \to A$ be a ring map.
\begin{enumerate}
\item A {\it descent datum $(N, \varphi)$ for modules
with respect to $R \to A$}
is given by an $A$-module $N$ and a isomorphism of
$A \otimes_R A$-modules
$$
\varphi : N \otimes_R A \to A \otimes_R N
$$
such that the {\it cocycle condition} holds: the diagram
of $A \otimes_R A \otimes_R A$-module maps
$$
\xymatrix{
N \otimes_R A \otimes_R A \ar[rr]_{\varphi_{02}}
\ar[rd]_{\varphi_{01}}
& &
A \otimes_R A \otimes_R N \\
& A \otimes_R N \otimes_R A \ar[ru]_{\varphi_{12}} &
}
$$
commutes (see below for notation).
\item A {\it morphism $(N, \varphi) \to (N', \varphi')$ of descent data}
is a morphism of $A$-modules $\psi : N \to N'$ such that
the diagram
$$
\xymatrix{
N \otimes_R A \ar[r]_\varphi \ar[d]_{\psi \otimes \text{id}_A} &
A \otimes_R N \ar[d]^{\text{id}_A \otimes \psi} \\
N' \otimes_R A \ar[r]^{\varphi'} &
A \otimes_R N'
}
$$
is commutative.
\end{enumerate}
\end{definition}

\noindent
In the definition we use the notation that
$\varphi_{01} = \varphi \otimes \text{id}_A$,
$\varphi_{12} = \text{id}_A \otimes \varphi$, and
$\varphi_{02}(n \otimes 1 \otimes 1) = \sum a_i \otimes 1 \otimes n_i$
if $\varphi(n) = \sum a_i \otimes n_i$. All three are
$A \otimes_R A \otimes_R A$-module homomorphisms. Equivalently we have
$$
\varphi_{ij}
=
\varphi \otimes_{(A/R)_1, \ (A/R)_\bullet(\tau^2_{ij})} (A/R)_2
$$
where $\tau^2_{ij} : [1] \to [2]$ is the map
$0 \mapsto i$, $1 \mapsto j$. Namely,
$(A/R)_{\bullet}(\tau^2_{02})(a_0 \otimes a_1) =
a_0 \otimes 1 \otimes a_1$,
and similarly for the others\footnote{Note that
$\tau^2_{ij} = \delta^2_k$, if $\{i, j, k\} = [2] = \{0, 1, 2\}$,
see Simplicial, Defintion \ref{simplicial-definition-face-degeneracy}.}.

\medskip\noindent
We need some more notation to be able to state the next lemma.
Let $(N, \varphi)$ be a descent datum with respect to a ring map $R \to A$.
For $n \geq 0$ and $i \in [n]$ we set
$$
N_{n, i} =
A \otimes_R
\ldots
\otimes_R A \otimes_R N \otimes_R A \otimes_R
\ldots
\otimes_R A
$$
with the factor $N$ in the $i$th spot. It is an $(A/R)_n$-module.
If we introduce the maps $\tau^n_i : [0] \to [n]$, $0 \mapsto i$
then we see that
$$
N_{n, i} = N \otimes_{(A/R)_0, \ (A/R)_\bullet(\tau^n_i)} (A/R)_n
$$
For $0 \leq i \leq j \leq n$ we let $\tau^n_{ij} : [1] \to [n]$
be the map such that $0$ maps to $i$ and $1$ to $j$. Similarly
to the above the homomorphism $\varphi$ induces isomorphisms
$$
\varphi^n_{ij}
=
\varphi \otimes_{(A/R)_1, \ (A/R)_\bullet(\tau^n_{ij})} (A/R)_n :
N_{n, i} \longrightarrow N_{n, j}
$$
of $(A/R)_n$-modules when $i < j$. If $i = j$ we set
$\varphi^n_{ij} = \text{id}$. Since these are all isomorphisms they allow us
to move the factor $N$ to any spot we like. And the cocycle condition
exactly means that it does not matter how we do this (e.g., as a composition
of two of these or at once). Finally, for any $\beta : [n] \to [m]$
we define the morphism
$$
N_{\beta, i} : N_{n, i} \to N_{m, \beta(i)}
$$
as the unique $(A/R)_\bullet(\beta)$-semi linear map such that
$$
N_{\beta, i}(1 \otimes \ldots \otimes n \otimes \ldots \otimes 1)
=
1 \otimes \ldots \otimes n \otimes \ldots \otimes 1
$$
for all $n \in N$.
This hints at the following lemma.

\begin{lemma}
\label{lemma-descent-datum-cosimplicial}
Let $R \to A$ be a ring map.
Given a descent datum $(N, \varphi)$ we can associate to it a
cosimplicial $(A/R)_\bullet$-module $N_\bullet$\footnote{We should really
write $(N, \varphi)_\bullet$.} by the
rules $N_n = N_{n, n}$ and given $\beta : [n] \to [m]$
setting we define
$$
N_\bullet(\beta) = (\varphi^m_{\beta(n)m}) \circ N_{\beta, n} :
N_{n, n} \longrightarrow N_{m, m}.
$$
This procedure is functorial in the descent datum.
\end{lemma}

\begin{proof}
Here are the first few maps
where $\varphi(n \otimes 1) = \sum \alpha_i \otimes x_i$
$$
\begin{matrix}
\delta^1_0 & : & N & \to & A \otimes N & n & \mapsto & 1 \otimes n \\
\delta^1_1 & : & N & \to & A \otimes N & n & \mapsto &
\sum \alpha_i \otimes x_i\\
\sigma^0_0 & : & A \otimes N & \to & N & a_0 \otimes n & \mapsto & a_0n \\
\delta^2_0 & : & A \otimes N & \to & A \otimes A \otimes N &
a_0 \otimes n & \mapsto & 1 \otimes a_0 \otimes n \\
\delta^2_1 & : & A \otimes N & \to & A \otimes A \otimes N &
a_0 \otimes n & \mapsto & a_0 \otimes 1 \otimes n \\
\delta^2_2 & : & A \otimes N & \to & A \otimes A \otimes N &
a_0 \otimes n & \mapsto & \sum a_0 \otimes \alpha_i \otimes x_i \\
\sigma^1_0 & : & A \otimes A \otimes N & \to & A \otimes N &
a_0 \otimes a_1 \otimes n & \mapsto & a_0a_1 \otimes n \\
\sigma^1_1 & : & A \otimes A \otimes N & \to & A \otimes N &
a_0 \otimes a_1 \otimes n & \mapsto & a_0 \otimes a_1n
\end{matrix}
$$
with notation as in
Simplicial, Section \ref{simplicial-section-cosimplicial-object}.
We first verify the two properties $\sigma^0_0 \circ \delta^1_0 = \text{id}$
and $\sigma^0_0 \circ \delta^1_1 = \text{id}$.
The first one, $\sigma^0_0 \circ \delta^1_0 = \text{id}$, is clear from
the explicit description of the morphisms above.
To prove the second relation we have to use the cocycle condition
(because it does not holds for an arbitrary isomorphism
$\varphi : N \otimes_R A \to A \otimes_R N$). Write
$p = \sigma^0_0 \circ \delta^1_1 : N \to N$. By the description of the
maps above we deduce that $p$ is also equal to
$$
p = \varphi \otimes \text{id} :
N = (N \otimes_R A) \otimes_{(A \otimes_R A)} A
\longrightarrow
(A \otimes_R N) \otimes_{(A \otimes_R A)} A = N
$$
Since $\varphi$ is an isomorphism we see that $p$ is an isomorphism.
Write $\varphi(n \otimes 1) = \sum \alpha_i \otimes x_i$ for certain
$\alpha_i \in A$ and $x_i \in N$. Then $p(n) = \sum \alpha_ix_i$.
Next, write
$\varphi(x_i \otimes 1) = \sum \alpha_{ij} \otimes y_j$ for
certain $\alpha_{ij} \in A$ and $y_j \in N$. Then the cocycle condition
says that
$$
\sum \alpha_i \otimes \alpha_{ij} \otimes y_j
=
\sum \alpha_i \otimes 1 \otimes x_i.
$$
This means that $p(n) = \sum \alpha_ix_i = \sum \alpha_i\alpha_{ij}y_j =
\sum \alpha_i p(x_i) = p(p(n))$. Thus $p$ is a projector, and since it is
an isomorphism it is the identity.

\medskip\noindent
To prove fully that $N_\bullet$ is a cosimplicial module we have to check
all 5 types of relations of
Simplicial, Remark \ref{simplicial-remark-relations-cosimplicial}.
The relations on composing $\sigma$'s are obvious.
The relations on composing $\delta$'s come down to the
cocycle condition for $\varphi$.
In exactly the same way as above one checks the relations
$\sigma_j \circ \delta_j = \sigma_j \circ \delta_{j + 1} = \text{id}$.
Finally, the other relations on compositions of $\delta$'s and $\sigma$'s
hols for any $\varphi$ whatsoever.
\end{proof}

\noindent
Note that to an $R$-module $M$ we can associate a canonical
descent datum, namely $(M \otimes_R A, can)$ where
$can : (M \otimes_R A) \otimes_R A \to A \otimes_R (M \otimes_R A)$
is the obvious map:
$(m \otimes a) \otimes a' \mapsto a \otimes (m \otimes a')$.

\begin{lemma}
\label{lemma-canonical-descent-datum-cosimplicial}
Let $R \to A$ be a ring map.
Let $M$ be an $R$-module. The cosimplicial
$(A/R)_\bullet$-module associated to the canonical descent
datum is isomorphic to the cosimplicial module $(A/R)_\bullet \otimes_R M$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{definition}
\label{definition-descent-datum-effective-module}
Let $R \to A$ be a ring map.
We say a descent datum $(N, \varphi)$ is {\it effective}
if there exists an $R$-module $M$ and an isomorphism
of descent data from $(M \otimes_R A, can)$ to
$(N, \varphi)$.
\end{definition}

\noindent
Let $R \to A$ be a ring map.
Let $(N, \varphi)$ be a descent datum.
We may take the cochain complex $s(N_\bullet)$ associated
with $N_\bullet$ (see
Simplicial, Section \ref{simplicial-section-dold-kan-cosimplicial}).
It has the following shape:
$$
N \to A\otimes_R N \to A \otimes_R A \otimes_R N \to \ldots
$$
We can describe the maps.
The first map is the map
$$
n \longmapsto 1 \otimes n - \varphi(n \otimes 1).
$$
The second map on pure tensors has the values
$$
a \otimes n \longmapsto 1 \otimes a \otimes n
- a \otimes 1 \otimes n + a \otimes \varphi(n \otimes 1).
$$
It is clear how the pattern continues.

\medskip\noindent
In the special case
where $N = A \otimes_R M$ we see that for any $m \in M$
the element $1 \otimes m$ is in the kernel of the first map
of the cochain complex associated to the cosimplicial
module $(A/R)_\bullet \otimes_R M$. Hence we get an extended cochain complex
\begin{equation}
\label{equation-extended-complex}
0 \to M \to A \otimes_R M \to A \otimes_R A \otimes_R M \to \ldots
\end{equation}
Here we think of the $0$ as being in degree $-2$,
the module $M$ in degree $-1$, the module $A \otimes_R M$ in
degree $0$, etc. Note that this complex has the shape
$$
0 \to R \to A \to A \otimes_R A \to A \otimes_R A \otimes_R A \to \ldots
$$
when $M = R$.

\begin{lemma}
\label{lemma-with-section-exact}
Suppose that $R \to A$ has a section.
Then for any $R$-module $M$ the extended cochain complex
(\ref{equation-extended-complex}) is exact.
\end{lemma}

\begin{proof}
By
Simplicial, Lemma \ref{simplicial-lemma-push-outs-simplicial-object-w-section}
the map $R \to (A/R)_\bullet$ is a homotopy equivalence
of cosimplicial $R$-algebras
(here $R$ denotes the constant cosimplicial $R$-algebra).
Hence $M \to (A/R)_\bullet \otimes_R M$ is
a homotopy equivalence in the category of cosimplicial
$R$-modules, because $\otimes_R M$ is a
functor from the category of $R$-algebras to the category
of $R$-modules, see
Simplicial, Lemma \ref{simplicial-lemma-functorial-homotopy}.
This implies that the induced map of associated
complexes is a homotopy equivalence, see
Simplicial, Lemma \ref{simplicial-lemma-homotopy-s-Q}.
Since the complex associated to the constant cosimplicial
$R$-module $M$ is the complex
$$
\xymatrix{
M \ar[r]^0 & M \ar[r]^1 & M \ar[r]^0 & M \ar[r]^1 & M \ldots
}
$$
we win (since the extended version simply puts an extra $M$ at
the beginning).
\end{proof}

\begin{lemma}
\label{lemma-ff-exact}
Suppose that $R \to A$ is faithfully flat, see
Algebra, Definition \ref{algebra-definition-flat}.
Then for any $R$-module $M$ the extended cochain complex
(\ref{equation-extended-complex}) is exact.
\end{lemma}

\begin{proof}
Suppose we can show there exists a faithfully flat ring map
$R \to R'$ such that the result holds for the ring map
$R' \to A' = R' \otimes_R A$. Then the result follows for
$R \to A$. Namely, for any $R$-module $M$ the cosimplicial
module $(M \otimes_R R') \otimes_{R'} (A'/R')_\bullet$ is
just the cosimplicial module $R' \otimes_R (M \otimes_R (A/R)_\bullet)$.
Hence the vanishing of cohomology of the complex associated to
$(M \otimes_R R') \otimes_{R'} (A'/R')_\bullet$ implies the
vanishing of the cohomology of the complex associated to
$M \otimes_R (A/R)_\bullet$ by faithful flatness of $R \to R'$.
Similarly for the vanishing of cohomology groups in degrees
$-1$ and $0$ of the extended complex (proof omitted).

\medskip\noindent
But we have such a faithfull flat extension. Namely $R' = A$ works
because the ring map $R' = A \to A' = A \otimes_A A$ has a section
$a \otimes a' \mapsto aa'$ and the previous lemma applies.
\end{proof}

\noindent
Here is how the complex relates to the question of effectivity.

\begin{lemma}
\label{lemma-recognize-effective}
Let $R \to A$ be a faithfully flat ring map.
Let $(N, \varphi)$ be a descent datum.
Then $(N, \varphi)$ is effective if and only if the canonical
map
$$
A \otimes_R H^0(s(N_\bullet)) \longrightarrow N
$$
is an isomorphism.
\end{lemma}

\begin{proof}
If $(N, \varphi)$ is effective, then we may write $N = A \otimes_R M$
with $\varphi = can$. It follows that $H^0(s(N_\bullet)) = M$ by
Lemmas \ref{lemma-canonical-descent-datum-cosimplicial}
and \ref{lemma-ff-exact}. Conversely, suppose the map of the lemma
is an isomorphism. In this case set $M = H^0(s(N_\bullet))$.
This is an $R$-submodule of $N$,
namely $M = \{n \in N \mid 1 \otimes n = \varphi(n \otimes 1)\}$.
The only thing to check is that via the isomorphism
$A \otimes_R M \to N$
the canonical descent data agrees with $\varphi$.
We omit the verification.
\end{proof}

\begin{lemma}
\label{lemma-descent-descends}
Let $R \to A$ be a ring map, and let $R \to R'$ be faithfully flat.
Set $A' = R' \otimes_R A$. If all descent data for $R' \to A'$ are
effective, then so are all descent data for $R \to A$.
\end{lemma}

\begin{proof}
Let $(N, \varphi)$ be a descent datum for $R \to A$.
Set $N' = R' \otimes_R N = A' \otimes_A N$, and denote
$\varphi' = \text{id}_{R'} \otimes \varphi$ the base change
of the descend datum $\varphi$. Then $(N', \varphi')$ is
a descent datum for $R' \to A'$ and
$H^0(s(N'_\bullet)) = R' \otimes_R H^0(s(N_\bullet))$.
Moreover, the map
$A' \otimes_{R'} H^0(s(N'_\bullet)) \to N'$ is identified
with the base change of the $A$-module map
$A \otimes_R H^0(s(N)) \to N$ via the faithfully flat map
$A \to A'$. Hence we conclude by Lemma \ref{lemma-recognize-effective}.
\end{proof}

\noindent
Here is the main result of this section.
Its proof may seem a little clumsy; for a more highbrow approach see
Remark \ref{remark-homotopy-equivalent-cosimplicial-algebras} below.

\begin{proposition}
\label{proposition-descent-module}
Let $R \to A$ be a faithfully flat ring map.
Then
\begin{enumerate}
\item any descent datum on modules with respect to $R \to A$
is effective,
\item the functor $M \mapsto (A \otimes_R M, can)$ from $R$-modules
to the category of descent data is an equivalence, and
\item the inverse functor is given by $(N, \varphi) \mapsto H^0(s(N_\bullet))$.
\end{enumerate}
\end{proposition}

\begin{proof}
We only prove (1) and omit the proofs of (2) and (3).
As $R \to A$ is faithfully flat, there exists a faithfully flat
base change $R \to R'$ such that $R' \to A' = R' \otimes_R A$ has
a section (namely take $R' = A$ as in the proof of
Lemma \ref{lemma-ff-exact}). Hence, using Lemma \ref{lemma-descent-descends}
we may assume that $R \to A$ as a section, say $\sigma : A \to R$.
Let $(N, \varphi)$ be a descent datum relative to $R \to A$.
Set
$$
M = H^0(s(N_\bullet)) = \{n \in N \mid 1 \otimes n = \varphi(n \otimes 1)\}
\subset
N
$$
By Lemma \ref{lemma-recognize-effective} it suffices to show that
$A \otimes_R M \to N$ is an isomorphism.

\medskip\noindent
Take an element $n \in N$. Write
$\varphi(n \otimes 1) = \sum a_i \otimes x_i$ for certain
$a_i \in A$ and $x_i \in N$. By Lemma \ref{lemma-descent-datum-cosimplicial}
we have $n = \sum a_i x_i$ in $N$ (because
$\sigma^0_0 \circ \delta^1_0 = \text{id}$ in any cosimplicial object).
Next, write $\varphi(x_i \otimes 1) = \sum a_{ij} \otimes y_j$ for
certain $a_{ij} \in A$ and $y_j \in N$.
The cocycle condition means that
$$
\sum a_i \otimes a_{ij} \otimes y_j = \sum a_i \otimes 1 \otimes x_i
$$
in $A \otimes_R A \otimes_R N$. We conclude two things from this.
First, by applying $\sigma$ to the first $A$ we conclude that
$\sum \sigma(a_i) \varphi(x_i \otimes 1) = \sum \sigma(a_i) \otimes x_i$
which means that $\sum \sigma(a_i) x_i \in M$. Next, by applying
$\sigma$ to the middle $A$ and multiplying out we conclude that
$\sum_i a_i (\sum_j \sigma(a_{ij}) y_j) = \sum a_i x_i = n$. Hence
by the first conclusion we see that $A \otimes_R M \to N$ is
surjective. Finally, suppose that $m_i \in M$ and
$\sum a_i m_i = 0$. Then we see by applying $\varphi$ to
$\sum a_im_i \otimes 1$ that $\sum a_i \otimes m_i = 0$.
In other words $A \otimes_R M \to N$ is injective and we win.
\end{proof}

\begin{remark}
\label{remark-standard-covering}
Let $R$ be a ring. Let $f_1, \ldots, f_n\in R$ generate the
unit ideal. The ring $A = \prod_i R_{f_i}$ is a faithfully flat
$R$-algebra. We remark that the cosimplicial ring $(A/R)_\bullet$
has the following ring in degree $n$:
$$
\prod\nolimits_{i_0, \ldots, i_n} R_{f_{i_0}\ldots f_{i_n}}
$$
Hence the results above recover
Algebra, Lemmas \ref{algebra-lemma-standard-covering},
\ref{algebra-lemma-cover-module} and \ref{algebra-lemma-glue-modules}.
But the results above actually say more because of exactness
in higher degrees. Namely, it implies that Cech cohomology of quasi-coherent
sheaves on affines is trivial, see (insert future reference here).
\end{remark}

\begin{remark}
\label{remark-homotopy-equivalent-cosimplicial-algebras}
Let $R$ be a ring. Let $A_\bullet$ be a cosimplicial $R$-algebra.
In this setting a descent datum corresponds to an cosimplicial
$A_\bullet$-module $M_\bullet$ with the property that for
every $n, m \geq 0$ and every $\varphi : [n] \to [m]$ the
map $M(\varphi) : M_n \to M_m$ induces an isomorphism
$$
M_n \otimes_{A_n, A(\varphi)} A_m \longrightarrow M_m.
$$
Let us call such a cosimplicial module a {\it cartesian module}.
In this setting, the proof of Proposition \ref{proposition-descent-module}
can be split in the following steps
\begin{enumerate}
\item If $R \to R'$ is faithfully flat, $R \to A$ any ring map,
then descent data for $A/R$ are effective if
descent data for $(R' \otimes_R A)/R'$ are effective.
\item Let $A$ be an $R$-algebra. Descent data for $A/R$ correspond
to cartesian $(A/R)_\bullet$-modules.
\item If $R \to A$ has a section then $(A/R)_\bullet$ is homotopy
equivalent to $R$, the constant cosimplicial
$R$-algebra with value $R$.
\item If $A_\bullet \to B_\bullet$ is a homotopy equivalence of
cosimplicial $R$-algebras then the functor
$M_\bullet \mapsto M_\bullet \otimes_{A_\bullet} B_\bullet$
induces an equivalence of categories between cartesian
$A_\bullet$-modules and cartesian $B_\bullet$-modules.
\end{enumerate}
For (1) see Lemma \ref{lemma-descent-descends}.
Part (2) uses Lemma \ref{lemma-descent-datum-cosimplicial}.
Part (3) we have seen in the proof of Lemma \ref{lemma-with-section-exact}
(it relies on Simplicial,
Lemma \ref{simplicial-lemma-push-outs-simplicial-object-w-section}).
Moreover, part (4) is a triviality if you think about it right!
\end{remark}





\section{fpqc descent of quasi-coherent sheaves}
\label{section-fpqc-descent-quasi-coherent}

\noindent
The main application of flat descent for modules is
the corresponding descent statement for quasi-coherent
sheaves with respect to fpqc-coverings.

\begin{lemma}
\label{lemma-standard-fpqc-covering}
Let $S$ be an affine scheme.
Let $\mathcal{U} = \{f_i : U_i \to S\}_{i = 1, \ldots, n}$
be a standard fpqc covering of $S$, see
Topologies, Definition \ref{topologies-definition-fpqc-covering}.
Any descent datum on quasi-coherent sheaves
for $\mathcal{U} = \{U_i \to S\}$ is effective.
Moreover, the functor from the category of
quasi-coherent $\mathcal{O}_S$-modules to the category
of descent data with respect to $\mathcal{U}$ is fully faithful.
\end{lemma}

\begin{proof}
This is a restatement of Proposition \ref{proposition-descent-module}
in terms of schemes. First, note that a descent datum $\xi$
for quasi-coherent sheaves with respect to $\mathcal{U}$
is exactly the same as a descent datum $\xi'$ for quasi-coherent sheaves
with respect to the covering
$\mathcal{U}' = \{\coprod_{i = 1, \ldots, n} U_i \to S\}$.
Moreover, effectivity for $\xi$ is the same as effectivity for $\xi'$.
Hence we may assume $n = 1$, i.e., $\mathcal{U} = \{U \to S\}$
where $U$ and $S$ are affine. In this case descent data
correspond to descent data on modules with respect to the ring map
$$
\Gamma(S, \mathcal{O})
\longrightarrow
\Gamma(U, \mathcal{O}).
$$
Since $U \to S$ is surjective and flat, we see that this ring map
is faithfully flat. In other words,
Proposition \ref{proposition-descent-module} applies and we win.
\end{proof}

\begin{proposition}
\label{proposition-fpqc-descent-quasi-coherent}
Let $S$ be a scheme.
Let $\mathcal{U} = \{\varphi_i : U_i \to S\}$ be an fpqc covering, see
Topologies, Definition \ref{topologies-definition-fpqc-covering}.
Any descent datum on quasi-coherent sheaves
for $\mathcal{U} = \{U_i \to S\}$ is effective.
Moreover, the functor from the category of
quasi-coherent $\mathcal{O}_S$-modules to the category
of descent data with respect to $\mathcal{U}$ is fully faithful.
\end{proposition}

\begin{proof}
Let $S = \bigcup_{j \in J} V_j$ be an affine open covering.
For $j, j' \in J$ we denote $V_{jj'} = V_j \cap V_{j'}$ the intersection
(which need not be affine). For $V \subset S$ open we denote
$\mathcal{U}_V = \{V \times_S U_i \to V\}_{i \in I}$ which is a
fpqc-covering (Topologies, Lemma \ref{topologies-lemma-fpqc}).
By definition of an fpqc covering, we can find for each $j \in J$ a
finite set $K_j$, a map $\underline{i} : K_j \to I$,
affine opens $U_{\underline{i}(k), k} \subset U_{\underline{i}(k)}$,
$k \in K_j$ such that
$\mathcal{V}_j = \{U_{\underline{i}(k), k} \to V_j\}_{k \in K_j}$ is
a standard fpqc covering of $V_j$. And of course, $\mathcal{V}_j$
is a refinement of $\mathcal{U}_{V_j}$. Picture
$$
\xymatrix{
\mathcal{V}_j \ar[r] \ar@{~>}[d] &
\mathcal{U}_{V_j} \ar[r] \ar@{~>}[d] &
\mathcal{U} \ar@{~>}[d] \\
V_j \ar@{=}[r] & V_j \ar[r] & S
}
$$
where the top horizontal arrows are morphisms of families of
morphisms with fixed target (see
Sites, Definition \ref{sites-definition-morphism-coverings}).

\medskip\noindent
To prove the proposition you show successively the
faithfulness, fullyness, and essential surjectivity of the
functor from quasi-coherent sheaves to descent data.

\medskip\noindent
Faithfulness. Let $\mathcal{F}$, $\mathcal{G}$ be quasi-coherent
sheaves on $S$ and let $a, b : \mathcal{F} \to \mathcal{G}$ be
homomorphisms of $\mathcal{O}_S$-modules.
Suppose $\varphi_i^*(a) = \varphi^*(b)$ for all $i$.
Pick $s \in S$. Then $s = \varphi_i(u)$ for some $i \in I$ and
$u \in U_i$. Since $\mathcal{O}_{S, s} \to \mathcal{O}_{U_i, u}$
is flat, hence faithfully flat
(Algebra, Lemma \ref{algebra-lemma-local-flat-ff}) we see
that $a_s = b_s : \mathcal{F}_s \to \mathcal{G}_s$. Hence $a = b$.

\medskip\noindent
Fully faithfulness. Let $\mathcal{F}$, $\mathcal{G}$ be quasi-coherent
sheaves on $S$ and let
$a_i : \varphi_i^*\mathcal{F} \to \varphi_i^*\mathcal{G}$ be
homomorphisms of $\mathcal{O}_{U_i}$-modules such that
$\text{pr}_0^*a_i = \text{pr}_1^*a_j$ on $U_i \times_U U_j$.
We can pull back these morphisms to get morphisms
$$
a_k :
\mathcal{F}|_{U_{\underline{i}(k), k}}
\longrightarrow
\mathcal{G}|_{U_{\underline{i}(k), k}}
$$
$k \in K_j$ with notation as above. Moreover,
Lemma \ref{lemma-refine-descent-datum} assures us
that these define a morphism between (canonical) descent data on
$\mathcal{V}_j$. Hence, by
Lemma \ref{lemma-standard-fpqc-covering}, we get correspondingly
unique morphisms $a_j : \mathcal{F}|_{V_j} \to \mathcal{G}|_{V_j}$.
To see that $a_j|_{V_{jj'}} = a_{j'}|_{V_{jj'}}$ we use that
both $a_j$ and $a_{j'}$ agree with the pullback of the morphism
$(a_i)_{i \in I}$ of (canonical) descent data to any covering
refining both $\mathcal{V}_{j, V_{jj'}}$ and
$\mathcal{V}_{j', V_{jj'}}$, and using the faithfullness already
shown. For example the covering
$\mathcal{V}_{jj'} =
\{V_k \times_S V_{k'} \to V_{jj'}\}_{k \in K_j, k' \in K_{j'}}$
will do.

\medskip\noindent
Essential surjectivity. Let $\xi = (\mathcal{F}_i, \varphi_{ii'})$
be a descent datum for quasi-coherent sheaves relative to the covering
$\mathcal{U}$. Pull back this descent datum to get descent data
$\xi_j$ for quasi-coherent sheaves relative to the coverings
$\mathcal{V}_j$ of $V_j$. By Lemma \ref{lemma-standard-fpqc-covering}
once again there exist
quasi-coherent sheaves $\mathcal{F}_j$ on $V_j$ whose associated
canonical descent datum is isomorphic to $\xi_j$. By fully faithfulness
(proved above) we see there are isomorphisms
$$
\phi_{jj'} :
\mathcal{F}_j|_{V_{jj'}}
\longrightarrow
\mathcal{F}_{j'}|_{V_{jj'}}
$$
corresponding to the isomorphism of descent data between the pull back
of $\xi_j$ and $\xi_{j'}$ to $\mathcal{V}_{jj'}$. To see that these
maps $\phi_{jj'}$ satisfy the cocycle condition we use faithfullness
(proved above) over the triple intersections $V_{jj'j''}$. Hence, by
Lemma \ref{lemma-zariski-descent-effective}
we see that the sheaves $\mathcal{F}_j$
glue to a quasi-coherent sheaf $\mathcal{F}$ as desired.
We still have to verify that the canonical descent datum relative to
$\mathcal{U}$ associated to $\mathcal{F}$ is isomorphic to the descent
datum we started out with. This verification is omitted.
\end{proof}





\section{fpqc coverings are families of universally effective epimorphisms}
\label{section-fpqc-universal-effective-epimorphisms}

\noindent
We apply the material above to prove an interesting result, namely
Lemma \ref{lemma-fpqc-universal-effective-epimorphisms}.
By Sites, Section \ref{sites-section-representable-sheaves}
this lemma implies that the representable
presheaves on any of the sites $(\textit{Sch}/S)_\tau$ are sheaves for
$\tau \in \{Zarski, fppf, etale, smooth, syntomic\}$. First
we prove a helper lemma.

\begin{lemma}
\label{lemma-equiv-fibre-product}
For a scheme $X$ denote $|X|$ the underlying set.
Let $f : X \to S$ be a morphism of schemes.
Then 
$$
|X \times_S X| \to |X| \times_{|S|} |X|
$$
is surjective.
\end{lemma}

\begin{proof}
Follows immediately from the description of points on the
fibre product in Schemes, Lemma \ref{schemes-lemma-points-fibre-product}.
\end{proof}

\begin{lemma}
\label{lemma-fpqc-universal-effective-epimorphisms}
Let $T$ be a scheme.
Let $\{T_i \to T\}$ be an fpqc covering, see
Topologies, Definition \ref{topologies-definition-fpqc-covering}.
Then $\{T_i \to T\}$ is a family of universal
effective epimorphisms, see
Sites, Definition \ref{sites-definition-universal-effective-epimorphisms}.
\end{lemma}

\begin{proof}
Let $S$ be a scheme. We have to show the following:
Given morphisms $\varphi_i : T_i \to S$
such that $\varphi_i|_{T_i\times_T T_j} = \varphi_j|_{T_i \times_T T_j}$
there exists a unique morphism $T \to S$ which restricts
to $\varphi_i$ on each $T_i$.
In other words, we have to show that the functor
$h_S = \text{Mor}_{\textit{Sch}}( - , S)$ satisfies
the sheaf property for the fpqc topology.

\medskip\noindent
Thus Topologies, Lemma \ref{topologies-lemma-sheaf-property-fpqc}
reduces us to the case of a Zariski covering and a standard fpqc
covering of affines.
The case of a Zariski covering follows from
Schemes, Lemma \ref{schemes-lemma-glue}.

\medskip\noindent
Suppose that $R \to A$ is a faithfully flat ring map.
Denote $\pi : \text{Spec}(A) \to \text{Spec}(R)$ the
corresponding morphism of schemes. It is surjective and flat.
Let $f : \text{Spec}(A) \to S$ be a morphism
such that $f \circ \text{pr}_1 = f \circ \text{pr}_2$
as maps $\text{Spec}(A \otimes_R A) \to S$.
By Lemma \ref{lemma-equiv-fibre-product} we see that
as a map on the underlying
sets $f$ is of the form $f = g \circ \pi$ for some
(set theoretic) map $g : \text{Spec}(R) \to S$.
By Morphisms, Lemma \ref{morphisms-lemma-fpqc-quotient-topology}
and the fact that $f$ is continuous we see that $g$
is continuous.

\medskip\noindent
Pick $x \in \text{Spec}(R)$.
Choose $U \subset S$ affine open containing $g(x)$.
Say $U = \text{Spec}(B)$.
By the above we may choose an $r \in R$ such that
$x \in D(r) \subset g^{-1}(U)$.
The restriction of $f$ to $\pi^{-1}(D(r))$ into $U$
corresponds to a ring map $B \to A_r$. The two induced
ring maps $B \to A_r \otimes_{R_r} A_r = (A \otimes_R A)_r$ are equal
by assumption on $f$.
Note that $R_r \to A_r$ is faithfully flat.
By Lemma \ref{lemma-ff-exact} the equalizer of
the two arrows $A_r \to A_r \otimes_{R_r} A_r$ is $R_r$.
We conclude that $B \to A_r$ factors uniquely through a map $B \to R_r$.
This map in turn gives a morphism of schemes $D(r) \to U \to S$,
see Schemes, Lemma \ref{schemes-lemma-morphism-into-affine}.

\medskip\noindent
What have we proved sofar? We have shown that for any prime
$\mathfrak p \subset R$, there exists a standard affine open
$D(r) \subset \text{Spec}(R)$ such that the morphism
$f|_{\pi^{-1}(D(r))} : \pi^{-1}(D(r)) \to S$ factors uniquely
though some morphism of schemes $D(r) \to S$. We omit the
verification that these morphisms glue to the desired
morphism $\text{Spec}(R) \to S$.
\end{proof}





\section{Another application}
\label{section-another-application}

\noindent
Another application of flat descend for modules is the following
amusing and useful result. There is an algebraic version and a
scheme theoretic version. (The ``Noetherian'' reader should
consult Lemma \ref{lemma-finite-type-local-source-fppf-algebra}
instead of the next lemma.)

\begin{lemma}
\label{lemma-flat-finitely-presented-permanence-algebra}
Let $R \to A \to B$ be ring maps.
Assume $R \to B$ is of finite presentation and
$A \to B$ faithfully flat and of finite presentation.
Then $R \to A$ is of finite presentation.
\end{lemma}

\begin{proof}
Consider the algebra $C = B \otimes_A B$ together with the
pair of maps $p, q : B \to C$ given by $p(b) = b \otimes 1$
and $q(b) = 1 \otimes b$. Of course the two compositions
$A \to B \to C$ are the same. Note that as
$p : B \to C$ is flat and of finite presentation (base change of
$A \to B$), the ring map $R \to C$ is of finite presentation
(as the composite of $R \to B \to C$).

\medskip\noindent
We are going to use the criterion
Algebra, Lemma \ref{algebra-lemma-characterize-finite-presentation}
to show that $R \to A$ is of finite presentation.
Let $S$ be any $R$-algebra, and suppose that
$S = \text{colim}_{\lambda \in \Lambda} S_\lambda$ is written
as a directed colimit of $R$-algebras.
Let $A \to S$ be an $R$-algebra homomorphism. We have to
show that $A \to S$ factors through one of the $S_\lambda$.
Consider the rings $B' = S \otimes_A B$ and
$C' = S \otimes_A C = B' \otimes_S B'$.
As $B$ is faithfully flat of finite presentation over $A$, also $B'$
is faithfully flat of finite presentation over $S$.
By Algebra, Lemma \ref{algebra-lemma-flat-finite-presentation-limit-flat}
part (2) applied to the pair $(S \to B', B')$ and the system $(S_\lambda)$
there exists a $\lambda_0 \in \Lambda$
and a flat, finitely presented $S_{\lambda_0}$-algebra
$B_{\lambda_0}$ such that $B' = S \otimes_{S_{\lambda_0}} B_{\lambda_0}$.
For $\lambda \geq \lambda_0$ set
$B_\lambda = S_\lambda \otimes_{S_{\lambda_0}} B_{\lambda_0}$ and
$C_\lambda = B_\lambda \otimes_{S_\lambda} B_\lambda$.

\medskip\noindent
We interupt the flow of the argument to show that $S_\lambda \to B_\lambda$
is faithfully flat for $\lambda$ large enough. (This should really
be a separate lemma somewhere else, maybe in the chapter on limits.)
Since $\text{Spec}(B_{\lambda_0}) \to \text{Spec}(S_{\lambda_0})$ is
flat and of finite presentation it is open (see Morphisms,
Lemma \ref{morphisms-lemma-fppf-open}).
Let $I \subset S_{\lambda_0}$ be an ideal such that
$V(I) \subset \text{Spec}(S_{\lambda_0})$ is the complement
of the image. Note that formation of the image commutes
with base change. Hence, since $\text{Spec}(B') \to \text{Spec}(S)$
is surjective, and $B' = B_{\lambda_0} \otimes_{S_{\lambda_0}} S$
we see that $IS = S$. Thus for some $\lambda \geq \lambda_0$ we
have $IS_{\lambda} = S_\lambda$. For this and all greater
$\lambda$ the morphism
$\text{Spec}(B_\lambda) \to \text{Spec}(S_\lambda)$ is surjective.

\medskip\noindent
By analogy with the notation in the first paragraph of the proof denote
$p_\lambda, q_\lambda : B_\lambda \to C_\lambda$ the two canonical maps.
Then $B' = \text{colim}_{\lambda \geq \lambda_0} B_\lambda$
and $C' = \text{colim}_{\lambda \geq \lambda_0} C_\lambda$.
Since $B$ and $C$ are finitely presented over $R$ there exist
(by Algebra, Lemma \ref{algebra-lemma-characterize-finite-presentation}
applied several times)
a $\lambda \geq \lambda_0$ and an $R$-algebra maps
$B \to B_\lambda$, $C \to C_\lambda$ such that
the diagram
$$
\xymatrix{
C \ar[rr] & &
C_\lambda \\
B \ar[rr]
\ar@<1ex>[u]^-p
\ar@<-1ex>[u]_-q
& &
B_\lambda
\ar@<1ex>[u]^-{p_\lambda}
\ar@<-1ex>[u]_-{q_\lambda}
}
$$
is commutative. OK, and this means that $A \to B \to B_\lambda$
maps into the equalizer of $p_\lambda$ and $q_\lambda$. By
By Lemma \ref{lemma-ff-exact} we
see that $S_\lambda$ is the equalizer of $p_\lambda$ and $q_\lambda$.
Thus we get the desired ring map $A \to S_\lambda$ and we win.
\end{proof}

\noindent
Here is an easier version of this dealing with the property
of being of finite type.

\begin{lemma}
\label{lemma-finite-type-local-source-fppf-algebra}
Let $R \to A \to B$ be ring maps.
Assume $R \to B$ is of finite type and
$A \to B$ faithfully flat and of finite presentation.
Then $R \to A$ is of finite type.
\end{lemma}

\begin{proof}
By
Algebra, Lemma \ref{algebra-lemma-descend-faithfully-flat-finite-presentation}
there exists a commtutative diagram
$$
\xymatrix{
R \ar[r] \ar@{=}[d] &
A_0 \ar[d] \ar[r] &
B_0 \ar[d] \\
R \ar[r] & A \ar[r] & B
}
$$
with $R \to A_0$ of finite presentation,
$A_0 \to B_0$ faithfully flat of finite presentation
and $B = A \otimes_{A_0} B_0$. Since $R \to B$ is of finite
type by assumption, we may add some elements to $A_0$ and assume
that the map $B_0 \to B$ is surjective!
In this case, since $A_0 \to B_0$ is faithfully flat, we see
that as
$$
(A_0 \to A) \otimes_{A_0} B_0 \cong (B_0 \to B)
$$
is surjective, also $A_0 \to A$ is surjective. Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-flat-finitely-presented-permanence}
Let
$$
\xymatrix{
X \ar[rr]_f \ar[rd]_p & &
Y \ar[dl]^q \\
& S
}
$$
be a commutative diagram of morphisms of schemes. Assume that $f$ is 
surjective, flat and locally of finite presentation and assume
that $p$ is locally of finite presentation (resp.\ locally of finite type).
Then $q$ is locally of finite presentation (resp.\ locally of finite type).
\end{lemma}

\begin{proof}
The problem is local on $S$ and $Y$. Hence we may assume that
$S$ and $Y$ are affine. Since $f$ is flat and locally of finite
presentation, we see that $f$ is open
(Morphisms, Lemma \ref{morphisms-lemma-fppf-open}).
Hence, since $Y$ is quasi-compact, there exist finitely many affine opens
$X_i \subset X$ such that $Y = \bigcup f(X_i)$.
Clearly we may replace $X$ by $\coprod X_i$, and hence we
may assume $X$ is affine as well.
In this case the lemma is equivalent to
Lemma \ref{lemma-flat-finitely-presented-permanence-algebra}
(resp. Lemma \ref{lemma-finite-type-local-source-fppf-algebra})
above.
\end{proof}

\noindent
We use this to improve some of the results on morphisms
obtained earlier.

\begin{lemma}
\label{lemma-syntomic-smooth-etale-permanence}
Let
$$
\xymatrix{
X \ar[rr]_f \ar[rd]_p & &
Y \ar[dl]^q \\
& S
}
$$
be a commutative diagram of morphisms of schemes. Assume that
\begin{enumerate}
\item $f$ is surjective, and syntomic (resp.\ smooth, resp.\ etale),
\item $p$ is syntomic (resp.\ smooth, resp.\ etale).
\end{enumerate}
Then $q$ is syntomic (resp.\ smooth, resp.\ etale).
\end{lemma}

\begin{proof}
Combine Morphisms, Lemmas
\ref{morphisms-lemma-syntomic-permanence}, 
\ref{morphisms-lemma-smooth-permanence}, and
\ref{morphisms-lemma-etale-permanence-two}
with Lemma \ref{lemma-flat-finitely-presented-permanence} above.
\end{proof}








\section{Descending properties of schemes}
\label{section-descending-properties}

\noindent
It often happens one can prove the members of a covering of a scheme
have a certain property. In many cases this
implies the scheme has the property too. We formalize
this in the following definition.

\begin{definition}
\label{definition-property-local}
Let $\mathcal{P}$ be a property of schemes. Let
$\tau \in \{Zariski,\linebreak[0] fpqc,\linebreak[0] fppf,\linebreak[0]
etale,\linebreak[0] smooth,\linebreak[0] syntomic\}$.
We say $\mathcal{P}$ is {\it local in the $\tau$-topology} if for any
$\tau$ covering $\{S_i \to S\}_{i \in I}$ (see
Topologies, Section \ref{topologies-section-procedure})
we have
$$
S \text{ has }\mathcal{P}
\Leftrightarrow
\text{each }S_i \text{ has }\mathcal{P}.
$$
\end{definition}

\noindent
To be sure, since isomorphisms are always coverings
we see (or require) that property $\mathcal{P}$ holds for $S$
if and only if it holds for any scheme $S'$ isomorphic to $S$.

\medskip\noindent
We have the following implications:
$\mathcal{P}$ is local in the fpqc topology
$\Rightarrow$
$\mathcal{P}$ is local in the fppf topology 
$\Rightarrow$
$\mathcal{P}$ is local in the syntomic topology 
$\Rightarrow$
$\mathcal{P}$ is local in the smooth topology 
$\Rightarrow$
$\mathcal{P}$ is local in the etale topology
$\Rightarrow$
$\mathcal{P}$ is local in the Zariski topology.
This follows from Topologies, Lemmas \ref{topologies-lemma-zariski-etale},
\ref{topologies-lemma-zariski-etale-fppf},
\ref{topologies-lemma-zariski-etale-smooth}, 
\ref{topologies-lemma-zariski-etale-smooth-syntomic}, and
\ref{topologies-lemma-zariski-etale-fppf-fpqc}.

\begin{lemma}
\label{lemma-descending-properties}
Let $\mathcal{P}$ be a property of schemes.
Let $\tau \in \{fpqc,\linebreak[0] fppf,\linebreak[0] etale,\linebreak[0]
smooth,\linebreak[0] syntomic\}$.
Assume that
\begin{enumerate}
\item the property is local in the Zariski topology,
\item for any morphism of affine schemes $S' \to S$
which is flat, flat of finite presentation,
etale, smooth or syntomic depending on whether $\tau$ is
fpqc, fppf, etale, smooth, or syntomic,
property $\mathcal{P}$ holds for $S'$ if property $\mathcal{P}$
holds for $S$, and
\item for any surjective morphism of affine schemes $S' \to S$
which is flat, flat of finite presentation,
etale, smooth or syntomic depending on whether $\tau$ is
fpqc, fppf, etale, smooth, or syntomic,
property $\mathcal{P}$ holds for $S$ if property $\mathcal{P}$
holds for $S'$.
\end{enumerate}
Then $\mathcal{P}$ is $\tau$ local on the base.
\end{lemma}

\begin{proof}
This follows almost immediately from the definition of
a $\tau$ covering, see
Topologies, Definition
\ref{topologies-definition-fpqc-covering}
\ref{topologies-definition-fppf-covering}
\ref{topologies-definition-etale-covering}
\ref{topologies-definition-smooth-covering}, or
\ref{topologies-definition-syntomic-covering}
and Topologies, Lemma
\ref{topologies-lemma-fpqc-affine},
\ref{topologies-lemma-fppf-affine},
\ref{topologies-lemma-etale-affine},
\ref{topologies-lemma-smooth-affine}, or
\ref{topologies-lemma-syntomic-affine}.
Details omitted.
\end{proof}

\begin{remark}
\label{remark-descending-properties-standard}
In Lemma \ref{lemma-descending-properties} above if
$\tau = smooth$ then in condition (3) we may assume that
the morphism is a (surjective) standard smooth morphism.
Similarly, when $\tau = syntomic$ or $\tau = etale$.
\end{remark}





\section{Descending properties of schemes in the fppf topology}
\label{section-descending-properties-fppf}

\noindent
In this section we find some properties of schemes which are local on the base
in the fppf topology.

\begin{lemma}
\label{lemma-Noetherian-local-fppf}
The property $\mathcal{P}(S) =$``$S$ is locally Noetherian'' is local
in the fppf topology.
\end{lemma}

\begin{proof}
We will use Lemma \ref{lemma-descending-properties}.
First we note that ``being locally Noetherian'' is local
in the Zariski topology. This is clear from the definition,
see Properties, Definition \ref{properties-definition-noetherian}.
Next, we show that if $S' \to S$ is a flat, finitely presented
morphism of affines and $S$ is locally Noetherian, then $S'$ is
locally Noetherian. This is
Morphisms, Lemma \ref{morphisms-lemma-finite-type-noetherian}.
Finally, we have to show that if $S' \to S$ is a surjective
flat, finitely presented morphism of affines and $S'$ is
locally Noetherian, then $S$ is locally Noetherian. This follows from
Algebra, Lemma \ref{algebra-lemma-descent-Noetherian}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}

\begin{lemma}
\label{lemma-Jacobson-local-fppf}
The property $\mathcal{P}(S) =$``$S$ is Jacobson'' is local
in the fppf topology.
\end{lemma}

\begin{proof}
We will use Lemma \ref{lemma-descending-properties}.
First we note that ``being Jacobson'' is local
in the Zariski topology. This is
Properties, Lemma \ref{properties-lemma-locally-jacobson}.
Next, we show that if $S' \to S$ is a flat, finitely presented
morphism of affines and $S$ is Jacobson, then $S'$ is
Jacobson. This is
Morphisms, Lemma \ref{morphisms-lemma-Jacobson-universally-Jacobson}.
Finally, we have to show that if $f : S' \to S$ is a surjective
flat, finitely presented morphism of affines and $S'$ is
Jacobson, then $S$ is Jacobson. Say $S = \text{Spec}(A)$ and
$S' = \text{Spec}(B)$ and $S' \to S$ given by $A \to B$.
Then $A \to B$ is finitely presented and faithfully flat.
Moreover, the ring $B$ is Jacobson, see
Properties, Lemma \ref{properties-lemma-locally-jacobson}.

\medskip\noindent
By Algebra, Lemma \ref{algebra-lemma-fppf-fpqf} there exists a diagram
$$
\xymatrix{
B \ar[rr] & & B' \\
& A \ar[ru] \ar[lu] &
}
$$
with $A \to B'$ finitely presented, faithfully flat and quasi-finite.
In particular, $B \to B'$ is finite type, and we see from
Algebra, Proposition \ref{algebra-proposition-Jacobson-permanence}
that $B'$ is Jacobson. Hence we may assume that $A \to B$ is quasi-finite
as well as faithfully flat and of finite presentation.

\medskip\noindent
Assume $A$ is not Jacobson to get a contradiction.
According to Algebra, Lemma \ref{algebra-lemma-characterize-jacobson}
there exists a nonmaximal prime $\mathfrak p \subset A$ and
an element $f \in A$, $f \not \in \mathfrak p$ such that
$V(\mathfrak p) \cap D(f) = \{\mathfrak p\}$.

\medskip\noindent
This leads to a contradiction as follows. First let
$\mathfrak p \subset \mathfrak m$ be a maximal ideal of $A$.
Pick a prime $\mathfrak m' \subset B$ lying over $\mathfrak m$
(exists because $A \to B$ is faithfully flat, see
Algebra, Lemma \ref{algebra-lemma-ff-rings}).
As $A \to B$ is flat, by going down see
Algebra, Lemma \ref{algebra-lemma-flat-going-down},
we can find a prime $\mathfrak q \subset \mathfrak m'$ lying over
$\mathfrak p$. In particular we see that $\mathfrak q$ is not
maximal. Hence according to
Algebra, Lemma \ref{algebra-lemma-characterize-jacobson} again
the set $V(\mathfrak q) \cap D(f)$ is infinite
(here we finally use that $B$ is Jacobson).
All points of $V(\mathfrak q) \cap D(f)$ map to
$V(\mathfrak p) \cap D(f) = \{\mathfrak p\}$. Hence the
fibre over $\mathfrak p$ is infinite. This contradicts the
fact that $A \to B$ is quasi-finite (see
Algebra, Lemma \ref{algebra-lemma-quasi-finite}
or more explicitly
Morphisms, Lemma \ref{morphisms-lemma-quasi-finite}).
Thus the lemma is proved.
\end{proof}





\section{Descending properties of schemes in the syntomic topology}
\label{section-descending-properties-syntomic}

\noindent
In this section we find some properties of schemes which are local on the base
in the syntomic topology.

\begin{lemma}
\label{lemma-Sk-local-syntomic}
The property $\mathcal{P}(S) =$``$S$ is locally Noetherian and $(S_k)$''
is local in the syntomic topology.
\end{lemma}

\begin{proof}
We will check (1), (2) and (3) of Lemma \ref{lemma-descending-properties}.
As a syntomic morphism is flat of finite presentation
(Morphisms, Lemmas \ref{morphisms-lemma-syntomic-flat}
and \ref{morphisms-lemma-syntomic-locally-finite-presentation})
we have already checked this for ``being locally Noetherian'' in the proof
of Lemma \ref{lemma-Noetherian-local-fppf}.
We will use this without further mention in the proof.
First we note that $\mathcal{P}$ is local in the Zariski topology.
This is clear from the definition,
see Coherent, Definition \ref{coherent-definition-depth}.
Next, we show that if $S' \to S$ is a syntomic morphism of affines
and $S$ has $\mathcal{P}$, then $S'$ has $\mathcal{P}$. This
is Algebra, Lemma \ref{algebra-lemma-Sk-goes-up}
(use Morphisms, Lemma \ref{morphisms-lemma-syntomic-characterize}
Definition \ref{algebra-definition-lci}
and Lemma \ref{algebra-lemma-lci-CM}).
Finally, we show that if $S' \to S$ is a surjective
syntomic morphism of affines and $S'$ has $\mathcal{P}$,
then $S$ has $\mathcal{P}$. This is
Algebra, Lemma \ref{algebra-lemma-descent-Sk}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}

\begin{lemma}
\label{lemma-CM-local-syntomic}
The property $\mathcal{P}(S) =$``$S$ is Cohen-Macaulay''
is local in the syntomic topology.
\end{lemma}

\begin{proof}
This is clear from Lemma \ref{lemma-Sk-local-syntomic}
above since a scheme is Cohen-Macaulay if and only if
it is locally Noetherian and $(S_k)$ for all $k \geq 0$, see
Coherent, Lemma \ref{coherent-lemma-scheme-CM-iff-all-Sk}.
\end{proof}


\section{Descending properties of schemes in the smooth topology}
\label{section-descending-properties-smooth}

\noindent
In this section we find some properties of schemes which are local on the base
in the smooth topology.

\begin{lemma}
\label{lemma-reduced-local-smooth}
The property $\mathcal{P}(S) =$``$S$ is reduced'' is local in the smooth
topology.
\end{lemma}

\begin{proof}
We will use Lemma \ref{lemma-descending-properties}.
First we note that ``being reduced'' is local
in the Zariski topology. This is clear from the definition,
see Schemes, Definition \ref{schemes-definition-reduced}.
Next, we show that if $S' \to S$ is a smooth morphism of affines
and $S$ is reduced, then $S'$ is reduced. This is
Algebra, Lemma \ref{algebra-lemma-reduced-goes-up}.
Finally, we show that if $S' \to S$ is a surjective
smooth morphism of affines
and $S'$ is reduced, then $S$ is reduced. This is
Algebra, Lemma \ref{algebra-lemma-descent-reduced}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}

\begin{lemma}
\label{lemma-normal-local-smooth}
The property $\mathcal{P}(S) =$``$S$ is normal'' is local in the smooth
topology.
\end{lemma}

\begin{proof}
We will use Lemma \ref{lemma-descending-properties}.
First we show ``being normal'' is local
in the Zariski topology. This is clear from the definition,
see Properties, Definition \ref{properties-definition-normal}.
Next, we show that if $S' \to S$ is a smooth morphism of affines
and $S$ is normal, then $S'$ is normal. This is
Algebra, Lemma \ref{algebra-lemma-normal-goes-up}.
Finally, we show that if $S' \to S$ is a surjective
smooth morphism of affines
and $S'$ is normal, then $S$ is normal. This is
Algebra, Lemma \ref{algebra-lemma-descent-normal}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}

\begin{lemma}
\label{lemma-Rk-local-smooth}
The property $\mathcal{P}(S) =$``$S$ is locally Noetherian and $(R_k)$''
is local in the smooth topology.
\end{lemma}

\begin{proof}
We will check (1), (2) and (3) of Lemma \ref{lemma-descending-properties}.
As a smooth morphism is flat of finite presentation
(Morphisms, Lemmas \ref{morphisms-lemma-smooth-flat}
and \ref{morphisms-lemma-smooth-locally-finite-presentation})
we have already checked this for ``being locally Noetherian'' in the proof
of Lemma \ref{lemma-Noetherian-local-fppf}.
We will use this without further mention in the proof.
First we note that $\mathcal{P}$ is local in the Zariski topology.
This is clear from the definition,
see Properties, Definition \ref{properties-definition-Rk}.
Next, we show that if $S' \to S$ is a smooth morphism of affines
and $S$ has $\mathcal{P}$, then $S'$ has $\mathcal{P}$. This
is Algebra, Lemmas \ref{algebra-lemma-Rk-goes-up}
(use Morphisms, Lemma \ref{morphisms-lemma-smooth-characterize},
Algebra, Lemmas \ref{algebra-lemma-base-change-smooth}
and \ref{algebra-lemma-characterize-smooth-over-field}).
Finally, we show that if $S' \to S$ is a surjective
smooth morphism of affines and $S'$ has $\mathcal{P}$,
then $S$ has $\mathcal{P}$. This is
Algebra, Lemma \ref{algebra-lemma-descent-Sk}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}

\begin{lemma}
\label{lemma-regular-local-smooth}
The property $\mathcal{P}(S) =$``$S$ is regular''
is local in the smooth topology.
\end{lemma}

\begin{proof}
This is clear from Lemma \ref{lemma-Rk-local-smooth}
above since a locally Noetherian scheme is regular if and only if
it is locally Noetherian and $(R_k)$ for all $k \geq 0$.
\end{proof}

\begin{lemma}
\label{lemma-Nagata-local-smooth}
The property $\mathcal{P}(S) =$``$S$ is Nagata''
is local in the smooth topology.
\end{lemma}

\begin{proof}
We will check (1), (2) and (3) of Lemma \ref{lemma-descending-properties}.
First we note that being Nagata is local in the Zariski topology.
This is Properties, Lemma \ref{properties-lemma-locally-nagata}.
Next, we show that if $S' \to S$ is a smooth morphism of affines
and $S$ is Nagata, then $S'$ is Nagata. This
is Morphisms, Lemma \ref{morphisms-lemma-finite-type-nagata}.
Finally, we show that if $S' \to S$ is a surjective
smooth morphism of affines and $S'$ is Nagata,
then $S$ is Nagata. This is
Algebra, Lemma \ref{algebra-lemma-descent-nagata}.
Thus (1), (2) and (3) of Lemma \ref{lemma-descending-properties} hold
and we win.
\end{proof}







\section{Descending properties of morphisms of schemes}
\label{section-descending-properties-morphisms}

\noindent
It often happens one can prove a morphism has a certain
property after a flat base change. In many cases this
implies the morphism has the property too. We formalize
this in the following definition.

\begin{definition}
\label{definition-property-morphisms-local}
Let $\mathcal{P}$ be a property of morphisms of schemes over a base.
Let $\tau \in \{Zariski, fpqc, fppf, etale, smooth, syntomic\}$.
We say $\mathcal{P}$ is {\it $\tau$ local on the base}, or
{\it $\tau$ local on the target}, or
{\it local on the base for the $\tau$-topology} if for any
$\tau$ covering $\{S_i \to S\}_{i \in I}$ (see
Topologies, Section \ref{topologies-section-procedure})
and any morphism of schemes $f : X \to Y$ over $S$ we 
have
$$
f \text{ has }\mathcal{P}
\Leftrightarrow
\text{each }S_i \times_S X \to S_i \times_S Y\text{ has }\mathcal{P}.
$$
\end{definition}

\noindent
To be sure, since isomorphisms are always coverings
we see (or require) that property $\mathcal{P}$ holds for $X \to Y$
if and only if it holds for any arrow $X' \to Y'$ isomorphic to $X \to Y$.

\begin{lemma}
\label{lemma-descending-properties-morphisms}
Let $\mathcal{P}$ be a property of morphisms of schemes over a base.
Let $\tau \in \{fpqc, fppf, etale, smooth, syntomic\}$.
Assume that
\begin{enumerate}
\item the property is preserved under
flat, flat of finite presentation, etale, smooth or syntomic base change
depending on whether $\tau$ is fpqc, fppf, etale, smooth, or syntomic
(compare with
Schemes, Definition \ref{schemes-definition-preserved-by-base-change}),
\item the property is Zariski local on the base.
\item for any surjective morphism of affine schemes $S' \to S$
which is flat, flat of finite presentation,
etale, smooth or syntomic depending on whether $\tau$ is
fpqc, fppf, etale, smooth, or syntomic,
and any morphism of schemes $f : X \to S$ property
$\mathcal{P}$ holds for $f$ if property $\mathcal{P}$
holds for the base change $f' : X' = S' \times_S X \to S'$.
\end{enumerate}
Then $\mathcal{P}$ is $\tau$ local on the base.
\end{lemma}

\begin{proof}
This follows almost immediately from the definition of
a $\tau$ covering, see
Topologies, Definition
\ref{topologies-definition-fpqc-covering}
\ref{topologies-definition-fppf-covering}
\ref{topologies-definition-etale-covering}
\ref{topologies-definition-smooth-covering}, or
\ref{topologies-definition-syntomic-covering}
and Topologies, Lemma
\ref{topologies-lemma-fpqc-affine},
\ref{topologies-lemma-fppf-affine},
\ref{topologies-lemma-etale-affine},
\ref{topologies-lemma-smooth-affine}, or
\ref{topologies-lemma-syntomic-affine}.
Details omitted.
\end{proof}

\begin{remark}
\label{remark-descending-properties-morphisms-standard}
(This is a repeat of Remark \ref{remark-descending-properties-standard} above.)
In Lemma \ref{lemma-descending-properties-morphisms} above if
$\tau = smooth$ then in condition (3) we may assume that
the morphism is a (surjective) standard smooth morphism.
Similarly, when $\tau = syntomic$ or $\tau = etale$.
\end{remark}




\section{Descending properties of morphisms in the fpqc topology}
\label{section-descending-properties-morphisms-fpqc}

\noindent
In this section we find a large number of properties
of morphisms of schemes which are local on the base
in the fpqc topology.

\begin{lemma}
\label{lemma-descending-property-quasi-compact}
The property $\mathcal{P}(f) =$``$f$ is quasi-compact''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A base change of a quasi-compact morphism is quasi-compact, see
Schemes, Lemma \ref{schemes-lemma-quasi-compact-preserved-base-change}.
Being quasi-compact is Zariski local on the base, see
Schemes, Lemma \ref{schemes-lemma-quasi-compact-affine}.
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is quasi-compact. Then $X'$ is quasi-compact,
and $X' \to X$ is surjective. Hence $X$ is quasi-compact.
This implies that $f$ is quasi-compact.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-quasi-separated}
The property $\mathcal{P}(f) =$``$f$ is quasi-separated''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Any base change of a quasi-separated morphism is quasi-separated, see
Schemes, Lemma \ref{schemes-lemma-separated-permanence}.
Being quasi-separated is Zariski local on the base (from the
definition or by
Schemes, Lemma \ref{schemes-lemma-characterize-quasi-separated}).
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is quasi-separated. This means that
$\Delta' : X' \to X'\times_{S'} X'$ is quasi-compact.
Note that $\Delta'$ is the base change of $\Delta : X \to X \times_S X$
via $S' \to S$. By Lemma \ref{lemma-descending-property-quasi-compact}
this implies $\Delta$ is quasi-compact, and hence $f$ is
quasi-separated.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-universally-closed}
The property $\mathcal{P}(f) =$``$f$ is universally closed''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A base change of a universally closed morphism is universally closed
by definition.
Being universally closed is Zariski local on the base (from the
definition or by
Schemes, Lemma \ref{morphisms-lemma-universally-closed-local-on-the-base}).
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is universally closed. Let $T \to S$ be any morphism.
Consider the diagram
$$
\xymatrix{
X' \ar[d] &
S' \times_S T \times_S X \ar[d] \ar[r] \ar[l] &
T \times_S X \ar[d] \\
S' &
S' \times_S T \ar[r] \ar[l] &
T
}
$$
in which both squares are cartesian.
Thus the assumption implies that the middle vertical
arrow is closed. The right horizontal arrows are flat, quasi-compact
and surjective (as base changes of $S' \to S$).
Hence a subset of $T$ is closed if and only if its inverse
image in $S' \times_S T$ is closed, see Morphisms,
Lemma \ref{morphisms-lemma-fpqc-quotient-topology}.
An easy diagram chase shows that the right vertical
arrow is closed too, and we conclude $X \to S$ is
universally closed.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-universally-open}
The property $\mathcal{P}(f) =$``$f$ is universally open''
is fpqc local on the base.
\end{lemma}

\begin{proof}
The proof is the same as the proof of
Lemma \ref{lemma-descending-property-universally-closed}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-separated}
The property $\mathcal{P}(f) =$``$f$ is separated''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A base change of a separated morphism is separated, see
Schemes, Lemma \ref{schemes-lemma-separated-permanence}.
Being separated is Zariski local on the base (from the
definition or by
Schemes, Lemma \ref{schemes-lemma-characterize-separated}).
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is separated. This means that
$\Delta' : X' \to X'\times_{S'} X'$ is a closed immersion,
hence universally closed.
Note that $\Delta'$ is the base change of $\Delta : X \to X \times_S X$
via $S' \to S$. By Lemma \ref{lemma-descending-property-universally-closed}
this implies $\Delta$ is universally closed. Since it is
an immersion
(Schemes, Lemma \ref{schemes-lemma-diagonal-immersion})
we conclude $\Delta$ is a closed immersion.
Hence $f$ is separated.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-surjective}
The property $\mathcal{P}(f) =$``$f$ is surjective''
is fpqc local on the base.
\end{lemma}

\begin{proof}
This is clear.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-radicial}
The property $\mathcal{P}(f) =$``$f$ is radicial''
is fpqc local on the base.
(Recall ``radicial'' is the same as ``universally injective''.)
\end{lemma}

\begin{proof}
A base change of a radicial morphism is radicial, see
Morphisms, Lemma \ref{morphisms-lemma-radicial-universally-injective}.
Being radicial is Zariski local on the base; this is clear from
the definition.
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is radicial. Let $K$ be a field, and let
$a, b : \text{Spec}(K) \to X$ be two morphisms such that
$f \circ a = f \circ b$. As $S' \to S$ is surjective and
by the discussion in Schemes,
Section \ref{schemes-section-points} there exists a field
extension $K \subset K'$ and a morphism $\text{Spec}(K')
\to S'$ such that the following solid diagram commutes
$$
\xymatrix{
\text{Spec}(K') \ar[rrd] \ar@{-->}[rd]_{a', b'} \ar[dd] \\
 &
X' \ar[r] \ar[d] &
S' \ar[d] \\
\text{Spec}(K) \ar[r]^{a, b} &
X \ar[r] &
S
}
$$
As the square is cartesian we get the two dotted arrows $a'$, $b'$ making the
diagram commute. Since $X' \to S'$ is radicial we get $a' = b'$.
Clearly this forces $a = b$ (by the discussion in Schemes,
Section \ref{schemes-section-points}).
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-locally-finite-type}
The property $\mathcal{P}(f) =$``$f$ is locally of finite type''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Being locally of finite type is preserved under base change, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-finite-type}.
Being locally of finite type is Zariski local on the base, see
Morphisms, Lemma \ref{morphisms-lemma-locally-finite-type-characterize}.
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is locally of finite type.
Let $U \subset X$ be an affine open. Then $U' = S' \times_S U$
is affine and of finite type over $S'$. Write
$S = \text{Spec}(R)$,
$S' = \text{Spec}(R')$,
$U = \text{Spec}(A)$, and
$U' = \text{Spec}(A')$.
We know that $R \to R'$ is faithfully flat,
$A' = R' \otimes_R A$ and $R' \to A'$ is of finite type.
We have to show that $R \to A$ is of finite type.
This is the result of
Algebra, Lemma \ref{algebra-lemma-finite-type-descends}.
It follows that $f$ is locally of finite type.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-locally-finite-presentation}
The property $\mathcal{P}(f) =$``$f$ is locally of finite presentation''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Being locally of finite presentation is preserved under base change, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-finite-presentation}.
Being locally of finite type is Zariski local on the base, see Morphisms,
Lemma \ref{morphisms-lemma-locally-finite-presentation-characterize}.
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is locally of finite presentation.
Let $U \subset X$ be an affine open. Then $U' = S' \times_S U$
is affine and of finite type over $S'$. Write
$S = \text{Spec}(R)$,
$S' = \text{Spec}(R')$,
$U = \text{Spec}(A)$, and
$U' = \text{Spec}(A')$.
We know that $R \to R'$ is faithfully flat,
$A' = R' \otimes_R A$ and $R' \to A'$ is of finite presentation.
We have to show that $R \to A$ is of finite presentation.
This is the result of
Algebra, Lemma \ref{algebra-lemma-finite-presentation-descends}.
It follows that $f$ is locally of finite presentation.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-finite-type}
The property $\mathcal{P}(f) =$``$f$ is of finite type''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Combine Lemmas \ref{lemma-descending-property-quasi-compact}
and \ref{lemma-descending-property-locally-finite-type}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-finite-presentation}
The property $\mathcal{P}(f) =$``$f$ is of finite presentation''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Combine Lemmas \ref{lemma-descending-property-quasi-compact},
\ref{lemma-descending-property-quasi-separated} and
\ref{lemma-descending-property-locally-finite-presentation}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-proper}
The property $\mathcal{P}(f) =$``$f$ is proper''
is fpqc local on the base.
\end{lemma}

\begin{proof}
The lemma follows by combining
Lemmas \ref{lemma-descending-property-universally-closed},
\ref{lemma-descending-property-separated}
and \ref{lemma-descending-property-finite-type}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-flat}
The property $\mathcal{P}(f) =$``$f$ is flat''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Being flat is preserved under arbitrary base change, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-flat}.
Being flat is Zariski local on the base by definition.
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is flat.
Let $U \subset X$ be an affine open. Then $U' = S' \times_S U$
is affine and of finite type over $S'$. Write
$S = \text{Spec}(R)$,
$S' = \text{Spec}(R')$,
$U = \text{Spec}(A)$, and
$U' = \text{Spec}(A')$.
We know that $R \to R'$ is faithfully flat,
$A' = R' \otimes_R A$ and $R' \to A'$ is flat.
Goal: Show that $R \to A$ is flat.
This follows immediately from
Algebra, Lemma \ref{algebra-lemma-flatness-descends}.
Hence $f$ is flat.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-open-immersion}
The property $\mathcal{P}(f) =$``$f$ is an open immersion''
is fpqc local on the base.
\end{lemma}

\begin{proof}
The property of being an open immersion is stable under base change,
see Schemes, Lemma \ref{schemes-lemma-base-change-immersion}.
The property of being an open immersion is Zariski local on the base
(this is obvious).
Finally, let
$S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is an open immersion.
Then $f'$ is universally open, and radicial.
Hence we conclude that $f$ is universally open by
Lemma \ref{lemma-descending-property-universally-open}, and
radicial by Lemma \ref{lemma-descending-property-radicial}.
In particular $f(X) \subset S$ is open, and we may replace
$S$ by $f(S)$ and assume that $f$ is surjective.
This implies that $f'$ is an isomorphism and
we have to show that $f$ is an isomorphism also.
Since $f$ is radicial we see that $f$ is bijective.
Hence $f$ is a homeomorphism. 
Let $x \in X$ and choose $U \subset X$ an
affine open neighbourhood of $x$. Since $f(U) \subset S$
is open, and $S$ is affine we may choose a standard open
$D(g) \subset f(U)$ containing $f(x)$ where $g \in \Gamma(S, \mathcal{O}_S)$.
It is clear that $U \cap f^{-1}(D(g))$ is still affine and still an
open neighbourhood of $x$.
Replace $U$ by $U \cap f^{-1}(D(g))$ and write $V = D(g) \subset S$
and $V'$ the inverse image of $V$ in $S'$.
Note that $V'$ is a standard open of $S'$ as well and
in particular that $V'$ is affine.
Since $f'$ is an isomorphism we have $V' \times_V U \to V'$ is
an isomorphism. In terms of rings this means that
$$
\mathcal{O}(V')
\longrightarrow
\mathcal{O}(V') \otimes_{\mathcal{O}(V)} \mathcal{O}(U)
$$
is an isomorphism. Since $\mathcal{O}(V) \to \mathcal{O}(V')$
is faithfully flat this implies that $\mathcal{O}(V) \to \mathcal{O}(U)$
is an isomorphism. Hence $U \cong V$ and we see that $f$ is
an isomorphism.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-isomorphism}
The property $\mathcal{P}(f) =$``$f$ is an isomorphism''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Combine Lemmas \ref{lemma-descending-property-surjective}
and \ref{lemma-descending-property-open-immersion}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-affine}
The property $\mathcal{P}(f) =$``$f$ is affine''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A base change of an affine morphism is affine, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-affine}.
Being affine is Zariski local on the base, see
Morphisms, Lemma \ref{morphisms-lemma-characterize-affine}.
Finally, let
$g : S' \to S$ be a flat surjective morphism of affine schemes,
and let $f : X \to S$ be a morphism. Assume that the base change
$f' : X' \to S'$ is affine. In other words, $X'$ is affine, say
$X' = \text{Spec}(A')$. Also write $S = \text{Spec}(R)$
and $S' = \text{Spec}(R')$. We have to show that $X$ is affine.

\medskip\noindent
By Lemmas \ref{lemma-descending-property-quasi-compact}
and \ref{lemma-descending-property-separated} we see that
$X \to S$ is separated and quasi-compact. Thus
$f_*\mathcal{O}_X$ is a quasi-coherent sheaf of $\mathcal{O}_S$-algebras,
see Schemes, Lemma \ref{schemes-lemma-push-forward-quasi-coherent}.
Hence $f_*\mathcal{O}_X = \widetilde{A}$ for some $R$-algebra $A$.
In fact $A = \Gamma(X, \mathcal{O}_X)$ of course.
Also, by flat base change
(see for example
Coherent, Lemma \ref{coherent-lemma-flat-base-change-cohomology})
we have $g^*f_*\mathcal{O}_X = f'_*\mathcal{O}_{X'}$.
In other words, we have $A' = R' \otimes_R A$.
Consider the canonical morphism
$$
X \longrightarrow \text{Spec}(A)
$$
over $S$ from Schemes, Lemma \ref{schemes-lemma-morphism-into-affine}.
By the above the base change of this morphism to $S'$ is an isomorphism.
Hence it is an isomorphism by
Lemma \ref{lemma-descending-property-isomorphism}.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-closed-immersion}
The property $\mathcal{P}(f) =$``$f$ is a closed immersion''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Let $S$ be a scheme.
Let $f : X \to Y$ be a morphism of schemes over $S$.
Let $\{S_i \to S\}$ be an fpqc covering.
Assume that each $f_i : S_i \times_S X \to S_i \times_S Y$
is a closed immersion.
This implies that each $f_i$ is affine, see
Morphisms, Lemma \ref{morphisms-lemma-closed-immersion-affine}.
By Lemma \ref{lemma-descending-property-affine}
we conclude that $f$ is affine. It remains to show that
$\mathcal{O}_Y \to f_*\mathcal{O}_X$ is surjective.
For every $y \in Y$ there exists an $i$ and a point
$y_i \in S_i \times_S Y$ mapping to $y$.
By Coherent, Lemma \ref{coherent-lemma-flat-base-change-cohomology}
the sheaf $f_{i, *}(\mathcal{O}_{S_i \times_S X})$
is the pullback of $f_*\mathcal{O}_X$.
By assumption it is a quotient of $\mathcal{O}_{S_i \times_S Y}$.
Hence we see that
$$
\Big(
\mathcal{O}_{Y, y} \longrightarrow (f_*\mathcal{O}_X)_y
\Big)
\otimes_{\mathcal{O}_{Y, y}} \mathcal{O}_{S_i \times_S Y, y_i}
$$
is surjective. Since $\mathcal{O}_{S_i \times_S Y, y_i}$ is faithfully
flat over $\mathcal{O}_{Y, y}$ this implies the surjectivity
of $\mathcal{O}_{Y, y} \longrightarrow (f_*\mathcal{O}_X)_y$ as
desired.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-quasi-affine}
The property $\mathcal{P}(f) =$``$f$ is quasi-affine''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Let $S$ be a scheme.
Let $f : X \to Y$ be a morphism of schemes.
Let $\{g_i : S_i \to S\}$ be an fpqc covering.
Assume that each $f_i : S_i \times_S X \to S_i \times_S Y$
is quasi-affine.
This implies that each $f_i$ is quasi-compact and separated.
By Lemmas \ref{lemma-descending-property-quasi-compact}
and \ref{lemma-descending-property-separated}
this implies that $f$ is quasi-compact and separated.
Consider the sheaf of $\mathcal{O}_Y$-algebras
$\mathcal{A} = f_*\mathcal{O}_X$.
By Schemes, Lemma \ref{schemes-lemma-push-forward-quasi-coherent}
it is a quasi-coherent $\mathcal{O}_Y$-algebra.
Consider the canonical morphism
$$
j : X \longrightarrow \underline{\text{Spec}}_Y(\mathcal{A})
$$
see Constructions, Lemma \ref{constructions-lemma-canonical-morphism}.
By flat base change
(see for example
Coherent, Lemma \ref{coherent-lemma-flat-base-change-cohomology})
we have $h_i^*f_*\mathcal{O}_X = f_{i,*}\mathcal{O}_{X'}$
where $h_i : Y_i = S_i \times_S Y \to Y$ are the (flat) projection
maps. Hence the base change $j_i$ of $j$ by $h_i$ is the canonical
morphism of Constructions, Lemma \ref{constructions-lemma-canonical-morphism}
for the morphism $f_i$. By assumption and
Morphisms, Lemma \ref{morphisms-lemma-characterize-quasi-affine}
all of these
morphisms $j_i$ are quasi-compact open immersions. Hence, by
Lemmas \ref{lemma-descending-property-quasi-compact} and
\ref{lemma-descending-property-open-immersion} we
see that $j$ is a quasi-compact open immersion.
Hence by 
Morphisms, Lemma \ref{morphisms-lemma-characterize-quasi-affine}
again we conclude that $f$ is quasi-affine.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-quasi-compact-immersion}
The property $\mathcal{P}(f) =$``$f$ is a quasi-compact immersion''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Let $S$ be a scheme.
Let $f : X \to Y$ be a morphism of schemes over $S$.
Let $\{S_i \to S\}$ be an fpqc covering.
Write $X_i = S_i \times_S X$ and $Y_i = S_i \times_S Y$
and $f_i : X_i \to Y_i$ the base change of $f$. Also write
$q_i : Y_i \to Y$ the flat projection morphisms.
Assume each $f_i$ is a quasi-compact immersion.
By Schemes, Lemma \ref{schemes-lemma-immersions-monomorphisms}
each $f_i$ is separated.
By Lemmas \ref{lemma-descending-property-quasi-compact} and
\ref{lemma-descending-property-separated}
this implies that $f$ is quasi-compact and separated.
Let $X \to Z \to Y$ be the factorization of $f$ through its
scheme theoretic image. By
Morphisms, Lemma \ref{morphisms-lemma-quasi-compact-scheme-theoretic-image}
the closed subscheme $Z \subset Y$ is cut out by the
quasi-coherent sheaf of ideals
$\mathcal{I} = \text{Ker}(\mathcal{O}_Y \to f_*\mathcal{O}_X)$
as $f$ is quasi-compact. By flat base change
(see for example
Coherent, Lemma \ref{coherent-lemma-flat-base-change-cohomology};
here we use $f$ is separated)
we see $f_{i, *}\mathcal{O}_{X_i}$ is the pullback $q_i^*f_*\mathcal{O}_X$.
Hence $Y_i \times_Y Z$ is cut out by the
quasi-coherent sheaf of ideals $q_i^*\mathcal{I} = 
\text{Ker}(\mathcal{O}_{Y_i} \to f_{i, *}\mathcal{O}_{X_i})$.
By Morphisms, Lemma \ref{morphisms-lemma-quasi-compact-immersion}
the morphisms $X_i \to Y_i \times_Y Z$
are open immersions. Hence by
Lemma \ref{lemma-descending-property-open-immersion}
we see that $X \to Z$ is an open immersion and
hence $f$ is a immersion as desired
(we already saw it was quasi-compact).
\end{proof}

\begin{lemma}
\label{lemma-descending-property-integral}
The property $\mathcal{P}(f) =$``$f$ is integral''
is fpqc local on the base.
\end{lemma}

\begin{proof}
An integral morphism is the same thing as an affine,
universally closed morphism. See
Morphisms, Lemma \ref{morphisms-lemma-integral-universally-closed}.
Hence the lemma follows on combining
Lemmas \ref{lemma-descending-property-universally-closed}
and \ref{lemma-descending-property-affine}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-finite}
The property $\mathcal{P}(f) =$``$f$ is finite''
is fpqc local on the base.
\end{lemma}

\begin{proof}
An finite morphism is the same thing as an integral,
morphism which is locally of finite type. See
Morphisms, Lemma \ref{morphisms-lemma-finite-integral}.
Hence the lemma follows on combining
Lemmas \ref{lemma-descending-property-locally-finite-type}
and \ref{lemma-descending-property-integral}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-quasi-finite}
The properties
$\mathcal{P}(f) =$``$f$ is locally quasi-finite''
and
$\mathcal{P}(f) =$``$f$ is quasi-finite''
are fpqc local on the base.
\end{lemma}

\begin{proof}
Let $f : X \to S$ be a morphism of schemes, and let $\{S_i \to S\}$
be an fpqc covering such that each base change
$f_i : X_i \to S_i$ is locally quasi-finite.
We have already seen
(Lemma \ref{lemma-descending-property-locally-finite-type})
that ``locally of finite type'' is fpqc local
on the base, and hence we see that $f$ is locally of finite type.
Then it follows from
Morphisms, Lemma \ref{morphisms-lemma-base-change-quasi-finite}
that $f$ is locally quasi-finite. The quasi-finite case follows
as we have already seen that ``quasi-compact'' is fpqc local on the base
(Lemma \ref{lemma-descending-property-quasi-compact}).
\end{proof}

\begin{lemma}
\label{lemma-descending-property-relative-dimension-d}
The property $\mathcal{P}(f) =$``$f$ is locally of finite type
of relative dimension $d$'' is fpqc local on the base.
\end{lemma}

\begin{proof}
This follows immediately from the fact that being locally of finite
type is fpqc local on the base and
Morphisms, Lemma \ref{morphisms-lemma-dimension-fibre-after-base-change}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-syntomic}
The property $\mathcal{P}(f) =$``$f$ is syntomic''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A morphism is syntomic if and only if it is locally of finite presentation,
flat, and has locally complete intersections as fibres. We have seen
already that being flat and locally of finite presentation are
fpqc local on the base (Lemmas
\ref{lemma-descending-property-flat}, and
\ref{lemma-descending-property-locally-finite-presentation}).
Hence the result follows for syntomic from
Morphisms, Lemma \ref{morphisms-lemma-set-points-where-fibres-lci}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-smooth}
The property $\mathcal{P}(f) =$``$f$ is smooth''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A morphism is smooth if and only if it is locally of finite presentation,
flat, and has smooth fibres. We have seen
already that being flat and locally of finite presentation are
fpqc local on the base (Lemmas
\ref{lemma-descending-property-flat}, and
\ref{lemma-descending-property-locally-finite-presentation}).
Hence the result follows for syntomic from
Morphisms, Lemma \ref{morphisms-lemma-set-points-where-fibres-smooth}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-unramified}
The property $\mathcal{P}(f) =$``$f$ is unramified''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A morphism is unramified if and only if it is
locally of finite presentation and its diagonal morphism
is an open immersion (
Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramfied-morphism}
). We have seen
already that being locally of finite presentation
and an open immersion is
fpqc local on the base (Lemmas
\ref{lemma-descending-property-locally-finite-presentation}, and
\ref{lemma-descending-property-open-immersion}).
Hence the result follows formally.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-etale}
The property $\mathcal{P}(f) =$``$f$ is etale''
is fpqc local on the base.
\end{lemma}

\begin{proof}
A morphism is etale if and only if it flat and unramified.
See Morphisms, Lemma \ref{morphisms-lemma-flat-unramified-etale}.
We have seen already that being flat and unramified
are fpqc local on the base (Lemmas
\ref{lemma-descending-property-flat}, and
\ref{lemma-descending-property-unramified}).
Hence the result follows.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-finite-locally-free}
The property $\mathcal{P}(f) =$``$f$ is finite locally free''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Being finite locally free is equivalent to being
finite, flat and locally of finite presentation
(Morphisms, Lemma \ref{morphisms-lemma-finite-flat}).
Hence this follows from Lemmas
\ref{lemma-descending-property-finite},
\ref{lemma-descending-property-flat}, and
\ref{lemma-descending-property-locally-finite-presentation}.
\end{proof}

\begin{lemma}
\label{lemma-descending-property-monomorphism}
The property $\mathcal{P}(f) =$``$f$ is a monomorphism''
is fpqc local on the base.
\end{lemma}

\begin{proof}
Let $f : X \to S$ be a morphism of schemes.
Let $\{S_i \to S\}$ be an fpqc covering, and assume
each of the base changes $f_i : X_i \to S_i$ of $f$ is
a monomorphism. Let $a, b : T \to X$ be two morphisms
such that $f \circ a = f \circ b$. We have to show that $a = b$.
Since $f_i$ is a monomorphism we see that $a_i = b_i$, where
$a_i, b_i : S_i \times_S T \to X_i$ are
the base changes. In particular the compositions
$S_i \times_S T \to T \to X$ are equal.
Since $\coprod S_i \times_S T \to T$
is an epimorphism (see
e.g.\ Lemma \ref{lemma-fpqc-universal-effective-epimorphisms})
we conclude $a = b$.
\end{proof}






\section{Descending properties of morphisms in the fppf topology}
\label{section-descending-properties-morphisms-fppf}

\noindent
In this section we find some properties of morphisms of schemes
for which we could not (yet) show they are local on the base in
the fpqc topology which, however, are local on the base
in the fppf topology.

\begin{lemma}
\label{lemma-descending-fppf-property-immersion}
The property $\mathcal{P}(f) =$``$f$ is an immersion''
is fppf local on the base.
\end{lemma}

\begin{proof}
The property of being an immersion is stable under base change,
see Schemes, Lemma \ref{schemes-lemma-base-change-immersion}.
The property of being an immersion is Zariski local on the base.
Finally, let
$\pi : S' \to S$ be a surjective morphism of affine schemes,
which is flat and locally of finite presentation.
Note that $\pi : S' \to S$ is open by
Morphisms, Lemma \ref{morphisms-lemma-fppf-open}.
Let $f : X \to S$ be a morphism.
Assume that the base change $f' : X' \to S'$ is an immersion.
In particular we see that $f'(X') = \pi^{-1}(f(X))$ is locally closed.
Hence by Topology, Lemma \ref{topology-lemma-open-morphism-quotient-topology}
we see that $f(X) \subset S$
is locally closed. Let $Z \subset S$ be
the closed subset $Z = \overline{f(X)} \setminus f(X)$.
By Topology, Lemma \ref{topology-lemma-open-morphism-quotient-topology}
again we see that $f'(X')$ is closed in $S' \setminus Z'$.
Hence we may apply Lemma \ref{lemma-descending-property-closed-immersion}
to the fpqc covering $\{S' \setminus Z' \to S \setminus Z\}$
and conclude that $f : X \to S \setminus Z$ is a closed
immersion. In other words, $f$ is an immersion.
Therefore Lemma \ref{lemma-descending-properties-morphisms} applies and we win.
\end{proof}










\section{Application of fpqc descent of properties of morphisms}
\label{section-application-descending-properties-morphisms}

\noindent
The following lemma seems surprisingly hard to prove.

\begin{lemma}
\label{lemma-radicial-etale-open-immersion}
Let $f : X \to Y$ be a morphism of schemes.
The following are equivalent:
\begin{enumerate}
\item $f$ is an open immersion,
\item $f$ is radicial and etale.
\end{enumerate}
\end{lemma}

\begin{proof}
An open immersion is radicial since any base change of an open immersion
is an open immersion. Moreover, it is etale by
Morphisms, Lemma \ref{morphisms-lemma-open-immersion-etale}.
Conversely, assume $f$ is radicial and etale.
Since $f$ is etale it is open (because it is locally of finite presentation
and flat, see
Morphisms Lemmas \ref{morphisms-lemma-etale-locally-finite-presentation},
\ref{morphisms-lemma-etale-flat} and \ref{morphisms-lemma-fppf-open}).
Thus we may replace $Y$ by $f(X)$ and we may assume $f$ is
surjective.

\medskip\noindent
Assume that $f$ is radicial, surjective and etale.
Then $f$ is open and bijective hence a homeomorphism.
Hence $f$ is quasi-compact.
In particular, $f$ is a quasi-compact flat, surjective morphism.
In other words, $\{X \to Y\}$ is an fpqc covering of $Y$.
Consider the diagonal $\Delta : X \to X \times_Y X$.
This is an open immersion by
Morphisms, Lemma \ref{morphisms-lemma-diagonal-unramfied-morphism}
(and the fact that an etale morphism is unramified, see
Morphisms, Lemma \ref{morphisms-lemma-flat-unramified-etale}).
Since $X \to Y$ is radicial, we see that $\Delta$ is bijective
on points. Hence $\Delta$ is an isomorphism.
This implies that the base change of $f$ by $f$ is an
isomorphism. Hence we see $f$ is an isomorphism by
Lemma \ref{lemma-descending-property-isomorphism}.
\end{proof}




\section{Properties of morphisms which are local on the source}
\label{section-properties-morphisms-local-source}

\noindent
It often happens one can prove a morphism has a certain property
after precomposing with some other morphism. In many cases this
implies the morphism has the property too. We formalize
this in the following definition.

\begin{definition}
\label{definition-property-morphisms-local-source}
Let $\mathcal{P}$ be a property of morphisms of schemes.
Let $\tau \in \{Zariski,\linebreak[0] fpqc,\linebreak[0] fppf,\linebreak[0]
etale,\linebreak[0] smooth,\linebreak[0] syntomic\}$.
We say $\mathcal{P}$ is
{\it $\tau$ local on the source}, or
{\it local on the source for the $\tau$-topology} if for
any morphism of schemes $f : X \to Y$ over $S$, and any
$\tau$-covering $\{X_i \to X\}_{i \in I}$ we
have
$$
f \text{ has }\mathcal{P}
\Leftrightarrow
\text{each }X_i \to Y\text{ has }\mathcal{P}.
$$
\end{definition}

\noindent
To be sure, since isomorphisms are always coverings
we see (or require) that property $\mathcal{P}$ holds for $X \to Y$
if and only if it holds for any arrow $X' \to Y'$ isomorphic to $X \to Y$.

\begin{lemma}
\label{lemma-properties-morphisms-local-source}
Let $\mathcal{P}$ be a property of morphisms of schemes.
Let $\tau \in \{fpqc,\linebreak[0] fppf,\linebreak[0] etale,\linebreak[0]
smooth,\linebreak[0] syntomic\}$.
Assume that
\begin{enumerate}
\item the property is preserved under precomposing with
flat, flat locally of finite presentation, etale, smooth or syntomic morphisms
depending on whether $\tau$ is fpqc, fppf, etale, smooth, or syntomic,
\item the property is Zariski local on the source,
\item the property is Zariski local on the target,
\item for any morphism of affine schemes $X \to Y$, and
any surjective morphism of affine schemes $X' \to X$
which is flat, flat of finite presentation,
etale, smooth or syntomic depending on whether $\tau$ is
fpqc, fppf, etale, smooth, or syntomic, property
$\mathcal{P}$ holds for $f$ if property $\mathcal{P}$
holds for the composition $f' : X' \to Y$.
\end{enumerate}
Then $\mathcal{P}$ is $\tau$ local on the source.
\end{lemma}

\begin{proof}
This follows almost immediately from the definition of
a $\tau$ covering, see
Topologies, Definition
\ref{topologies-definition-fpqc-covering}
\ref{topologies-definition-fppf-covering}
\ref{topologies-definition-etale-covering}
\ref{topologies-definition-smooth-covering}, or
\ref{topologies-definition-syntomic-covering}
and Topologies, Lemma
\ref{topologies-lemma-fpqc-affine},
\ref{topologies-lemma-fppf-affine},
\ref{topologies-lemma-etale-affine},
\ref{topologies-lemma-smooth-affine}, or
\ref{topologies-lemma-syntomic-affine}.
Details omitted. (Hint: Use locality on the source and target to
reduce the verification of property $\mathcal{P}$ to the case of
a morphism between affines. Then apply (1) and (4).)
\end{proof}

\begin{remark}
\label{remark-properties-morphisms-local-source-standard}
(This is a repeat of
Remarks \ref{remark-descending-properties-standard}
and \ref{remark-descending-properties-morphisms-standard} above.)
In Lemma \ref{lemma-properties-morphisms-local-source} above if
$\tau = smooth$ then in condition (4) we may assume that
the morphism is a (surjective) standard smooth morphism.
Similarly, when $\tau = syntomic$ or $\tau = etale$.
\end{remark}



\section{Properties of morphisms fpqc local on the source}
\label{section-fpqc-local-source}

\noindent
Here are some properties of morphisms that are fpqc local on the source.

\begin{lemma}
\label{lemma-flat-fpqc-local-source}
The property $\mathcal{P}(f)=$``$f$ is flat'' is fpqc local on the source.
\end{lemma}

\begin{proof}
Since flatness is defined in terms of the maps of local rings
(Morphisms, Definition \ref{morphisms-definition-flat})
what has to be shown is the following
algebraic fact: Suppose $A \to B \to C$ are local homomorphisms of local
rings, and assume $A \to C$ and $B \to C$ are flat. Then $A \to B$ is
flat. Note that $B \to C$ is faithfully flat, see
Algebra, Lemma \ref{algebra-lemma-local-flat-ff}. Hence $A \to B$
is flat by Algebra, Lemma \ref{algebra-lemma-flat-permanence}.
Also see Morphisms, Lemma \ref{morphisms-lemma-flat-permanence}
for a direct proof.
\end{proof}

\begin{lemma}
\label{lemma-injective-local-rings-fpqc-local-source}
Then property
$\mathcal{P}(f : X \to Y)=$``for every $x \in X$ the map of local
rings $\mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is injective''
is fpqc local on the source.
\end{lemma}

\begin{proof}
Omitted. This is just a (probably misguided) attempt to be playful.
\end{proof}





\section{Properties of morphisms fppf local on the source}
\label{section-fppf-local-source}

\noindent
Here are some properties of morphisms that are fppf local on the source.

\begin{lemma}
\label{lemma-locally-finite-presentation-fppf-local-source}
The property $\mathcal{P}(f)=$``$f$ is locally of finite presentation''
is fppf local on the source.
\end{lemma}

\begin{proof}
Being locally of finite presentation is Zariski local on the source
and the target, see Morphisms,
Lemma \ref{morphisms-lemma-locally-finite-presentation-characterize}.
It is a property which is preserved under composition, see
Morphisms, Lemma \ref{morphisms-lemma-composition-finite-presentation}.
This proves
(1), (2) and (3) of Lemma \ref{lemma-properties-morphisms-local-source}.
The final condition (4) is
Lemma \ref{lemma-flat-finitely-presented-permanence-algebra}. Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-locally-finite-type-fppf-local-source}
The property $\mathcal{P}(f)=$``$f$ is locally of finite type''
is fppf local on the source.
\end{lemma}

\begin{proof}
Being locally of finite type is Zariski local on the source
and the target, see Morphisms,
Lemma \ref{morphisms-lemma-locally-finite-type-characterize}.
It is a property which is preserved under composition, see
Morphisms, Lemma \ref{morphisms-lemma-composition-finite-type}, and
a flat morphism locally of finite presentation is locally of finite type, see
Morphisms, Lemma \ref{morphisms-lemma-finite-presentation-finite-type}.
This proves
(1), (2) and (3) of Lemma \ref{lemma-properties-morphisms-local-source}.
The final condition (4) is
Lemma \ref{lemma-finite-type-local-source-fppf-algebra}. Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-open-fppf-local-source}
The property $\mathcal{P}(f)=$``$f$ is open''
is fppf local on the source.
\end{lemma}

\begin{proof}
Being an open morphism is clearly Zariski local on the source and the target.
It is a property which is preserved under composition, see
Morphisms, Lemma \ref{morphisms-lemma-composition-open}, and
a flat morphism of finite presentation is open, see
Morphisms, Lemma \ref{morphisms-lemma-fppf-open}
This proves
(1), (2) and (3) of Lemma \ref{lemma-properties-morphisms-local-source}.
The final condition (4) follows from
Morphisms, Lemma \ref{morphisms-lemma-fpqc-quotient-topology}.
Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-universally-open-fppf-local-source}
The property $\mathcal{P}(f)=$``$f$ is universally open''
is fppf local on the source.
\end{lemma}

\begin{proof}
Let $f : X \to Y$ be a morphism of schemes.
Let $\{X_i \to X\}_{i \in I}$ be an fppf covering.
Denote $f_i : X_i \to X$ the compositions.
We have to show that $f$ is universally open if and only if
each $f_i$ is universally open. If $f$ is universally open,
then also each $f_i$ is universally open since the maps
$X_i \to X$ are universally open and compositions
of universally open morphisms are universally open
(Morphisms, Lemmas \ref{morphisms-lemma-fppf-open}
and \ref{morphisms-lemma-composition-open}).
Conversely, assume each $f_i$ is universally open.
Let $Y' \to Y$ be a morphism of schemes.
Denote $X' = Y' \times_Y X$ and $X'_i = Y' \times_Y X_i$.
Note that $\{X_i' \to X'\}_{i \in I}$ is an fppf covering also.
The morphisms $f'_i : X_i' \to Y'$ are open by assumption.
Hence by the Lemma \ref{lemma-open-fppf-local-source}
above we conclude that $f' : X' \to Y'$ is open as desired.
\end{proof}



\section{Properties of morphisms syntomic local on the source}
\label{section-syntomic-local-source}

\noindent
Here are some properties of morphisms that are syntomic local on the source.

\begin{lemma}
\label{lemma-syntomic-syntomic-local-source}
The property $\mathcal{P}(f)=$``$f$ is syntomic''
is syntomic local on the source.
\end{lemma}

\begin{proof}
Combine Lemma \ref{lemma-properties-morphisms-local-source} with
Morphisms, Lemma \ref{morphisms-lemma-syntomic-characterize}
(local for Zariski on source and target),
Morphisms, Lemma \ref{morphisms-lemma-composition-syntomic} (pre-composing),
and Lemma \ref{lemma-syntomic-smooth-etale-permanence} (part (4)).
\end{proof}




\section{Properties of morphisms smooth local on the source}
\label{section-smooth-local-source}

\noindent
Here are some properties of morphisms that are smooth local on the source.

\begin{lemma}
\label{lemma-smooth-smooth-local-source}
The property $\mathcal{P}(f)=$``$f$ is smooth''
is smooth local on the source.
\end{lemma}

\begin{proof}
Combine Lemma \ref{lemma-properties-morphisms-local-source} with
Morphisms, Lemma \ref{morphisms-lemma-smooth-characterize}
(local for Zariski on source and target),
Morphisms, Lemma \ref{morphisms-lemma-composition-smooth} (pre-composing), and
Lemma \ref{lemma-syntomic-smooth-etale-permanence} (part (4)).
\end{proof}



\section{Properties of morphisms etale local on the source}
\label{section-etale-local-source}

\noindent
Here are some properties of morphisms that are etale local on the source.

\begin{lemma}
\label{lemma-etale-etale-local-source}
The property $\mathcal{P}(f)=$``$f$ is etale''
is etale local on the source.
\end{lemma}

\begin{proof}
Combine Lemma \ref{lemma-properties-morphisms-local-source} with
Morphisms, Lemma \ref{morphisms-lemma-etale-characterize}
(local for Zariski on source and target),
Morphisms, Lemma \ref{morphisms-lemma-composition-etale} (pre-composing), and
Lemma \ref{lemma-syntomic-smooth-etale-permanence} (part (4)).
\end{proof}







\section{Descent data for schemes over schemes}
\label{section-descent-datum}

\noindent
Most of the arguments in this section are formal relying only
on the definition of a descent datum. In Section \ref{section-simplicial}
we will examine the relationship with simplicial schemes which will
somewhat clarify the situation. Hopefully the reader will be convinced
by the end of Section \ref{section-simplicial} that the language of descent
is awkward and the setting of simplicial schemes is natural for the
questions being considered here.

\begin{definition}
\label{definition-descent-datum}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item Let $V \to X$ be a scheme over $X$.
A {\it descent datum for $V/X/S$} is an isomorphism
$\varphi : V \times_S X \to X \times_S V$ of schemes over
$X \times_S X$ satisfying the {\it cocycle condition}
that the diagram
$$
\xymatrix{
V \times_S X \times_S X \ar[rd]^{\varphi_{01}} \ar[rr]_{\varphi_{02}} &
&
X \times_S X \times_S V\\
&
X \times_S V \times_S X \ar[ru]^{\varphi_{12}}
}
$$
commutes (with obvious notation).
\item We also say that the pair $(V/X, \varphi)$ is
a {\it descent datum relative to $X \to S$}.
\item A {\it morphism $f : (V/X, \varphi) \to (V'/X, \varphi')$ of
descent data relative to $X \to S$} is a morphism
$f : V \to V'$ of schemes over $X$ such that
the diagram
$$
\xymatrix{
V \times_S X \ar[r]_{\varphi} \ar[d]_{f \times \text{id}_X} &
X \times_S V \ar[d]^{\text{id}_X \times f} \\
V' \times_S X \ar[r]^{\varphi'} & X \times_S V'
}
$$
commutes.
\end{enumerate}
\end{definition}

\noindent
There are all kinds of ``miraculous'' identities which arise out of the
definition above. For example the pullback of $\varphi$ via the diagonal
morphism $\Delta : X \to X \times_S X$ can be seen as a morphism
$\Delta^*\varphi : V \to V$.
This because $X \times_{\Delta, X \times_S X} (V \times_S X) = V$
and also $X \times_{\Delta, X \times_S X} (X \times_S V) = V$.
In fact, $\Delta^*\varphi$ is equal to the identity.
This is a good exercise if you are unfamiliar with this material.

\begin{remark}
\label{remark-easier}
Let $X \to S$ be a morphism of schemes. Let $(V/X, \varphi)$ be
a descent datum relative to $X \to S$. We may think of the
isomorphism $\varphi$ as an isomorphism
$$
(X \times_S X) \times_{\text{pr}_0, X} V
\longrightarrow
(X \times_S X) \times_{\text{pr}_1, X} V
$$
of schemes over $X \times_S X$. So loosely speaking one may
think of $\varphi : \text{pr}_0^*V \to \text{pr}_1^*V$.
The cocycle condition then says that
$\text{pr}_{02}^*\varphi =
\text{pr}_{12}^*\varphi \circ \text{pr}_{01}^*\varphi$.
In this way it is very similar to the case of a descent datum on
quasi-coherent sheaves.
\end{remark}

\noindent
Here is the definition in case you have a family of morphisms
with fixed target.

\begin{definition}
\label{definition-descent-datum-for-family-of-morphisms}
Let $S$ be a scheme.
Let $\{X_i \to S\}_{i \in I}$ be a family of morphisms with target $S$.
\begin{enumerate}
\item A {\it descent datum $(V_i, \varphi_{ij})$ relative to the
family $\{X_i \to S\}$} is given by a scheme $V_i$ over $X_i$
for each $i \in I$, an isomorphism
$\varphi_{ij} : V_i\times_S X_j \to X_i \times_S V_j$
of schemes over $X_i \times_S X_j$ for each pair $(i, j) \in I^2$
such that for every triple of indices $(i, j, k) \in I^3$
the diagram
$$
\xymatrix{
V_i \times_S X_j \times_S X_k
\ar[rd]^{\text{pr}_{01}^*\varphi_{ij}}
\ar[rr]_{\text{pr}_{02}^*\varphi_{ik}} &
&
X_i \times_S X_j \times_S V_k\\
&
X_i \times_S V_j \times_S X_k
\ar[ru]^{\text{pr}_{12}^*\varphi_{jk}}
}
$$
of schemes over $X_i \times_S X_j \times_S X_k$ commutes
(with obvious notation).
\item A {\it morphism
$\psi : (V_i, \varphi_{ij}) \to (V'_i, \varphi'_{ij})$
of descent data} is given by a family
$\psi = (\psi_i)_{i \in I}$ of morphisms of
$X_i$-schemes $\psi_i : V_i \to V'_i$ such that all the diagrams
$$
\xymatrix{
V_i \times_S X_j \ar[r]_{\varphi_{ij}} \ar[d]_{\psi_i \times \text{id}} &
X_i \times_S V_j \ar[d]^{\text{id} \times \psi_j} \\
V'_i \times_S X_j \ar[r]^{\varphi'_{ij}} & X_i \times_S V'_j
}
$$
commute.
\end{enumerate}
\end{definition}

\noindent
This is the notion that comes up naturally for example when the question arises
whether the fibred category of relative curves is a stack in the
fpqc topology (it isn't -- at least not if you stick to schemes).

\begin{remark}
\label{remark-easier-family}
Let $S$ be a scheme.
Let $\{X_i \to S\}_{i \in I}$ be a family of morphisms with target $S$.
Let $(V_i, \varphi_{ij})$ be a descent datum relative to
$\{X_i \to S\}$. We may think of the isomorphisms $\varphi_{ij}$
as isomorphisms
$$
(X_i \times_S X_j) \times_{\text{pr}_0, X_i} V_i
\longrightarrow
(X_i \times_S X_j) \times_{\text{pr}_1, X_j} V_j
$$
of schemes over $X_i \times_S X_j$. So loosely speaking one may
think of $\varphi_{ij}$ as an isomorphism
$\text{pr}_0^*V_i \to \text{pr}_1^*V_j$ over $X_i \times_S X_j$.
The cocycle condition then says that
$\text{pr}_{02}^*\varphi_{ik} =
\text{pr}_{12}^*\varphi_{jk} \circ \text{pr}_{01}^*\varphi_{ij}$.
In this way it is very similar to the case of a descent datum on
quasi-coherent sheaves.
\end{remark}

\noindent
The reason we will usually work with the version of a family consisting
of a single morphism is the following lemma.

\begin{lemma}
\label{lemma-family-is-one}
Let $S$ be a scheme.
Let $\{X_i \to S\}_{i \in I}$ be a family of morphisms with target $S$.
Set $X = \coprod_{i \in I} X_i$, and consider it as an $S$-scheme.
There is a canonical equivalence of categories
$$
\begin{matrix}
\text{category of descent data } \\
\text{relative to the family } \{X_i \to S\}_{i \in I}
\end{matrix}
\longrightarrow
\begin{matrix}
\text{ category of descent data} \\
\text{ relative to } X/S
\end{matrix}
$$
which maps $(V_i, \varphi_{ij})$ to $(V, \varphi)$ with
$V = \coprod_{i\in I} V_i$ and $\varphi = \coprod \varphi_{ij}$.
\end{lemma}

\begin{proof}
Observe that $X \times_S X = \coprod_{ij} X_i \times_S X_j$
and similarly for higher fibre products.
Giving a morphism $V \to X$ is exactly the same as
giving a family $V_i \to X_i$. And giving a descent datum
$\varphi$ is exactly the same as giving a family $\varphi_{ij}$.
\end{proof}

\begin{lemma}
\label{lemma-pullback}
(Pullback of descent data for schemes over schemes.)
\begin{enumerate}
\item Let
$$
\xymatrix{
X' \ar[r]_f \ar[d]_{a'} & X \ar[d]^a \\
S' \ar[r]^h & S
}
$$
be a commutative diagram of morphisms of schemes.
The construction
$$
(V \to X, \varphi) \longmapsto f^*(V \to X, \varphi) = (V' \to X', \varphi')
$$
where $V' = X' \times_X V$ and where
$\varphi'$ is defined as the composition
$$
\xymatrix{
V' \times_{S'} X' \ar@{=}[r] &
(X' \times_X V) \times_{S'} X' \ar@{=}[r] &
(X' \times_{S'} X') \times_{X \times_S X} (V \times_S X)
\ar[d]^{\text{id} \times \varphi} \\
X' \times_{S'} V' \ar@{=}[r] &
X' \times_{S'} (X' \times_X V) &
(X' \times_S X') \times_{X \times_S X} (X \times_S V) \ar@{=}[l]
}
$$
defines a functor from the category of descent data
relative to $X \to S$ to the category of descent data
relative to $X' \to S$.
\item Given two morphisms $f_i : X' \to X$, $i = 0, 1$ making the
diagram commute the functors $f_0^*$ and $f_1^*$ are
canonically isomorphic.
\end{enumerate}
\end{lemma}

\begin{proof}
We omit the proof of (1), but we remark that the morphism
$\varphi'$ is the morphism $(f' \times f')^*\varphi$ in the
notation introduced in Remark \ref{remark-easier}.
For (2) we indicate which morphism
$f_0^*V \to f_1^*V$ gives the functorial isomorphism. Namely,
since $f_0$ and $f_1$ both fit into the commutative diagram
we see there is a unique morphism $r : X' \to X \times_S X$
with $f_i = \text{pr}_i \circ r$. Then we take
\begin{eqnarray*}
f_0^*V & = &
X' \times_{f_0, X} V \\
& = &
X' \times_{\text{pr}_0 \circ r, X} V \\
& = &
X' \times_{r, X \times_S X} (X \times_S X) \times_{\text{pr}_0 X} V \\
& \xrightarrow{\varphi} &
X' \times_{r, X \times_S X} (X \times_S X) \times_{\text{pr}_1 X} V \\
& = &
X' \times_{\text{pr}_1 \circ r, X} V \\
& = &
X' \times_{f_1, X} V \\
& = & f_1^*V
\end{eqnarray*}
We omit the verification that this works.
\end{proof}

\begin{definition}
\label{definition-pullback-functor}
With $S, S', X, X', f, a, a', h$ as in Lemma \ref{lemma-pullback} the functor
$$
(V, \varphi) \longmapsto f^*(V, \varphi)
$$
constructed in that lemma is called the {\it pullback functor} on descent data.
\end{definition}

\begin{lemma}
\label{lemma-pullback-family}
(Pullback of descent data for schemes over families.)
Let $\mathcal{U} = \{U_i \to S'\}_{i \in I}$ and
$\mathcal{V} = \{V_j \to S\}_{j \in J}$ be families of morphisms with
fixed target. Let $\alpha : I \to J$, $h : S' \to S$ and
$g_i : U_i \to V_{\alpha(i)}$ be a morphism of families
of maps with fixed target, see
Sites, Definition \ref{sites-definition-morphism-coverings}.
\begin{enumerate}
\item Let $(Y_j, \varphi_{jj'})$ be a descent datum relative to the
family $\{V_j \to S'\}$. The system
$$
\left(
g_i^*Y_{\alpha(i)},
(g_i \times g_{i'})^*\varphi_{\alpha(i)\alpha(i')}
\right)
$$
(with notation as in Remark \ref{remark-easier-family})
is a descent datum relative to $\mathcal{V}$.
\item This construction defines a functor between descent data relative
to $\mathcal{U}$ and descent data relative to $\mathcal{V}$.
\item Given a second $\alpha' : I \to J$, $h' : S' \to S$ and
$g'_i : U_i \to V_{\alpha'(i)}$ morphism of families
of maps with fixed target, then if $h = h'$ the two resulting functors
between descent data are canonically isomorphic.
\item These functors agree, via Lemma \ref{lemma-family-is-one},
with the pullback functors constructed in Lemma \ref{lemma-pullback}.
\end{enumerate}
\end{lemma}

\begin{proof}
This follows from Lemma \ref{lemma-pullback} via the
correspondence of Lemma \ref{lemma-family-is-one}.
\end{proof}

\begin{definition}
\label{definition-pullback-functor-family}
With $\mathcal{U} = \{U_i \to S'\}_{i \in I}$,
$\mathcal{V} = \{V_j \to S\}_{j \in J}$, $\alpha : I \to J$, $h : S' \to S$,
and $g_i : U_i \to V_{\alpha(i)}$ as in Lemma \ref{lemma-pullback-family}
the functor
$$
(Y_j, \varphi_{jj'}) \longmapsto
(g_i^*Y_{\alpha(i)}, (g_i \times g_{i'})^*\varphi_{\alpha(i)\alpha(i')})
$$
constructed in that lemma
is called the {\it pullback functor} on descent data.
\end{definition}

\noindent
If $\mathcal{U}$ and $\mathcal{V}$ have the same target $S$,
and if $\mathcal{U}$ refines $\mathcal{V}$ (see
Sites, Definition \ref{sites-definition-morphism-coverings})
but no explicit pair $(\alpha, g_i)$ is given, then we can still
talk about the pullback functor since we have seen in
Lemma \ref{lemma-pullback-family} that the choice of the pair does not matter
(up to a canonical isomorphism).


\begin{definition}
\label{definition-effective}
Let $S$ be a scheme.
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item  Given a scheme $U$ over $S$ we have the
{\it trivial descent datum} of $U$ relative to
$\text{id} : S \to S$, namely the identity morphism on $U$.
\item By Lemma \ref{lemma-pullback} we get a
{\it canonical descent datum} on $X \times_S U$
relative to $X \to S$ by pulling back the trivial
descent datum via $f$. We often
denote $(X \times_S U, can)$ this descent datum.
\item Let $f : X \to S$ be a morphism of schemes.
A descent datum $(V, \varphi)$ relative to $X/S$ is
is called {\it effective} if $(V, \varphi)$
is isomorphic to the canonical descent datum
$(X \times_S U, can)$ for some scheme $U$ over $S$.
\end{enumerate}
\end{definition}

\noindent
Thus being effective means there exists a scheme $U$
over $S$ and an isomorphism $\psi : V \to X \times_S U$
of $X$-schemes such that $\varphi$ is equal to the composition
$$
V \times_S X \xrightarrow{\psi \times \text{id}_X}
X \times_S U \times_S X =
X \times_S X \times_S U
\xrightarrow{\text{id}_X \times \psi^{-1}}
X \times_S V
$$

\begin{definition}
\label{definition-effective-family}
Let $S$ be a scheme.
Let $\{X_i \to S\}$ be a family of morphisms
with target $S$.
\begin{enumerate}
\item  Given a scheme $U$ over $S$
we have a {\it canonical descent datum} on the family of
schemes $X_i \times_S U$ by pulling back the trivial
descent datum for $U$ relative to $\{\text{id} : S \to S\}$.
We denote this descent datum $(X_i \times_S U, can)$.
\item A descent datum $(V_i, \varphi_{ij})$
relative to $\{X_i \to S\}$ is called {\it effective}
if there exists a scheme $U$ over $S$ such that
$(V_i, \varphi_{ij})$ is isomorphic to $(X_i \times_S U, can)$.
\end{enumerate}
\end{definition}












\section{Fully faithfulness of the pullback functors}
\label{section-fully-faithful}

\noindent
It turns out that the pullback functor between descent data
for fpqc-coverings is fully faithful. The goal of this section
is to prove this. The reader is encouraged instead to prove this him/herself.
The key is to use Lemma \ref{lemma-fpqc-universal-effective-epimorphisms}.

\begin{lemma}
\label{lemma-surjective-flat-epi}
A surjective and flat morphism is an epimorphism in the
category of schemes.
\end{lemma}

\begin{proof}
Suppose we have $h : X' \to X$ surjective and flat and
$a, b : X \to Y$ morphisms such that $a \circ h = b \circ h$.
As $h$ is surjective we see that $a$ and $b$ agree on underlying
topological spaces. Pick $x' \in X'$ and set $x = h(x')$ and
$y = a(x) = b(x)$. Consider the local ring maps
$$
a^\sharp_x, b^\sharp_x : \mathcal{O}_{Y, y} \to \mathcal{O}_{X, x}
$$
These become equal when composed with
the flat local homomorphism
$h^\sharp_{x'} : \mathcal{O}_{X, x} \to \mathcal{O}_{X', x'}$.
Since a flat local homomorphism is faithfully flat
(Algebra, Lemma \ref{algebra-lemma-local-flat-ff})
we conclude that $h^\sharp_{x'}$ is injective.
Hence $a^\sharp_x = b^\sharp_x$ which implies $a = b$ as desired.
\end{proof}

\begin{lemma}
\label{lemma-ff-base-change-faithful}
Let $h : S' \to S$ be a surjective, flat morphism of
schemes. The base change functor
$$
\textit{Sch}/S \longrightarrow \textit{Sch}/S', \quad
X \longmapsto S' \times_S X
$$
is faithful.
\end{lemma}

\begin{proof}
Let $X_1$, $X_2$ be schemes over $S$.
Let $\alpha, \beta : X_2 \to X_1$ be morphisms over $S$.
If $\alpha$, $\beta$ base change to the same morphism then
we get a commutative diagram as follows
$$
\xymatrix{
X_2 \ar[d]^\alpha &
S' \times_S X_2 \ar[l] \ar[d] \ar[r] &
X_2 \ar[d]^\beta \\
X_1 &
S' \times_S X_1 \ar[l] \ar[r] &
X_1
}
$$
Hence it suffices to show that $S' \times_S X_2 \to X_2$
is an epimorphism. As the base change of a surjective and
flat morphism it is surjective and flat (see
Morphisms, Lemmas \ref{morphisms-lemma-base-change-surjective}
and \ref{morphisms-lemma-base-change-flat}). Hence the lemma follows
from Lemma \ref{lemma-surjective-flat-epi}.
\end{proof}

\begin{lemma}
\label{lemma-faithful}
In the situation of Lemma \ref{lemma-pullback}
assume that $f : X' \to X$ is surjective
and flat. Then the pullback functor is faithful.
\end{lemma}

\begin{proof}
Let $(V_i, \varphi_i)$, $i = 1, 2$ be descend data for $X \to S$.
Let $\alpha, \beta : V_1 \to V_2$ be morphisms of descent data.
Suppose that $f^*\alpha = f^*\beta$. Our task is to show that
$\alpha = \beta$. Note that $\alpha$, $\beta$ are morphisms
of schemes over $X$, and that $f^*\alpha$, $f^*\beta$ are
simply the base changes of $\alpha$, $\beta$ to morphisms over
$X'$. Hence the lemma follows from Lemma \ref{lemma-ff-base-change-faithful}.
\end{proof}

\begin{lemma}
\label{lemma-fully-faithful}
In the situation of Lemma \ref{lemma-pullback}
assume
\begin{enumerate}
\item $f : X' \to X$ is surjective, flat, and quasi-compact, and
\item $f \times f : X' \times_{S'} X' \to X \times_S X$ is
surjective and flat\footnote{This follows from (1) if $S = S'$.}.
\end{enumerate}
Then the pullback functor is fully faithful.
\end{lemma}

\begin{proof}
We have already seen that the pullback functor is faithful in
Lemma \ref{lemma-faithful}.
Let $(V, \varphi)$ and $(W, \psi)$ be two descent data relative
to $X \to S$. Set $(V', \varphi') = f^*(V, \varphi)$ and
$(W', \psi') = f^*(W, \psi)$.
Let $\alpha' : V' \to W'$ be a morphism of descent data for $X'$ over $S'$.
We have to show there exists a morphism $\alpha : V \to W$ of
descent data for $X$ over $S$ whose pullback is $\alpha'$.

\medskip\noindent
Recall that $V'$ is the base change of $V$ by $f$ and that
$\varphi'$ is the base change of $\varphi$ by $f \times f$
(see Remark \ref{remark-easier}).
By assumption the diagram
$$
\xymatrix{
V' \times_{S'} X' \ar[r]_{\varphi'} \ar[d]_{\alpha' \times \text{id}} &
X' \times_{S'} V' \ar[d]^{\text{id} \times \alpha'} \\
W' \times_{S'} X' \ar[r]^{\psi'} &
X' \times_{S'} W'
}
$$
commutes. We claim the two compositions
$$
\xymatrix{
V' \times_V V' \ar[r]^-{\text{pr}_i} &
V' \ar[r]^{\alpha'} &
W' \ar[r] &
W
}
,\quad i = 0, 1
$$
are the same. The reader is advised to prove this themselves rather
than read the rest of this paragraph. (Please email if you find a
nice clean argument.)
Let $v_0, v_1$ be points of $V'$ which map to the same point $v \in V$.
Let $x_i \in X'$ be the image of $v_i$, and let
$x$ be the point of $X$ which is the image of $v$ in $X$. In other words,
$v_i = (x_i, v)$ in $V' = X' \times_X V$. Write
$\varphi(v, x) = (x, v')$ for some point $v'$ of $V$.
This is possible because $\varphi$ is
a morphism over $X \times_S X$. Denote
$v_i' = (x_i, v')$ which is a point of $V'$.
Then a calculation (using the definition of $\varphi'$)
shows that $\varphi'(v_i, x_j) = (x_i, v'_j)$. Denote
$w_i = \alpha'(v_i)$ and $w'_i = \alpha'(v_i')$.
Now we may write $w_i = (x_i, u_i)$ for some point $u_i$ of $W$,
and $w_i' = (x_i, u'_i)$ for some point $u_i'$ of $W$.
The claim is equivalent to the assertion: $u_0 = u_1$.
A formal calculation using the definition of $\psi'$
(see Lemma \ref{lemma-pullback}) shows
that the commutativity of the diagram displayed above says that
$$
((x_i, x_j), \psi(u_i, x)) = ((x_i, x_j), (x, u'_j))
$$
as points of
$(X' \times_{S'} X') \times_{X \times_S X} (X \times_S W)$
for all $i, j \in \{0, 1\}$. This shows that $\psi(u_0, x) = \psi(u_1, x)$
and hence $u_0 = u_1$ by taking $\psi^{-1}$.
This proves the claim because the argument above was formal
and we can take scheme points (in other words, we may
take $(v_0, v_1) = \text{id}_{V' \times_V V'}$).

\medskip\noindent
At this point we can use
Lemma \ref{lemma-fpqc-universal-effective-epimorphisms}.
Namely, $V' \to V$ is surjective, flat and quasi-compact (as
the base change of the morphism $f : X' \to X$).
Hence, by
Lemma \ref{lemma-fpqc-universal-effective-epimorphisms}.
the morphism $\alpha' : V' \to W' \to W$ factors through
a unique morphism $\alpha : V \to W$ whose base change is
necessarily $\alpha'$. Finally, we see the diagram
$$
\xymatrix{
V \times_S X \ar[r]_{\varphi} \ar[d]_{\alpha \times \text{id}} &
X \times_S V \ar[d]^{\text{id} \times \alpha} \\
W \times_S X \ar[r]^{\psi} & X \times_S W
}
$$
commutes because its base change to $X' \times_{S'} X'$
commutes and the morphism $X' \times_{S'} X' \to X \times_S X$
is surjective and flat (use Lemma \ref{lemma-ff-base-change-faithful}).
Hence $\alpha$ is a morphism of descent data
$(V, \varphi) \to (W, \psi)$ as desired.
\end{proof}

\noindent
The following two lemmas have been obsoleted by the improved
exposition of the previous material. But they are stilll true!

\begin{lemma}
\label{lemma-pullback-selfmap}
Let $X \to S$ be a morphism of schemes.
Let $f : X \to X$ be a selfmap of $X$ over $S$.
In this case pullback by $f$ is isomorphic to the
identity functor on the category of descent data
relative to $X \to S$.
\end{lemma}

\begin{proof}
This is clear from Lemma \ref{lemma-pullback} since it tells us that
$f^* \cong \text{id}^*$.
\end{proof}

\begin{lemma}
\label{lemma-morphism-with-section-equivalence}
Let $f : X' \to X$ be a morphism of schemes over a base scheme $S$.
If there exists a morphism $g : X \to X'$ over $S$, for example
if $f$ has a section, then the pullback functor
of Lemma \ref{lemma-pullback} defines an equivalence of
categories between the category of descent data relative to
$X/S$ and $X'/S$.
\end{lemma}

\begin{proof}
Let $g : X \to X'$ be a morphism over $S$.
Lemma \ref{lemma-pullback-selfmap} above shows that the functors
$f^* \circ g^* = (g \circ f)^*$ and $g^* \circ f^* = (f \circ g)^*$
are isomorphic
to the respective identity functors as desired.
\end{proof}

\noindent
The next lemma shows that, in order to check effectiveness,
we may always Zariski refine the given family of morphisms
with target $S$.

\begin{lemma}
\label{lemma-Zariski-refinement-coverings-equivalence}
Let $S$ be a scheme.
Let $\mathcal{U} = \{U_i \to S\}_{i \in I}$, and
$\mathcal{V} = \{V_j \to S\}_{j \in J}$,
be families of morphisms with target $S$.
Let $\alpha : I \to J$, $\text{id} : S \to S$ and
$g_i : U_i \to V_{\alpha(i)}$ be a morphism of families
of maps with fixed target, see
Sites, Definition \ref{sites-definition-morphism-coverings}.
Assume that for each $j \in J$ the family
$\{g_i : U_i \to V_j\}_{\alpha(i) = j}$ is a Zariski covering (see
Topologies, Definition \ref{topologies-definition-zariski-covering})
of $V_j$. Then the pullback functor
$$
\text{descent data relative to }
\mathcal{V}
\longrightarrow
\text{descent data relative to }
\mathcal{U}
$$
of Lemma \ref{lemma-pullback-family} is an equivalence of categories.
In particular, the category of schemes over $S$
is equivalent to the category
of descent data relative to any Zariski covering of $S$.
\end{lemma}

\begin{proof}
We omit the proof that the functor is faithful and fully faithful. 
Let us indicate how to prove that it is essentially surjective.
Let $(X_i, \varphi_{ii'})$ be a descend datum relative to $\mathcal{U}$.
Fix $j \in J$ and set $I_j = \{i \in I \mid \alpha(i) = j\}$.
For $i, i' \in I_j$ note that there is a canonical morphism
$$
c_{ii'} : U_i \times_{g_i, V_j, g_{i'}} U_{i'} \to U_i \times_S U_{i'}.
$$
Hence we can pullback $\varphi_{ii'}$ by this morphism
and set $\psi_{ii'} = c_{ii'}^*\varphi_{ii'}$ for $i, i' \in I_j$.
In this way we obtain a descent datum $(X_i, \psi_{ii'})$
relative to the Zariski covering
$\{g_i : U_i \to V_i\}_{i \in I_j}$.
Note that $\psi_{ii'}$ is an isomorphism from the open
$X_{i, U_i \times_{V_j} U_{i'}}$ of $X_i$ to the corresponding
open of $X_{i'}$. It follows from
Schemes, Section \ref{schemes-section-glueing-schemes}
that we may glue $(X_i, \psi_{ii'})$ into a scheme
$Y_j$ over $V_j$. Moreover, the morphisms $\varphi_{ii'}$
for $i \in I_j$ and $i' \in I_{j'}$ glue to a morphism
$\varphi_{jj'} : Y_j \times_S V_{j'} \to V_j \times_S Y_{j'}$
satisfying the cocycle condition (details omitted).
Hence we obtain the desired descent datum
$(Y_j, \varphi_{jj'})$ relative to $\mathcal{V}$.
\end{proof}

\begin{lemma}
\label{lemma-fpqc-refinement-coverings-fully-faithful}
Let $S$ be a scheme.
Let $\mathcal{U} = \{U_i \to S\}_{i \in I}$, and
$\mathcal{V} = \{V_j \to S\}_{j \in J}$,
be families of morphisms with target $S$.
Let $\alpha : I \to J$, $\text{id} : S \to S$ and
$g_i : U_i \to V_{\alpha(i)}$ be a morphism of families
of maps with fixed target, see
Sites, Definition \ref{sites-definition-morphism-coverings}.
Assume that for each $j \in J$ the family
$\{g_i : U_i \to V_j\}_{\alpha(i) = j}$ is an fpqc
covering of $V_j$. Then the pullback functor
$$
\text{descent data relative to }
\mathcal{V}
\longrightarrow
\text{descent data relative to }
\mathcal{U}
$$
of Lemma \ref{lemma-pullback-family} is fully faithful.
\end{lemma}

\begin{proof}
Suppose that we are given for every $j$ an open covering
$V_j = \bigcup_{a \in A_j} V_{ja}$. Then for every $i$ we
get an open covering
$$
U_i = \bigcup\nolimits_{a \in A_{\alpha(i)}} g_i^{-1}(V_{\alpha(i)a}).
$$
Denote $U_{ia} = g_i^{-1}(V_{\alpha(i) a})$ for $a \in A_{\alpha(i)}$.
Hence we obtain refinements $\mathcal{V}' = \{V_{ja} \to S\}$
resp.\ $\mathcal{U}' = \{U_{ia} \to S\}$ and a commutative
diagram of families of morphisms with the same target
$$
\xymatrix{
\mathcal{U}' \ar[r] \ar[d] &
\mathcal{V}' \ar[d] \\
\mathcal{U} \ar[r] &
\mathcal{V}
}
$$
By Lemma \ref{lemma-Zariski-refinement-coverings-equivalence}
the vertical morphisms induce equivalences of
categories between descent data. Hence it suffices to prove the
lemma for the top horizontal arrow.
By taking each of the coverings $V_j = \bigcup_{a \in A_j} V_{ja}$
to be an affine open covering we see that we reduce to the case
where each $V_j$ is affine.

\medskip\noindent
Assume each $V_j$ is affine.
For each $j$ we can choose a finite set $K_j$ a map $\beta_j : K_j \to I$
and affine opens $W_k \subset U_{\beta_j(k)}$ such that
\begin{enumerate}
\item $\alpha(\beta_j(k)) = j$, and
\item $\{g_{\beta_j(k)}|_{W_k} : W_k \to V_j\}_{k \in K_j}$
is a standard fpqc covering of $V_j$.
\end{enumerate}
This is possible by Topologies, Lemma \ref{topologies-lemma-fpqc-affine}
and the assumption that $\{g_i : U_i \to V_j\}_{\alpha(i) = j}$ is an fpqc
covering of $V_j$. Set $K = \coprod_{j \in J} K_j$.
Set $\beta = \coprod \beta_j$.
Set $\mathcal{W} = \{W_k \to S\}_{k \in K}$.
There is a natural morphism
$\mathcal{W} \to \mathcal{U}$, given by the
inclusions $W_k \subset U_{\beta(k)}$. Denote
$DD(\mathcal{V})$ the category of descent data relative to $\mathcal{V}$,
and so on. Then we have functors
$$
DD(\mathcal{V}) \to
DD(\mathcal{U}) \to
DD(\mathcal{W})
$$
and it is clear that it suffices to prove that the composite
functor is fully faithful. To see that $DD(\mathcal{V}) \to DD(\mathcal{W})$
is fully faithful we consider the morphism
$$
X' = \coprod\nolimits_{k \in K}
\longrightarrow
X = \coprod\nolimits_{j \in J}
$$
and apply Lemmas \ref{lemma-family-is-one} and \ref{lemma-fully-faithful}.
\end{proof}

\begin{lemma}
\label{lemma-refine-coverings-fully-faithful}
Let $S$ be a scheme.
Let $\mathcal{U} = \{U_i \to S\}_{i \in I}$, and
$\mathcal{V} = \{V_j \to S\}_{j \in J}$,
be fpqc-coverings of $S$.
If $\mathcal{U}$ is a refinement of $\mathcal{V}$,
then the pullback functor
$$
\text{descent data relative to }
\mathcal{V}
\longrightarrow
\text{descent data relative to }
\mathcal{U}
$$
is fully faithfull.
In particular, the category of schemes over $S$
is identified with a full subcategory of the category
of descent data relative to any fpqc-covering of $S$.
\end{lemma}

\begin{proof}
Consider the fpqc-covering
$\mathcal{W} = \{U_i \times_S V_j \to S\}_{(i, j) \in I \times J}$ of $S$.
It is a refinement of both $\mathcal{U}$ and $\mathcal{V}$.
Hence we have a $2$-commutative diagram of functors and categories
$$
\xymatrix{
DD(\mathcal{V}) \ar[rd] \ar[rr] & & DD(\mathcal{U}) \ar[ld] \\
& DD(\mathcal{W}) &
}
$$
Notation as in the proof of
Lemma \ref{lemma-fpqc-refinement-coverings-fully-faithful} and
commutativity by Lemma \ref{lemma-pullback-family} part (3).
Hence clearly it suffices to prove the functors
$DD(\mathcal{V}) \to DD(\mathcal{W})$ and
$DD(\mathcal{U}) \to DD(\mathcal{W})$.
This reduces us to the special case
treated in Lemma \ref{lemma-fpqc-refinement-coverings-fully-faithful}.
\end{proof}








\section{Descending types of morphisms}
\label{section-descending-types-morphisms}

\noindent
In the following we study the question as to whether
descent data for schemes relative to a fpqc-covering
are effective. The first remark to make is that this
is not always the case. We will see this (insert
future reference here).

\medskip\noindent
On the other hand, if the schemes we are trying to
descend are particularly simple, then it is sometime the
case that for whole classes of schemes descent data
are effective. We will introduce terminology here that
describes this phenomenon abstractly, even though it
may lead to confusion if not used correctly later on.

\begin{definition}
\label{definition-descending-types-morphisms}
Let $\mathcal{P}$ be a property of morphisms of schemes over a base.
Let $\tau \in \{Zariski, fpqc, fppf, etale, smooth, syntomic\}$.
We say
{\it morphisms of type $\mathcal{P}$ satisfy descent for $\tau$-coverings}
if for
any $\tau$ covering $\mathcal{U} : \{U_i \to S\}_{i \in I}$
(see Topologies, Section \ref{topologies-section-procedure}),
any descent datum $(X_i, \varphi_{ij})$ relative to $\mathcal{U}$
such that each morphism $X_i \to U_i$ has property $\mathcal{P}$
is effective.
\end{definition}

\noindent
Note that in each of the cases we have already seen that
the functor from schemes over $S$ to descent data over
$\mathcal{U}$ is fully faithful 
(Lemma \ref{lemma-refine-coverings-fully-faithful} combined
with the results in Topologies that any $\tau$ covering
is also a fpqc-covering).
We have also seen that descent data are always effective with
respect to Zariski coverings
(Lemma \ref{lemma-Zariski-refinement-coverings-equivalence}).
It may be prudent to only study the notion just introduced
when $\mathcal{P}$ is either stable under any base change or at least
local on the base in the $\tau$-topology
(see Definition \ref{definition-property-morphisms-local})
in order to avoid erroneous arguments (relying on $\mathcal{P}$
when descending halfway).

\medskip\noindent
Here is the obligatory lemma reducing this question
to the case of a covering given by a single morphism of affines.

\begin{lemma}
\label{lemma-descending-types-morphisms}
Let $\mathcal{P}$ be a property of morphisms of schemes over a base.
Let $\tau \in \{fpqc, fppf, etale, smooth, syntomic\}$.
Suppose that
\begin{enumerate}
\item $\mathcal{P}$ is stable under any base change
(see Schemes, Definition \ref{schemes-definition-preserved-by-base-change}),
and
\item for any surjective morphism of affines
$X \to S$ which is flat, flat of finite presentation,
etale, smooth or syntomic depending on whether $\tau$ is
fpqc, fppf, etale, smooth, or syntomic,
any descent datum $(V, \varphi)$ relative
to $X$ over $S$ such that $\mathcal{P}$ holds for
$V \to X$ is effective.
\end{enumerate}
Then morphisms of type $\mathcal{P}$ satisfy descent for $\tau$-coverings.
\end{lemma}

\begin{proof}
Let $S$ be a scheme.
Let $\mathcal{U} = \{\varphi_i : U_i \to S\}_{i \in I}$
be a $\tau$-covering of $S$.
Let $(X_i, \varphi_{ii'})$ be a descent datum relative to
$\mathcal{U}$ and assume that each morphism $X_i \to U_i$ has property
$\mathcal{P}$. We have to show there exists a scheme $X \to S$ such that
$(X_i, \varphi_{ii'}) \cong (U_i \times_S X, can)$.

\medskip\noindent
Before we start the proof proper we remark that for any
family of morphisms $\mathcal{V} : \{V_j \to S\}$ and any
morphism of families $\mathcal{V} \to \mathcal{U}$, if we pullback
the descent datum $(X_i, \varphi_{ii'})$ to a descent datum
$(Y_j, \varphi_{jj'})$ over $\mathcal{V}$, then each of the
morphisms $Y_j \to V_j$ has property $\mathcal{P}$ also.
This is true because we assumed that $\mathcal{P}$ is stable
under any base change and the definition of pullback
(see Definition \ref{definition-pullback-functor-family}).
We will use this without further mention.

\medskip\noindent
First, let us prove the lemma when $S$ is affine.
By Topologies, Lemma
\ref{topologies-lemma-fpqc-affine},
\ref{topologies-lemma-fppf-affine},
\ref{topologies-lemma-etale-affine},
\ref{topologies-lemma-smooth-affine}, or
\ref{topologies-lemma-syntomic-affine}
there exists a standard $\tau$-covering
$\mathcal{V} : \{V_j \to S\}_{j = 1, \ldots, m}$
which refines $\mathcal{U}$. The pullback functor
$DD(\mathcal{U}) \to DD(\mathcal{V})$
between categories of descent data is fully faithful
by Lemma \ref{lemma-refine-coverings-fully-faithful}.
Hence it suffices to prove that the descend datum over
the standard $\tau$-covering $\mathcal{V}$ is effective.
By Lemma \ref{lemma-family-is-one} this reduces to the covering
$\{\coprod_{j = 1, \ldots, m} V_j \to S\}$ for which we have
assumed the result in property (2) of the lemma.
Hence the lemma holds when $S$ is affine.

\medskip\noindent
Assume $S$ is general. Let $V \subset S$ be an affine open.
By the properties of site the family
$\mathcal{U}_V = \{V \times_S U_i \to V\}_{i \in I}$ is a
$\tau$-covering of $V$. Denote
$(X_i, \varphi_{ii'})_V$ the restriction (or pullback) of
the given descent datum to $\mathcal{U}_V$.
Hence by what we just saw we obtain a scheme $X_V$ over $V$
whose canonical descent datum with respect to
$\mathcal{U}_V$ is isomorphic to $(X_i, \varphi_{ii'})_V$.
Suppose that $V' \subset V$ is an affine open of $V$.
Then both $X_{V'}$ and $V' \times_V X_V$ have canonical
descent data isomorphic to $(X_i, \varphi_{ii'})_{V'}$.
Hence, by Lemma \ref{lemma-refine-coverings-fully-faithful}
again we obtain a canonical morphism
$\rho^V_{V'} : X_{V'} \to X_V$ over $S$ which identifies
$X_{V'}$ with the inverse image of $V'$ in $X_V$.
We omit the verification that given affine opens
$V'' \subset V' \subset V$ of $S$ we have
$\rho^V_{V''} = \rho^V_{V'} \circ \rho^{V'}_{V''}$.

\medskip\noindent
By Constructions, Lemma \ref{constructions-lemma-relative-glueing} the data
$(X_V, \rho^V_{V'})$ glue to a scheme $X \to S$.
Moreover, we are given isomorphisms $V \times_S X \to X_V$
which recover the maps $\rho^V_{V'}$. Unwinding the construction
of the schemes $X_V$ we obtain isomorphisms
$$
V \times_S U_i \times_S X
\longrightarrow
V \times_S X_i
$$
compatible with the maps $\varphi_{ii'}$ and compatible with
restricting to smaller affine opens in $X$. This implies that
the canonical descent datum on $U_i \times_S X$ is isomorphic
to the given descent datum and we win.
\end{proof}










\section{Descending affine morphisms}
\label{section-affine}

\noindent
In this section we show that
``affine morphisms satisfy descent for fpqc-coverings''.
Here is the formal statement.

\begin{lemma}
\label{lemma-affine}
Let $S$ be a scheme.
Let $\{X_i \to S\}_{i\in I}$ be an fpqc covering, see
Topologies, Definition \ref{topologies-definition-fpqc-covering}.
Let $(V_i/X_i, \varphi_{ij})$ be a descent datum
relative to $\{X_i \to S\}$. If each morphism
$V_i \to X_i$ is affine, then the descent datum is
effective.
\end{lemma}

\begin{proof}
Being affine is a property of morphisms of schemes
which is preserved under any base change, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-affine}.
Hence Lemma \ref{lemma-descending-types-morphisms} applies
and it suffices to prove the statement of the lemma
in case the fpqc-covering is given by a single
$\{X \to S\}$ flat surjective morphism of affines.
Say $X = \text{Spec}(A)$ and $S = \text{Spec}(R)$ so
that $R \to A$ is a faithfully flat ring map.
Let $(V, \varphi)$ be a descent datum relative to $X$ over $S$
and assume that $V \to X$ is affine.
Then $V \to X$ being affine implies that $V = \text{Spec}(B)$
for some $A$-algebra $B$ (see
Morphisms, Definition \ref{morphisms-definition-affine}).
The isomorphism $\varphi$ corresponds to an isomorphism
of rings
$$
\varphi^\sharp :
B \otimes_R A \longleftarrow A \otimes_R B
$$
as $A \otimes_R A$-algebras. The cocycle condition on $\varphi$
says that
$$
\xymatrix{
B \otimes_R A \otimes_R A & &
A \otimes_R A \otimes_R B \ar[ll] \ar[ld]\\
& A \otimes_R B \otimes_R A \ar[lu] &
}
$$
is commutative. Inverting these arrows we see that we have a
descent datum for modules with respect to $R \to A$ as in
Definition \ref{definition-descent-datum-modules}.
Hence we may apply Proposition \ref{proposition-descent-module}
to obtain an $R$-module
$C = \text{Ker}(B \to A \otimes_R B)$
and an isomorphism $A \otimes_R C \cong B$
respecting descent data. Given any pair $c, c' \in C$
the produc $cc'$ in $B$ lies in $C$ since the
map $\varphi$ is an algebra homomorphism. Hence
$C$ is an $R$-algebra whose base change to $A$ is
isomorphic to $B$ compatibly with descent data.
Applying $\text{Spec}$ we obtain a scheme
$U$ over $S$ such that $(V, \varphi) \cong (X \times_S U, can)$
as desired.
\end{proof}



\section{Descending quasi-affine morphisms}
\label{section-quasi-affine}

\noindent
In this section we show that
``quasi-affine morphisms satisfy descent for fpqc-coverings''.
Here is the formal statement.

\begin{lemma}
\label{lemma-quasi-affine}
Let $S$ be a scheme.
Let $\{X_i \to S\}_{i\in I}$ be an fpqc covering, see
Topologies, Definition \ref{topologies-definition-fpqc-covering}.
Let $(V_i/X_i, \varphi_{ij})$ be a descent datum
relative to $\{X_i \to S\}$. If each morphism
$V_i \to X_i$ is quasi-affine, then the descent datum is
effective.
\end{lemma}

\begin{proof}
Being quasi-affine is a property of morphisms of schemes
which is preserved under any base change, see
Morphisms, Lemma \ref{morphisms-lemma-base-change-quasi-affine}.
Hence Lemma \ref{lemma-descending-types-morphisms} applies
and it suffices to prove the statement of the lemma
in case the fpqc-covering is given by a single
$\{X \to S\}$ flat surjective morphism of affines.
Say $X = \text{Spec}(A)$ and $S = \text{Spec}(R)$ so
that $R \to A$ is a faithfully flat ring map.
Let $(V, \varphi)$ be a descent datum relative to $X$ over $S$
and assume that $\pi : V \to X$ is quasi-affine.

\medskip\noindent
According to Morphisms, Lemma \ref{morphisms-lemma-characterize-quasi-affine}
this means that
$$
V \longrightarrow \underline{\text{Spec}}_X(\pi_*\mathcal{O}_V) = W
$$
is a quasi-compact open immersion of schemes over $X$.
The projections $\text{pr}_i : X \times_S X \to X$ are flat
and hence we have
$$
\text{pr}_0^*\pi_*\mathcal{O}_V =
(\pi \times \text{id}_X)_*\mathcal{O}_{V \times_S X}, \quad
\text{pr}_1^*\pi_*\mathcal{O}_V =
(\text{id}_X \times \pi)_*\mathcal{O}_{X \times_S V}
$$
by flat base change
(Coherent, Lemma \ref{coherent-lemma-flat-base-change-cohomology}).
Thus the isomorphism $\varphi : V \times_S X \to X \times_S V$ (which
is an isomorphism over $X\times_S X$) induces an isomorphism
of quasi-coherent sheaves of algebras
$$
\varphi^\sharp :
\text{pr}_0^*\pi_*\mathcal{O}_V
\longrightarrow
\text{pr}_1^*\pi_*\mathcal{O}_V
$$
on $X \times_S X$.
The cocycle condition for $\varphi$ implies the cocyle condition
for $\varphi^\sharp$. Another way to say this is that it produces
a descent datum $\varphi'$ on the affine scheme $W$ relative to
$X$ over $S$, which moreover has the property that the morphism
$V \to W$ is a morphism of descent data.
Hence by Lemma \ref{lemma-affine}
(or by effectivity of descent for quasi-coherent
algebras) we obtain a scheme $U' \to S$ with an isomorphism
$(W, \varphi') \cong (X \times_S U', can)$ of descent data.
We note in passing that $U'$ is affine by
Lemma \ref{lemma-descending-property-affine}.

\medskip\noindent
And now we can think of $V$ as a (quasi-compact)
open $V \subset X \times_S U'$ with the property that
it is stable under the descent datum
$$
can : X \times_S U' \times_S X \to X \times_S X \times_S U',
(x_0, u', x_1) \mapsto (x_0, x_1, u').
$$
In other words $(x_0, u') \in V \Rightarrow (x_1, u') \in V$
for any $x_0, x_1, u'$ mapping to the same point of $S$.
Because $X \to S$ is surjective we immediately find that
$V$ is the inverse image of a subset $U \subset U'$ under
the morphism $X \times_S U' \to U'$.
Because $X \to S$ is quasi-compact, flat and surjective
also $X \times_S U' \to U'$ is quasi-compact flat and surjective.
Hence by Morphisms, Lemma \ref{morphisms-lemma-fpqc-quotient-topology}
this subset $U \subset U'$ is open and we win.
\end{proof}












\section{Descent data in terms of sheaves}
\label{section-descent-data-sheaves}


\noindent
Here is another way to think about descent data
in case of a covering on a site.

\begin{lemma}
\label{lemma-descent-data-sheaves}
Let $\tau \in \{Zariski, fppf, etale, smooth, syntomic\footnote{
The fact that fpqc is missing is not a typo. See discussion
in Topologies, Section \ref{topologies-section-fpqc}.}\}$.
Let $\textit{Sch}_\tau$ be a big $\tau$-site.
Let $S \in \text{Ob}(\textit{Sch}_\tau)$.
Let $\{S_i \to S\}_{i \in I}$ be a covering in the
site $(\textit{Sch}/S)_\tau$. There is an equivalence of
categories
$$
\left\{
\begin{matrix}
\text{descent data }(X_i, \varphi_{ii'})\text{ such that}\\
\text{each }X_i \in \text{Ob}((\textit{Sch}/S)_\tau)
\end{matrix}
\right\}
\leftrightarrow
\left\{
\begin{matrix}
\text{sheaves }F\text{ on }(\textit{Sch}/S)_\tau\text{ such that}\\
\text{each }h_{S_i} \times F\text{ is representable}
\end{matrix}
\right\}.
$$
Moreover,
\begin{enumerate}
\item the objects representing $h_{S_i} \times F$ on the right hand side
correspond to the schemes $X_i$ on the left hand side, and
\item the sheaf $F$ is representable if and only if the
corresponding descent datum $(X_i, \varphi_{ii'})$ is effective.
\end{enumerate}
\end{lemma}

\begin{proof}
We have seen in Section \ref{section-fpqc-universal-effective-epimorphisms}
that representable presheaves are sheaves on the site $(\textit{Sch}/S)_\tau$.
Moreover, the Yonea lemma (Categories, Lemma \ref{categories-lemma-yoneda})
garantees that maps between representable
sheaves correspond one to one with maps between the representing objects.
We will use these remarks without further mention during the proof.

\medskip\noindent
Let us construct the functor from right to left.
Let $F$ be a sheaf on $(\textit{Sch}/S)_\tau$ such that each
$h_{S_i} \times F$ is representable. In this case let $X_i$
be a representing object in $(\textit{Sch}/S)_\tau$.
It comes equipped with a morphism $X_i \to S_i$.
Then both $X_i \times_S S_{i'}$ and $S_i \times_S X_{i'}$
represent the sheaf $h_{S_i} \times F \times h_{S_{i'}}$
and hence we obtain an isomorphism
$$
\varphi_{ii'} : X_i \times_S S_{i'} \to S_i \times_S X_{i'}
$$
It is straightforward to see that the maps $\varphi_{ii'}$
are morphisms over $S_i \times_S S_{i'}$ and satsify the
cocycle condition. The functor from right to left is given
by this construction $F \mapsto (X_i, \varphi_{ii'})$.

\medskip\noindent
Let us construct a functor from left to right.
For each $i$ denote $F_i$ the sheaf $h_{X_i}$.
The isomorphisms $\varphi_{ii'}$ give isomorphisms
$$
\varphi_{ii'} :
F_i \times h_{S_{i'}}
\longrightarrow
h_{S_i} \times F_{i'}
$$
over $h_{S_i} \times h_{S_{i'}}$.
Set $F$ equal to the coequalizer in the following diagram
$$
\xymatrix{
\coprod_{i, i'} F_i \times h_{S_{i'}}
\ar@<1ex>[rr]^-{\text{pr}_0}
\ar@<-1ex>[rr]_-{\text{pr}_1 \circ \varphi_{ii'}}
& &
\coprod_i F_i \ar[r]
&
F
}
$$
The cocylce condition garantees that $h_{S_i} \times F$ is
isomorphic to $F_i$ and hence representable.
The functor from left to right is given
by this construction $(X_i, \varphi_{ii'}) \mapsto F$.

\medskip\noindent
We omit the verification that these constructions
are mutually quasi-inverse functors. The final statements
(1) and (2) follow from the constructions.
\end{proof}

\begin{remark}
\label{remark-what-product-means}
In the statement of Lemma \ref{lemma-descent-data-sheaves} the condition that
$h_{S_i} \times F$ is representable is equivalent to
the condition that the restriction of $F$ to
$(\textit{Sch}/S_i)_\tau$ is representable.
\end{remark}















\section{Descent in terms of simplicial schemes}
\label{section-simplicial}

\noindent
A {\it simplicial scheme} is a simplicial object in the category of schemes,
see Simplicial, Definition \ref{simplicial-definition-simplicial-object}.
In this chapter we will use a subscript $\bullet$ to denote simplicial
objects. Recall that a simplicial scheme looks like
$$
\xymatrix{
X_2
\ar@<2ex>[r]
\ar@<0ex>[r]
\ar@<-2ex>[r]
&
X_1
\ar@<1ex>[r]
\ar@<-1ex>[r]
\ar@<1ex>[l]
\ar@<-1ex>[l]
&
X_0
\ar@<0ex>[l]
}
$$
Here there are two morphisms $d^1_0, d^1_1 : X_1 \to X_0$
and a single morphism $s^0_0 : X_0 \to X_1$, etc.
It is important to remember that $d^n_i : X_n \to X_{n - 1}$
should be thought of as a ``projection forgetting the
$i$th coordinate''.

\begin{definition}
\label{definition-cartesian-morphism}
Let $a : V_\bullet \to X_\bullet$ be a morphism of simplicial schemes.
We say $a$ is {\it cartesian}, or that {\it $V_\bullet$ is cartesian over
$X_\bullet$}, if for every morphism
$\varphi : [n] \to [m]$ of $\Delta$ the corresponding diagram
$$
\xymatrix{
V_m \ar[r]_{a} \ar[d]_{V_\bullet(\varphi)} & X_m \ar[d]^{X_\bullet(\varphi)}\\
V_n \ar[r]^{a} & X_n
}
$$
is a fibre square in the category of schemes.
\end{definition}

\begin{definition}
\label{definition-fibre-products-simplicial-scheme}
Let $f : X \to S$ be a morphism of schemes.
The {\it simplicial scheme associated to $f$}, denoted $(X/S)_\bullet$,
is the functor $\Delta^{opp} \to \textit{Sch}$,
$[n] \mapsto X\times_S \ldots \times_S X$
described in
Simplicial, Example \ref{simplicial-example-fibre-products-simplicial-object}.
\end{definition}

\noindent
Thus $(X/S)_n$ is the $(n + 1)$-fold fibre product of $X$ over $S$.
The morphism $d^1_0 : X \times_S X \to X$ is the map
$(x_0, x_1) \mapsto x_1$ and the morphism $d^1_1$ is the other
projection. The morphism $s^0_0$ is the diagonal morphism
$X \to X \times_S X$.

\begin{lemma}
\label{lemma-cartesian-over}
Let $f : X \to S$ be a morphism of schemes.
Let $\pi : V_\bullet \to (X/S)_\bullet$ be a cartesian morphism.
Set $V = V_0$ considered as a scheme over $X$.
The morphisms $d^1_0, d^1_1 : V_1 \to V_0$ and the morphism
$\pi_1 : V_1 \to X \times_S X$ induce isomorphisms
$$
\xymatrix{
V \times_S X & &
V_1 \ar[ll]_-{(d^1_1, \text{pr}_1 \circ \pi_1)}
\ar[rr]^-{(\text{pr}_0 \circ \pi_1, d^1_0)} & &
X \times_S V.
}
$$
Denote $\varphi : V \times_S X \to X \times_S V$ the
resulting isomorphism.
Then the pair $(V, \varphi)$ is a descent datum relative
to $X \to S$.
\end{lemma}

\begin{proof}
The statement that the displayed morphisms are isomorphisms
is exactly the cartesian property for the maps
$\delta^1_0, \delta^1_1 : [0] \to [1]$. The fact that the diagram
of Definition \ref{definition-descent-datum} (1) commutes
follows from the fact that each of the induced morphisms
$V_2 \to V \times_{X, \text{pr}_i} (X \times_S X \times_S X)$
associated to $[0] \to [2]$, $0 \mapsto i$
is an isomorphism. Details omitted.
\end{proof}

\begin{lemma}
\label{lemma-cartesian-equivalent-descent-datum}
Let $f : X \to S$ be a morphism of schemes. The construction
$$
\begin{matrix}
\text{category of cartesian } \\
\text{schemes over } (X/S)_\bullet
\end{matrix}
\longrightarrow
\begin{matrix}
\text{ category of descent data} \\
\text{ relative to } X/S
\end{matrix}
$$
of Lemma \ref{lemma-cartesian-over}
is an equivalence of categories.
\end{lemma}

\begin{proof}
Here you have to show that given a descent datum
$(V, \varphi)$ you can canonically construct a
cartesian morphism of simplicial schemes
$V_\bullet \to (X/S)_\bullet$ so that if you apply
the construction of Lemma \ref{lemma-cartesian-over}
then you get back $(V, \varphi)$. This we did carefully
in Section \ref{section-descent-modules}
for the case of descent data for modules over rings
and their associated cosimplicial rings, see especially
Lemma \ref{lemma-descent-datum-cosimplicial}.
We can easily translate this to the current context.
Namely, set
$$
V_n = X \times_S \ldots \times_S X \times_S V.
$$
Given a point $(x_0, \ldots, x_{n - 1}, v)$ of $V_n$
we use the convention that $x_n = \pi(v)$. Using this
convention, given a morphism $\beta : [m] \to [n]$
the associated morphism
$$
V_\bullet(\beta) : V_n \longrightarrow V_m
$$
maps $(x_0, \ldots, x_{n - 1}, v)$ to
$(x_{\beta(0)}, \ldots, x_{\beta(m - 1)}, v')$
where $\varphi^{-1}(x_{\beta(m)}, v) = (v', x_n)$.
(It is a fact that $v' = v$ if $n = \beta(m)$; see discussion
following Definition \ref{definition-descent-datum}.)
We omit the verification that this defines a
simplicial scheme which is cartesian over
$(X/S)_\bullet$.
\end{proof}

\noindent
We may reinterpret the pullback of Lemma \ref{lemma-pullback} as follows.
Suppose given a commutative diagram of morphisms of schemes
$$
\xymatrix{
X' \ar[r]_f \ar[d] & X \ar[d] \\
S' \ar[r] & S.
}
$$
This gives rise to a morphism of simplicial schemes
$$
f_\bullet : (X'/S')_\bullet \longrightarrow (X/S)_\bullet.
$$
It is a pleasant exercise to check that given any morphism
of simplical schemes $f_\bullet : Y_\bullet \to X_\bullet$ and a
cartesian simplicial scheme $V_\bullet \to X_\bullet$
the fibre product
$$
f_\bullet^*V_\bullet = Y_\bullet \times_{X_\bullet} V_\bullet
$$
is a cartesian simplicial scheme over $Y_\bullet$. We omit
the verification that this applied to the morphism
$(X'/S')_\bullet \to (X/S)_\bullet$ corresponds via
Lemma \ref{lemma-cartesian-equivalent-descent-datum}
with the pullback defined in terms of descent data.



\section{Descent data give equivalence relations}
\label{section-equivalence-relation}

\begin{lemma}
\label{lemma-equivalence-relation}
Let $f : X \to S$ be a morphism of schemes.
Let $\pi : V_\bullet \to (X/S)_\bullet$ be a cartesian morphism.
Then the morphism
$$
j = (d^1_1, d^1_0) : V_1 \to V_0 \times_S V_0
$$
defines an equivalence relation on $V_0$ over $S$,
see Groupoids, Definition \ref{groupoids-definition-equivalence-relation}.
\end{lemma}

\begin{proof}
Note that $j$ is a monomorphism. Namely the
composition $V_1 \to V_0 \times_S V_0 \to V_0 \times_S X$
is an isomorphism as $\pi$ is cartesian.

\medskip\noindent
Consider the morphism
$$
(d^2_2, d^2_0) : V_2 \to V_1 \times_{d^1_0, V_0, d^1_1} V_1.
$$
This works because $d_0 \circ d_2 = d_1 \circ d_0$,
see Simplicial, Remark \ref{simplicial-remark-relations}.
Also, it is a morphism over $(X/S)_2$. It is an isomorphism
because $V_\bullet \to (X/S)_\bullet$ is cartesian.
Note for example that the
right hand side is isomorphic to
$V_0 \times_{\pi_0, X, \text{pr}_1} (X \times_S X \times_S X) =
X \times_S V_0 \times_S X$
because $\pi$ is cartesian. Details omitted.

\medskip\noindent
As usual, see
Groupoids, Definition \ref{groupoids-definition-equivalence-relation}
we denote $t = \text{pr}_0 \circ j = d^1_1$ and
$s = \text{pr}_1 \circ j = d^1_0$.
The isomorphism above, combined with the morphism
$d^2_1 : V_2 \to V_1$ give us a composition morphism
$$
c : V_1 \times_{s, V_0, t} V_1 \longrightarrow V_1
$$
over $V_0 \times_S V_0$. This immediately implies
that for any scheme $T/S$ the relation
$V_1(T) \subset V_0(T) \times V_0(T)$ is transitive.

\medskip\noindent
Reflexivity follows from the fact that the
restriction of the morphism $j$ to the diagonal
$\Delta : X \to X\times_S X$ is an isomorphism
(again use the cartesian property of $\pi$).

\medskip\noindent
To see symmetry we consider the morphism
$$
(d^2_2, d^2_1) : V_2 \to V_1 \times_{d^1_1, V_0, d^1_1} V_1.
$$
This works because $d_1 \circ d_2 = d_1 \circ d_1$,
see Simplicial, Remark \ref{simplicial-remark-relations}.
It is an isomorphism
because $V_\bullet \to (X/S)_\bullet$ is cartesian.
Note for example that the
right hand side is isomorphic to
$V_0 \times_{\pi_0, X, \text{pr}_0} (X \times_S X \times_S X) =
V_0 \times_S X \times_S X$
because $\pi$ is cartesian. Details omitted.

\medskip\noindent
Let $T/S$ be a scheme. Let $a \sim b$ for $a, b \in V_0(T)$
be synonymous with $(a, b) \in V_1(T)$.
The isomorphism $(d^2_2, d^2_1)$ above
implies that if $a \sim b$ and $a \sim c$, then $b \sim c$.
Combined with reflexivity this shows that $\sim$ is
an equivalence relation.
\end{proof}







\section{An example case}
\label{section-example}

\noindent
In this section we show that disjoint unions of spectra
of Artinian rings can be descended along a quasi-compact
surjective flat morphism of schemes.

\begin{lemma}
\label{lemma-equivalence-classes-points}
Let $X \to S$ be a morphism of schemes.
Suppose $V_\bullet \to (X/S)_\bullet$ is cartesian.
For $v \in V_0$ a point define
$$
T_v = \{v' \in V \mid \exists\ v_1 \in V_1:
d^1_1(v_1) = v, d^1_0(v_1) = v'\}
$$
as a subset of $V_0$. Then $v \in T_v$ and
$T_v \cap T_{v'} \not = \emptyset \Rightarrow T_v = T_{v'}$.
\end{lemma}

\begin{proof}
Combine Lemma \ref{lemma-equivalence-relation} and
Groupoids,
Lemma \ref{groupoids-lemma-pre-equivalence-equivalence-relation-points}.
\end{proof}

\begin{lemma}
\label{lemma-quasi-compact}
Let $X \to S$ be a morphism of schemes.
Suppose $V_\bullet \to (X/S)_\bullet$ is cartesian.
Let $v \in V_0$ be a point. If $X \to S$ is quasi-compact, then
$$
T_v = \{v' \in V \mid \exists\ v_1 \in V_1:
d^1_1(v_1) = v, d^1_0(v_1) = v'\}
$$
is a quasi-compact subset of $V_0$.
\end{lemma}

\begin{proof}
Let $F_v$ be the scheme theoretic fibre of $d^1_1 : V_1 \to V_0$
at $v$. Then we see that $T_v$ is the image of the morphism
$$
\xymatrix{
F_v \ar[r] \ar[d] &
V_1 \ar[r]^{d^1_0} \ar[d]^{d^1_1} &
V_0 \\
v \ar[r] &
V_0 &
}
$$
Note that $F_v$ is quasi-compact. This proves the lemma.
\end{proof}

\begin{lemma}
\label{lemma-descent-disjoint-union-Artinian-along-fields}
Let $X \to S$ be a quasi-compact flat surjective morphism.
Let $(V, \varphi)$ be a descent datum relative
to $X \to S$. If $V$ is a disjoint union of
spectra of Artinian rings, then $(V, \varphi)$
is effective.
\end{lemma}

\begin{proof}
We may write $V = \coprod_{i \in I} \text{Spec}(A_i)$
with each $A_i$ local Artinian. Moreover, let
$v_i \in V$ be the unique closed point of $\text{Spec}(A_i)$
for all $i \in I$. Write $i \sim j$ if and only if
$v_i \in T_{v_j}$ with notation as in
Lemma \ref{lemma-equivalence-classes-points} above.
By this lemma and  Lemma \ref{lemma-quasi-compact}
this is an equivalence relation with finite equivalence
classes. Let $\overline{I} = I/\sim$. Then we can write
$V = \coprod_{\overline{i} \in \overline{I}} V_{\overline{i}}$
with
$V_{\overline{i}} = \coprod_{i \in \overline{i}} \text{Spec}(A_i)$.
By construction we see that
$\varphi : V \times_S X \to X \times_S V$ maps
the open and closed subspaces $V_{\overline{i}} \times_S X$
into the open and closed subspaces $X \times_S V_{\overline{i}}$.
In other words, we get descent data
$(V_{\overline{i}}, \varphi_{\overline{i}})$, and
$(V, \varphi)$ is the coproduct of them in the category of
descent data.
Since each of the $V_{\overline{i}}$ is a finite union of
spectra of Artinian local rings the morphism $V_{\overline{i}} \to X$
is affine, see Morphisms, Lemma \ref{morphisms-lemma-Artinian-affine}.
Since $\{X \to S\}$ is an fpqc covering we see that all
the descent data $(V_{\overline{i}}, \varphi_{\overline{i}})$ are effective
by Lemma \ref{lemma-affine}.
Hence we win.
\end{proof}

\noindent
To be sure, the lemma above has very limited applicability!





\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}


\end{document}
