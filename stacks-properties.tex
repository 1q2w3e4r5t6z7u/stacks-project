\input{preamble}

% OK, start here.
%
\begin{document}

\title{Properties of Algebraic Stacks}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
Please see
Algebraic Stacks, Section \ref{algebraic-section-introduction}
for a brief introduction to algebraic stacks, and please read
some of that chapter for our foundations of algebraic stacks.
The intent is that in that chapter we are careful to distinguish
between schemes, algebraic spaces, algebraic stacks, and starting
with this chapter we employ the customary abuse of language where
all of these concepts are used interchangeably.

\medskip\noindent
The goal of this chapter is to introduce some basic notions and
properties of algebraic spaces. A fundamental
reference for the case of quasi-separated algebraic stacks with representable
diagonal is \cite{LM-B}.



\section{Conventions and abuse of language}
\label{section-conventions}

\noindent
We choose a big fppf site $\textit{Sch}_{fppf}$.
All schemes are contained in $\textit{Sch}_{fppf}$.
And all rings $A$ considered have the property that
$\text{Spec}(A)$ is (isomorphic) to an object of this big site.

\medskip\noindent
We also fix a base scheme $S$, by the conventions above an element
of $\textit{Sch}_{fppf}$. The reader who is only interested
in the absolute case can take $S = \text{Spec}(\mathbf{Z})$.

\medskip\noindent
Here are our conventions regarding algebraic stacks:
\begin{enumerate}
\item When we say {\it algebraic stack} we will mean an algebraic
stacks over $S$, i.e., a category fibred in groupoids
$p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$
which satisfies the conditions of
Algebraic Stacks, Definition \ref{algebraic-definition-algebraic-stack}.
\item We will say $f : \mathcal{X} \to \mathcal{Y}$ is a
{\it morphism of algebraic stacks} to indicate a $1$-morphism
of algebraic stacks over $S$, i.e., a $1$-morphism of categories fibred
in groupoids over $(\textit{Sch}/S)_{fppf}$, see
Algebraic Stacks,
Definition \ref{algebraic-definition-morphism-algebraic-stacks}.
\item A {\it $2$-morphism} $\alpha : f \to g$ will
indicate a $2$-morphism in the $2$-category of algebraic stacks over
$S$, see
Algebraic Stacks,
Definition \ref{algebraic-definition-morphism-algebraic-stacks}.
\item Given morphisms $\mathcal{X} \to \mathcal{Z}$
and $\mathcal{Y} \to \mathcal{Z}$ of algebraic stacks
we abusively call the $2$-fibre product
$\mathcal{X} \times_{\mathcal{Z}} \mathcal{Y}$ the {\it fibre product}.
\item We will often abuse notation and say two algebraic stacks
$\mathcal{X}$ and $\mathcal{Y}$ are {\it isomorphic} if they are
equivalent in this $2$-category.
\end{enumerate}

\medskip\noindent
Here are our conventions regarding algebraic spaces.
\begin{enumerate}
\item If we say $X$ is an {\it algebraic space} then we mean that
$X$ is an algebraic space over $S$, i.e., $X$ is a presheaf on
$(\textit{Sch}/S)_{fppf}$ which satisfies the conditions of
Spaces, Definition \ref{spaces-definition-algebraic-space}.
\item A {\it morphism of algebraic spaces} $f :X \to Y$ is a morphism
of algebraic spaces over $S$ as defined in
Spaces, Definition \ref{spaces-definition-morphism-algebraic-spaces}.
\item We will {\bf not} distinguish between an algebraic space $X$
and the algebraic stack $\mathcal{S}_X \to (\textit{Sch}/S)_{fppf}$
it gives rise to, see
Algebraic Stacks, Lemma \ref{algebraic-lemma-representable-algebraic}.
\item In particular, a {\it morphism} $f : X \to \mathcal{Y}$ from $X$
to an algebraic stack $\mathcal{Y}$ means a morphism
$f : \mathcal{S}_X \to \mathcal{Y}$ of algebraic stacks.
Similarly for morphisms $\mathcal{Y} \to X$.
\item Moreover, given an algebraic stack $\mathcal{X}$ we say
{\it $\mathcal{X}$ is an algebraic space} to indicate that $\mathcal{X}$
is representable by an algebraic space, see
Algebraic Stacks,
Definition \ref{algebraic-definition-representable-by-algebraic-space}.
\item We will use the following notational convention: If we
indicate an algebraic stack by a roman capital
(such as $X, Y, Z, A, B, \ldots$) then it will be the case that
its inertia stack is trivial, and hence it is an algebraic space, see
Algebraic Stacks,
Proposition \ref{algebraic-proposition-algebraic-stack-no-automorphisms}.
\end{enumerate}

\medskip\noindent
Here are our conventions regarding schemes.
\begin{enumerate}
\item If we say $X$ is a {\it scheme} then we mean that
$X$ is a scheme over $S$, i.e., $X$ is an object of $(\textit{Sch}/S)_{fppf}$.
\item By a {\it morphism of schemes} we mean a morphism of schemes over $S$.
\item We will {\bf not} distinguish between a scheme $X$ and the
algebraic stack $\mathcal{S}_X \to (\textit{Sch}/S)_{fppf}$ it gives rise
to, see
Algebraic Stacks, Lemma \ref{algebraic-lemma-representable-algebraic}.
\item In particular, a {\it morphism} $f : X \to \mathcal{Y}$ from
a scheme $X$ to an algebraic stack $\mathcal{Y}$ means a morphism
$f : \mathcal{S}_X \to \mathcal{Y}$ of algebraic stacks.
Similarly for morphisms $\mathcal{Y} \to X$.
\item Moreover, given an algebraic stack $\mathcal{X}$ we say
{\it $\mathcal{X}$ is a scheme} to indicate that $\mathcal{X}$
is representable, see
Algebraic Stacks, Section \ref{algebraic-section-representable}.
\end{enumerate}

\medskip\noindent
Here are our conventions regarding morphism of algebraic stacks:
\begin{enumerate}
\item A morphism $f : \mathcal{X} \to \mathcal{Y}$
of algebraic stacks is {\it representable}, or
{\it representable by schemes} if for every scheme
$T$ and morphism $T \to \mathcal{Y}$ the fibre product
$T \times_{\mathcal{Y}} \mathcal{X}$ is a scheme.
See
Algebraic Stacks, Section \ref{algebraic-section-representable-morphism}.
\item A morphism $f : \mathcal{X} \to \mathcal{Y}$
of algebraic stacks is {\it representable by algebraic spaces}
if for every scheme $T$ and morphism $T \to \mathcal{Y}$ the fibre product
$T \times_{\mathcal{Y}} \mathcal{X}$ is an algebraic space.
See Algebraic Stacks,
Definition \ref{algebraic-definition-representable-by-algebraic-spaces}.
In this case $Z \times_{\mathcal{Y}} \mathcal{X}$ is an algebraic
space whenever $Z \to \mathcal{Y}$ is a morphism whose source is
an algebraic space, see
Algebraic Stacks,
Lemma \ref{algebraic-lemma-base-change-by-space-representable-by-space}.
\end{enumerate}
Note that every morphism $X \to \mathcal{Y}$ from an algebraic space
to an algebraic stack is representable by algebraic spaces, see
Algebraic Stacks, Lemma \ref{algebraic-lemma-representable-diagonal}.
We will use this basic result without further mention.




\section{Properties of morphisms representable by algebraic spaces}
\label{section-properties-morphisms}

\noindent
We will study properties of (arbitrary) morphisms of algebraic stacks in its
own chapter. For morphisms representable by algebraic spaces we know what
it means to be surjective, smooth, or etale, etc. This applies in particular
to morphisms $X \to \mathcal{Y}$ from algebraic spaces to algebraic stacks.
In this section, we recall how this works, we list the properties to which
this applies, and we prove a few easy lemmas.

\medskip\noindent
Let $P$ be a property of morphisms of algebraic spaces which is
fppf local on the target and preserved by arbitrary base change.
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks
representable by algebraic spaces. Then we say
{\it $f$ has property $P$} if and only if for every scheme $T$
and morphism $T \to \mathcal{Y}$ the morphism of algebraic spaces
$T \times_{\mathcal{Y}} \mathcal{X} \to T$ has property $P$, see
Algebraic Stacks,
Definition \ref{algebraic-definition-relative-representable-property}.
This applies to $P$ equal to
\begin{enumerate}
\item quasi-compact, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-quasi-compact}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-quasi-compact},
\item quasi-separated, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-separated}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-quasi-separated},
\item universally closed, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-universally-closed}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-universally-closed},
\item universally open, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-universally-open}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-universally-open},
\item surjective, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-surjective}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-surjective},
\item universally injective, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-universally-injective}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-universally-injective},
\item locally of finite type, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-finite-type}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-locally-finite-type},
\item locally of finite presentation, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-finite-presentation}
and
Descent for Spaces, Lemma
\ref{spaces-descent-lemma-descending-property-locally-finite-presentation},
\item finite type, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-finite-type}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-finite-type},
\item finite presentation, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-finite-presentation}
and
Descent for Spaces, Lemma
\ref{spaces-descent-lemma-descending-property-finite-presentation},
\item flat, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-flat}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-flat},
\item open immersion, see
Morphisms of Spaces,
Section \ref{spaces-morphisms-section-immersions}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-open-immersion},
\item isomorphism, see
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-isomorphism},
\item affine, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-affine}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-affine},
\item closed immersion, see
Morphisms of Spaces, Section \ref{spaces-morphisms-section-immersions}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-closed-immersion},
\item separated, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-separated}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-separated},
\item proper, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-proper}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-proper},
\item quasi-affine, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-quasi-affine}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-quasi-affine},
\item integral, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-integral}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-integral},
\item finite, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-integral}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-finite},
\item (locally) quasi-finite, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-quasi-finite}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-quasi-finite},
\item syntomic, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-syntomic}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-syntomic},
\item smooth, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-smooth}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-smooth},
\item unramified, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-unramified}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-unramified},
\item etale, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-etale}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-etale},
\item finite locally free, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-finite-locally-free}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-finite-locally-free},
\item monomorphism, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-monomorphism}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-property-monomorphism},
\item immersion, see
Morphisms of Spaces, Section \ref{spaces-morphisms-section-immersions}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-fppf-property-immersion},
\item locally separated, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-base-change-separated}
and
Descent for Spaces,
Lemma \ref{spaces-descent-lemma-descending-fppf-property-locally-separated},
\end{enumerate}

\begin{lemma}
\label{lemma-property-spaces-too}
Let $P$ be a property of morphisms of algebraic spaces as above.
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks
representable by algebraic spaces. The following are equivalent:
\begin{enumerate}
\item $f$ has $P$,
\item for every algebraic space $Z$ and morphism $Z \to \mathcal{Y}$
the morphism $Z \times_{\mathcal{Y}} \mathcal{X} \to Z$ has $P$.
\end{enumerate}
\end{lemma}

\begin{proof}
The implication (2) $\Rightarrow$ (1) is immediate.
Let $Z \to \mathcal{Y}$ be as in (2). Choose a scheme $U$ and a
surjective etale morphism $U \to Z$. By assumption the morphism
$U \times_{\mathcal{Y}} \mathcal{X} \to U$ has $P$. But the diagram
$$
\xymatrix{
U \times_{\mathcal{Y}} \mathcal{X} \ar[d] \ar[r] &
Z \times_{\mathcal{Y}} \mathcal{X} \ar[d] \\
U \ar[r] & Z
}
$$
is cartesian, hence the right vertical arrow has $P$ as
$\{U \to Z\}$ is an fppf covering.
\end{proof}

\noindent
The following lemma says in particular that it suffices to check $P$
after base change by a smooth surjective morphism.

\begin{lemma}
\label{lemma-check-property-covering}
Let $P$ be a property of morphisms of algebraic spaces as above.
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks
representable by algebraic spaces.
Let $W$ be an algebraic space and let $W \to \mathcal{Y}$ be surjective,
locally of finite presentation, and flat.
Set $V = W \times_{\mathcal{Y}} \mathcal{X}$. Then
$$
(f\text{ has }P) \Leftrightarrow (\text{the projection }V \to W\text{ has }P).
$$
\end{lemma}

\begin{proof}
The implication from left to right follows from
Lemma \ref{lemma-property-spaces-too}.
Assume $V \to W$ has $P$. Let $T$ be a scheme, and let
$T \to \mathcal{Y}$ be a morphism. Consider the commutative diagram
$$
\xymatrix{
T \times_{\mathcal{Y}} \mathcal{X} \ar[d] &
T \times_{\mathcal{Y}} W \ar[d] \ar[l] \ar[r] &
W \ar[d] \\
T & T \times_{\mathcal{Y}} V \ar[l] \ar[r] & V
}
$$
of algebraic spaces. The squares are cartesian.
The bottom left morphism is a surjective, flat morphism which is locally of
finite presentation, hence $\{T \times_{\mathcal{Y}} V \to T\}$ is an
fppf covering. Hence the fact that the right vertical arrow has property
$P$ implies that the left vertical arrow has property $P$.
\end{proof}







\section{Points of algebraic stacks}
\label{section-points}

\noindent
Let $\mathcal{X}$ be an algebraic stack. Let $K, L$ be two fields
and let $p : \text{Spec}(K) \to \mathcal{X}$ and
$q : \text{Spec}(L) \to \mathcal{X}$ be morphisms.
We say that $p$ and $q$ are {\it equivalent} if there exists a
field $\Omega$ and a $2$-commutative diagram
$$
\xymatrix{
\text{Spec}(\Omega) \ar[r] \ar[d] &
\text{Spec}(L) \ar[d]^q \\
\text{Spec}(K) \ar[r]^p &
\mathcal{X}.
}
$$

\begin{lemma}
\label{lemma-equivalence}
The notion above does indeed define an equivalence relation on
morphisms from spectra of fields into the algebraic stack $\mathcal{X}$.
\end{lemma}

\begin{proof}
It is clear that the relation is reflexive and symmetric.
Hence we have to prove that it is transitive. This comes down
to the following: Given a diagram
$$
\xymatrix{
\text{Spec}(\Omega) \ar[r]_b \ar[d]_a &
\text{Spec}(L) \ar[d]^q & \text{Spec}(\Omega') \ar[l]^{b'} \ar[d]^{a'} \\
\text{Spec}(K) \ar[r]^p &
\mathcal{X} &
\text{Spec}(K') \ar[l]_{p'}
}
$$
with both squares $2$-commutative we have to show that $a$ is equivalent to
$a'$. By the $2$-Yoneda lemma (see
Algebraic Stacks, Section \ref{algebraic-section-2-yoneda})
the morphisms $p$, $p'$, and $q$ are given by objects
$x$, $x'$, and $y$ in the fibre categories of $\mathcal{X}$ over
$\text{Spec}(K)$, $\text{Spec}(K')$, and $\text{Spec}(L)$. The
$2$-commutativity of the squares means that there are isomorphisms
$\alpha : a^*x \to b^*y$ and $\alpha' : (a')^*x' \to (b')^*y$
in the fibre categories
of $\mathcal{X}$ over $\text{Spec}(\Omega)$ and $\text{Spec}(\Omega')$.
Choose any field $\Omega''$ and embeddings
$\Omega \to \Omega''$ and $\Omega' \to \Omega''$ agreeing on $L$.
Then we can extend the diagram above to
$$
\xymatrix{
& \text{Spec}(\Omega'') \ar[ld]_c \ar[d]^{q'} \ar[rd]^{c'} \\
\text{Spec}(\Omega) \ar[r]_b \ar[d]_a &
\text{Spec}(L) \ar[d]^q & \text{Spec}(\Omega') \ar[l]^{b'} \ar[d]^{a'} \\
\text{Spec}(K) \ar[r]^p &
\mathcal{X} &
\text{Spec}(K') \ar[l]_{p'}
}
$$
with commutative triangles and
$(q')^*\beta^{-1} \circ (q')^*\alpha : (a \circ c)^*x \to (a' \circ c')^*x'$
is an isomorphism in the fibre category over $\text{Spec}(\Omega'')$.
Hence $a$ is equivalent to $a'$.
\end{proof}

\begin{definition}
\label{definition-points}
Let $\mathcal{X}$ be an algebraic stack.
A {\it point} of $\mathcal{X}$ is an equivalence class of morphisms
from spectra of fields into $\mathcal{X}$.
The set of points of $\mathcal{X}$ is denoted $|\mathcal{X}|$.
\end{definition}

\noindent
This agrees with our definition of points of algebraic spaces, see
Properties of Spaces, Definition \ref{spaces-properties-definition-points}.
Moreover, for a scheme we recover the usual notion of points, see
Properties of Spaces, Lemma \ref{spaces-properties-lemma-scheme-points}.
If $f : \mathcal{X} \to \mathcal{Y}$ is a morphism of algebraic stacks
then there is an induced map $|f| : |\mathcal{X}| \to |\mathcal{Y}|$ which
maps a representative $x : \text{Spec}(K) \to \mathcal{X}$ to the
representative $f \circ x : \text{Spec}(K) \to \mathcal{Y}$. This is
well defined: namely $2$-isomorphic $1$-morphisms remain $2$-isomorphic after
pre- or post-composing by a $1$-morphism because you can horizontally
pre- or post-compose by the identity of the given $1$-morphism. This holds
in any (strict) $(2,1)$-category. If
$$
\xymatrix{
\mathcal{X} \ar[d] \ar[r] & \mathcal{Y} \ar[d] \\
\mathcal{W} \ar[r] & \mathcal{Z}
}
$$
is a $2$-commutative diagram of algebraic stacks, then the diagram
of sets
$$
\xymatrix{
|\mathcal{X}| \ar[d] \ar[r] & |\mathcal{Y}| \ar[d] \\
|\mathcal{W}| \ar[r] & |\mathcal{Z}|
}
$$
is commutative.
In particular, if $\mathcal{X} \to \mathcal{Y}$ is an equivalence
then $|\mathcal{X}| \to |\mathcal{Y}|$ is a bijection.

\begin{lemma}
\label{lemma-points-cartesian}
Let
$$
\xymatrix{
\mathcal{Z} \times_{\mathcal{Y}} \mathcal{X} \ar[r] \ar[d] &
\mathcal{X} \ar[d] \\
\mathcal{Z} \ar[r] & \mathcal{Y}
}
$$
be a fibre product of algebraic stacks. Then the map of sets
of points
$$
|\mathcal{Z} \times_{\mathcal{Y}} \mathcal{X}|
\longrightarrow
|\mathcal{Z}| \times_{|\mathcal{Y}|} |\mathcal{X}|
$$
is surjective.
\end{lemma}

\begin{proof}
Namely, suppose given fields $K$, $L$ and morphisms
$\text{Spec}(K) \to \mathcal{X}$, $\text{Spec}(L) \to \mathcal{Z}$,
then the assumption that they agree as elements of $|\mathcal{Y}|$ means that
there is a common extension $K \subset M$ and $L \subset M$
such that
$\text{Spec}(M) \to \text{Spec}(K) \to \mathcal{X} \to \mathcal{Y}$ and
$\text{Spec}(M) \to \text{Spec}(L) \to \mathcal{Z} \to \mathcal{Y}$
are $2$-isomorphic. And this is exactly the condition which says you get a
morphism $\text{Spec}(M) \to \mathcal{Z} \times_{\mathcal{Y}} \mathcal{X}$.
\end{proof}

\begin{lemma}
\label{lemma-characterize-surjective}
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks
which is representable by algebraic spaces. The following are equivalent:
\begin{enumerate}
\item $|f| : |\mathcal{X}| \to |\mathcal{Y}|$ is surjective, and
\item $f$ is surjective.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume (1). Let $T \to \mathcal{Y}$ be a morphism whose source is a scheme.
To prove (2) we have to show that the morphism of algebraic spaces
$T \times_{\mathcal{Y}} \mathcal{X} \to T$ is surjective. By
Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-surjective}
this means we have to show that
$|T \times_{\mathcal{Y}} \mathcal{X}| \to |T|$ is surjective.
Applying
Lemma \ref{lemma-points-cartesian}
we see that this follows from (1).

\medskip\noindent
Conversely, assume (2). Let $y : \text{Spec}(K) \to \mathcal{Y}$ be a
morphism from the spectrum of a field into $\mathcal{Y}$. By assumption the
morphism
$\text{Spec}(K) \times_{y, \mathcal{Y}} \mathcal{X} \to \text{Spec}(K)$
of algebraic spaces is surjective. By
Morphisms of Spaces, Definition \ref{spaces-morphisms-definition-surjective}
this means there exists a field extension
$K \subset K'$ and a morphism
$\text{Spec}(K') \to \text{Spec}(K) \times_{y, \mathcal{Y}} \mathcal{X}$
such that the left square of the diagram
$$
\xymatrix{
\text{Spec}(K') \ar[r] \ar[d] &
\text{Spec}(K) \times_{y, \mathcal{Y}} \mathcal{X} \ar[d] \ar[r] &
\mathcal{X} \ar[d]
\\
\text{Spec}(K) \ar@{=}[r] &
\text{Spec}(K) \ar[r]^-x &
\mathcal{Y}
}
$$
is commutative. This shows that $|X| \to |\mathcal{Y}|$ is surjective.
\end{proof}

\noindent
Here is a lemma explaining how to compute the set of points in terms
of a presentation.

\begin{lemma}
\label{lemma-points-presentation}
Let $\mathcal{X}$ be an algebraic stack.
Let $\mathcal{X} = [U/R]$ be a presentation of $\mathcal{X}$, see
Algebraic Stacks, Definition \ref{algebraic-definition-presentation}.
Then the image of $|R| \to |U| \times |U|$ is an equivalence relation
and $|\mathcal{X}|$ is the quotient of $|U|$ by this equivalence relation.
\end{lemma}

\begin{proof}
The assumption means that we have a smooth groupoid $(U, R, s, t, c)$
in algebraic spaces, and an equivalence $f : [U/R] \to \mathcal{X}$.
We may assume $\mathcal{X} = [U/R]$.
The induced morphism $p : U \to \mathcal{X}$ is smooth and surjective, see
Algebraic Stacks,
Lemma \ref{algebraic-lemma-smooth-quotient-smooth-presentation}.
Hence $|U| \to |\mathcal{X}|$ is surjective by
Lemma \ref{lemma-characterize-surjective}.
Note that $R = U \times_{\mathcal{X}} U$, see
Groupoids in Spaces,
Lemma \ref{spaces-groupoids-lemma-quotient-stack-2-cartesian}.
Hence
Lemma \ref{lemma-points-cartesian}
implies the map
$$
|R| \longrightarrow |U| \times_{|\mathcal{X}|} |U|
$$
is surjective. Hence the image of $|R| \to |U| \times |U|$ is
exactly the set of pairs $(u_1, u_2) \in |U| \times |U|$
such that $u_1$ and $u_2$ have the same image in $|\mathcal{X}|$.
Combining these two statements we get the result of the lemma.
\end{proof}

\begin{remark}
\label{remark-more-general-presentation}
The result of
Lemma \ref{lemma-points-presentation}
can be generalized as follows.
Let $\mathcal{X}$ be an algebraic stack.
Let $U$ be an algebraic space and let $f : U \to \mathcal{X}$ be a surjective
morphism (which makes sense by
Section \ref{section-properties-morphisms}).
Let $R = U \times_{\mathcal{X}} U$, let $(U, R, s, t, c)$ be the groupoid
in algebraic spaces, and let $f_{can} : [U/R] \to \mathcal{X}$ be the
canonical morphism as constructed in
Algebraic Stacks, Lemma \ref{algebraic-lemma-map-space-into-stack}.
Then the image of $|R| \to |U| \times |U|$ is an equivalence relation
and $|\mathcal{X}| = |U|/|R|$. The proof of
Lemma \ref{lemma-points-presentation}
works without change. (Of course in general $[U/R]$ is not an algebraic
stack, and in general $f_{can}$ is not an isomorphism.)
\end{remark}

\begin{lemma}
\label{lemma-topology-points}
There exists a unique topology on the sets of points
of algebraic stacks with the following properties:
\begin{enumerate}
\item for every morphism of algebraic stacks $\mathcal{X} \to \mathcal{Y}$
the map $|\mathcal{X}| \to |\mathcal{Y}|$ is continuous, and
\item for every morphism $U \to \mathcal{X}$ which is flat and locally
of finite presentation with $U$ an algebraic space
the map of topological spaces $|U| \to |\mathcal{X}|$ is continuous and open.
\end{enumerate}
\end{lemma}

\begin{proof}
Choose a morphism $p : U \to \mathcal{X}$ which is
surjective, flat, and locally of finite presentation
with $U$ an algebraic space. Such exist by the definition of an algebraic
stack, as a smooth morphism is flat and locally of finite presentation
(see
Algebraic stacks,
Lemma \ref{algebraic-lemma-representable-transformations-property-implication}
and
Morphisms of Spaces,
Lemmas \ref{spaces-morphisms-lemma-smooth-locally-finite-presentation} and
\ref{spaces-morphisms-lemma-smooth-flat}).
We define a topology on $|\mathcal{X}|$ by the rule:
$W \subset |\mathcal{X}|$ is open if and only if $|p|^{-1}(W)$ is open
in $|U|$. To show that this is independent of the choice of $p$, let
$p' : U' \to \mathcal{X}$ be another morphism which is surjective, flat,
locally of finite presentation from an algebraic space to
$\mathcal{X}$. Set $U'' = U \times_{\mathcal{X}} U'$
so that we have a $2$-commutative diagram
$$
\xymatrix{
U'' \ar[r] \ar[d] & U' \ar[d] \\
U \ar[r] & \mathcal{X}
}
$$
As $U \to \mathcal{X}$ and $U' \to \mathcal{X}$ are surjective, flat,
locally of finite presentation we see that $U'' \to U'$ and $U'' \to U$
are surjective, flat and locally of finite presentation, see
Lemma \ref{lemma-property-spaces-too}.
Hence the maps $|U''| \to |U'|$ and $|U''| \to |U|$ are continuous, open
and surjective, see
Morphisms of Spaces,
Definition \ref{spaces-morphisms-definition-surjective} and
Lemma \ref{spaces-morphisms-lemma-fppf-open}.
This clearly implies that our definition is independent of the choice
of $p : U \to \mathcal{X}$.

\medskip\noindent
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of algebraic stacks.
By
Algebraic Stacks, Lemma \ref{algebraic-lemma-lift-morphism-presentations}
we can find a $2$-commutative diagram
$$
\xymatrix{
U \ar[d]_x \ar[r]_a & V \ar[d]^y \\
\mathcal{X} \ar[r]^f & \mathcal{Y}
}
$$
with surjective smooth vertical arrows.
Consider the associated commutative diagram
$$
\xymatrix{
|U| \ar[d]_{|x|} \ar[r]_{|a|} & |V| \ar[d]^{|y|} \\
|\mathcal{X}| \ar[r]^{|f|} & |\mathcal{Y}|
}
$$
of sets. If $W \subset |\mathcal{Y}|$ is open, then by the definition
above this means exactly that $|y|^{-1}(W)$ is open in $|V|$. Since
$|a|$ is continuous we conclude that
$|a|^{-1}|y|^{-1}(W) = |x|^{-1}|f|^{-1}(W)$ is open in $|W|$ which means
by definition that $|f|^{-1}(W)$ is open in $|\mathcal{X}|$.
Thus $|f|$ is continuous.

\medskip\noindent
Finally, we have to show that if $U$ is an algebraic space, and
$U \to \mathcal{X}$ is flat and locally of finite presentation, then
$|U| \to |\mathcal{X}|$ is open. Let $V \to \mathcal{X}$ be surjective,
flat, and locally of finite presentation with $V$ an algebraic space.
Consider the commutative diagram
$$
\xymatrix{
|U \times_{\mathcal{X}} V| \ar[r]_e \ar[rd]_f &
|U| \times_{|\mathcal{X}|} |V| \ar[d]_c \ar[r]_d &
|V| \ar[d]^b \\
& |U| \ar[r]^a & |\mathcal{X}|
}
$$
Now the morphism $U \times_{\mathcal{X}} V \to U$ is surjective, i.e,
$f : |U \times_{\mathcal{X}} V| \to |U|$ is surjective.
The left top horizontal arrow is surjective, see
Lemma \ref{lemma-points-cartesian}.
The morphism $U \times_{\mathcal{X}} V \to V$ is flat and locally of finite
presentation, hence $d \circ e : |U \times_{\mathcal{X}} V| \to |V|$ is open,
see
Morphisms of Spaces, Lemma \ref{spaces-morphisms-lemma-fppf-open}.
Pick $W \subset |U|$ open. The properties above imply that
$b^{-1}(a(W)) = (d \circ e)(f^{-1}(W))$ is open, which by construction means
that $a(W)$ is open as desired.
\end{proof}












\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
