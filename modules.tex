\input{preamble}

% OK, start here.
%
\begin{document}

\title{Sheaves of modules}

%\begin{abstract}
%\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
In this document we work out basic notions of sheaves of modules.
This in particular includes the case of abelian sheaves, since
these may be viewed as sheaves of $\underline{\mathbf{Z}}$-modules.
We work out what happens for sheaves of modules on ringed topoi
as well, allthough we will simply duplicate the discussion,
and have sections detailing the constructions in the topological
case and in the case of sites.
Basic references are \cite{EGA} and \cite{SGA4}.

\section{The abelian category of sheaves of modules}
\label{section-kernels}

\noindent
Let $(X, \mathcal{O}_X)$ be a ringed space, see
Sheaves, Definition \ref{sheaves-definition-ringed-space}.
Let $\mathcal{F}$, $\mathcal{G}$ be sheaves of $\mathcal{O}_X$-modules, see
Sheaves, Definition \ref{sheaves-definition-sheaf-modules}.
Let $\varphi, \psi : \mathcal{F} \to \mathcal{G}$
be morphisms of sheaves of $\mathcal{O}_X$-modules.
We define $\varphi + \psi : \mathcal{F} \to \mathcal{G}$
to be the map which on each open $U \subset X$ is the
sum of the maps induced by $\varphi$, $\psi$. This is
clearly again a map of sheaves of $\mathcal{O}_X$-modules.
It is also clear that composition of maps of
$\mathcal{O}_X$-modules is bilinear with respect to this
addition. Thus $\textit{Mod}(\mathcal{O}_X)$ is a pre-additive
category, see Homology, Definition \ref{homology-definition-preadditive}.

\medskip\noindent
We will denote $0$ the sheaf of $\mathcal{O}_X$-modules
which has constant value $\{0\}$ for all open $U \subset X$.
Clearly this is both a final and an initial object of
$\textit{Mod}(\mathcal{O}_X)$. Given a morphism
of $\mathcal{O}_X$-modules $\varphi : \mathcal{F} \to \mathcal{G}$
the following are equivalent:
(a) $\varphi$ is zero, (b) $\varphi$ factors through $0$,
(c) $\varphi$ is zero on sections over each open $U$, and
(d) $\varphi_x = 0$ for all $x \in X$. See 
Sheaves, Lemma \ref{sheaves-lemma-points-exactness}.

\medskip\noindent
Moreover, given a pair
$\mathcal{F}$, $\mathcal{G}$ of sheaves of $\mathcal{O}_X$-modules
we may define the direct sum as
$$
\mathcal{F} \oplus \mathcal{G} = \mathcal{F} \times \mathcal{G}
$$
with obvious maps $(i, j, p, q)$ as in Homology, Definition
\ref{homology-definition-direct-sum}. Thus $\textit{Mod}(\mathcal{O}_X)$
is an additive category, see
Homology, Definition \ref{homology-definition-additive-category}.

\medskip\noindent
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism
of $\mathcal{O}_X$-modules. We may define $\text{Ker}(\varphi)$
to be the subsheaf of $\mathcal{F}$ with sections
$$
\text{Ker}(\varphi)(U) =
\{ s \in \mathcal{F}(U) \mid \varphi(s) = 0 \text{ in } \mathcal{G}(U)\}
$$
for all open $U \subset X$. It is easy to see that this is indeed
a kernel in the category of $\mathcal{O}_X$-modules. In other words,
a morphism $\alpha : \mathcal{H} \to \mathcal{F}$ factors
through $\text{Ker}(\varphi)$ if and only if $\varphi \circ \alpha = 0$.
Moreover, on the level of stalks we have
$\text{Ker}(\varphi)_x = \text{Ker}(\varphi_x)$.

\medskip\noindent
On the other hand, we define
$\text{Coker}(\varphi)$ as the sheaf of $\mathcal{O}_X$-modules
associated to the presheaf of $\mathcal{O}_X$-modules defined
by the rule
$$
U
\longmapsto
\text{Coker}(\mathcal{G}(U)\to \mathcal{F}(U)) =
\mathcal{F}(U)/\varphi(\mathcal{G}(U)).
$$
Since taking stalks commutes with taking sheafification, see
Sheaves, Lemma \ref{sheaves-lemma-stalk-sheafification} we
see that $\text{Coker}(\varphi)_x = \text{Coker}(\varphi_x)$.
Thus the map $\mathcal{G} \to \text{Coker}(\varphi)$ is surjective
(as a map of sheaves of sets),
see Sheaves, Section \ref{sheaves-section-exactness-points}.
To show that this is a cokernel, note that if
$\beta : \mathcal{G} \to \mathcal{H}$ is a morphism of $\mathcal{O}_X$-modules
such that $\beta \circ \varphi$ is zero, then you get for every
open $U \subset X$ a map induced by $\beta$ from 
$\mathcal{G}(U)/\varphi(\mathcal{F}(U))$ into $\mathcal{H}(U)$.
By the universal property of sheafification (see
Sheaves, Lemma \ref{sheaves-lemma-sheafification-presheaf-modules})
we obtain a canonical map $\text{Coker}(\varphi) \to \mathcal{H}$
such that the original $\beta$ is equal to 
the composition
$\mathcal{G} \to \text{Coker}(\varphi) \to \mathcal{H}$.
The morphism $\text{Coker}(\varphi) \to \mathcal{H}$ is unique
because of the surjectivity mentioned above.

\begin{lemma}
\label{lemma-abelian}
Let $(X, \mathcal{O}_X)$ be a ringed space. The category
$\textit{Mod}(\mathcal{O})$ is an abelian category. Moreover
a complex 
$$
\mathcal{F} \to \mathcal{G} \to \mathcal{H}
$$
is exact at $\mathcal{G}$ if and only if for all $x \in X$ the
complex
$$
\mathcal{F}_x \to \mathcal{G}_x \to \mathcal{H}_x
$$
is exact at $\mathcal{G}_x$.
\end{lemma}

\begin{proof}
By Homology, Definition \ref{homology-definition-abelian-category}
we have to show that image and coimage agree. By Sheaves,
Lemma \ref{sheaves-lemma-points-exactness} it is enough to show
that image and coimage have the same stalk at every $x \in X$.
By the constructions of kernels and cokernels above these stalks
are the coimage and image in the categories of $\mathcal{O}_{X,x}$-modules.
Thus we get the result from the fact that the category of modules
over a ring is abelian.
\end{proof}

\noindent
Actually the category $\textit{Mod}(\mathcal{O}_X)$ has many more properties.
Here are a two constructions we can do.
\begin{enumerate}
\item Given any set $I$ and for each $i \in I$ a $\mathcal{O}_X$-module
we can form the product
$$
\prod\nolimits_{i \in I} \mathcal{F}_i
$$
which is the sheaf that associates to each open $U$ the
product of the modules $\mathcal{F}_i(U)$. This is also the
categorical product, as in
Categories, Definition \ref{categories-definition-product}.
\item Given any set $I$ and for each $i \in I$ a $\mathcal{O}_X$-module
we can form the direct sum
$$
\bigoplus\nolimits_{i \in I} \mathcal{F}_i
$$
which is the {\it sheafification} of the presheaf
that associates to each open $U$ the
direct sum of the modules $\mathcal{F}_i(U)$.
This is also the categorical coproduct, as in
Categories, Definition \ref{categories-definition-coproduct}.
To see this you use the universal property of sheafification.
\end{enumerate}
Since any abelian category has equalizers and coequalizers
we conclude that all limits and colimits exist in
$\textit{Mod}(\mathcal{O}_X)$, see
Categories, Lemmas
\ref{categories-lemma-limits-products-equalizers} and
\ref{categories-lemma-colimits-coproducts-coequalizers}.

\begin{lemma}
\label{lemma-limits-colimits}
All limits and colimits exist in $\textit{Mod}(\mathcal{O}_X)$.
\end{lemma}

\begin{proof}
See discussion above.
\end{proof}

\noindent
This allows us to consider exactness properties of
functors defined on the category of $\mathcal{O}$-modules
in terms of limits and colimits, as in
Categories, Section \ref{categories-section-exact-functor}.
See Homology, Lemma \ref{homology-lemma-exact-functor} for a
description of exactness
properties in terms of short exact sequences.

\begin{lemma}
\label{lemma-exactness-pushforward-pullback}
Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$
be a morphism of ringed spaces.
\begin{enumerate}
\item The functor $f_*$ is left exact. In fact it commutes with
all limits.
\item The functor $f^*$ is right exact. In fact it commutes
with all colimits.
\end{enumerate}
\end{lemma}

\begin{proof}
This is true because $(f^*, f_*)$ is an adjoint pair
of functors, see
Sheaves, Lemma \ref{sheaves-lemma-adjoint-pullback-pushforward-modules}.
See Categories, Section \ref{categories-section-adjoint}.
\end{proof}



\section{Sections of sheaves of $\mathcal{O}$-modules}
\label{section-sections}

\noindent
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
Let $s \in \Gamma(X, \mathcal{F}) = \mathcal{F}(X)$ be a
global section. There is a unique {\it map of $\mathcal{O}_X$-modules
$$
\mathcal{O}_X \longrightarrow \mathcal{F},\ f \longmapsto fs
$$
associated to $s$}. The notation above signifies that a local
section $f$ of $\mathcal{O}_X$, i.e., a section $f$ over some open $U$,
is mapped to the multiplication of $f$ with the restriction of $s$ to
$U$. Conversely, any map $\varphi : \mathcal{O}_X \to \mathcal{F}$
gives rise to a section $s = \varphi(1)$ such that $\varphi$ is
the morphism associated to $s$.

\begin{definition}
\label{definition-globally-generated}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
We say that {\it $\mathcal{F}$ is generated by global
sections} if there exist a set $I$, and
global sections $s_i \in \Gamma(X, \mathcal{F})$, $i \in I$
such that the map
$$
\bigoplus\nolimits_{i \in I}
\mathcal{O}_X \longrightarrow \mathcal{F}
$$
which is the map associated to $s_i$ on the summand corresponding to $i$,
is surjective. In this case we say that the sections $s_i$
{\it generate} $\mathcal{F}$.
\end{definition}

\noindent
We often use the abuse of notation introduced in
Sheaves, Section \ref{sheaves-section-stalks} where, given a local
section $s$ of $\mathcal{F}$ defined in a neighbourhood
of a point $x \in X$, we denote $s_x$, or even $s$ the image of $s$
in the stalk $\mathcal{F}_x$.

\begin{lemma}
\label{lemma-globally-generated}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
Let $I$ be a set. Let
$s_i \in \Gamma(X, \mathcal{F})$, $i \in I$.
be global sections. The sections $s_i$ generate
$\mathcal{F}$ if and only if for all $x\in X$ the
elements $s_{i, x} \in \mathcal{F}_x$ generate
the $\mathcal{O}_{X, x}$-module $\mathcal{F}_x$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-locally-generated}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
Let $I$ be a set. Let $s_i$, $i \in I$ be a collection
of local sections of $\mathcal{F}$, i.e., $s_i \in \mathcal{F}(U_i)$
for some opens $U_i \subset X$. There exists a unique smallest
subsheaf of $\mathcal{O}_X$-modules $\mathcal{G}$ such
that each $s_i$ corresponds to a local section of
$\mathcal{G}$.
\end{lemma}

\begin{proof}
Consider the sub-presheaf of $\mathcal{O}_X$-modules
defined by the rule
$$
U
\longmapsto
\{
\text{sums } \sum\nolimits_{i \in J} f_i (s_i|_U)
\text{ where } J \text{ is finite, }
U \subset U_i \text{ for } i\in J, \text{ and }
f_i \in \mathcal{O}_X(U)
\}
$$
Let $\mathcal{G}$ be the sheafification of this sub-presheaf.
This is a subsheaf of $\mathcal{F}$ by 
Sheaves, Lemma \ref{sheaves-lemma-characterize-epi-mono}.
Since all the finite sums clearly have to be in $\mathcal{G}$
this is the smallest subsheaf as desired.
\end{proof}

\begin{definition}
\label{definition-locally-generated}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
Given a set $I$, and
local sections $s_i$, $i \in I$ of $\mathcal{F}$
we say that the subsheaf $\mathcal{G}$ of
Lemma \ref{lemma-locally-generated}
above is the {\it subsheaf generated by the $s_i$}.
\end{definition}

\begin{lemma}
\label{lemma-locally-generated-stalk}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
Given a set $I$, and
local sections $s_i$, $i \in I$ of $\mathcal{F}$.
Let $\mathcal{G}$ be the subsheaf generated by the
$s_i$ and let $x\in X$.
Then $\mathcal{G}_x$ is the $\mathcal{O}_{X,x}$-submodule of
$\mathcal{F}_x$ generated by the elements $s_{i, x}$
for those $i$ such that $s_i$ is defined at $x$.
\end{lemma}

\begin{proof}
This is clear from the construction of $\mathcal{G}$
in the proof of Lemma \ref{lemma-locally-generated}.
\end{proof}

\section{Quasi-coherent sheaves}
\label{section-quasi-coherent}

\noindent
Let $(X, \mathcal{O}_X)$ be a ringed space.
In this and the following section we will often restrict
sheaves to open subspaces $U \subset X$, see
Sheaves, Section \ref{sheaves-section-open-immersions}.
In particular, we will often denote the open subspace
by $(U, \mathcal{O}_U)$ instead of the more correct
notation $(U, \mathcal{O}_X|_U)$, see 
Sheaves, Definition \ref{sheaves-definition-restriction}.

\begin{definition}
Let $(X, \mathcal{O}_X)$ be a ringed space.
Let $\mathcal{F}$ be a sheaf of $\mathcal{O}_X$-modules.
We say that $\mathcal{F}$ is {\it a quasi-coherent
sheaf of $\mathcal{O}_X$-modules} if for every
point $x \in X$ there exists a neighbourhood
$x\in U \subset X$ such that $\mathcal{F}|_U$
is isomorphic to the cokernel of a map
$$
\bigoplus\nolimits_{j \in J}
\mathcal{O}_U
\longrightarrow
\bigoplus\nolimits_{i \in I}
\mathcal{O}_U
$$
\end{definition}

\noindent
This means that $X$ is covered by open sets $U$
such that $\mathcal{F}|_U$ has a {\it presentation}
of the form
$$
\bigoplus\nolimits_{j \in J}
\mathcal{O}_U
\longrightarrow
\bigoplus\nolimits_{i \in I}
\mathcal{O}_U
\to
\mathcal{F}|_U
\to
0.
$$
Here presentation signifies that the displayed
sequence is exact. In other words
\begin{enumerate}
\item for every point $x$ of $X$ there exists
an open neighbourhood such that $\mathcal{F}|_U$
is generated by global sections, and
\item for a suitable choice of these sections
the kernel of the associated surjection is also
generated by global sections.
\end{enumerate}


\begin{lemma}
\label{lemma-pullback-quasi-coherent}
Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$
be a morphism of ringed spaces.
The pullback $f^*\mathcal{G}$ of a quasi-coherent
$\mathcal{O}_Y$-module is quasi-coherent.
\end{lemma}

\begin{proof}
We have seen that $f^*$ commutes with all colimits,
and is right exact, see Lemma \ref{lemma-exactness-pushforward-pullback}.
Thus if we have an exact sequence
$$
\bigoplus\nolimits_{j \in J}
\mathcal{O}_Y
\longrightarrow
\bigoplus\nolimits_{i \in I}
\mathcal{O}_Y
\to
\mathcal{G}
\to
0
$$
then upon applying $f^*$ we obtain the exact sequence
$$
\bigoplus\nolimits_{j \in J}
\mathcal{O}_X
\longrightarrow
\bigoplus\nolimits_{i \in I}
\mathcal{O}_X
\to
f^*\mathcal{G}
\to
0.
$$
This implies the lemma, because given an open subspace
$V$ of $X$ we may consider the commutative diagram of
ringed spaces
$$
\xymatrix{
(f^{-1}V, \mathcal{O}_{f^{-1}V}) \ar[r] \ar[d] &
(X, \mathcal{O}_X) \ar[d] \\
(V, \mathcal{O}_V) \ar[r] &
(Y, \mathcal{O}_Y)
}
$$
In other words, if there is a suitable presentation of
$\mathcal{F}|_V$, then $f^*\mathcal{F}|_{f^{-1}V}$ also
has a suitable presentation.
\end{proof}





\section{Ringed topoi}
\label{section-ringed-topoi}

\begin{definition}
\label{definition-ringed-topos}
A {\it ringed topos} is a pair $(\textit{Sh}(\mathcal{C}), \mathcal{O})$
where $\mathcal{C}$ is a site and $\mathcal{O}$ is a sheaf of rings
on $\mathcal{C}$.
\end{definition}



\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
