\input{preamble}

% OK, start here.
%
\begin{document}

\title{Sheaves on Algebraic Stacks}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
There is a myriad of ways to think about sheaves on algebraic stacks.
In this chapter we discuss one approach, which is particularly well
adapted to our foundations for algebraic stacks. Whenever we introduce
a type of sheaves we will indicate the precise relationship with
similar notions in the literature.
The goal of this chapter is to state those results
that are either obviously true or straightforward to prove
and leave more intricate constructions till later.

\medskip\noindent
In fact, it turns out that to develop a fully fledged theory of
constructible \'etale sheaves and/or an adequate discussion of
derived categories of complexes $\mathcal{O}$-modules whose
cohomology sheaves are quasi-coherent takes a significant amount of work, see
\cite{olsson_sheaves}. We will return to these issues later
(insert future reference here).

\medskip\noindent
In the literature and in research papers on sheaves on algebraic stacks
the lisse-\'etale site of an algebraic stack often plays a prominent role.
However, it is a problematic beast, because it turns out that a morphism of
algebraic stacks does not induce a morphism of lisse-\'etale topoi. We have
therefore made the design decision to avoid any mention of the lisse-\'etale
site as long as possible. Arguments that traditionally use the lisse-\'etale
site will be replaced by an argument using a {\v C}ech covering
in the site $\mathcal{X}_{smooth}$ defined below.


\section{Conventions}
\label{section-conventions}

\noindent
The conventions we use in this chapter are the same as those in the
chapter on algebraic stacks, see
Algebraic Stacks, Section \ref{algebraic-section-conventions}.
For convenience we repeat them here.

\medskip\noindent
We work in a suitable big fppf site $\textit{Sch}_{fppf}$ as in
Topologies, Definition \ref{topologies-definition-big-fppf-site}.
So, if not explicitly stated otherwise all schemes will be objects
of $\textit{Sch}_{fppf}$. We record what changes if you change the big
fppf site elsewhere (insert future reference here).

\medskip\noindent
We will always work relative to a base $S$ contained in $\textit{Sch}_{fppf}$.
And we will then work with the big fppf site $(\textit{Sch}/S)_{fppf}$, see
Topologies, Definition \ref{topologies-definition-big-small-fppf}.
The absolute case can be recovered by taking
$S = \text{Spec}(\mathbf{Z})$.





\section{Presheaves}
\label{section-presheaves}

\noindent
In this section we define presheaves on categories fibred in groupoids
over $(\textit{Sch}/S)_{fppf}$, but most of the discussion works
for categories over any base category. This section also serves to
introduce the notation we will use later on.

\begin{definition}
\label{definition-presheaves}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred in
groupoids.
\begin{enumerate}
\item A {\it presheaf on $\mathcal{X}$} is a presheaf on the
underlying category of $\mathcal{X}$.
\item A {\it morphism of presheaves on $\mathcal{X}$} is a morphism of
presheaves on the underlying category of $\mathcal{X}$.
\end{enumerate}
We denote $\textit{PSh}(\mathcal{X})$ the category of presheaves on
$\mathcal{X}$.
\end{definition}

\noindent
This defines presheaves of sets. Of course we can also talk about
presheaves of pointed sets, abelian groups, groups, monoids, rings,
modules over a fixed ring, and lie algebras over a fixed field, etc.
The category of {\it abelian presheaves}, i.e., presheaves of abelian
groups, is denoted $\textit{PAb}(\mathcal{X})$.

\medskip\noindent
Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$. Recall that this
means just that $f$ is a functor over $(\textit{Sch}/S)_{fppf}$.
The material in
Sites, Section \ref{sites-section-more-functoriality-PSh}
provides us with a pair of adjoint functors\footnote{These functors
will be denoted $f^{-1}$ and $f_*$ after
Lemma \ref{lemma-functoriality-sheaves}
has been proved.}
\begin{equation}
\label{equation-pushforward-pullback}
f^p : \textit{PSh}(\mathcal{Y}) \longrightarrow \textit{PSh}(\mathcal{X})
\quad\text{and}\quad
{}_pf : \textit{PSh}(\mathcal{X}) \longrightarrow \textit{PSh}(\mathcal{Y}).
\end{equation}
The adjointness is
$$
\text{Mor}_{\textit{PSh}(\mathcal{X})}(f^p\mathcal{G}, \mathcal{F})
=
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(\mathcal{G}, {}_pf\mathcal{F})
$$
where $\mathcal{F} \in \text{Ob}(\textit{PSh}(\mathcal{X}))$ and
$\mathcal{G} \in \text{Ob}(\textit{PSh}(\mathcal{Y}))$. We call
$f^p\mathcal{G}$ the {\it pullback} of $\mathcal{G}$. It follows
from the definitions that
$$
f^p\mathcal{G}(x) = \mathcal{G}(f(x))
$$
for any $x \in \text{Ob}(\mathcal{X})$. The presheaf ${}_pf\mathcal{F}$
is called the {\it pushforward} of $\mathcal{F}$. It is described
by the formula
$$
({}_pf\mathcal{F})(y) = \lim\nolimits_{f(x) \to y} \mathcal{F}(x).
$$
The rest of this section should be skipped.

\begin{lemma}
\label{lemma-1-morphisms-presheaves}
Let $f \mathcal{X} \to \mathcal{Y}$ and $g : \mathcal{Y} \to \mathcal{Z}$
be $1$-morphisms of categories fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$. Then $(g \circ f)^p = f^p \circ g^p$ and
there is a canonical isomorphism
${}_p(g \circ f) \to {}_pg \circ {}_pf$
compatible with with adjointness of $(f^p, {}_pf)$, $(g^p, {}_pg)$, and
$((g \circ f)^p, {}_p(g \circ f))$.
\end{lemma}

\begin{proof}
Let $\mathcal{H}$ be a presheaf on $\mathcal{Z}$. Then
$(g \circ f)^p\mathcal{H} = f^p (g^p\mathcal{H})$ is given
by the equalities
$$
(g \circ f)^p\mathcal{H}(x) = \mathcal{H}((g \circ f)(x))
= \mathcal{H}(g(f(x))) = f^p (g^p\mathcal{H})(x).
$$
We omit the verification that this is compatible with restriction maps.

\medskip\noindent
Next, we define the transformation ${}_p(g \circ f) \to {}_pg \circ {}_pf$.
Let $\mathcal{F}$ be a presheaf on $\mathcal{X}$.
If $z$ is an object of $\mathcal{Z}$ then we get a
category $\mathcal{J}$ of quadruples
$(x, f(x) \to y, y, g(y) \to z)$ and a category $\mathcal{I}$
of pairs $(x, g(f(x)) \to z)$. There is a canonical functor
$\mathcal{J} \to \mathcal{I}$ sending the object
$(x, \alpha : f(x) \to y, y, \beta : g(y) \to z)$ to
$(x, \beta \circ f(\alpha) : g(f(x)) \to z)$. This gives the arrow in
\begin{align*}
({}_p(g \circ f)\mathcal{F})(z) & =
\lim\nolimits_{g(f(x)) \to z} \mathcal{F}(x) \\
& = \lim\nolimits_\mathcal{I} \mathcal{F} \\
& \to \lim\nolimits_\mathcal{J} \mathcal{F} \\
& = \lim\nolimits_{g(y) \to z}
\Big(\lim\nolimits_{f(x) \to y} \mathcal{F}(x)\Big) \\
& =
({}_pg \circ {}_pf\mathcal{F})(x)
\end{align*}
by
Categories, Lemma \ref{categories-lemma-functorial-limit}.
We omit the verification that this is compatible with restriction maps.
An alternative to this direct construction is to define
${}_p(g \circ f) \cong {}_pg \circ {}_pf$
as the unique map compatible with the adjointness properties. This also
has the advantage that one does not need to prove the compatibility.

\medskip\noindent
Compatibility with adjointness of $(f^p, {}_pf)$, $(g^p, {}_pg)$, and
$((g \circ f)^p, {}_p(g \circ f))$ means that given presheaves
$\mathcal{H}$ and $\mathcal{F}$ as above we have a commutative diagram
$$
\xymatrix{
\text{Mor}_{\textit{PSh}(\mathcal{X})}(f^pg^p\mathcal{H}, \mathcal{F})
\ar@{=}[r] \ar@{=}[d] &
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(g^p\mathcal{H}, {}_pf\mathcal{F})
\ar@{=}[r] &
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(\mathcal{H}, {}_pg{}_pf\mathcal{F})
\\
\text{Mor}_{\textit{PSh}(\mathcal{X})}((g \circ f)^p\mathcal{G}, \mathcal{F})
\ar@{=}[rr] & &
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(\mathcal{G}, {}_p(g \circ f)\mathcal{F})
\ar[u]
}
$$
Proof omitted.
\end{proof}

\begin{lemma}
\label{lemma-2-morphisms-presheaves}
Let $f, g : \mathcal{X} \to \mathcal{Y}$ be $1$-morphisms of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$. Let $t : f \to g$
be a $2$-morphism of categories fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$. Assigned to $t$ there are canonical
isomorphisms of functors
$$
t^p : g^p \longrightarrow f^p
\quad\text{and}\quad
{}_pt : {}_pf \longrightarrow {}_pg
$$
which compatible with adjointness of $(f^p, {}_pf)$ and
$(g^p, {}_pg)$ and with
vertical and horizontal composition of $2$-morphisms.
\end{lemma}

\begin{proof}
Let $\mathcal{G}$ be a presheaf on $\mathcal{Y}$. Then
$t^p : g^p\mathcal{G} \to f^p\mathcal{G}$ is given by the family
of maps
$$
g^p\mathcal{G}(x) = \mathcal{G}(g(x))
\xrightarrow{\mathcal{G}(t_x)}
\mathcal{G}(f(x)) = f^p\mathcal{G}(x)
$$
parametrized by $x \in \text{Ob}(\mathcal{X})$. This makes sense as
$t_x : f(x) \to g(x)$ and $\mathcal{G}$ is a contravariant functor.
We omit the verification that this is compatible with restriction
mappings.

\medskip\noindent
To define the transformation ${}_pt$ for $y \in \text{Ob}(\mathcal{Y})$
define ${}_y^f\mathcal{I}$, resp.\ ${}_y^g\mathcal{I}$ to be the category
of pairs $(x, \psi : f(x) \to y)$, resp.\ $(x, \psi : g(x) \to y)$, see
Sites, Section \ref{sites-section-more-functoriality-PSh}.
Note that $t$ defines a functor
${}_yt : {}_y^g\mathcal{I} \to {}_y^f\mathcal{I}$
given by the rule
$$
(x, g(x) \to y) \longmapsto (x, f(x) \xrightarrow{t_x} g(x) \to y).
$$
Note that for $\mathcal{F}$ a presheaf on $\mathcal{X}$ the composition
of ${}_yt$ with $\mathcal{F} : {}_y^f\mathcal{I}^{opp} \to \textit{Sets}$,
$(x, f(x) \to y) \mapsto \mathcal{F}(x)$ is equal to
$\mathcal{F} : {}_y^g\mathcal{I}^{opp} \to \textit{Sets}$. Hence by
Categories, Lemma \ref{categories-lemma-functorial-limit}
we get for every $y \in \text{Ob}(\mathcal{Y})$ a canonical map
$$
({}_pf\mathcal{F})(y) = \lim\nolimits_{{}_y^f\mathcal{I}} \mathcal{F}
\longrightarrow
\lim\nolimits_{{}_y^g\mathcal{I}} \mathcal{F} = ({}_pg\mathcal{F})(y)
$$
We omit the verification that this is compatible with restriction
mappings. An alternative to this direct construction is to define
${}_pt$ as the unique map compatible with the adjointness properties
of the pairs $(f^p, {}_pf)$ and $(g^p, {}_pg)$ (see below). This also
has the advantage that one does not need to prove the compatibility.

\medskip\noindent
Compatibility with adjointness of $(f^p, {}_pf)$ and $(g^p, {}_pg)$ means
that given presheaves $\mathcal{G}$ and $\mathcal{F}$ as above we have
a commutative diagram
$$
\xymatrix{
\text{Mor}_{\textit{PSh}(\mathcal{X})}(f^p\mathcal{G}, \mathcal{F})
\ar@{=}[r] \ar[d]_{- \circ t^p} &
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(\mathcal{G}, {}_pf\mathcal{F})
\ar[d]^{{}_pt \circ -} \\
\text{Mor}_{\textit{PSh}(\mathcal{X})}(g^p\mathcal{G}, \mathcal{F})
\ar@{=}[r] &
\text{Mor}_{\textit{PSh}(\mathcal{Y})}(\mathcal{G}, {}_pg\mathcal{F})
}
$$
Proof omitted. Hint: Work through the proof of
Sites, Lemma \ref{sites-lemma-adjoints-pu}
and observe the compatibility from the explicit description of the
horizontal and vertical maps in the diagram.

\medskip\noindent
We omit the verification that this is compatible with vertical and horizontal
compositions. Hint: The proof of this for $t^p$ is straightforward and
one can conclude that this holds for the ${}_pt$ maps using compatibility
with adjointness.
\end{proof}







\section{Sheaves}
\label{section-sheaves}

\noindent
We first make an observation that is important and trivial
(especially for those readers who do not worry about set theoretical
issues).

\medskip\noindent
Consider a big fppf site $\textit{Sch}_{fppf}$ as in
Topologies, Definition \ref{topologies-definition-big-fppf-site}
and denote its underlying category $\textit{Sch}_\alpha$.
Besides being the underlying category of a fppf site,
the category $\textit{Sch}_\alpha$ can also can serve as the underlying
category for a big Zariski site, a big \'etale site, a big smooth site,
and a big syntomic site, see
Topologies, Remark \ref{topologies-remark-choice-sites}.
We denote these sites $\textit{Sch}_{Zar}$, $\textit{Sch}_{\acute{e}tale}$,
$\textit{Sch}_{smooth}$, and $\textit{Sch}_{syntomic}$.
In this situation, since we have defined
the big Zariski site $(\textit{Sch}/S)_{Zar}$ of $S$,
the big \'etale site $(\textit{Sch}/S)_{\acute{e}tale}$ of $S$,
the big smooth site $(\textit{Sch}/S)_{smooth}$ of $S$,
the big syntomic site $(\textit{Sch}/S)_{syntomic}$ of $S$, and
the big fppf site $(\textit{Sch}/S)_{fppf}$ of $S$
as the localizations (see
Sites, Section \ref{sites-section-localize})
$\textit{Sch}_{Zar}/S$, $\textit{Sch}_{\acute{e}tale}/S$,
$\textit{Sch}_{smooth}/S$, $\textit{Sch}_{syntomic}/S$, and
$\textit{Sch}_{fppf}/S$
of these (absolute) big sites we see that all of these have the
same underlying category, namely $\textit{Sch}_\alpha/S$.

\medskip\noindent
It follows that if we have a category
$p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ fibred in groupoids, then
$\mathcal{X}$ inherits a Zariski, \'etale, smooth, syntomic, and
fppf topology, see
Stacks, Definition \ref{stacks-definition-topology-inherited}.

\begin{definition}
\label{definition-inherited-topologies}
Let $\mathcal{X}$ be a category fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$.
\begin{enumerate}
\item The {\it associated Zariski site}, denoted $\mathcal{X}_{Zar}$,
is the structure of site on $\mathcal{X}$ inherited from
$(\textit{Sch}/S)_{Zar}$.
\item The {\it associated \'etale site}, denoted $\mathcal{X}_{\acute{e}tale}$,
is the structure of site on $\mathcal{X}$ inherited from
$(\textit{Sch}/S)_{\acute{e}tale}$.
\item The {\it associated smooth site}, denoted $\mathcal{X}_{smooth}$,
is the structure of site on $\mathcal{X}$ inherited from
$(\textit{Sch}/S)_{smooth}$.
\item The {\it associated syntomic site}, denoted $\mathcal{X}_{syntomic}$,
is the structure of site on $\mathcal{X}$ inherited from
$(\textit{Sch}/S)_{syntomic}$.
\item The {\it associated fppf site}, denoted $\mathcal{X}_{fppf}$,
is the structure of site on $\mathcal{X}$ inherited from
$(\textit{Sch}/S)_{fppf}$.
\end{enumerate}
\end{definition}

\noindent
This definition makes sense by the discussion above. If $\mathcal{X}$
is an algebraic stack, the literature calls $\mathcal{X}_{fppf}$ (or a
site equivalent to it) the {\it big fppf site} of $\mathcal{X}$ and similarly
for the other ones. We may occasionally use this terminology to
distinguish this construction from others.

\begin{remark}
\label{remark-ambiguity}
We only use this notation when the symbol $\mathcal{X}$ refers to a
category fibred in groupoids, and not a scheme, an algebraic space, etc.
In this way we will avoid confusion with the small \'etale site of a
scheme, or algebraic space which is denoted $X_{\acute{e}tale}$ (in which
case we use a roman capital instead of a calligraphic one).
\end{remark}

\noindent
Now that we have these topologies defined we can say what it means
to have a sheaf on $\mathcal{X}$, i.e., define the corresponding topoi.

\begin{definition}
\label{definition-sheaves}
Let $\mathcal{X}$ be a category fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$. Let $\mathcal{F}$ be a presheaf on $\mathcal{X}$.
\begin{enumerate}
\item We say $\mathcal{F}$ is a {\it Zariski sheaf}, or a
{\it sheaf for the Zariski topology} if $\mathcal{F}$
is a sheaf on the associated Zariski site $\mathcal{X}_{Zar}$.
\item We say $\mathcal{F}$ is an {\it \'etale sheaf}, or a
{\it sheaf for the \'etale topology} if $\mathcal{F}$
is a sheaf on the associated \'etale site $\mathcal{X}_{\acute{e}tale}$.
\item We say $\mathcal{F}$ is a {\it smooth sheaf}, or a
{\it sheaf for the smooth topology} if $\mathcal{F}$
is a sheaf on the associated smooth site $\mathcal{X}_{smooth}$.
\item We say $\mathcal{F}$ is a {\it syntomic sheaf}, or a
{\it sheaf for the syntomic topology} if $\mathcal{F}$
is a sheaf on the associated syntomic site $\mathcal{X}_{syntomic}$.
\item We say $\mathcal{F}$ is an {\it fppf sheaf}, or a {\it sheaf},
or a {\it sheaf for the fppf topology} if $\mathcal{F}$
is a sheaf on the associated fppf site $\mathcal{X}_{fppf}$.
\end{enumerate}
A morphism of sheaves is just a morphism of presheaves. We denote
these categories of sheaves
$\textit{Sh}(\mathcal{X}_{Zar})$,
$\textit{Sh}(\mathcal{X}_{\acute{e}tale})$,
$\textit{Sh}(\mathcal{X}_{smooth})$,
$\textit{Sh}(\mathcal{X}_{syntomic})$, and
$\textit{Sh}(\mathcal{X}_{fppf})$.
\end{definition}

\noindent
Of course we can also talk about sheaves of pointed sets, abelian groups,
groups, monoids, rings, modules over a fixed ring, and lie algebras over
a fixed field, etc. The category of {\it abelian sheaves}, i.e., sheaves
of abelian groups, is denoted $\textit{Ab}(\mathcal{X}_{fppf})$
and similarly for the other topologies. If $\mathcal{X}$ is an algebraic
stack, then $\textit{Sh}(\mathcal{X}_{fppf})$ is equivalent (modulo
set theoretical problems) to what in the literature would be termed
the {\it category of sheaves on the big fppf site of $\mathcal{X}$}. Similar
for other topologies. We may occasionally use this terminology to
distinguish this construction from others.

\medskip\noindent
Since the topologies are listed in increasing order of strength we have
the following strictly full inclusions
$$
\textit{Sh}(\mathcal{X}_{fppf}) \subset
\textit{Sh}(\mathcal{X}_{syntomic}) \subset
\textit{Sh}(\mathcal{X}_{smooth}) \subset
\textit{Sh}(\mathcal{X}_{\acute{e}tale}) \subset
\textit{Sh}(\mathcal{X}_{Zar}) \subset \textit{PSh}(\mathcal{X})
$$
We sometimes write
$\textit{Sh}(\mathcal{X}_{fppf}) = \textit{Sh}(\mathcal{X})$
and
$\textit{Ab}(\mathcal{X}_{fppf}) = \textit{Ab}(\mathcal{X})$
in accordance with our terminology that a sheaf on $\mathcal{X}$
is an fppf sheaf on $\mathcal{X}$.

\medskip\noindent
With this setup functoriality of these topoi is straightforward, and
moreover, is compatible with the inclusion functors above.

\begin{lemma}
\label{lemma-functoriality-sheaves}
Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$. Let
$\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
The functors ${}_pf$ and $f^p$ of (\ref{equation-pushforward-pullback})
transform $\tau$ sheaves into $\tau$ sheaves and define a morphism
of topoi
$f : \textit{Sh}(\mathcal{X}_\tau) \to \textit{Sh}(\mathcal{Y}_\tau)$.
\end{lemma}

\begin{proof}
This follows immediately from
Stacks, Lemma \ref{stacks-lemma-topology-inherited-functorial}.
\end{proof}

\noindent
In other words, pushforward and pullback of presheaves as defined in
Section \ref{section-presheaves}
also produces {\it pushforward} and {\it pullback} of $\tau$-sheaves.
Having said all of the above we see that we can write $f^p = f^{-1}$
and ${}_pf = f_*$ without any possibility of confusion.

\begin{definition}
\label{definition-morphism}
Let $f : \mathcal{X} \to \mathcal{Y}$ be a morphism of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$. We denote
$$
f = (f^{-1}, f_*) :
\textit{Sh}(\mathcal{X}_{fppf})
\longrightarrow
\textit{Sh}(\mathcal{Y}_{fppf})
$$
the {\it associated morphism of fppf topoi} constructed above.
Similarly for the associated Zariski, \'etale, smooth, and syntomic topoi.
\end{definition}

\noindent
As discussed in
Sites, Section \ref{sites-section-sheaves-algebraic-structures}
the same formula (on the underlying sheaf of sets) defines
pushforward and pullback for sheaves (for one of our topologies)
of pointed sets, abelian groups, groups, monoids, rings, modules
over a fixed ring, and lie algebras over a fixed field, etc.

\medskip\noindent
Another important and trivial realization is that the localization
of the associated site of a category fibred in groupoids
is equivalent to the big site of the scheme it lies over.

\begin{lemma}
\label{lemma-localizing}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. Let $\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
Let $x \in \text{Ob}(\mathcal{X})$ lying over $U = p(x)$.
The functor $p$ induces an equivalence of sites
$\mathcal{X}_\tau/x \to (\textit{Sch}/U)_\tau$.
\end{lemma}

\begin{proof}
Note that $(\textit{Sch}/U)_\tau$ is the localization of the site
$(\textit{Sch}/S)_{fppf}$ at the object $U$. It follows from
Categories, Definition \ref{categories-definition-fibred-groupoids}
that the rule $x'/x \mapsto p(x')/p(x)$ defines an equivalence of
categories $\mathcal{X}_\tau/x \to (\textit{Sch}/U)_\tau$.
Whereupon it follows from
Stacks, Definition \ref{stacks-definition-topology-inherited}
that coverings of $x'$ in $\mathcal{X}_\tau/x$ are in bijective correspondence
with coverings of $p(x')$ in $(\textit{Sch}/U)_\tau$.
\end{proof}

\begin{definition}
\label{definition-pullback}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. Let $x \in \text{Ob}(\mathcal{X})$ lying over $U = p(x)$.
Let $\mathcal{F}$ be a presheaf on $\mathcal{X}$.
\begin{enumerate}
\item The {\it pullback $x^*\mathcal{F}$ of $\mathcal{F}$} is the
restriction $\mathcal{F}|_{(\mathcal{X}/x)}$ viewed as a presheaf on
$(\textit{Sch}/U)_{fppf}$ via the equivalence
$\mathcal{X}/x \to (\textit{Sch}/U)_{fppf}$ of
Lemma \ref{lemma-localizing}.
\item The {\it restriction of $\mathcal{F}$ to $U_{\acute{e}tale}$}
is $x^*\mathcal{F}|_{U_{\acute{e}tale}}$, abusively written
$\mathcal{F}|_{U_{\acute{e}tale}}$.
\end{enumerate}
\end{definition}

\noindent
This notation makes sense because to the object $x$ the $2$-Yoneda lemma, see
Algebraic Stacks, Section \ref{algebraic-section-2-yoneda}
associates a $1$-morphism $x : (\textit{Sch}/U)_{fppf} \to \mathcal{X}/x$
which is quasi-inverse to $p : \mathcal{X}/x \to (\textit{Sch}/U)_{fppf}$.
Hence $x^*\mathcal{F}$ truly is the pullback of $\mathcal{F}$ via this
$1$-morphism. In particular, by the material above, if $\mathcal{F}$
is a sheaf (or a Zariski, \'etale, smooth, syntomic sheaf), then
$x^*\mathcal{F}$ is a sheaf on $(\textit{Sch}/U)_{fppf}$ (or on
$(\textit{Sch}/U)_{Zar}$, $(\textit{Sch}/U)_{\acute{e}tale}$,
$(\textit{Sch}/U)_{smooth}$, $(\textit{Sch}/U)_{syntomic}$).

\medskip\noindent
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. Let $\varphi : x \to y$ be a morphism of $\mathcal{X}$.
Let $f = p(\varphi) : U = p(X) \to p(y) = V$ be the corresponding morphism
of schemes over $S$. Recall that $f$ induces a morphism of small \'etale
sites $f_{small} : U_{\acute{e}tale} \to V_{\acute{e}tale}$, see
\'Etale Cohohomology, Section \ref{etale-cohomology-section-functoriality}
given by the functor $u : V'/V \mapsto V'\times_V U/U$.
Let $\mathcal{F}$ be a presheaf on $\mathcal{X}$.
Let $\mathcal{F}|_{U_{\acute{e}tale}}$ and
$\mathcal{F}|_{V_{\acute{e}tale}}$ be the restrictions of $\mathcal{F}$
via $x$ and $y$. There is a natural ``comparison'' map
\begin{equation}
\label{equation-comparison-push}
c_f :
\mathcal{F}|_{V_{\acute{e}tale}}
\longrightarrow
f_{small, *}(\mathcal{F}|_{U_{\acute{e}tale}})
\end{equation}
of presheaves on $U_{\acute{e}tale}$. Namely, if $V' \to V$ is \'etale,
set $U' = V' \times_V U = u(V')$ and define $c_f$ on sections over $V'$ via
$$
\xymatrix{
f_{small, *}(\mathcal{F}|_{U_{\acute{e}tale}})(V') &
\mathcal{F}|_{U_{\acute{e}tale}}(U') \ar[l] &
x^*\mathcal{F}(U'/U) \ar[l] &
\mathcal{F}(x') \ar[l] \\
\mathcal{F}|_{V_{\acute{e}tale}}(V') \ar[r] \ar[u]^{c_f} &
y^*\mathcal{F}(V'/V) \ar[r] &
\mathcal{F}(y') \ar[ur]_{\mathcal{F}(\varphi')}
}
$$
where the horizontal arrows are all equalities.
Here $y'$ is the pullback of $y$ via $V' \to V$ and $x'$ is the
pullback of $x$ via $U' \to U$ and the arrow
$\mathcal{F}(y') \to \mathcal{F}(x')$ is the restriction mapping of
$\mathcal{F}$ via the unique morphism $\varphi' : x' \to y'$ lying over
$U' \to V'$ and fitting into the commutative diagram
$$
\xymatrix{
x' \ar[r] \ar[d]_{\varphi'} & x \ar[d]^\varphi \\
y' \ar[r] & y
}
$$
The existence and uniqueness of $\varphi'$ follow from the axioms
of a category fibred in groupoids.
We omit the verification that $c_f$ so defined is indeed a map
of presheaves (i.e., compatible with restriction mappings) and that
it is functorial in $\mathcal{F}$. Dually we obtain a map of presheaves
$u_p(\mathcal{F}|_{V_{\acute{e}tale}}) \to \mathcal{F}|_{U_{\acute{e}tale}}$
on $U_{\acute{e}tale}$ (with $u_p$ as in
Sites, Section \ref{sites-section-functoriality-PSh}).
In case $\mathcal{F}$ is a sheaf for the
\'etale topology this factors through a map
\begin{equation}
\label{equation-comparison}
c_f : f_{small}^{-1}(\mathcal{F}|_{V_{\acute{e}tale}})
\longrightarrow
\mathcal{F}|_{U_{\acute{e}tale}}
\end{equation}
which is also denoted $c_f$ as indicated (this is the customary abuse
of notation in not distinguishing between adjoint maps).

\begin{lemma}
\label{lemma-enough-points}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. Let $\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
The site $\mathcal{X}_\tau$ has enough points.
\end{lemma}

\begin{proof}
By
Sites, Lemma \ref{sites-lemma-enough-points-local}
we have to show that there exists a family of objects $x$ of $\mathcal{X}$
such that $\mathcal{X}_\tau/x$ has enough point and such that the sheaves
$h_x^\#$ cover the final object of the category of sheaves.
By
Lemma \ref{lemma-localizing}
and
\'Etale Cohomology, Lemma \ref{etale-cohomology-lemma-points-fppf}
we see that $\mathcal{X}_\tau/x$ has enough points for every object
$x$ and we win.
\end{proof}





\section{The structure sheaf}
\label{section-structure-sheaf}

\noindent
Let $\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids. The 2-category of categories fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$ has a final object, namely,
$\text{id} : (\textit{Sch}/S)_{fppf} \to (\textit{Sch}/S)_{fppf}$
and $p$ is a $1$-morphism from $\mathcal{X}$ to this final object.
Hence any presheaf $\mathcal{G}$ on $(\textit{Sch}/S)_{fppf}$ gives a
presheaf $p^{-1}\mathcal{G}$ on $\mathcal{X}$ defined by the rule
$p^{-1}\mathcal{G}(x) = \mathcal{G}(p(x))$. Moreover, the discussion in
Section \ref{section-sheaves}
shows that $p^{-1}\mathcal{G}$ is a $\tau$ sheaf whenever
$\mathcal{G}$ is a $\tau$-sheaf.

\medskip\noindent
Recall that the site $(\textit{Sch}/S)_{fppf}$ is a ringed site
with structure sheaf $\mathcal{O}$ defined by the rule
$$
(\textit{Sch}/S)^{opp} \longrightarrow \textit{Rings},
\quad
U/S \longmapsto \Gamma(U, \mathcal{O}_U)
$$
see
Descent, Definition \ref{descent-definition-structure-sheaf}.

\begin{definition}
\label{definition-structure-sheaf}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids. The
{\it structure sheaf of $\mathcal{X}$} is the sheaf of rings
$\mathcal{O}_\mathcal{X} = p^{-1}\mathcal{O}$.
\end{definition}

\noindent
For an object $x$ of $\mathcal{X}$ lying over $U$ we have
$\mathcal{O}_\mathcal{X}(x) = \mathcal{O}(U) = \Gamma(U, \mathcal{O}_U)$.
Needless to say $\mathcal{O}_\mathcal{X}$ is also a Zariski, \'etale,
smooth, and syntomic sheaf, and hence each of the sites
$\mathcal{X}_{Zar}$, $\mathcal{X}_{\acute{e}tale}$, $\mathcal{X}_{smooth}$,
$\mathcal{X}_{syntomic}$, and $\mathcal{X}_{fppf}$ is a ringed site.
This construction is functorial as well.

\begin{lemma}
\label{lemma-functoriality-structure-sheaf}
Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$. Let
$\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
There is a canonical identification
$f^{-1}\mathcal{O}_\mathcal{X} = \mathcal{O}_\mathcal{Y}$
which turns
$f : \textit{Sh}(\mathcal{X}_\tau) \to \textit{Sh}(\mathcal{Y}_\tau)$
into a morphism of ringed topoi.
\end{lemma}

\begin{proof}
Denote $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ and
$q : \mathcal{Y} \to (\textit{Sch}/S)_{fppf}$ the structural functors.
Then $q = p \circ f$, hence $q^{-1} = f^{-1} \circ p^{-1}$ by
Lemma \ref{lemma-1-morphisms-presheaves}.
The result follows.
\end{proof}

\begin{remark}
\label{remark-flat}
In the situation of
Lemma \ref{lemma-functoriality-structure-sheaf}
the morphism of ringed topoi
$f : \textit{Sh}(\mathcal{X}_\tau) \to \textit{Sh}(\mathcal{Y}_\tau)$
is flat as is clear from the equality
$f^{-1}\mathcal{O}_\mathcal{X} = \mathcal{O}_\mathcal{Y}$.
This is a bit counter intuitive, for example because a closed
immersion of algebraic stacks is typically not flat.
However, exactly the same thing happens when taking a closed
immersion $i : X \to Y$ of schemes: in this case the associated
morphism of big $\tau$-sites
$i : (\textit{Sch}/X)_\tau \to (\textit{Sch}/Y)_\tau$
also is flat.
\end{remark}

\begin{lemma}
\label{lemma-localizing-structure-sheaf}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. Let $\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$.
Let $x \in \text{Ob}(\mathcal{X})$ lying over $U = p(x)$.
The equivalence of
Lemma \ref{lemma-localizing}
extends to an equivalence of ringed sites
$(\mathcal{X}_\tau/x, \mathcal{O}_\mathcal{X}|_x) \to
((\textit{Sch}/U)_\tau, \mathcal{O})$.
\end{lemma}

\begin{proof}
This is immediate from the construction of the structure sheaves.
\end{proof}




\section{Sheaves of modules}
\label{section-modules}

\noindent
Since we have a structure sheaf we have modules.

\begin{definition}
\label{definition-modules}
Let $\mathcal{X}$ be a category fibred in groupoids over
$(\textit{Sch}/S)_{fppf}$.
\begin{enumerate}
\item A {\it presheaf of modules on $\mathcal{X}$} is a
presheaf of $\mathcal{O}_\mathcal{X}$-modules. The category of
presheaves of modules is denoted $\textit{PMod}(\mathcal{O}_\mathcal{X})$.
\item We say a presheaf of modules $\mathcal{F}$ is an
{\it $\mathcal{O}_\mathcal{X}$-module}, or more precisely a
{\it sheaf of $\mathcal{O}_\mathcal{X}$-modules} if $\mathcal{F}$
is an fppf sheaf. The category of $\mathcal{O}_\mathcal{X}$-modules
is denoted $\textit{Mod}(\mathcal{O}_\mathcal{X})$.
\end{enumerate}
\end{definition}

\noindent
These (pre)sheaves of modules occur in the literature as {\it (pre)sheaves
of $\mathcal{O}_\mathcal{X}$-modules on the big fppf site of $\mathcal{X}$}.
We will occasionally use this terminology if we want to distinguish these
categories from others. We will also encounter presheaves of modules which
are sheaves in the Zariski, \'etale, smooth, or syntomic topologies
(without necessarily being sheaves). If need be these will be denoted
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$
and similarly for the other topologies.

\medskip\noindent
Let $\mathcal{F}$ be a (pre)sheaf of modules on $\mathcal{X}$ as in
Definition \ref{definition-modules}.
Let $x$ be an object of $\mathcal{X}$ lying over $U$. Then
Lemma \ref{lemma-localizing-structure-sheaf}
guarantees that the restriction
$x^*\mathcal{F}$ of a (pre)sheaf of modules on $(\textit{Sch}/U)_{fppf}$.
Similarly, if $\mathcal{F}$ is a sheaf for the Zariski, \'etale, smooth,
or syntomic topology, then $x^*\mathcal{F}$ is as well. Moreover, the
restriction
$\mathcal{F}|_{U_{\acute{e}tale}} = x^*\mathcal{F}|_{U_{\acute{e}tale}}$
to $U$ is a presheaf of $\mathcal{O}_{U_{\acute{e}tale}}$-modules.
If $\mathcal{F}$ is a sheaf for the \'etale topology, then
$\mathcal{F}|_{U_{\acute{e}tale}}$ is a sheaf of modules. Moreover,
if $\varphi : x \to y$ is a morphism of $\mathcal{X}$ lying over
$f : U \to V$ then the comparison map (\ref{equation-comparison})
is compatible with $f_{small}^\sharp$ (see
Descent, Remark \ref{descent-remark-change-topologies-ringed-sites})
and induces map
\begin{equation}
\label{equation-comparison-modules}
c_f : f_{small}^*(\mathcal{F}|_{V_{\acute{e}tale}})
\longrightarrow
\mathcal{F}|_{U_{\acute{e}tale}}
\end{equation}
of $\mathcal{O}_{U_{\acute{e}tale}}$-modules.
We will use this in the following without further mention.

\medskip\noindent
Next, we address functoriality -- first for presheaves of modules. Let
$$
\xymatrix{
\mathcal{X} \ar[rr]_f \ar[rd]_p & &  \mathcal{Y} \ar[ld]^q \\
& (\textit{Sch}/S)_{fppf}
}
$$
be a $1$-morphism of categories fibred in groupoids.
The functors $f^{-1}$, $f_*$ on abelian presheaves extend to functors
\begin{equation}
\label{equation-functoriality-presheaves-modules}
f^{-1} :
\textit{PMod}(\mathcal{O}_\mathcal{Y})
\longrightarrow
\textit{PMod}(\mathcal{O}_\mathcal{X})
\quad\text{and}\quad
f_* :
\textit{PMod}(\mathcal{O}_\mathcal{Y})
\longrightarrow
\textit{PMod}(\mathcal{O}_\mathcal{X})
\end{equation}
This is immediate for $f^{-1}$ because
$f^{-1}\mathcal{G}(x) = \mathcal{G}(f(x))$ which is a module over
$\mathcal{O}_\mathcal{Y}(f(x)) = \mathcal{O}(q(f(x))) = \mathcal{O}(p(x)) =
\mathcal{O}_\mathcal{X}(x)$. Afternatively it follows because
$f^{-1}\mathcal{O}_\mathcal{Y} = \mathcal{O}_\mathcal{X}$
and because $f^{-1}$ commutes with limits (on presheaves).
Since $f_*$ is a right adjoint it commutes with all limits
(on presheaves) in particular products. Hence we can extend
$f_*$ to a functor on presheaves of modules as in the proof of
Modules on Sites, Lemma \ref{sites-modules-lemma-pushforward-module}.
We claim that the functors (\ref{equation-functoriality-presheaves-modules})
form an adjoint pair of functors:
$$
\text{Mor}_{\textit{PMod}(\mathcal{O}_\mathcal{X})}(
f^{-1}\mathcal{G}, \mathcal{F})
=
\text{Mor}_{\textit{PMod}(\mathcal{O}_\mathcal{Y})}(
\mathcal{G}, f_*\mathcal{F}).
$$
As $f^{-1}\mathcal{O}_\mathcal{Y} = \mathcal{O}_\mathcal{X}$
this follows from
Modules on Sites, Lemma \ref{sites-modules-lemma-adjoint-push-pull-modules}
by endowing $\mathcal{X}$ and $\mathcal{Y}$ with the chaotic
topology.

\medskip\noindent
Next, we discuss functoriality for modules, i.e., for sheaves of modules
in the fppf topology. Denote by $f$ also the induced morphism of ringed
topoi, see
Lemma \ref{lemma-functoriality-structure-sheaf}
(for the fppf toplogies right now). Note that the functors
$f^{-1}$ and $f_*$ of (\ref{equation-functoriality-presheaves-modules})
preserve the subcategories of sheaves of modules, see
Lemma \ref{lemma-functoriality-sheaves}.
Hence it follows immediately that
\begin{equation}
\label{equation-functoriality-sheaves-modules}
f^{-1} :
\textit{Mod}(\mathcal{O}_\mathcal{Y})
\longrightarrow
\textit{Mod}(\mathcal{O}_\mathcal{X})
\quad\text{and}\quad
f_* :
\textit{Mod}(\mathcal{O}_\mathcal{Y})
\longrightarrow
\textit{Mod}(\mathcal{O}_\mathcal{X})
\end{equation}
form an adjoint pair of functors:
$$
\text{Mor}_{\textit{Mod}(\mathcal{O}_\mathcal{X})}(
f^{-1}\mathcal{G}, \mathcal{F})
=
\text{Mor}_{\textit{Mod}(\mathcal{O}_\mathcal{Y})}(
\mathcal{G}, f_*\mathcal{F}).
$$
By uniqueness of adjoints we conclude that
$f^* = f^{-1}$ where $f^*$ is as defined in
Modules on Sites, Section \ref{sites-modules-section-functoriality-modules}
for the morphism of ringed topoi $f$ above. Of course we could have
seen this directly because
$f^*(-) = f^{-1}(-) \otimes_{f^{-1}\mathcal{O}_\mathcal{Y}}
\mathcal{O}_\mathcal{X}$ and because
$f^{-1}\mathcal{O}_\mathcal{Y} = \mathcal{O}_\mathcal{X}$.

\medskip\noindent
Similarly for sheaves of modules in the Zariski, \'etale, smooth, syntomic
topology.








\section{Quasi-coherent modules}
\label{section-quasi-coherent}

\noindent
At this point we can apply the general definition of a quasi-coherent
module to the situation discussed in this chapter.

\begin{definition}
\label{definition-quasi-coherent}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred
in groupoids. A {\it quasi-coherent module on $\mathcal{X}$}, or a
{\it quasi-coherent $\mathcal{O}_\mathcal{X}$-module} is a
quasi-coherent module on the ringed site
$(\mathcal{X}_{fppf}, \mathcal{O}_\mathcal{X})$ as in
Modules on Sites, Definition \ref{sites-modules-definition-site-local}.
The category of quasi-coherent modules is denoted $\textit{QCoh}(\mathcal{X})$.
\end{definition}

\noindent
If $\mathcal{X}$ is an algebraic stack, then this definition agrees with all
definitions in the literature in the sense that $\textit{QCoh}(\mathcal{X})$
is equivalent (modulo set theoretic issues) to any variant of this category
defined in the literature. We will see alternative constructions of this
category later on.

\medskip\noindent
In general (as is the case for morphisms of schemes) the pushforward
of quasi-coherent sheaf along a $1$-morphism is not quasi-coherent.
Pullback does preserve quasi-coherence.

\begin{lemma}
\label{lemma-pullback-quasi-coherent}
Let $f : \mathcal{X} \to \mathcal{Y}$ be a $1$-morphism of categories
fibred in groupoids over $(\textit{Sch}/S)_{fppf}$.
The pullback functor
$f^* = f^{-1} : \textit{Mod}(\mathcal{O}_\mathcal{Y}) \to
\textit{Mod}(\mathcal{O}_\mathcal{X})$
preserves quasi-coherent sheaves.
\end{lemma}

\begin{proof}
This is a general fact, see
Modules on Sites, Lemma \ref{sites-modules-lemma-local-pullback}.
\end{proof}

\noindent
It turns out that quasi-coherent sheaves have a very simple
characterization in terms of their pullbacks. See also
Lemma \ref{lemma-quasi-coherent}
for a characterization in terms of restrictions.

\begin{lemma}
\label{lemma-characterize-quasi-coherent}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids. Let $\mathcal{F}$
be a sheaf of $\mathcal{O}_\mathcal{X}$-modules. Then $\mathcal{F}$
is quasi-coherent if and only if $x^*\mathcal{F}$ is a quasi-coherent
sheaf on $(\textit{Sch}/U)_{fppf}$ for every object $x$ of
$\mathcal{X}$ with $U = p(x)$.
\end{lemma}

\begin{proof}
By
Lemma \ref{lemma-pullback-quasi-coherent}
the condition is necessary. Conversely, since $x^*\mathcal{F}$
is just the restriction to $\mathcal{X}_{fppf}/x$ we see that it
is sufficient directly from the definition of a quasi-coherent sheaf
(and the fact that the notion of being quasi-coherent is an intrinsic
property of sheaves of modules, see
Modules on Sites, Section \ref{sites-modules-section-intrinsic}).
\end{proof}

\noindent
Although there is a variant for the Zariski topology, it seems
that the \'etale topology is the natural topology to use in the
following definition.

\begin{definition}
\label{definition-locally-quasi-coherent}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids. Let $\mathcal{F}$
be a presheaf of $\mathcal{O}_\mathcal{X}$-modules.
We say $\mathcal{F}$ is {\it locally quasi-coherent}\footnote{This is
nonstandard notation.} if
$\mathcal{F}$ is a sheaf for the \'etale topology and
for every object $x$ of $\mathcal{X}$ the restriction
$x^*\mathcal{F}|_{U_{\acute{e}tale}}$ is a quasi-coherent
sheaf. Here $U = p(x)$.
\end{definition}

\noindent
We use $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$ to indicate the category of
locally quasi-coherent modules. We now have the following diagram
of categories of modules
$$
\xymatrix{
\textit{QCoh}(\mathcal{O}_\mathcal{X}) \ar[r] \ar[d] &
\textit{Mod}(\mathcal{O}_\mathcal{X}) \ar[d] \\
\textit{LQCoh}(\mathcal{O}_\mathcal{X}) \ar[r] &
\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})
}
$$
where the arrows are strictly full embeddings.
It turns out that many results for quasi-coherent sheaves have a
counter part for locally quasi-coherent modules. Moreover, from many
points of view (as we shall see later) this is a natural category to consider.
For example the quasi-coherent sheaves are exactly those
locally quasi-coherent modules that are ``cartesian'', i.e., satisfy
the second condition of the lemma below.

\begin{lemma}
\label{lemma-quasi-coherent}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids. Let $\mathcal{F}$
be a presheaf of $\mathcal{O}_\mathcal{X}$-modules. Then $\mathcal{F}$
is quasi-coherent if and only if the following two conditions hold
\begin{enumerate}
\item $\mathcal{F}$ is locally quasi-coherent, and
\item for any morphism $\varphi : x \to y$ of $\mathcal{X}$ lying over
$f : U \to V$ the comparison map (\ref{equation-comparison-modules})
is an isomorphism.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume $\mathcal{F}$ is quasi-coherent. Then $\mathcal{F}$ is a sheaf
for the fppf topology, hence a sheaf for the \'etale topology. Moreover,
any pullback of $\mathcal{F}$ to a ringed topos is quasi-coherent, hence
the restrictions $x^*\mathcal{F}|_{U_{\acute{e}tale}}$ are quasi-coherent.
This proves $\mathcal{F}$ is locally quasi-coherent.
Let $y$ be an object of $\mathcal{X}$ with $V = p(y)$.
We have seen that $\mathcal{X}/y = (\textit{Sch}/V)_{fppf}$. By
Descent, Proposition \ref{descent-proposition-equivalence-quasi-coherent}
it follows that $y*\mathcal{F}$ is the quasi-coherent module
associated to a (usual) quasi-coherent module $\mathcal{F}_V$ on
the scheme $V$. Hence certainly the comparison maps
(\ref{equation-comparison-modules}) are isomorphisms.

\medskip\noindent
Conversely, suppose that $\mathcal{F}$ satisfies (1) and (2).
Let $y$ be an object of $\mathcal{X}$ with $V = p(y)$. Denote
$\mathcal{F}_V$ the quasi-coherent module on
the scheme $V$ corresponding to the restriction
$y^*\mathcal{F}|_{V_{\acute{e}tale}}$ which is quasi-coherent by
assumption (1), see
Descent, Proposition \ref{descent-proposition-equivalence-quasi-coherent}.
Condition (2) now signifies that the restrictions
$x^*\mathcal{F}|_{U_{\acute{e}tale}}$ for $x$ over $y$ are each
isomorphic to the (\'etale sheaf associated to the) pullback of $\mathcal{F}_V$
via the corresponding morphism of schemes $U \to V$.
Hence $y^*\mathcal{F}$ is the sheaf on $(\textit{Sch}/V)_{fppf}$
associated to $\mathcal{F}_V$. Hence it is quasi-coherent (by
Descent, Proposition \ref{descent-proposition-equivalence-quasi-coherent}
again) and we see that $\mathcal{F}$ is quasi-coherent on $\mathcal{X}$ by
Lemma \ref{lemma-characterize-quasi-coherent}.
\end{proof}

\begin{lemma}
\label{lemma-lqc-colimits}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category fibred in
groupoids.
\begin{enumerate}
\item The category $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
has colimits and they agree with colimits in the category
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$.
\item The category $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
is abelian with kernels and cokernels computed in
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$,
in other words the inclusion functor is exact.
\item Given a short exact sequence
$0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$ of
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$
if two out of three are locally quasi-coherent so is the third.
\item Given $\mathcal{F}, \mathcal{G}$ in
$\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
the tensor product $\mathcal{F} \otimes_{\mathcal{O}_\mathcal{X}} \mathcal{G}$
in $\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$
is an object of $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$.
\item Given $\mathcal{F}, \mathcal{G}$ in
$\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
with $\mathcal{F}$ locally of finite presentation on
$\mathcal{X}_{\acute{e}tale}$ the sheaf
$\mathit{Hom}_{\mathcal{O}_\mathcal{X}}(\mathcal{F}, \mathcal{G})$
in $\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$
is an object of $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Each of these statements follows from the corresponding statement of
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}.
For example, suppose that
$\mathcal{I} \to \textit{LQCoh}(\mathcal{O}_\mathcal{X})$,
$i \mapsto \mathcal{F}_i$ is a diagram
of locally quasi-coherent modules.
Consider the object $\mathcal{F} = \text{colim}_i\ \mathcal{F}_i$ of
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$.
For any object $x$ of $\mathcal{X}$ with $U = p(x)$ the pullback functor
$x^*$ commutes with all colimits as it is a left adjoint. Hence
$x^*\mathcal{F} = \text{colim}_i\ x^*\mathcal{F}_i$. Similarly we have
$x^*\mathcal{F}|_{U_{\acute{e}tale}} =
\text{colim}_i\ x^*\mathcal{F}_i|_{U_{\acute{e}tale}}$.
Now by assumption each $x^*\mathcal{F}_i|_{U_{\acute{e}tale}}$
is quasi-coherent, hence the colimit is quasi-coherent by the
aforementioned
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}.
This proves (1).

\medskip\noindent
It follows from (1) that cokernels exist in
$\textit{LQCoh}(\mathcal{O}_\mathcal{X})$ and agree with the cokernels computed
in $\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$.
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a morphism of
$\textit{LQCoh}(\mathcal{O}_\mathcal{X})$ and let
$\mathcal{K} = \text{Ker}(\varphi)$ computed in
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$.
If we can show that $\mathcal{K}$ is a locally quasi-coherent module,
then the proof of (2) is complete. To see this, note that kernels
are computed in the category of presheaves (no sheafification necessary).
Hence $\mathcal{K}|_{U_{\acute{e}tale}}$ is the kernel of the map
$\mathcal{F}|_{U_{\acute{e}tale}} \to \mathcal{G}|_{U_{\acute{e}tale}}$,
i.e., is the kernel of a map of quasi-coherent sheaves on $U_{\acute{e}tale}$
whence quasi-coherent by
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}.
This proves (2).

\medskip\noindent
Parts (3), (4), and (5) follow in exactly the same way. Details omitted.
\end{proof}

\noindent
In the generality discussed here we don't know how to prove
that the category of quasi-coherent sheaves is abelian.
Here is what we can prove without any further work.

\begin{lemma}
\label{lemma-qc-colimits}
Let $p : \mathcal{X} \to (\textit{Sch}/S)_{fppf}$ be a category
fibred in groupoids.
\begin{enumerate}
\item The category $\textit{QCoh}(\mathcal{O}_\mathcal{X})$
has colimits and they agree with colimits in the category
$\textit{Mod}(\mathcal{O}_\mathcal{X})$ as well as with colimits
in the category $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$.
\item Given $\mathcal{F}, \mathcal{G}$ in
$\textit{QCoh}(\mathcal{O}_\mathcal{X})$
the tensor product $\mathcal{F} \otimes_{\mathcal{O}_\mathcal{X}} \mathcal{G}$
in $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
is an object of $\textit{QCoh}(\mathcal{O}_\mathcal{X})$.
\item Given $\mathcal{F}, \mathcal{G}$ in
$\textit{QCoh}(\mathcal{O}_\mathcal{X})$
with $\mathcal{F}$ locally of finite presentation on
$\mathcal{X}_{fppf}$ the sheaf
$\mathit{Hom}_{\mathcal{O}_\mathcal{X}}(\mathcal{F}, \mathcal{G})$
in $\textit{LQCoh}(\mathcal{O}_\mathcal{X})$
is an object of $\textit{QCoh}(\mathcal{O}_\mathcal{X})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Suppose that
$\mathcal{I} \to \textit{LQCoh}(\mathcal{O}_\mathcal{X})$,
$i \mapsto \mathcal{F}_i$ is a diagram of quasi-coherent modules.
Consider the object $\mathcal{F} = \text{colim}_i\ \mathcal{F}_i$ of
$\textit{Mod}(\mathcal{O}_\mathcal{X})$.
For any object $x$ of $\mathcal{X}$ with $U = p(x)$ the pullback functor
$x^*$ commutes with all colimits as it is a left adjoint. Hence
$x^*\mathcal{F} = \text{colim}_i\ x^*\mathcal{F}_i$ in
$\textit{Mod}((\textit{Sch}/U)_{fppf}, \mathcal{O})$. We conclude from
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}
that $x^*\mathcal{F}$ is quasi-coherent, hence $\mathcal{F}$
is quasi-coherent, see
Lemma \ref{lemma-characterize-quasi-coherent}.
Thus we see that $\textit{QCoh}(\mathcal{O}_\mathcal{X})$
has colimits and they agree with colimits in the category
$\textit{Mod}(\mathcal{O}_\mathcal{X})$. In particular the (fppf) sheaf
$\mathcal{F}$ is also the colimit of the diagram in
$\textit{Mod}(\mathcal{X}_{\acute{e}tale}, \mathcal{O}_\mathcal{X})$,
hence $\mathcal{F}$ is also the colimit in
$\textit{LQCoh}(\mathcal{O}_\mathcal{X})$. This proves (1).

\medskip\noindent
Parts (2) and (3) are proved in the same way.
Details omitted.
\end{proof}

















\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
