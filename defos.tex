\input{preamble}

% OK, start here.
%
\begin{document}

\title{Deformation Theory}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
The goal of this chapter is to give a (relatively) gentle introduction to
deformation theory of modules, morphisms, etc. A not so gentle reference is
the book \cite{cotangent}.






\section{Modules on first order thickenings}
\label{section-modules-thickenings}

\noindent
In this section we discuss some preliminaries to the deformation theory
of modules. Let $X \subset X'$ be a first order thickening of schemes.
We freely use the notation introduced in
More on Morphisms, Section \ref{more-morphisms-section-thickenings}.
In this section we consider short exact sequences
\begin{equation}
\label{equation-extension}
0 \to i_{X, *}\mathcal{K} \to \mathcal{F}' \to i_{X, *}\mathcal{F} \to 0
\end{equation}
of $\mathcal{O}_{X'}$-modules, where $\mathcal{F}$, $\mathcal{K}$ are
$\mathcal{O}_X$-modules and $\mathcal{F}'$ is an $\mathcal{O}_{X'}$-module.
In this situation we have a canonical $\mathcal{O}_X$-module map
$$
c_{\mathcal{F}'} :
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}
\longrightarrow
\mathcal{K}
$$
where $\mathcal{C}_{X/X'}$ is the conormal sheaf of $X$ in $X'$
(see Morphisms, Section \ref{morphisms-section-conormal-sheaf}).
Namely, given local sections $f$ of $\mathcal{C}_{X/X'}$ and $s$
of $\mathcal{F}$ we set $c_{\mathcal{F}'}(f \otimes s) = fs'$
where $s'$ is a local section of $\mathcal{F}'$ lifting $s$.

\begin{lemma}
\label{lemma-inf-map}
Let $X \subset X'$ be a first order thickening of schemes. Assume given
extensions
$$
0 \to i_{X, *}\mathcal{K} \to \mathcal{F}' \to i_{X, *}\mathcal{F} \to 0
\quad\text{and}\quad
0 \to i_{X, *}\mathcal{L} \to \mathcal{G}' \to i_{X, *}\mathcal{G} \to 0
$$
as above and maps $\varphi : \mathcal{F} \to \mathcal{G}$ and
$\psi : \mathcal{K} \to \mathcal{L}$.
\begin{enumerate}
\item If there exists an $\mathcal{O}_{X'}$-module
map $\varphi' : \mathcal{F}' \to \mathcal{G}'$ compatible with $\varphi$
and $\psi$, then the diagram
$$
\xymatrix{
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_{\mathcal{F}'}} \ar[d]_{1 \otimes \varphi} &
\mathcal{K} \ar[d]^\psi \\
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{G}
\ar[r]^-{c_{\mathcal{G}'}} &
\mathcal{L}
}
$$
is commutative.
\item The set of $\mathcal{O}_{X'}$-module
maps $\varphi' : \mathcal{F}' \to \mathcal{G}'$ compatible with $\varphi$
and $\psi$ is, if nonempty, a principal homogenous space under
$\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{L})$.
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) is immediate from the description of the maps.
For (2), if $\varphi'$ and $\varphi''$ are two maps
$\mathcal{F}' \to \mathcal{G}'$ compatible with $\varphi$
and $\psi$, then $\varphi' - \varphi''$ factors as
$$
\mathcal{F}' \to i_{X, *}\mathcal{F} \to i_{X, *}\mathcal{L} \to \mathcal{G}'
$$
The map in the middle comes from a unique element of
$\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{L})$ by
Modules, Lemma \ref{modules-lemma-i-star-equivalence}.
Conversely, given an element $\alpha$ of this group we can add the
composition (as displayed above with $i_{X, *}\alpha$ in the middle)
to $\varphi'$. Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-inf-obs-map}
Let $X \subset X'$ be a first order thickening of schemes. Assume given
extensions
$$
0 \to i_{X, *}\mathcal{K} \to \mathcal{F}' \to i_{X, *}\mathcal{F} \to 0
\quad\text{and}\quad
0 \to i_{X, *}\mathcal{L} \to \mathcal{G}' \to i_{X, *}\mathcal{G} \to 0
$$
as above and maps $\varphi : \mathcal{F} \to \mathcal{G}$ and
$\psi : \mathcal{K} \to \mathcal{L}$. Assume the diagram
$$
\xymatrix{
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_{\mathcal{F}'}} \ar[d]_{1 \otimes \varphi} &
\mathcal{K} \ar[d]^\psi \\
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{G}
\ar[r]^-{c_{\mathcal{G}'}} &
\mathcal{L}
}
$$
is commutative. Then there exists an element
$$
o(\varphi, \psi) \in
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{L})
$$
whose vanishing is a necessary and sufficient condition for the existence
of a map $\varphi' : \mathcal{F}' \to \mathcal{G}'$ compatible with
$\varphi$ and $\psi$.
\end{lemma}

\begin{proof}
Let $\mathcal{I} \subset \mathcal{O}_{X'}$
be the quasi-coherent sheaf of ideals cutting out $X$.
We identify the underlying topological spaces of $X$ and $X'$ which
allows us to write $\mathcal{F}$ instead of $i_{X, *}\mathcal{F}$, etc.
Moreover we have $\mathcal{I} = \mathcal{C}_{X/X'}$.
We can construct explicitly an extension
$$
0 \to \mathcal{L} \to \mathcal{H} \to \mathcal{F} \to 0
$$
by taking $\mathcal{H}$ to be the cohomology of the complex
$$
\mathcal{K}
\xrightarrow{1, - \psi}
\mathcal{F}' \oplus \mathcal{G}' \xrightarrow{\varphi, 1}
\mathcal{G}
$$
in the middle (with obvious notation). A calculation with local sections
using the assumption that the diagram of the lemma commutes
shows that $\mathcal{H}$ is annihilated by $\mathcal{I}$. Hence
$\mathcal{H}$ defines a class in
$$
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{L})
\subset
\text{Ext}^1_{\mathcal{O}_{X'}}(\mathcal{F}, \mathcal{L})
$$
Finally, the class of $\mathcal{H}$ is the difference of the pushout
of the extension $\mathcal{F}'$ via $\psi$ and the pullback
of the extension $\mathcal{G}'$ via $\varphi$ (calculations omitted).
Thus the vanishing of the class of $\mathcal{H}$ is equivalent to the
existence of a commutative diagram
$$
\xymatrix{
0 \ar[r] &
\mathcal{K} \ar[r] \ar[d]_{\psi} &
\mathcal{F}' \ar[r] \ar[d]_{\varphi'} &
\mathcal{F} \ar[r] \ar[d]_\varphi & 0\\
0 \ar[r] &
\mathcal{L} \ar[r] &
\mathcal{G}' \ar[r] &
\mathcal{G} \ar[r] & 0
}
$$
as desired.
\end{proof}

\begin{lemma}
\label{lemma-inf-ext}
Let $X \subset X'$ be a first order thickening of schemes. Assume given
$\mathcal{O}_X$-modules $\mathcal{F}$, $\mathcal{K}$
and an $\mathcal{O}_X$-linear map
$c : \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F} \to \mathcal{K}$.
If there exists a sequence (\ref{equation-extension}) with
$c_{\mathcal{F}'} = c$ then the set of isomorphism classes of these
extensions is principal homogeneous under
$\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K})$.
\end{lemma}

\begin{proof}
Assume given extensions
$$
0 \to i_{X, *}\mathcal{K} \to \mathcal{F}'_1 \to i_{X, *}\mathcal{F} \to 0
\quad\text{and}\quad
0 \to i_{X, *}\mathcal{K} \to \mathcal{F}'_2 \to i_{X, *}\mathcal{F} \to 0
$$
with $c_{\mathcal{F}'_1} = c_{\mathcal{F}'_2} = c$. Then the difference
(in the extension group, see
Homology, Section \ref{homology-section-extensions})
is an extension
$$
0 \to i_{X, *}\mathcal{K} \to \mathcal{E}' \to i_{X, *}\mathcal{F} \to 0
$$
where $\mathcal{E}'$ is annihilated by the quasi-coherent sheaf of ideals
$\mathcal{I} \subset \mathcal{O}_{X'}$ cutting out $X$ (local computation
omitted). Hence $\mathcal{E}' = i_{X, *}\mathcal{E}$ and we obtain an
extension
$$
0 \to \mathcal{K} \to \mathcal{E} \to \mathcal{F} \to 0
$$
of $\mathcal{O}_X$-modules,
see Modules, Lemma \ref{modules-lemma-i-star-equivalence}.
Conversely, given such an extension $\mathcal{E}$ we can add the extension
$\mathcal{E}' = i_{X, *}\mathcal{E}$
to the $\mathcal{O}_{X'}$-extension $\mathcal{F}'$ without affecting
the map $c_{\mathcal{F}'}$. Some details omitted.
\end{proof}

\begin{lemma}
\label{lemma-inf-obs-ext}
Let $X \subset X'$ be a first order thickening of schemes. Assume given
$\mathcal{O}_X$-modules $\mathcal{F}$, $\mathcal{K}$
and an $\mathcal{O}_X$-linear map
$c : \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F} \to \mathcal{K}$.
Then there exists an element
$$
o(\mathcal{F}, \mathcal{K}, c) \in
\text{Ext}^2_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K})
$$
whose vanishing is a necessary and sufficient condition for the existence
of a sequence (\ref{equation-extension}) with $c_{\mathcal{F}'} = c$.
\end{lemma}

\begin{proof}
Let $\mathcal{I} \subset \mathcal{O}_{X'}$ be the quasi-coherent sheaf
of ideals cutting out $X$.
We identify the underlying topological spaces of $X$ and $X'$ which
allows us to write $\mathcal{F}$ instead of $i_{X, *}\mathcal{F}$, etc.
Moreover we have $\mathcal{I} = \mathcal{C}_{X/X'}$.

\medskip\noindent
We first show that if $\mathcal{K}$ is an injective $\mathcal{O}_X$-module,
then there does exist a sequence (\ref{equation-extension}) with
$c_{\mathcal{F}'} = c$. To do this, choose a flat
$\mathcal{O}_{X'}$-module $\mathcal{H}'$ and a surjection
$\mathcal{H}' \to \mathcal{F}$
(Modules, Lemma \ref{modules-lemma-module-quotient-flat}).
Let $\mathcal{J} \subset \mathcal{H}'$ be the kernel. Since $\mathcal{H}'$
is flat we have
$$
\mathcal{I} \otimes_{\mathcal{O}_{X'}} \mathcal{H}' =
\mathcal{I}\mathcal{H}'
\subset \mathcal{J} \subset \mathcal{H}'
$$
Observe that the map
$$
\mathcal{I}\mathcal{H}' =
\mathcal{I} \otimes_{\mathcal{O}_{X'}} \mathcal{H}'
\longrightarrow
\mathcal{I} \otimes_{\mathcal{O}_{X'}} \mathcal{F} =
\mathcal{I} \otimes_{\mathcal{O}_X} \mathcal{F}
$$
annihilates $\mathcal{I}\mathcal{J}$. Namely, if $f$ is a local section
of $\mathcal{I}$ and $s$ is a local section of $\mathcal{H}$, then
$fs$ is mapped to $f \otimes \overline{s}$ where $\overline{s}$ is
the image of $s$ in $\mathcal{F}$. Thus we obtain
$$
\xymatrix{
\mathcal{I}\mathcal{H}'/\mathcal{I}\mathcal{J}
\ar@{^{(}->}[r] \ar[d] &
\mathcal{J}/\mathcal{I}\mathcal{J} \ar@{..>}[d]_\gamma \\
\mathcal{I} \otimes_{\mathcal{O}_X} \mathcal{F} \ar[r]^-c &
\mathcal{K}
}
$$
a diagram of $\mathcal{O}_X$-modules. If $\mathcal{K}$ is injective
as an $\mathcal{O}_X$-module, then we obtain the dotted arrow.
Denote $\gamma' : \mathcal{J} \to \mathcal{K}$ the composition
of $\gamma$ with $\mathcal{J} \to \mathcal{J}/\mathcal{I}\mathcal{J}$.
A local calculation shows the pushout
$$
\xymatrix{
0 \ar[r] &
\mathcal{J} \ar[r] \ar[d]_{\gamma'} &
\mathcal{H}' \ar[r] \ar[d] &
\mathcal{F} \ar[r] \ar@{=}[d] &
0 \\
0 \ar[r] &
\mathcal{K} \ar[r] &
\mathcal{F}' \ar[r] &
\mathcal{F} \ar[r] &
0
}
$$
is a solution to the problem posed by the lemma.

\medskip\noindent
General case. Choose an embedding $\mathcal{K} \subset \mathcal{K}'$
with $\mathcal{K}'$ an injective $\mathcal{O}_X$-module. Let $\mathcal{Q}$
be the quotient, so that we have an exact sequence
$$
0 \to \mathcal{K} \to \mathcal{K}' \to \mathcal{Q} \to 0
$$
Denote
$c' : \mathcal{I} \otimes_{\mathcal{O}_X} \mathcal{F} \to \mathcal{K}'$
be the composition. By the paragraph above there exists a sequence
$$
0 \to \mathcal{K}' \to \mathcal{E}' \to \mathcal{F} \to 0
$$
as in (\ref{equation-extension}) with $c_{\mathcal{E}'} = c'$.
Note that $c'$ composed with the map $\mathcal{K}' \to \mathcal{Q}$
is zero, hence the pushout of $\mathcal{E}'$ by
$\mathcal{K}' \to \mathcal{Q}$ is an extension
$$
0 \to \mathcal{Q} \to \mathcal{D}' \to \mathcal{F} \to 0
$$
as in (\ref{equation-extension}) with $c_{\mathcal{D}'} = 0$.
This means exactly that $\mathcal{D}'$ is annihilated by
$\mathcal{I}$, in other words, the $\mathcal{D}'$ is an extension
of $\mathcal{O}_X$-modules, i.e., defines an element
$$
o(\mathcal{F}, \mathcal{K}, c) \in
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{Q}) =
\text{Ext}^2_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K})
$$
(the equality holds by the long exact cohomology sequence associated
to the exact sequence above and the vanishing of higher ext groups
into the injective module $\mathcal{K}'$). If
$o(\mathcal{F}, \mathcal{K}, c) = 0$, then we can choose a splitting
$s : \mathcal{F} \to \mathcal{D}'$ and we can set
$$
\mathcal{F}' = \text{Ker}(\mathcal{E}' \to \mathcal{D}'/s(\mathcal{F}))
$$
so that we obtain the following diagram
$$
\xymatrix{
0 \ar[r] &
\mathcal{K} \ar[r] \ar[d] &
\mathcal{F}' \ar[r] \ar[d] &
\mathcal{F} \ar[r] \ar@{=}[d] &
0 \\
0 \ar[r] &
\mathcal{K}' \ar[r] &
\mathcal{E}' \ar[r] &
\mathcal{F} \ar[r] & 0
}
$$
with exact rows which shows that $c_{\mathcal{F}'} = c$. Conversely, if
$\mathcal{F}'$ exists, then the pushout of $\mathcal{F}'$ by the map
$\mathcal{K} \to \mathcal{K}'$ is isomorphic to $\mathcal{E}'$ by
Lemma \ref{lemma-inf-ext} and the vanishing of higher ext groups
into the injective module $\mathcal{K}'$. This gives a diagram
as above, which implies that $\mathcal{D}'$ is split as an extension, i.e.,
the class $o(\mathcal{F}, \mathcal{K}, c)$ is zero.
\end{proof}

\begin{remark}
\label{remark-trivial-thickening}
Let $X$ be a scheme. A first order thickening $X \subset X'$ is said
to be {\it trivial} if there exists a morphism $\pi : X' \to X$ which is a
left inverse to the immersion $X \to X'$. The choice of such a morphism
$\pi$ is called a {\it trivialization} of the first order thickening.
Given $\pi$ we obtain a splitting
\begin{equation}
\label{equation-splitting}
\mathcal{O}_{X'} = \mathcal{O}_X \oplus \mathcal{I}
\end{equation}
as sheaves of algebras on $X$ by using $\pi^\sharp$ to split the surjection
$\mathcal{O}_{X'} \to \mathcal{O}_X$.
It is clear from
More on Morphisms, Lemma \ref{more-morphisms-lemma-first-order-thickening}
that the category of trivialized first order
thickenings of $X$ is equivalent to the category of 
quasi-coherent $\mathcal{O}_X$-modules.
\end{remark}

\begin{remark}
\label{remark-trivial-extension}
Let $X \subset X'$ be a trivial first order thickening of schemes
and let $\pi : X' \to X$ be a trivialization. Then given any triple
$(\mathcal{F}, \mathcal{K}, c)$ consisting of a pair of $\mathcal{O}_X$-modules
and a map
$c : \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F} \to \mathcal{K}$
we may set
$$
\mathcal{F}'_{c, triv} = \mathcal{F} \oplus \mathcal{K}
$$
and use the splitting (\ref{equation-splitting}) associated to $\pi$
and the map $c$ to define the $\mathcal{O}_{X'}$-module structure
and obtain an extension (\ref{equation-extension}). We will call
$\mathcal{F}'_{c, triv}$ the {\it trivial extension} of $\mathcal{F}$
by $\mathcal{K}$ corresponding
to $c$ and the trivialization $\pi$. Given any extension
$\mathcal{F}'$ as in (\ref{equation-extension}) we can use
$\pi^\sharp : \mathcal{O}_X \to \mathcal{O}_{X'}$ to think of $\mathcal{F}'$
as an $\mathcal{O}_X$-module extension, hence a class $\xi_{\mathcal{F}'}$
in $\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K})$.
Lemma \ref{lemma-inf-ext} assures that
$\mathcal{F}' \mapsto \xi_{\mathcal{F}'}$
induces a bijection
$$
\left\{
\begin{matrix}
\text{isomorphism classes of extensions}\\
\mathcal{F}'\text{ as in (\ref{equation-extension}) with }c = c_{\mathcal{F}'}
\end{matrix}
\right\}
\longrightarrow
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K})
$$
Moreover, the trivial extension $\mathcal{F}'_{c, triv}$ maps to the zero class.
\end{remark}

\begin{remark}
\label{remark-extension-functorial}
Let $(\text{id}_X, h) : (X \subset X'_1) \to (X \subset X'_2)$ be a morphism
of first order thickenings of a scheme $X$. Let $\mathcal{F}$ be an
$\mathcal{O}_X$-module. Let $(\mathcal{K}_i, c_i)$, $i = 1, 2$ be a pair
consisting of an $\mathcal{O}_X$-module $\mathcal{K}_i$ and a map
$c_i : \mathcal{C}_{X/X'_i} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{K}_i$. Assume furthermore given a map
of $\mathcal{O}_X$-modules $\mathcal{K}_2 \to \mathcal{K}_1$
such that
$$
\xymatrix{
\mathcal{C}_{X/X'_2} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_2} \ar[d] &
\mathcal{K}_2 \ar[d] \\
\mathcal{C}_{X/X'_1} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]^-{c_1} &
\mathcal{K}_1
}
$$
is commutative. Then there is a canonical functoriality
$$
\left\{
\begin{matrix}
\mathcal{F}'_2\text{ as in (\ref{equation-extension}) with }\\
c_2 = c_{\mathcal{F}'_2}\text{ and }\mathcal{K} = \mathcal{K}_2
\end{matrix}
\right\}
\longrightarrow
\left\{
\begin{matrix}
\mathcal{F}'_1\text{ as in (\ref{equation-extension}) with }\\
c_1 = c_{\mathcal{F}'_1}\text{ and }\mathcal{K} = \mathcal{K}_1
\end{matrix}
\right\}
$$
Namely, thinking of all sheaves $\mathcal{O}_X$, $\mathcal{O}_{X'_i}$,
$\mathcal{F}$, $\mathcal{K}_i$, etc as sheaves on $X$, we set
given $\mathcal{F}'_2$ the sheaf $\mathcal{F}'_1$ equal to the
pushout, i.e., fitting into the following diagram of extensions
$$
\xymatrix{
0 \ar[r] &
\mathcal{K}_2 \ar[r] \ar[d] &
\mathcal{F}'_2 \ar[r] \ar[d] &
\mathcal{F} \ar@{=}[d] \ar[r] & 0 \\
0 \ar[r] &
\mathcal{K}_1 \ar[r] &
\mathcal{F}'_1 \ar[r] &
\mathcal{F} \ar[r] & 0
}
$$
We omit the construction of the $\mathcal{O}_{X'_1}$-module structure
on the pushout (this uses the commutativity of the first diagram
of this remark).
\end{remark}

\begin{remark}
\label{remark-trivial-extension-functorial}
Let $(\text{id}_X, h) : (X \subset X'_1) \to (X \subset X'_2)$ be a morphism
of trivialized first order thickening of a scheme $X$. In other words we are
given trivializations $\pi_i : X'_i \to X$ such that $\pi_1 = h \circ \pi_2$.
Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Let
$(\mathcal{K}_i, c_i)$, $i = 1, 2$ be a pair consisting of an
$\mathcal{O}_X$-module $\mathcal{K}_i$ and a map
$c_i : \mathcal{C}_{X/X'_i} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{K}_i$. Assume furthermore given a map
of $\mathcal{O}_X$-modules $\mathcal{K}_2 \to \mathcal{K}_1$
such that
$$
\xymatrix{
\mathcal{C}_{X/X'_2} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_2} \ar[d] &
\mathcal{K}_2 \ar[d] \\
\mathcal{C}_{X/X'_1} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]^-{c_1} &
\mathcal{K}_1
}
$$
is commutative. Here the map $\mathcal{C}_{X/X'_2} \to \mathcal{C}_{X/X'_1}$
is the functoriality of conormal sheaves of
Morphisms, Lemma \ref{morphisms-lemma-conormal-functorial}.
In this situation the construction of
Remark \ref{remark-trivial-extension} induces
a commutative diagram
$$
\xymatrix{
\{\mathcal{F}'_2\text{ as in (\ref{equation-extension}) with }
c_2 = c_{\mathcal{F}'_2}\text{ and }\mathcal{K} = \mathcal{K}_2\}
\ar[d] \ar[rr] & &
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_2) \ar[d] \\
\{\mathcal{F}'_1\text{ as in (\ref{equation-extension}) with }
c_1 = c_{\mathcal{F}'_1}\text{ and }\mathcal{K} = \mathcal{K}_1\}
\ar[rr] & &
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_1)
}
$$
where the vertical map on the right is given by functoriality of $\text{Ext}$
and the map $\mathcal{K}_2 \to \mathcal{K}_1$ and the vertical map on the left
is the one from Remark \ref{remark-extension-functorial}.
\end{remark}

\begin{remark}
\label{remark-short-exact-sequence-thickenings}
Let $X$ be a scheme. We define a sequence of morphisms of
first order thickenings
$$
X'_1 \to X'_2 \to X'_3
$$
of $X$ to be a {\it complex} if the corresponding maps between
the conormal sheaves $\mathcal{C}_i = \mathcal{C}_{X/X'_i}$
give a complex of $\mathcal{O}_X$-modules
$\mathcal{C}_3 \to \mathcal{C}_2 \to \mathcal{C}_1$
(i.e., the composition is zero). In this case the composition
$X'_1 \to X_3'$ factors through $X \subset X'_3$, i.e.,
the first order thickening $X'_1$ is trivial and comes with
a canonical factorization $\pi : X'_1 \to X$.

\medskip\noindent
We say a sequence of morphisms of first order thickenings
$$
X'_1 \to X'_2 \to X'_3
$$
of $X$ is {\it a short exact sequence} if the corresponding maps between
the conormal sheaves is a short exact sequence
$$
0 \to \mathcal{C}_3 \to \mathcal{C}_2 \to \mathcal{C}_1 \to 0
$$
of $\mathcal{O}_X$-modules. In this case we have
$X'_1 = X'_2 \times_{X'_3} X$ and the projection
$\pi : X'_1 \to X$ is the canonical trivialization seen above.
\end{remark}

\begin{remark}
\label{remark-short-exact-sequence-thickenings-and-modules}
Let $X$ be a scheme. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Let
$$
X'_1 \to X'_2 \to X'_3
$$
be a complex first order thickenings of $X$.
Let $(\mathcal{K}_i, c_i)$, $i = 1, 2, 3$ be a pair consisting of
an $\mathcal{O}_X$-module $\mathcal{K}_i$ and a map
$c_i : \mathcal{C}_{X/X'_i} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{K}_i$. Assume furthermore given a short exact sequence
of $\mathcal{O}_X$-modules
$$
0 \to \mathcal{K}_3 \to \mathcal{K}_2 \to \mathcal{K}_1 \to 0
$$
such that
$$
\vcenter{
\xymatrix{
\mathcal{C}_{X/X'_2} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_2} \ar[d] &
\mathcal{K}_2 \ar[d] \\
\mathcal{C}_{X/X'_1} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]^-{c_1} &
\mathcal{K}_1
}
}
\quad\text{and}\quad
\vcenter{
\xymatrix{
\mathcal{C}_{X/X'_3} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]_-{c_3} \ar[d] &
\mathcal{K}_3 \ar[d] \\
\mathcal{C}_{X/X'_2} \otimes_{\mathcal{O}_X} \mathcal{F}
\ar[r]^-{c_2} &
\mathcal{K}_2
}
}
$$
are commutative. Finally, assume given an extension
$$
0 \to \mathcal{K}_2 \to \mathcal{F}'_2 \to \mathcal{F} \to 0
$$
as in (\ref{equation-extension}) with $\mathcal{K} = \mathcal{K}_2$
of $\mathcal{O}_{X'_2}$-modules with $c_{\mathcal{F}'_2} = c_2$.
In this situation we can apply the functoriality of
Remark \ref{remark-extension-functorial} to obtain an extension
$\mathcal{F}'_1$ on $X'_1$ (we'll describe $\mathcal{F}'_1$
in this special case below). By
Remark \ref{remark-trivial-extension}
using the canonical splitting $\pi : X'_1 \to X$ of
Remark \ref{remark-short-exact-sequence-thickenings}
we obtain
$\xi_{\mathcal{F}'_1} \in
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_1)$.
Finally, we have the obstruction
$$
o(\mathcal{F}, \mathcal{K}_3, c_3) \in
\text{Ext}^2_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_3)
$$
see Lemma \ref{lemma-inf-obs-ext}.
In this situation we {\bf claim} that the canonical map
$$
\partial :
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_1)
\longrightarrow
\text{Ext}^2_{\mathcal{O}_X}(\mathcal{F}, \mathcal{K}_3)
$$
coming from the short exact sequence
$0 \to \mathcal{K}_3 \to \mathcal{K}_2 \to \mathcal{K}_1 \to 0$
sends $\xi_{\mathcal{F}'_1}$
to the obstruction class $o(\mathcal{F}, \mathcal{K}_3, c_3)$.

\medskip\noindent
To prove this claim choose an embedding $j : \mathcal{K}_3 \to \mathcal{K}$
where $\mathcal{K}$ is an injective $\mathcal{O}_X$-module.
We can lift $j$ to a map $j' : \mathcal{K}_2 \to \mathcal{K}$.
Set $\mathcal{E}'_2 = j'_*\mathcal{F}'_2$ equal to the pushout
of $\mathcal{F}'_2$ by $j'$ so that $c_{\mathcal{E}'_2} = j' \circ c_2$.
Picture:
$$
\xymatrix{
0 \ar[r] &
\mathcal{K}_2 \ar[r] \ar[d]_{j'} &
\mathcal{F}'_2 \ar[r] \ar[d] &
\mathcal{F} \ar[r] \ar[d] & 0 \\
0 \ar[r] &
\mathcal{K} \ar[r] &
\mathcal{E}'_2 \ar[r] &
\mathcal{F} \ar[r] & 0
}
$$
Set $\mathcal{E}'_3 = \mathcal{E}'_2$ but viewed as an
$\mathcal{O}_{X'_3}$-module via $\mathcal{O}_{X'_3} \to \mathcal{O}_{X'_2}$.
Then $c_{\mathcal{E}'_3} = j \circ c_3$.
The proof of Lemma \ref{lemma-inf-obs-ext} constructs
$o(\mathcal{F}, \mathcal{K}_3, c_3)$
as the boundary of the class of the extension of $\mathcal{O}_X$-modules
$$
0 \to
\mathcal{K}/\mathcal{K}_3 \to
\mathcal{E}'_3/\mathcal{K}_3 \to
\mathcal{F} \to 0
$$
On the other hand, note that $\mathcal{F}'_1 = \mathcal{F}'_2/\mathcal{K}_3$
hence the class $\xi_{\mathcal{F}'_1}$ is the class
of the extension
$$
0 \to \mathcal{K}_2/\mathcal{K}_3 \to \mathcal{F}'_2/\mathcal{K}_3
\to \mathcal{F} \to 0
$$
seen as a sequence of $\mathcal{O}_X$-modules using $\pi^\sharp$
where $\pi : X'_1 \to X$ is the canonical splitting.
Thus finally, the claim follows from the fact that we have
a commutative diagram
$$
\xymatrix{
0 \ar[r] &
\mathcal{K}_2/\mathcal{K}_3 \ar[r] \ar[d] &
\mathcal{F}'_2/\mathcal{K}_3 \ar[r] \ar[d] &
\mathcal{F} \ar[r] \ar[d] & 0 \\
0 \ar[r] &
\mathcal{K}/\mathcal{K}_3 \ar[r] &
\mathcal{E}'_3/\mathcal{K}_3 \ar[r] &
\mathcal{F} \ar[r] & 0
}
$$
which is $\mathcal{O}_X$-linear (with the $\mathcal{O}_X$-module
structures given above).
\end{remark}








\section{Infinitesimal deformations of modules}
\label{section-deformation-modules}

\noindent
In this section we prove a few basic results in the deformation theory
of modules. Let $X \subset X'$ be a first order thickening of schemes.
We freely use the notation introduced in
More on Morphisms, Section \ref{more-morphisms-section-thickenings}.
Let $\mathcal{F}'$ be an $\mathcal{O}_{X'}$-module
and set $\mathcal{F} = \mathcal{F}'|_X = i_X^*\mathcal{F}'$.
In this situation we have a short exact sequence
$$
0 \to \mathcal{I}\mathcal{F}' \to \mathcal{F}' \to i_{X, *}\mathcal{F} \to 0
$$
of $\mathcal{O}_{X'}$-modules where
$\mathcal{I} \subset \mathcal{O}_{X'}$ is the quasi-coherent sheaf of
ideals cutting out $X$. Since $\mathcal{I}^2 = 0$ the
$\mathcal{O}_{X'}$-module structure on $\mathcal{I}\mathcal{F}'$
comes from a unique $\mathcal{O}_X$-module structure. 
We will denote $\mathcal{C}_{X/X'}\mathcal{F}'$
the corresponding $\mathcal{O}_X$-module
(Modules, Lemma \ref{modules-lemma-i-star-equivalence}), in other
words
$$
i_{X, *}\left(\mathcal{C}_{X/X'}\mathcal{F}'\right) = \mathcal{I}\mathcal{F}'
$$
is the defining formula for $\mathcal{C}_{X/X'}\mathcal{F}'$.
As a special case we have
$\mathcal{C}_{X/X'}\mathcal{O}_{X'} = \mathcal{C}_{X/X'}$, see
Morphisms, Section \ref{morphisms-section-conormal-sheaf}.

\begin{lemma}
\label{lemma-inf-map-special}
Let $X \subset X'$ be a first order thickening of schemes.
Let $\mathcal{F}'$, $\mathcal{G}'$ be $\mathcal{O}_{X'}$-modules.
Set $\mathcal{F} = \mathcal{F}'|_X$ and $\mathcal{G} = \mathcal{G}'|_X$.
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be an $\mathcal{O}_X$-linear map.
The set of lifts of $\varphi$ to an $\mathcal{O}_{X'}$-linear map
$\varphi' : \mathcal{F}' \to \mathcal{G}'$ is, if nonempty, a principal
homogenous space under
$$
\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{C}_{X/X'}\mathcal{G}')
$$
\end{lemma}

\begin{proof}
Let $\mathcal{I} \subset \mathcal{O}_{X'}$ be the quasi-coherent
sheaf of ideals cutting out $X$ in $X'$.
We identify the underlying topological spaces of $X$ and $X'$.
Thus we have short exact sequences of quasi-coherent modules
$$
0 \to \mathcal{I} \to \mathcal{O}_{X'} \to \mathcal{O}_X \to 0
\quad\text{and}\quad
0 \to \mathcal{I}\mathcal{G}' \to \mathcal{G}' \to \mathcal{G} \to 0
$$
and similarly for $\mathcal{F}'$.
Since $\mathcal{I}$ has square zero the $\mathcal{O}_{X'}$-module
structure on $\mathcal{I}$ and $\mathcal{I}\mathcal{G}'$ comes from
a unique $\mathcal{O}_X$-module structure. It follows that
$$
\Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{I}\mathcal{G}') =
\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{C}_{X/X'}\mathcal{G}')
\quad\text{and}\quad
\Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{G}) =
\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G})
$$
The lemma now follows from the exact sequence
$$
0 \to \Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{I}\mathcal{G}') \to
\Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{G}') \to
\Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{G})
$$
see Homology, Lemma \ref{homology-lemma-check-exactness}.
\end{proof}

\begin{lemma}
\label{lemma-deform-module}
Let $(f, f') : (X \subset X') \to (S \subset S')$ be a morphism of first
order thickenings. Let $\mathcal{F}'$ be an $\mathcal{O}_{X'}$-module and
set $\mathcal{F} = \mathcal{F}'|_X$. Assume that $\mathcal{F}$ is flat over
$S$ and $X = S \times_{S'} X'$. Then the following are equivalent
\begin{enumerate}
\item $\mathcal{F}'$ is flat over $S'$, and
\item the canonical map
$f^*\mathcal{C}_{S/S'} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{C}_{X/X'}\mathcal{F}'$
is an isomorphism.
\end{enumerate}
Moreover, in this case the maps
$$
f^*\mathcal{C}_{S/S'} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{C}_{X/X'}\mathcal{F}'
$$
are isomorphisms.
\end{lemma}

\begin{proof}
The map $f^*\mathcal{C}_{S/S'} \to \mathcal{C}_{X/X'}$ is surjective
as $X = S \times_{S'} X'$. Hence the final statement is a consequence
of (2).

\medskip\noindent
Proof of the equivalence of (1) and (2). We may check these conditions
at stalks. Let $x \in X \subset X'$
be a point with image $s = f(x) \in S \subset S'$.
Set $A' = \mathcal{O}_{S', s}$, $B' = \mathcal{O}_{X', x}$,
$A = \mathcal{O}_{S, s}$, and $B = \mathcal{O}_{X, x}$.
Then $A = A'/I$ and $B = B'/J$ for some square zero ideals.
Since $X = S \times_{S'} X'$ we have $J = IB'$.
Let $M' = \mathcal{F}'_x$ and $M = \mathcal{F}_x$.
Then $M'$ is a $B'$-module and $M$ is a $B$-module.
Since $\mathcal{F} = \mathcal{F}'|_X$ we see that the kernel of the
surjection $M' \to M$ is $JM' = IM'$. Thus we have a short exact
sequence
$$
0 \to IM' \to M' \to M \to 0
$$
Using
Sheaves, Lemma \ref{sheaves-lemma-stalk-pullback-modules}
and
Modules, Lemma \ref{modules-lemma-stalk-tensor-product}
to identify stalks of pullbacks and tensor products we see
that the stalk at $x$ of the canonical map of the lemma is the map
$$
(I \otimes_A B) \otimes_B M = I \otimes_A M = I \otimes_{A'} M'
\longrightarrow IM'
$$
The assumption that $\mathcal{F}$ is flat over $S$ signifies that
$M$ is a flat $A$-module.

\medskip\noindent
Assume (1). Flatness implies $\text{Tor}_1^{A'}(M', A) = 0$ by
Algebra, Lemma \ref{algebra-lemma-characterize-flat}.
This means $I \otimes_{A'} M' \to M'$ is injective by
Algebra, Remark \ref{algebra-remark-Tor-ring-mod-ideal}.
Hence $I \otimes_A M \to IM'$ is an isomorphism.

\medskip\noindent
Assume (2). Then $I \otimes_{A'} M' \to M'$ is injective. Hence
$\text{Tor}_1^{A'}(M', A) = 0$ by
Algebra, Remark \ref{algebra-remark-Tor-ring-mod-ideal}.
Hence $M'$ is flat over $A'$ by
Algebra, Lemma \ref{algebra-lemma-what-does-it-mean}.
\end{proof}

\begin{lemma}
\label{lemma-inf-map-rel}
Let $(f, f') : (X \subset X') \to (S \subset S')$ be a morphism of first
order thickenings. Let $\mathcal{F}'$, $\mathcal{G}'$ be
$\mathcal{O}_{X'}$-modules and set
$\mathcal{F} = \mathcal{F}'|_X$ and $\mathcal{G} = \mathcal{G}'|_X$.
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be an $\mathcal{O}_X$-linear map.
Assume that $\mathcal{G}'$ is flat over $S'$ and $X = S \times_{S'} X'$.
The set of lifts of $\varphi$ to an $\mathcal{O}_{X'}$-linear map
$\varphi' : \mathcal{F}' \to \mathcal{G}'$ is, if nonempty, a principal
homogenous space under
$$
\Hom_{\mathcal{O}_X}(\mathcal{F},
\mathcal{G} \otimes_{\mathcal{O}_X} f^*\mathcal{C}_{S/S'})
$$
\end{lemma}

\begin{proof}
Combine Lemmas \ref{lemma-inf-map-special} and \ref{lemma-deform-module}.
\end{proof}

\begin{lemma}
\label{lemma-inf-obs-map-special}
Let $X \subset X'$ be a first order thickening.
Let $\mathcal{F}'$, $\mathcal{G}'$ be $\mathcal{O}_{X'}$-modules and set
$\mathcal{F} = \mathcal{F}'|_X$ and $\mathcal{G} = \mathcal{G}'|_X$.
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be an $\mathcal{O}_X$-linear map.
There exists an element
$$
o(\varphi) \in
\text{Ext}^1_{\mathcal{O}_X}(Li_X^*\mathcal{F}',
\mathcal{C}_{X/X'}\mathcal{G}')
$$
whose vanishing is a necessary and sufficient condition for the
existence of a lift of $\varphi$ to an $\mathcal{O}_{X'}$-linear map
$\varphi' : \mathcal{F}' \to \mathcal{G}'$.
\end{lemma}

\begin{proof}
It is clear from the proof of Lemma \ref{lemma-inf-map-special} that the
vanishing of the boundary of $\varphi$ via the map
$$
\Hom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{G}) =
\Hom_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{G}) \longrightarrow
\text{Ext}^1_{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{I}\mathcal{G}')
$$
is a necessary and sufficient condition for the existence of a lift.
Since $i_{X, *} \mathcal{C}_{X/X'}\mathcal{G}' = \mathcal{I}\mathcal{G}'$
we conclude by as
$$
\text{Ext}^1_{\mathcal{O}_{X'}}(\mathcal{F}',
i_{X, *}\mathcal{C}_{X/X'}\mathcal{G}') =
\text{Ext}^1_{\mathcal{O}_X}(Li_X^*\mathcal{F}',
\mathcal{C}_{X/X'}\mathcal{G}')
$$
the adjointness of $i_{X, *} = Ri_{X, *}$ and
$Li_X^*$ on the derived category
(Cohomology, Lemma \ref{cohomology-lemma-adjoint}).
\end{proof}

\begin{lemma}
\label{lemma-inf-obs-map-rel}
Let $(f, f') : (X \subset X') \to (S \subset S')$ be a morphism of first
order thickenings. Let $\mathcal{F}'$, $\mathcal{G}'$ be
$\mathcal{O}_{X'}$-modules and set
$\mathcal{F} = \mathcal{F}'|_X$ and $\mathcal{G} = \mathcal{G}'|_X$.
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be an $\mathcal{O}_X$-linear map.
Assume that $\mathcal{F}'$ and $\mathcal{G}'$ are flat over $S'$ and
$X = S \times_{S'} X'$. There exists an element
$$
o(\varphi) \in  \text{Ext}^1_{\mathcal{O}_X}(\mathcal{F},
\mathcal{G} \otimes_{\mathcal{O}_X} f^*\mathcal{C}_{S/S'})
$$
whose vanishing is a necessary and sufficient condition for the
existence of a lift of $\varphi$ to an $\mathcal{O}_{X'}$-linear map
$\varphi' : \mathcal{F}' \to \mathcal{G}'$.
\end{lemma}

\begin{proof}[First proof]
This follows from Lemma \ref{lemma-inf-obs-map-special}
as we claim that under the assumptions of the lemma we have
$$
\text{Ext}^1_{\mathcal{O}_X}(Li_X^*\mathcal{F}',
\mathcal{C}_{X/X'}\mathcal{G}') =
\text{Ext}^1_{\mathcal{O}_X}(\mathcal{F},
\mathcal{G} \otimes_{\mathcal{O}_X} f^*\mathcal{C}_{S/S'})
$$
Namely, we have
$\mathcal{C}_{X/X'}\mathcal{G}' =
\mathcal{G} \otimes_{\mathcal{O}_X} f^*\mathcal{C}_{S/S'}$
by Lemma \ref{lemma-deform-module}.
On the other hand, observe that
$$
i_{X, *}H^{-1}(Li_X^*\mathcal{F}') =
\text{Tor}_1^{\mathcal{O}_{X'}}(\mathcal{F}', \mathcal{O}_X)
$$
(local computation omitted). Using the short exact sequence
$$
0 \to \mathcal{I} \to \mathcal{O}_{X'} \to \mathcal{O}_X \to 0
$$
we see that this $\text{Tor}_1$ is computed by the kernel of the map
$\mathcal{I} \otimes_{\mathcal{O}_X} \mathcal{F} \to \mathcal{I}\mathcal{F}'$
which is zero by the final assertion of Lemma \ref{lemma-deform-module}.
Thus $\tau_{\geq -1}Li_X^*\mathcal{F}' = \mathcal{F}$.
On the other hand, we have
$$
\text{Ext}^1_{\mathcal{O}_X}(Li_X^*\mathcal{F}',
\mathcal{C}_{X/X'}\mathcal{G}') =
\text{Ext}^1_{\mathcal{O}_X}(\tau_{\geq -1}Li_X^*\mathcal{F}',
\mathcal{C}_{X/X'}\mathcal{G}')
$$
by the dual of
Derived Categories, Lemma \ref{derived-lemma-negative-vanishing}.
\end{proof}

\begin{proof}[Second proof]
We can apply Lemma \ref{lemma-inf-obs-map} as follows. Note that
$\mathcal{K} = \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}$ and
$\mathcal{L} = \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{G}$
by Lemma \ref{lemma-deform-module}, that
$c_{\mathcal{F}'} = 1 \otimes 1$ and $c_{\mathcal{G}'} = 1 \otimes 1$
and taking $\psi = 1 \otimes \varphi$ the diagram of the lemma
commutes. Thus $o(\varphi) = o(\varphi, 1 \otimes \varphi)$
works.
\end{proof}

\begin{lemma}
\label{lemma-inf-ext-rel}
Let $(f, f') : (X \subset X') \to (S \subset S')$ be a morphism of first
order thickenings. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module.
Assume $X = S \times_{S'} X'$ and $\mathcal{F}$ flat over $S$.
If there exists a pair $(\mathcal{F}', \alpha)$ consisting of an
$\mathcal{O}_{X'}$-module $\mathcal{F}'$ flat over $S'$ and an isomorphism
$\alpha : \mathcal{F}'|_X \to \mathcal{F}$, then the set of
isomorphism classes of such pairs is principal homogeneous
under
$\text{Ext}^1_{\mathcal{O}_X}(
\mathcal{F}, \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F})$.
\end{lemma}

\begin{proof}
If we assume there exists one such module, then the canonical map
$$
f^*\mathcal{C}_{S/S'} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}
$$
is an isomorphism by Lemma \ref{lemma-deform-module}. Apply
Lemma \ref{lemma-inf-ext} with $\mathcal{K} = 
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}$
and $c = 1$. By Lemma \ref{lemma-deform-module} the corresponding extensions
$\mathcal{F}'$ are all flat over $S'$.
\end{proof}

\begin{lemma}
\label{lemma-inf-obs-ext-rel}
Let $(f, f') : (X \subset X') \to (S \subset S')$ be a morphism of first
order thickenings. Let $\mathcal{F}$ be an $\mathcal{O}_X$-module. Assume
$X = S \times_{S'} X'$ and $\mathcal{F}$ flat over $S$. There exists an
$\mathcal{O}_{X'}$-module $\mathcal{F}'$ flat over $S'$ with
$\mathcal{F}'|_X \cong \mathcal{F}$, if and only if
\begin{enumerate}
\item the canonical map $
f^*\mathcal{C}_{S/S'} \otimes_{\mathcal{O}_X} \mathcal{F} \to
\mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}$
is an isomorphism, and
\item the class
$o(\mathcal{F}, \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F}, 1)
\in \text{Ext}^2_{\mathcal{O}_X}(
\mathcal{F}, \mathcal{C}_{X/X'} \otimes_{\mathcal{O}_X} \mathcal{F})$
of Lemma \ref{lemma-inf-obs-ext} is zero.
\end{enumerate}
\end{lemma}

\begin{proof}
This folllows immediately from the characterization of
$\mathcal{O}_{X'}$-modules flat over $S'$ of 
Lemma \ref{lemma-deform-module} and
Lemma \ref{lemma-inf-obs-ext}.
\end{proof}









\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
