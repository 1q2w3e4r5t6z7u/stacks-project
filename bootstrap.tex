\input{preamble}

% OK, start here.
%
\begin{document}

\title{Bootstrap}

\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents




\section{Introduction}
\label{section-introduction}

\noindent
In this chapter we use the material from the preceding sections to
give criteria under which a presheaf of sets on the category of schemes
is an algebraic space. Some of this material comes from the work
of Artin, see \cite{ArtinI}, \cite{ArtinII},
\cite{Artin-Theorem-Representability},
\cite{Artin-Construction-Techniques},
\cite{Artin-Algebraic-Spaces},
\cite{Artin-Algebraic-Approximation},
\cite{Artin-Implicit-Function},
and \cite{ArtinVersal}.
However, our method will be to use as much as possible arguments
similar to those of the paper by Keel and Mori, see
\cite{K-M}.

\section{Conventions}
\label{section-conventions}

\noindent
The standing assumption is that all schemes are contained in
a big fppf site $\textit{Sch}_{fppf}$. And all rings $A$ considered
have the property that $\text{Spec}(A)$ is (isomorphic) to an
object of this big site.

\medskip\noindent
Let $S$ be a scheme and let $X$ be an algebraic space over $S$.
In this chapter and the following we will write $X \times_S X$
for the product of $X$ with itself (in the category of algebraic
spaces over $S$), instead of $X \times X$.




\section{Morphisms representable by algebraic spaces}
\label{section-morphism-representable-by-spaces}

\noindent
Here we define the notion of one presheaf being relatively representabe
by algebraic spaces over another, and we prove some properties of this notion.

\begin{definition}
\label{definition-morphism-representable-by-spaces}
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
Let $F$, $G$ be presheaves on $\textit{Sch}_{fppf}/S$.
We say a morphism $a : F \to G$ is
{\it representable by algebraic spaces}
if for every $U \in \text{Ob}((\textit{Sch}/S)_{fppf})$ and
any $\xi : U \to G$ the fiber product $U \times_{\xi, G} F$
is an algebraic space.
\end{definition}

\noindent
Here is a sanity check.

\begin{lemma}
\label{lemma-morphism-spaces-is-representable-by-spaces}
Let $S$ be a scheme.
Let $f : X \to Y$ be a morphism of algebraic spaces over $S$.
Then $f$ is representable by algebraic spaces.
\end{lemma}

\begin{proof}
This is formal and relies only on the fact that
the category of algebraic spaces over $S$ has fibre products, see
Spaces, Lemma \ref{spaces-lemma-fibre-product-spaces}.
\end{proof}

\begin{lemma}
\label{lemma-representable-by-spaces-transformation-to-sheaf}
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
Let $F, G : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$.
Let $a : F \to G$ be representable by algebraic spaces.
If $G$ is a sheaf, then so is $F$.
\end{lemma}

\begin{proof}
(Same as the proof of
Spaces, Lemma \ref{spaces-lemma-representable-transformation-to-sheaf}.)
Let $\{\varphi_i : T_i \to T\}$ be a covering of the site
$(\textit{Sch}/S)_{fppf}$.
Let $s_i \in F(T_i)$ which satisfy the sheaf condition.
Then $\sigma_i = a(s_i) \in G(T_i)$ satisfy the sheaf condition
also. Hence there exists a unique $\sigma \in G(T)$ such
that $\sigma_i = \sigma|_{T_i}$. By assumption
$F' = h_{T} \times_{\sigma, G, a} F$ is a sheaf.
Note that $(\varphi_i, s_i) \in F'(T_i)$ satisfy the
sheaf condition also, and hence come from some unique
$(\text{id}_T, s) \in F'(T)$. Clearly $s$ is the section of
$F$ we are looking for.
\end{proof}

\noindent
The following lemma is actually slightly tricky.

\begin{lemma}
\label{lemma-representable-by-spaces-over-space}
Let $S$ be a scheme contained in $\textit{Sch}_{fppf}$.
Let $F, G : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$.
Let $a : F \to G$ be representable by algebraic spaces.
If $G$ is an algebraic space, then so is $F$.
\end{lemma}

\begin{proof}
We have seen in
Spaces,
Lemma \ref{lemma-representable-by-spaces-transformation-to-sheaf}
that $F$ is a sheaf.

\medskip\noindent
Let $U$ be a scheme and let $U \to G$ be a surjective etale morphism.
In this case $U \times_G F$ is an algebraic space. Let $W$ be a scheme
and let $W \to U \times_G F$ be a surjective etale morphism.

\medskip\noindent
First we claim that $W \to G$ is representable.
To see this let $X$ be a scheme and let $X \to F$ be a morphism.
Then
$$
W \times_F X = W \times_{U \times_G F} U \times_G F \times_F X
= W \times_{U \times_G F} (U \times_G X)
$$
Since both $U \times_G F$ and $G$ are algebraic spaces we see that
this is a scheme.

\medskip\noindent
Next, we claim that $W \to G$ is surjective and etale (this makes
sense now that we know it is representable). This follows from the
formula above since both $W \to U \times_G F$ and $U \to G$
are etale and surjective, hence
$W \times_{U \times_G F} (U \times_G X) \to U \times_G X$ and
$U \times_G X \to X$ are surjective and etale, and the composition of
surjective etale morphisms is surjective and etale.

\medskip\noindent
Set $R = W \times_F W$. By the above the projections $t, s : R \to W$
are etale. It is clear that $R$ is an equivalence relation, and
$W \to F$ is a surjection of sheaves. Hence $R$ is an etale equivalence
relation and $F = W/R$. Hence $F$ is an algebraic space by
Spaces,
Theorem \ref{spaces-theorem-presentation}.
\end{proof}

\begin{lemma}
\label{lemma-base-change-transformation}
Let $S$ be a scheme. Let
$$
\xymatrix{
G' \times_G F \ar[r] \ar[d]^{a'} & F \ar[d]^a \\
G' \ar[r] & G
}
$$
be a fibre square of presheaves on $(\textit{Sch}/S)_{fppf}$.
If $a$ is representable by algebraic spaces so is $a'$.
\end{lemma}

\begin{proof}
Omitted. Hint: This is formal.
\end{proof}

\begin{lemma}
\label{lemma-representable-by-spaces}
Let $S$ be a scheme.
Let $a : F \to G$ be a map of presheaves on $(\textit{Sch}/S)_{fppf}$.
Suppose $a : F \to G$ is representable by algebraic spaces.
If $X$ is an algebraic space over $S$, and $X \to G$ is a map of presheaves
then $X \times_G F$ is an algebraic space.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-base-change-transformation} the transformation
$X \times_G F \to X$ is representable by algebraic spaces. Hence it is
an algebraic space by
Lemma \ref{lemma-representable-by-spaces-over-space}.
\end{proof}

\begin{lemma}
\label{lemma-composition-transformation}
Let $S$ be a scheme.
Let
$$
\xymatrix{
F \ar[r]^a & G \ar[r]^b & H
}
$$
be maps of presheaves on $(\textit{Sch}/S)_{fppf}$.
If $a$ and $b$ are representable by algebraic spaces, so is
$b \circ a$.
\end{lemma}

\begin{proof}
Let $T$ be a scheme over $S$, and let $T \to H$ be a morphism.
By assumption $T \times_H G$ is an algebraic space. Hence by
Lemma \ref{lemma-representable-by-spaces}
we see that $T \times_H F = (T \times_H G) \times_G F$ is an
algebraic space as well.
\end{proof}

\begin{lemma}
\label{lemma-product-transformations}
Let $S$ be a scheme.
Let $F_i, G_i : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$, $i = 1, 2$.
Let $a_i : F_i \to G_i$, $i = 1, 2$
be representable by algebraic spaces.
Then
$$
a_1 \times a_2 : F_1 \times F_2 \longrightarrow G_1 \times G_2
$$
is a representable by algebraic spaces.
\end{lemma}

\begin{proof}
Write $a_1 \times a_2$ as the composition
$F_1 \times F_2 \to G_1 \times F_2 \to G_1 \times G_2$.
The first arrow is the base change of $a_1$ by the map
$G_1 \times F_2 \to G_1$, and the second arrow
is the base change of $a_2$ by the map
$G_1 \times G_2 \to G_2$. Hence this lemma is a formal
consequence of Lemmas \ref{lemma-composition-transformation}
and \ref{lemma-base-change-transformation}.
\end{proof}






\section{Properties of maps of presheaves representable by algebraic spaces}
\label{section-representable-by-spaces-properties}

\noindent
Here is the definition that makes this work.

\begin{definition}
\label{definition-property-transformation}
Let $S$ be a scheme. Let $a : F \to G$ be a map of presheaves on
$(\textit{Sch}/S)_{fppf}$ which is representable by algebraic spaces.
Let $\mathcal{P}$ be a property of morphisms of algebraic spaces which
\begin{enumerate}
\item is preserved under any base change, and
\item is fppf local on the base, see
Descent and Spaces,
Definition \ref{spaces-descent-definition-property-morphisms-local}.
\end{enumerate}
In this case we say that $a$ has {\it property $\mathcal{P}$} if for every
scheme $U$ and $\xi : U \to G$ the resulting morphism of algebraic spaces
$U \times_G F \to U$ has property $\mathcal{P}$.
\end{definition}

\noindent
It is important to note that we will only use this definition for
properties of morphisms that are stable under base change, and
local in the fppf topology on the base. This is
not because the definition doesn't make sense otherwise; rather it
is because we may want to give a different definition which is
better suited to the property we have in mind.

\medskip\noindent
The definition above applies for example to the properties of being
``surjective'', ``flat'', ``etale'', and ``locally of finite presentation''.
In other words, $a$ is {\it surjective} (resp.\ {\it etale}, {\it flat},
{\it locally of finite presentation})
if for every scheme $T$ and map $\xi : T \to G$
the morphism of algebraic spaces $T \times_{\xi, G} F \to T$
is surjective (resp.\ etale, flat, locally of finite presentation).

\medskip\noindent
By
Lemma \ref{lemma-morphism-spaces-is-representable-by-spaces}
any morphism between algebraic spaces over $S$ is representable by algebraic
spaces. And by
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-surjective-local}
(resp.\ \ref{spaces-morphisms-lemma-etale-local},
\ref{spaces-morphisms-lemma-flat-local},
\ref{spaces-morphisms-lemma-finite-presentation-local})
the definition of surjective (resp.\ etale, flat,
locally of finite presentation)
above agrees with the already existing definition of morphisms
of algebraic spaces.

\medskip\noindent
Some formal lemmas follow.

\begin{lemma}
\label{lemma-base-change-transformation-property}
Let $S$ be a scheme.
Let $\mathcal{P}$ be a property as in
Definition \ref{definition-property-transformation}.
Let
$$
\xymatrix{
G' \times_G F \ar[r] \ar[d]^{a'} & F \ar[d]^a \\
G' \ar[r] & G
}
$$
be a fibre square of presheaves on $(\textit{Sch}/S)_{fppf}$.
If $a$ is representable by algebraic spaces and has $\mathcal{P}$
so does $a'$.
\end{lemma}

\begin{proof}
Omitted. Hint: This is formal.
\end{proof}

\begin{lemma}
\label{lemma-composition-transformation-property}
Let $S$ be a scheme.
Let $\mathcal{P}$ be a property as in
Definition \ref{definition-property-transformation},
and assume $\mathcal{P}$ is stable under composition.
Let
$$
\xymatrix{
F \ar[r]^a & G \ar[r]^b & H
}
$$
be maps of presheaves on $(\textit{Sch}/S)_{fppf}$.
If $a$, $b$ are representable by algebraic spaces and has
$\mathcal{P}$ so does $b \circ a$.
\end{lemma}

\begin{proof}
Omitted. Hints: Use
Lemma \ref{lemma-representable-by-spaces-over-space}.
\end{proof}

\begin{lemma}
\label{lemma-product-transformations-property}
Let $S$ be a scheme.
Let $F_i, G_i : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$,
$i = 1, 2$.
Let $a_i : F_i \to G_i$, $i = 1, 2$ be representable by algebraic spaces.
Let $\mathcal{P}$ be a property as in
Definition \ref{definition-property-transformation}
which is stable under composition.
If $a_1$ and $a_2$ have property $\mathcal{P}$ so does
$a_1 \times a_2 : F_1 \times F_2 \longrightarrow G_1 \times G_2$.
\end{lemma}

\begin{proof}
Note that the lemma makes sense by
Lemma \ref{lemma-product-transformations}.
Proof omitted.
\end{proof}





\section{Bootstrapping the diagonal}
\label{section-bootstrap-diagonal}

\begin{lemma}
\label{lemma-representable-diagonal}
Let $S$ be a scheme.
If $F$ is a presheaf on $(\textit{Sch}/S)_{fppf}$.
The following are equivalent:
\begin{enumerate}
\item $\Delta_F : F \to F \times F$ is representable by algebraic spaces,
\item for every scheme $T$ any map $T \to F$ is representable by algebraic
spaces, and
\item for every algebraic space $X$ any map $X \to F$ is representable
by algebraic spaces.
\end{enumerate}
\end{lemma}

\begin{proof}
Assume (1). Let $X \to F$ be as in (3). Let $T$ be a scheme, and let
$T \to F$ be a morphism. Then we have
$$
T \times_F X = (T \times_S X) \times_{F \times F, \Delta} F
$$
which is an algebraic space by
Lemma \ref{lemma-representable-by-spaces}
and (1). Hence $X \to F$ is representable, i.e., (3) holds.
The implication (3) $\Rightarrow$ (2) is trivial. Assume (2).
Let $T$ be a scheme, and let $(a, b) : T \to F \times F$ be a morphism.
Then
$$
F \times_{\Delta_F, F \times F} T = T \times_{a, F, b} T
$$
which is an algebraic space by assumption. Hence $\Delta_F$ is
representable by algebraic spaces, i.e., (1) holds.
\end{proof}

\noindent
In particular if $F$ is a presheaf satisfying the equivalent conditions of
the lemma, then for any morphism $X \to F$ where $X$ is an algebraic space
it makes sense to say that $X \to F$ is surjective (resp.\ etale, flat,
locally of finite presentation) by using
Definition \ref{definition-property-transformation}.

\medskip\noindent
Before we actually do the bootstrap we prove a fun lemma.

\begin{lemma}
\label{lemma-after-fppf-sep-lqf}
Let $S$ be a scheme.
Let
$$
\xymatrix{
E \ar[r]_a \ar[d]_f & F \ar[d]^g \\
H \ar[r]^b & G
}
$$
be a cartesian diagram of sheaves on $(\textit{Sch}/S)_{fppf}$, so
$E = H \times_G F$. If
\begin{enumerate}
\item $g$ is representable by algebraic spaces, surjective, flat, and
locally of finite presentation, and
\item $a$ is representable by algebraic spaces, separated, and
locally quasi-finite
\end{enumerate}
then $b$ is representable (by schemes) as well as separated and
locally quasi-finite.
\end{lemma}

\begin{proof}
Let $T$ be a scheme, and let $T \to G$ be a morphism.
We have to show that $T \times_G H$ is an algebraic space, and that
the morphism $T \times_G H \to T$ is separated and
locally quasi-finite. Thus we may base change the whole diagram to $T$
and assume that $G$ is a scheme. In this case $F$ is an algebraic space.
Let $U$ be a scheme, and let $U \to F$ be a surjective etale morphism.
Then $U \to F$ is representable, surjective, flat and
locally of finite presentation by
Morphisms of Spaces,
Lemmas \ref{spaces-morphisms-lemma-etale-flat} and
\ref{spaces-morphisms-lemma-etale-locally-finite-presentation}.
By
Lemma \ref{lemma-composition-transformation}
$U \to G$ is surjective, flat and locally of finite presentation also.
Note that the base change $E \times_F U \to U$ of $a$ is still
separated and locally quasi-finite (by
Lemma \ref{lemma-base-change-transformation-property}). Hence we
may replace the upper part of the diagram of the lemma by
$E \times_F U \to U$. In other words, we may assume that
$F \to G$ is a surjective, flat morphism of schemes
which is locally of finite presentation.
In particular, $\{F \to G\}$ is an fppf covering of schemes.
By
Morphisms of Spaces, Proposition
\ref{spaces-morphisms-proposition-locally-quasi-finite-separated-over-scheme}
we conclude that $E$ is a scheme also.
By
Descent, Lemma \ref{descent-lemma-descent-data-sheaves}
the fact that $E = H \times_G F$ means that we get a descent datum
on $E$ relative to the fppf covering $\{F \to G\}$.
By
More on morphisms, Lemma
\ref{more-morphisms-lemma-separated-locally-quasi-finite-morphisms-fppf-descend}
this descent datum is effective.
By
Descent, Lemma \ref{descent-lemma-descent-data-sheaves}
again this implies that $H$ is a scheme.
By
Descent, Lemmas \ref{descent-lemma-descending-property-separated} and
\ref{descent-lemma-descending-property-quasi-finite}
it now follows that $b$ is separated and locally quasi-finite.
\end{proof}

\noindent
Here is the result that the section title refers to.

\begin{lemma}
\label{lemma-bootstrap-diagonal}
Let $S$ be a scheme.
Let $F : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$ be a functor.
Assume that
\begin{enumerate}
\item the presheaf $F$ is a sheaf,
\item there exists an algebraic space $X$ and a map $X \to F$
which is representable by algebraic spaces, surjective, flat and
locally of finite presentation.
\end{enumerate}
Then $\Delta_F$ is representable (by schemes).
\end{lemma}

\begin{proof}
Let $U \to X$ be a surjective etale morphism from a scheme towards $X$.
Then $U \to X$ is representable, surjective, flat and
locally of finite presentation by
Morphisms of Spaces,
Lemmas \ref{spaces-morphisms-lemma-etale-flat} and
\ref{spaces-morphisms-lemma-etale-locally-finite-presentation}.
By
Lemma \ref{lemma-composition-transformation}
the composition $U \to F$ is representable by algebraic spaces,
surjective, flat and locally of finite presentation also.
Thus we see that $R = U \times_F U$ is an algebraic space.
The morphism of algebraic spaces $R \to U \times_S U$ is
a monomorphism, hence separated (as the diagonal of a monomorphism
is an isomorphism, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-monomorphism}).
Since $U \to F$ is locally of finite presentation, both
morphisms $R \to U$ are locally of finite presentation, see
Lemma \ref{lemma-base-change-transformation-property}.
Hence $R \to U \times_S U$ is locally of finite type (use
Morphisms of Spaces,
Lemmas \ref{spaces-morphisms-lemma-finite-presentation-finite-type} and
\ref{spaces-morphisms-lemma-permanence-finite-type}).
Altogether this means that
$R \to U \times_S U$ is a monomorphism which is locally of finite
type, hence a separated and locally quasi-finite morphism, see
Morphisms of Spaces, Lemma
\ref{spaces-morphisms-lemma-monomorphism-loc-finite-type-loc-quasi-finite}.

\medskip\noindent
Now we are ready to prove that $\Delta_F$ is representable.
Let $T$ be a scheme, and let $(a, b) : T \to F \times F$ be a morphism.
Set
$$
T' = (U \times_S U) \times_{F \times F} T.
$$
Note that $U \times_S U \to F \times F$ is
representable by algebraic spaces, surjective, flat and
locally of finite presentation by
Lemma \ref{lemma-product-transformations-property}.
Hence $T'$ is an algebraic space, and the projection morphism
$T' \to T$ is surjective, flat, and locally of finite presentation.
Consider $Z = T \times_{F \times F} F$ (this is a sheaf) and
$$
Z' = T' \times_{U \times_S U} R
= T' \times_T Z.
$$
We see that $Z'$ is an algebraic space, and
$Z' \to T'$ is separated and locally quasi-finite by the
discussion in the first paragraph of the proof which showed that $R$ is
an algebraic space and that the
morphism $R \to U \times_S U$ has those properties.
Hence we may apply
Lemma \ref{lemma-after-fppf-sep-lqf}
to the diagram
$$
\xymatrix{
Z' \ar[r] \ar[d] & T' \ar[d] \\
Z \ar[r] & T
}
$$
and we conclude.
\end{proof}






\section{Bootstrap}
\label{section-bootstrap}

\noindent
In
Spaces, Section \ref{spaces-section-algebraic-spaces}
we defined an algebraic space as a sheaf in the fppf topology whose
diagonal is representable, and such that there exist a surjective etale
morphism from a scheme towards it. In this section we show that
a sheaf in the fppf topology whose diagonal is representable by algebraic
spaces and which has an etale surjective covering by an algebraic space
is also an algebraic space.
In other words, the category of algebraic spaces is an enlargement of the
category of schemes by certain fppf sheaves $F$ with certain conditions
on the diagonal and the existence of an etale covering by a scheme. The
result of this section says that doing the same process again starting with
the category of algebraic spaces, does not lead to yet another category.

\medskip\noindent
Another motivation for the material in this section is that it will guarantee
later that an algebraic stack whose inertia stack is trivial is equivalent
to an algebraic space.






\noindent
With these preliminaries out of the way we can now state the main
result of this section.

\begin{theorem}
\label{theorem-bootstrap}
Let $S$ be a scheme.
Let $F : (\textit{Sch}/S)_{fppf}^{opp} \to \textit{Sets}$ be a functor.
Assume that
\begin{enumerate}
\item the presheaf $F$ is a sheaf,
\item the diagonal morphism $F  \to F \times F$ is representable by
algebraic spaces, and
\item there exists an algebraic space $X$
and a map $X \to F$ which is surjective, and etale.
\end{enumerate}
Then $F$ is an algebraic space.
\end{theorem}

\begin{proof}
We will use the remarks directly below
Definition \ref{definition-property-transformation}
without further mention.
In the situation of the theorem, let $U \to X$ be a surjective etale morphism
from a scheme towards $X$.
By Lemma \ref{lemma-composition-transformation}
$U \to F$ is surjective and etale also.
Hence the theorem boils down to proving that
$\Delta_F$ is representable.
This follows immediately from
Lemma \ref{lemma-bootstrap-diagonal}.
On the other hand we can circumvent this lemma and show directly $F$
is an algebraic space as in the next paragraph.

\medskip\noindent
Let $U$ be a scheme, and let $U \to F$ be surjective and etale.
Set $R = U \times_F U$, which is an algebraic space (see
Lemma \ref{lemma-representable-diagonal}).
The morphism of algebraic spaces $R \to U \times_S U$ is a monomorphism,
hence separated (as the diagonal of a monomorphism is an isomorphism).
Moreover, since $U \to F$ is etale, we see that $R \to U$ is etale, by
Lemma \ref{lemma-base-change-transformation-property}.
In particular, we see that $R \to U$ is locally quasi-finite, see
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-etale-locally-quasi-finite}.
We conclude that also $R \to U \times_S U$ is
locally quasi-finite by
Morphisms of Spaces,
Lemma \ref{spaces-morphisms-lemma-permanence-quasi-finite}.
Hence
Morphisms of Spaces, Proposition
\ref{spaces-morphisms-proposition-locally-quasi-finite-separated-over-scheme}
applies and $R$ is a scheme. Hence $F = U/R$ is an algebraic
space according to
Spaces, Theorem \ref{spaces-theorem-presentation}.
\end{proof}






\input{chapters}


\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
