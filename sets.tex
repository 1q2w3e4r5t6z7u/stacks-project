\input{preamble}

% OK, start here.
%
\begin{document}

\title{Set theory}

%\begin{abstract}
%\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
We need some set theory every now and then. We use Zermelo-Fraenkel set theory
with the axiom of choice (ZFC) as described in \cite{Kunen} and \cite{Jech}.

\section{Everything is a set}
\label{section-sets-everything}

\noindent
Most mathematiciens think of set theory as providing the basic
foundations for mathematics. So how does this really work?
For example, how do we translate the sentence
``$X$ is a scheme'' into set theory? Well, we just unravel the
definitions: A scheme is a locally ringed space such that every
point has an open neighbourhood which is an affine scheme. 
A locally ringed space is a ringed space such that every stalk
of the structure sheaf is a local ring. A ringed space is
a pair $(X, \mathcal{O}_X)$ consisting of a topological space
$X$ and a sheaf of rings $\mathcal{O}_X$ on it. A topological
space is a pair $(X, \tau)$ consisiting of a set
$X$ and a set of subsets $\tau \subset \mathcal{P}(X)$ 
satisfying the axions of a topology. And so on and
so forth.

\medskip\noindent
So how, given a set $S$ would we recognize whether it is a scheme?
The first thing we look for is whether the set $S$ is an ordered pair.
This is defined (see \cite{Jech}, page 7) as saying that $S$
has the form $(a,b) := \{\{a\},\{a,b\}\}$ for some sets $a, b$. If this is
the case, then we would take a look to see whether $a$ is an
ordered pair $(c,d)$. If so we would check whether 
$d \subset \mathcal{P}(c)$, and if so whether $d$ forms the collection
of sets for a topology on the set $c$. And so on and so forth.

\medskip\noindent
So even though it would take a considerable amount of work to write
a complete formula $\phi_{scheme}(x)$ with one free variable $x$ in set theory 
that expresses the notion ``$x$ is a scheme'', it is possible to do so.
The same thing should be true for any mathematical object.

\section{Classes}
\label{section-classes}

\noindent
Informally we use the notion of a {\it class}. Given a formula
$\phi(x,p_1,\ldots,p_n)$ we call
$$
C = \{x : \phi(x,p_1,\ldots,p_n)\}
$$
a {\it class}. A class is easier to manipulate than the formula
that defines it but it is not strictly speaking a mathematical
object. For example, if $R$ is a ring then we may
consider the class of all $R$-modules (since after all we
may translate the sentence ``$M$ is an $R$-module''
into a formula in set theory which then defines a class).
A {\it proper class} is a class which is not a set.

\medskip\noindent
In this way we may consider the category of $R$-modules
which is a ``big'' category, in other words it has a
proper class of objects. Similarly we may consider
the ``big'' category of schemes, the ``big'' category
of rings, etc.

\section{The hierarchy of sets}
\label{section-sets-hierarchy}

\noindent
A set $T$ is {\it transitive} if $x\in T$ implies $x\subset T$.
A set $\alpha$ is an {\it ordinal} if it is transitive and well-ordered
by $\in$. In this case we define $\alpha + 1 = \alpha \cup \{\alpha\}$,
which is another ordinal called the {\it successor} of $\alpha$.
An ordinal $\alpha$ is called a {\it successor ordinal} if 
there exists an ordinal $\beta$ such that $\alpha = \beta + 1$.
If $\alpha$ is not a successor ordinal, then $\alpha$ is called
a {\it limit ordinal} and we have
$$
\alpha 
=
\bigcup\nolimits_{\gamma \in \alpha} \gamma.
$$
The smallest ordinal is $\emptyset$ which is also denoted $0$.
The first limit ordinal is $\omega$ and it is also the first
infinite ordinal. The collection of all ordinals is a proper class.
It is well-ordered by $\in$ in the following sense: any nonempty set
(or even class) of ordinals has a least element.
Given a set $A$ of ordinals we define the {\it supremum}
of $A$ to be $\text{sup}_{\alpha \in A} \alpha = 
\bigcup_{\alpha \in A} \alpha$. It is the least ordinal bigger
or equal to all $\alpha \in A$.
Given any well ordered set $(S, \geq)$ there is a unique ordinal
$\alpha$ such that $(S, \geq) \cong (\alpha, \in)$; this is
called the {\it order type} of the well ordered set.

\medskip\noindent
We define, by transfinite induction, $V_0 = \emptyset$,
$V_{\alpha + 1} = P(V_\alpha)$ (power set),
and for a limit ordinal $\alpha$,
$$
V_\alpha = \bigcup\nolimits_{\beta < \alpha} V_\beta.
$$
Note that each $V_\alpha$ is a transitive set.

\begin{lemma}
\label{axiom-regularity}
(See \cite{Jech}, Lemma 6.3.)
Every set is an element of $V_\alpha$ for some ordinal $\alpha$.
\end{lemma}

\noindent
In \cite[Chapter III]{Kunen} it is explained that this lemma is
equivalent to the axiom of foundation. The {\it rank} of
a set $S$ is the least ordinal $\alpha$ such that $S \in V_\alpha$.

\section{Cardinality}
\label{section-cardinals}

\noindent
The {\it cardinality} of a set $A$ is the least ordinal $\alpha$
such that there exists a bijection between $A$ and $\alpha$.
We say an ordinal $\alpha$ is a {\it cardinal} if and only
if it occurs as the cardinality of some set, in other words, if
$\alpha = |\alpha|$. We use the greek letters $\kappa$, $\lambda$
for cardinals. The first infinite cardinal is $\omega$, and in this
context it is denoted $\aleph_0$. A set is {\it countable} if its cardinality
is $\leq \aleph_0$.
Given any set $K$ of cardinals the {\it supremum} of $K$
is $\text{sup}_{\kappa \in K} \kappa = \bigcup_{\kappa \in K} \kappa$.
This is a cardinal.

\section{Cofinality}
\label{section-cofinality}

\noindent
A {\it cofinal subset} $S$ of a partially ordered set $T$ is a subset
$S \subset T$ such that $\forall t \in T \exists s\in S (t \leq s)$.
Note that a subset of a well-ordered set is a well-ordered set
(with induced ordering). Given an ordinal $\alpha$ the {\it cofinality}
$\text{cf}(\alpha)$ of $\alpha$ is the least ordinal $\beta$
which occurs as the order type of some cofinal subset of $\alpha$.
The cofinality of an ordinal is always a cardinal.

\section{Reflection principle}
\label{section-reflection-principle}

\noindent
Some of this material is in the chapter of \cite{Kunen} called
``Easy consistency proofs''.

\medskip\noindent
Let $\phi(x_1,\ldots,x_n)$ be a formula of set theory.
Let us use the convention that this notation implies that
all the free variables in $\phi$ occur among $x_1, \ldots, x_n$.
Let $M$ be a set.
The formula $\phi^M(x_1, \ldots, x_n)$ is the
formula obtained from $\phi(x_1, \ldots, x_n)$ by replacing all the
$\forall x$ and $\exists x$ by $\forall x\in M$ and $\exists x\in M$.
So the formula
$\phi(x_1,x_2) = \exists x (x\in x_1 \wedge x\in x_2)$
is turned  into
$\phi^M(x_1,x_2) = \exists x \in M (x\in x_1 \wedge x\in x_2)$.
The formula $\phi^M$ is called the {\it relativization of $\phi$
to $M$}.

\begin{theorem}
\label{theorem-reflection-principle}
See \cite[Theorem 12.14]{Jech} or \cite[Theorem 7.4]{Kunen}.
Suppose given $\phi_1(x_1, \ldots, x_n), \ldots, \phi_m(x_1, \ldots, x_n)$
a {\bf finite} collection of
formulas of set theory. Let $M_0$ be a set.
There exists a set $M$ such that
$M_0 \subset M$ and
$\forall x_1, \ldots, x_n \in M$, we have
$$
\forall i = 1, \ldots, m,\  
\phi_i^{M}(x_1,\ldots,x_n)
\Leftrightarrow
\forall i = 1, \ldots, m,\  
\phi_i(x_1,\ldots,x_n).
$$
In fact we may take $M = V_\alpha$ for some limit ordinal $\alpha$.
\end{theorem}

\noindent
We view this theorem as saying the following: Given any
$x_1, \ldots, x_n \in M$ the formulas hold with the bound variables ranging
through all sets if and only if they hold for the bound variables ranging
through elements of $V_\alpha$. This theorem is a meta-theorem, since
it deals with the formulas of set theory directly.
It actually says that given the finite list of formulas
$\phi_1, \ldots, \phi_m$ with at most free variables $x_1, \ldots, x_n$
the sentence
$$
\begin{matrix}
\forall M_0\ \exists M,\ M_0 \subset M\ \forall x_1, \ldots, x_n \in M \\
\phi_1(x_1,\ldots,x_n) \wedge \ldots \wedge \phi_m(x_1,\ldots,x_n)
\leftrightarrow
\phi_1^M(x_1,\ldots,x_n) \wedge \ldots \wedge \phi_m^M(x_1,\ldots,x_n)
\end{matrix}
$$
is provable in ZFC. In other words, whenever we actually write down
a finite list of formulas $\phi_i$ we get a theorem.

\medskip\noindent
It is somewhat hard to use this theorem in ``ordinary mathematics''
since the meaning of the formulas $\phi_i^M(x_1, \ldots, x_n)$
is not so clear! Instead we will use the idea of the proof of the
reflection principle to prove the existence results we need directly.

\section{Constructing categories of schemes}
\label{section-fibre-product-schemes}

\noindent
We will discuss how to apply this to produce, given an initial
set of schemes, a ``small'' category of schemes closed under
a list of natural operations. Before we do so we introduce the
size of a scheme. Given a scheme $S$ we define
$$
\text{size}(S) = \max(\aleph_0, \kappa_1, \kappa_2)
$$
where we define the cardinal numbers $\kappa_1$ and $\kappa_2$ as follows
\begin{enumerate}
\item We let $\kappa_1$ be the cardinality of the set of affine opens of $S$.
\item We let $\kappa_2$ be the supremum of all the cardinalities of
all $\Gamma(U, \mathcal{O}_S)$ for all $U \subset S$ open.
\end{enumerate}

\begin{lemma}
\label{lemma-bounded-size}
For every cardinal $\kappa$ there exists a set $A$ such
that every element of $A$ is a scheme, and such that for every
scheme $S$ with $\text{Size}(S) \leq \kappa$ there is
an element $X \in A$ such that $X \cong S$ (isomorphism
of schemes).
\end{lemma}

\begin{proof}
Omitted. Hint: think about how any scheme is isomorphic to a scheme
obtained by glueing affines.
\end{proof}

\noindent
We denote $Bound$ the function which to each
cardinal $\kappa$ associates $Bound(\kappa) = \kappa^{\aleph_0}$.
We could make this function grow much more rapidly, e.g., we could
set $Bound(\kappa) = \kappa^\kappa$, and the result below would still hold.
For any ordinal $\alpha$ we denote $\textit{Sch}_\alpha$ the full
subcategory of category of schemes whose objects are elements of
$V_\alpha$. Here is the result we are going to prove.

\begin{lemma}
\label{lemma-construct-category}
With notations $\text{size}$, $Bound$ and $\textit{Sch}_\alpha$ as above.
Let $S_0$ be a set of schemes. There exists a limit ordinal
$\alpha$ with the following properties:
\begin{enumerate}
\item We have $S_0 \subset V_\alpha$, in other words
$S_0 \subset \text{Ob}(\textit{Sch}_\alpha)$.
\label{inclusion}
\item For any $S \in \text{Ob}(\textit{Sch}_\alpha)$ and any
scheme $T$ with $\text{size}(T) \leq Bound(\text{size}(S))$
there exists a scheme $S' \in \text{Ob}(\textit{Sch}_\alpha)$
such that $T \cong S'$.
\label{bounded}
\item For any countable diagram\footnote{Both the set of objects and
the morphism sets are countable. In fact you can prove the lemma with
$\aleph_0$ replaced by any cardinal whatsoever in (3) and (4).}
category $\mathcal{I}$ and
any functor $F : \mathcal{I} \to \textit{Sch}_\alpha$ the limit
$\text{lim}_\mathcal{I} F$ exists in $\textit{Sch}_\alpha$ if and
only if it exists in $\textit{Sch}$ and moreover in this case
the natural morphism between them is an isomorphism.
\label{limit}
\item For any countable diagram category $\mathcal{I}$ and
any functor $F : \mathcal{I} \to \textit{Sch}_\alpha$ the colimit
$\text{colim}_\mathcal{I} F$ exists in $\textit{Sch}_\alpha$ if and
only if it exists in $\textit{Sch}$ and moreover in this case
the natural morphism between them is an isomorphism.
\label{colimit}
\end{enumerate}
\end{lemma}

\begin{proof}
We define, by transfinite induction, a function $f$ which associates
to every ordinal an ordinal as follows. Let $f(0) = 0$.
Given $f(\alpha)$ we define $f(\alpha + 1)$ to be the least
ordinal $\beta$ such that the following hold:
\begin{enumerate}
\item We have $\alpha + 1 \leq \beta$ and $f(\alpha) \leq \beta$.
\item For any $S \in \text{Ob}(\textit{Sch}_{f(\alpha)})$ and any
scheme $T$ with $\text{size}(T) \leq Bound(\text{size}(S))$
there exists a scheme $S' \in \text{Ob}(\textit{Sch}_\beta)$
such that $T \cong S'$.
\item For any countable diagram category $\mathcal{I}$ and
any functor $F : \mathcal{I} \to \textit{Sch}_{f(\alpha)}$ if 
the limit $\text{lim}_\mathcal{I} F$ or the colimit
$\text{colim}_{\mathcal{I}} F$ exists in $\textit{Sch}$
then it is isomorphic to a scheme in $\textit{Sch}_\beta$.
\end{enumerate}
To see $\beta$ exists we argue as follows. Since
$\text{Ob}(\textit{Sch}_{f(\alpha)})$ is a set we see that
$\kappa =
\text{sup}_{S \in \text{Ob}(\textit{Sch}_{f(\alpha)})} Bound(\text{size}(S))$
exists and is a cardinal.
Let $A$ be a set of schemes obtained starting with $\kappa$
as in Lemma \ref{lemma-bounded-size}.
There is a set $CountCat$ of countable
categories such that any countable category is isomorphic to 
an element of $CounCat$. Hence in (3) above we may assume
that $\mathcal{I}$ is an element in $CountCat$. This means that
the pairs $(\mathcal{I}, F)$ in (3) range over a set.
Thus there exists a set $B$ whose elements are schemes 
such that for every $(\mathcal{I}, F)$ as in (3) if the
limit or colimit exists, then it is isomorphic to an element in $B$.
Hence if we pick any $\beta$ such that $A \cup B \subset V_\beta$
and $\beta > \max\{\alpha + 1, f(\alpha)\}$ then (1)-(3) hold.
Since every nonempty collection of ordinals has a least element
we see that $f(\alpha + 1)$ is well defined. Finally, if $\alpha$
is a limit ordinal, then we set
$f(\alpha) = \text{sup}_{\alpha' < \alpha} f(\alpha')$.

\medskip\noindent
Pick $\beta_0$ such that $S_0 \subset V_{\beta_0}$.
By construction $f(\beta) \geq \beta$ and we see that
also $S_0 \subset V_{f(\beta_0)}$. Moreover, as $f$ is
nondecreasing this remains true for any $\beta \geq \beta_0$.
Next, choose any ordinal $\beta_1 > \beta_0$ with cofinality
$\text{cf}(\beta_1) > \omega = \aleph_0$. This is possible
since the cofinality of ordinals gets arbitrarily large,
see. For example, given a cardinal $\kappa$,
the cofinality of $2^\kappa$ is bigger than $\kappa$, see
\cite[Chapter I, Corollary 10.41]{Kunen}. We claim that
$\alpha = f(\beta_1)$ is a solution to the problem posed in the lemma.

\medskip\noindent
The first property of the lemma holds by our choice
of $\beta_1 > \beta_0$ above.

\medskip\noindent
Since $\beta_1$ is a limit ordinal (as its cofinality is infinite)
we see that $f(\beta_1) = \text{sup}_{\beta < \beta_1} f(\beta)$.
Hence $\{f(\beta) \mid \beta < \beta_1\} \subset f(\beta_1)$ is a
confinal subset. Hence we see that
$$
V_\alpha = V_{f(\beta_1)} = \bigcup\nolimits_{\beta < \beta_1} V_{f(\beta)}.
$$
Now, let $S \in \text{Ob}(\textit{Sch}_\alpha)$. We define
$\beta(S)$ to be the least ordinal $\beta$ such that
$S \in \text{Ob}(\textit{Sch}_{f(\beta)})$. By the above we see
that always $\beta(S) < \beta_1$. Since
$\text{Ob}(\textit{Sch}_{f(\beta + 1)}) \subset
\text{Ob}(\textit{Sch}_\alpha)$, we
see by construction of $f$ above that the second property of the lemma
is satisfied.

\medskip\noindent
Suppose that $\{S_1, S_2, \ldots\} \subset \text{Ob}(\textit{Sch}_\alpha)$
is a countable collection. Consider the function
$\omega \to \beta_1$, $n \mapsto \beta(S_n)$. Since the cofinality
of $\beta_1$ is $> \omega$ the image of this function cannot be a
cofinal subset. Hence there exists a $\beta < \beta_1$ such
that $\{S_1, S_2, \ldots\} \subset \text{Ob}(\textit{Sch}_{f(\beta)})$.
It follows that any functor $F : \mathcal{I} \to \textit{Sch}_\alpha$
factors through one of the subcategories $\textit{Sch}_{f(\beta)}$.
Thus, if there exists a scheme $X$ which is the colimit or limit
of the diagram $F$, then by construction of $f$ we see
$X$ is isomorphic to an object
of $\textit{Sch}_{f(\beta + 1)}$ which is a subcategory of
$\textit{Sch}_\alpha$. This proves the last two assertions of
the lemma.
\end{proof}

\begin{remark}
\label{remark-how-to-use-reflection}
The lemma above can also be proved using the reflection principle.
However, one has to be careful. Namely, suppose the sentence
$\phi_{scheme}(X)$ expresses the property ``$X$ is a scheme'', then
what does the formula $\phi_{scheme}^{V_\alpha}(X)$ mean?
It is true that the reflection principle says we can find $\alpha$ such that
for all $X \in V_\alpha$ we have
$\phi_{scheme}(X) \leftrightarrow \phi_{scheme}^{V_\alpha}(X)$
but this is entirely useless. It is only by combining two such
statements that something interesting happens. For example suppose
$\phi_{red}(X, Y)$ expresses the property ``$X$, $Y$ are schemes,
and $Y$ is the reduction of $X$'' (see
Schemes, Definition \ref{schemes-definition-reduced-induced-scheme}).
Suppose we apply the reflection principle to the pair of
formulas $\phi_1(X, Y) = \phi_{red}(X, Y)$,
$\phi_2(X) = \exists Y, \phi_1(X, Y)$. Then it is easy to see that
any $\alpha$ produced by the reflection principle has the property that
given $X \in \text{Ob}(\textit{Sch}_\alpha)$ the reduction of
$X$ is also an object of $\textit{Sch}_\alpha$ (left as an exercise).
\end{remark}

\section{Sets with group action}
\label{section-sets-with-group-action}

\noindent
Let $G$ be a group. We denote $G\textit{-Sets}$ the ``big'' category
of $G$-sets. For any ordinal $\alpha$ we denote
$G\textit{-Sets}_\alpha$ the full subcategory of $G\textit{-Sets}$
whose objects are in $V_\alpha$. As a notion for size of a $G$-set
we take $\text{size}(S) = |S|$ (the cardinality of the underlying
set $S$). As above we use the function $Bound(\kappa) = \kappa^{\aleph_0}$.

\begin{lemma}
\label{lemma-sets-with-group-action}
We notations $G$, $G\textit{-Sets}_\alpha$, $\text{size}$,
and $Bound$ as above. Let $S_0$ be a set of $G$-sets.
There exists a limit ordinal $\alpha$ with the following properties:
\begin{enumerate}
\item We have $S_0 \subset \text{Ob}(G\textit{-Sets}_\alpha)$.
\item For any $S \in \text{Ob}(G\textit{-Sets}_\alpha)$ and any
$G$-set $T$ with $\text{size}(T) \leq Bound(\text{size}(S))$
there exists a $S' \in \text{Ob}(G\textit{-Sets}_\alpha)$
which is isomorphic to $T$.
\item For any countable diagram category $\mathcal{I}$ and
any functor $F : \mathcal{I} \to G\textit{-Sets}_\alpha$ the
limit $\text{lim}_{\mathcal{I}} F$ and colimit
$\text{colim}_\mathcal{I} F$ exist in $G\textit{-Sets}_\alpha$
and are the same as in $G\textit{-Sets}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted. Similar to but easier than the proof of
Lemma \ref{lemma-construct-category} above.
\end{proof}

\section{Coverings of a site}
\label{section-coverings-site}

\noindent
Suppose that $\mathcal{C}$ is a category (as in
Categories, Definition \ref{categories-definition-category}) and
that $\text{Cov}(\mathcal{C})$ is a proper class of coverings
satisfying properties (1), (2) and (3) of Sites,
Definition \ref{sites-definition-site}.
For an ordinal $\alpha$ we set
$\text{Cov}(\mathcal{C})_\alpha = \text{Cov}(\mathcal{C}) \cap V_\alpha$.
Given an ordinal $\alpha$ and a cardinal $\kappa$ we set
$\text{Cov}(\mathcal{C})_{\kappa, \alpha}$ equal to the set
of elements
$\mathcal{U} =
\{\varphi_i : U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})_\alpha$
such that $|I| \leq \kappa$.

\medskip\noindent
We recall the following notion, see Sites, Definition
\ref{sites-definition-combinatorial-tautological}.
Two families of morphisms $\{\varphi_i : U_i \to U\}_{i\in I}$, and
$\{\psi_j : W_j \to U\}_{j\in J}$ with the same target of $\mathcal{C}$ are
called {\it combinatorially equivalent} if there exist maps
$\alpha : I \to J$ and $\beta : J\to I$ such that
$\varphi_i = \psi_{\alpha(i)}$ and $\psi_j = \varphi_{\beta(j)}$.
This defines an equivalence relation on families of morphisms
having a fixed target.

\begin{lemma}
\label{lemma-coverings-site}
With notations as above.
Let $\text{Cov}_0 \subset \text{Cov}(\mathcal{C})$
be a set contained in $\text{Cov}(\mathcal{C})$.
There is a cardinal $\kappa$ and a limit ordinal $\alpha$ such that
\begin{enumerate}
\item we have $\text{Cov}_0 \subset \text{Cov}(\mathcal{C})_{\kappa, \alpha}$,
\item the set of coverings
$\text{Cov}(\mathcal{C})_{\kappa, \alpha}$ satisfies
(1), (2) and (3) of Sites, Definition \ref{sites-definition-site},
in other words $(\mathcal{C}, \text{Cov}(\mathcal{C})_{\kappa, \alpha})$
is a site, and
\item every covering in $\text{Cov}(\mathcal{C})$
is combinatorially equivalent
to a covering in $\text{Cov}(\mathcal{C})_{\kappa, \alpha}$.
\end{enumerate}
\end{lemma}

\begin{proof}
To prove this, we first consider the set $\mathcal{S}$ of all
sets of morphisms of $\mathcal{C}$ with fixed target.
In other words, an element of $\mathcal{S}$ is a subset $T$
of $\text{Arrows}(\mathcal{C})$ such that all
elements of $T$ have the same target. Given a family
$\mathcal{U} = \{\varphi_i : U_i \to U\}_{i\in I}$ of morphisms with fixed
target, we define
$Supp(\mathcal{U}) = \{ \varphi \in \text{Arrows}(\mathcal{C})
\mid \exists i\in I, \varphi = \varphi_i\}$.
Note that two families $\mathcal{U} =  \{\varphi_i : U_i \to U\}_{i\in I}$
and $\mathcal{V} = \{V_j \to V\}_{j \in J}$ are combinatorially
equivalent if and only if $Supp(\mathcal{U}) = Supp(\mathcal{V})$.
Next, we define
$\mathcal{S}_\tau \subset \mathcal{S}$ to be the subset
$\mathcal{S}_\tau = \{ T \in \mathcal{S} \mid
\exists\ \mathcal{U} \in \text{Cov}(\mathcal{C}) \ T = Supp(\mathcal{U})\}$.
For every element $T \in \mathcal{S}_\tau$ set
$\beta(T)$ equal to the least ordinal $\beta$ such that
there exists a $\mathcal{U} \in \text{Cov}(\mathcal{C})_\beta$
such that $T = \text{Supp}(\mathcal{U})$. Finally, set
$\beta_0 = \text{sup}_{T \in S_\tau} \beta(T)$.
At this point it follows that every $\mathcal{U} \in \text{Cov}(\mathcal{C})$
is combinatorially equivalent to some element
of $\text{Cov}(\mathcal{C})_{\beta_0}$.

\medskip\noindent
Let $\kappa$ be the maximum of $\aleph_0$,
the cardinality $|\text{Arrows}(\mathcal{C})|$,
$$
\text{sup}_{\{U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})_{\beta_0}} |I|
\ \ \text{ and }\ \ 
\text{sup}_{\{U_i \to U\}_{i\in I} \in \text{Cov}_0} |I|.
$$
Since $\kappa$ is an infinite cardinal we have
$\kappa \otimes \kappa = \kappa$. Note that obviously
$\text{Cov}(\mathcal{C})_{\beta_0} =
\text{Cov}(\mathcal{C})_{\kappa, \beta_0}$.

\medskip\noindent
We define, by transfinite induction, a function $f$ which associates
to every ordinal an ordinal as follows. Let $f(0) = 0$.
Given $f(\alpha)$ we define $f(\alpha + 1)$ to be the least
ordinal $\beta$ such that the following hold:
\begin{enumerate}
\item We have $\alpha + 1 \leq \beta$ and $f(\alpha) \leq \beta$.
\item If $\{U_i \to U\}_{i\in I}
\in \text{Cov}(\mathcal{C})_{\kappa, f(\alpha)}$
and for each $i$ we have
$\{W_{ij} \to U_i\}_{j\in J_i}
\in \text{Cov}(\mathcal{C})_{\kappa, f(\alpha)}$,
then
$\{W_{ij} \to U\}_{i \in I, j\in J_i}
\in \text{Cov}(\mathcal{C})_{\kappa, \beta}$.
\item If $\{U_i \to U\}_{i\in I}
\in \text{Cov}(\mathcal{C})_{\kappa, \alpha}$
and $W \to U$ is a morphism of $\mathcal{C}$ then
$\{U_i \times_U W \to W \}_{i\in I}
\in \text{Cov}(\mathcal{C})_{\kappa, \beta}$.
\end{enumerate}
To see $\beta$ exists we note that clearly the collection of all
coverings $\{W_{ij} \to U\}$ and $\{U_i \times_U W \to W \}$ that occur in
(2) and (3) form a set. Hence there is some ordinal $\beta$ such that
$V_\beta$ contains all of these coverings. Moreover, the index set
of the covering $\{W_{ij} \to U\}$ has cardinality
$\sum_{i \in I} |J_i| \leq \kappa \otimes \kappa = \kappa$, and
hence these coverings are contained in
$\text{Cov}(\mathcal{C})_{\kappa, \beta}$.
Since every nonempty collection of ordinals has a least element
we see that $f(\alpha + 1)$ is well defined. Finally, if $\alpha$
is a limit ordinal, then we set
$f(\alpha) = \text{sup}_{\alpha' < \alpha} f(\alpha')$.

\medskip\noindent
Pick an ordinal $\beta_1$ such that
$\text{Arrows}(\mathcal{C}) \subset V_{\beta_1}$,
$\text{Cov}_0 \subset V_{\beta_0}$,
and $\beta_1 \geq \beta_0$.
By construction $f(\beta_1) \geq \beta_1$ and we see that
the same properties hold for $V_{f(\beta_1)}$. Moreover, as $f$ is
nondecreasing this remains true for any $\beta \geq \beta_1$.
Next, choose any ordinal $\beta_2 > \beta_1$ with
cofinality $\text{cf}(\beta_2) > \kappa$. This is possible
since the cofinality of ordinals gets arbitrarily large.
For example, given a cardinal $\lambda$,
the cofinality of $2^\lambda$ is bigger than $\lambda$, see
\cite[Chapter I, Corollary 10.41]{Kunen}. We claim that
the pair $\kappa$,
$\alpha = f(\beta_2)$ is a solution to the problem posed in the lemma.

\medskip\noindent
The first and third property of the lemma holds by our choices
of $\kappa$, $\beta_2 > \beta_1 > \beta_0$ above.

\medskip\noindent
Since $\beta_2$ is a limit ordinal (as its cofinality is infinite)
we see that $f(\beta_2) = \text{sup}_{\beta < \beta_2} f(\beta)$.
Hence $\{f(\beta) \mid \beta < \beta_2\} \subset f(\beta_2)$ is a
confinal subset. Hence we see that
$$
V_\alpha = V_{f(\beta_2)} = \bigcup\nolimits_{\beta < \beta_2} V_{f(\beta)}.
$$
Now, let $\mathcal{U} \in \text{Cov}_{\kappa, \alpha}$.
We define $\beta(\mathcal{U})$ to be the least ordinal $\beta$ such that
$\mathcal{U} \in \text{Cov}_{\kappa, f(\beta)}$. By the above we see
that always $\beta(\mathcal{U}) < \beta_2$.

\medskip\noindent
We have to show properties (1), (2) and (3) of
Sites, Definition \ref{sites-definition-site}.
The first holds because by our choice of $\beta_2$ 
all arrows of $\mathcal{C}$ are contained in $V_{f(\beta_2)}$.
For the third, we use that given a covering
$\mathcal{U} = \{U_i \to U\}_{i \in I}
\in \text{Cov}(\mathcal{C})_{\kappa, \alpha}$
we have $\beta(\mathcal{U}) < \beta_2$ and hence
any base change of $\mathcal{U}$ is by construction of
$f$ contained in $\text{Cov}(\mathcal{C})_{\kappa, f(\beta + 1)}$
and hence in $\text{Cov}(\mathcal{C})_{\kappa, \alpha}$.

\medskip\noindent
Finally, for the second condition, suppose that $\{U_i \to U\}_{i\in I}
\in \text{Cov}(\mathcal{C})_{\kappa, f(\alpha)}$
and for each $i$ we have
$\mathcal{W}_i = \{W_{ij} \to U_i\}_{j\in J_i}
\in \text{Cov}(\mathcal{C})_{\kappa, f(\alpha)}$.
Consider the function
$I \to \beta_2$, $i \mapsto \beta(\mathcal{W}_i)$. Since the cofinality
of $\beta_2$ is $> \kappa \geq |I|$ the image of this function cannot be a
cofinal subset. Hence there exists a $\beta < \beta_1$ such
that $\mathcal{W}_i \in \text{Cov}_{\kappa, f(\beta)}$ for all $i \in I$.
It follows that the covering $\{W_{ij} \to U\}_{i\in I, j \in J_i}$
is an element of $\text{Cov}(\mathcal{C})_{\kappa, f(\beta + 1)}
\subset \text{Cov}(\mathcal{C})_{\kappa, \alpha}$ as desired.
\end{proof}

\begin{remark}
\label{remark-better}
It is likely the case that for some limit ordinal
the set of coverings $\text{Cov}(\mathcal{C})_\alpha$ satisfies
the conditions of the lemma. This is after all what an application
of the reflection principle would appear to give (modulo caveats as
described at the end of Section \ref{section-reflection-principle}
and in Remark \ref{remark-how-to-use-reflection}).
\end{remark}

\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
