\input{preamble}

% OK, start here.
%
\begin{document}

\title{Set theory}

%\begin{abstract}
%\end{abstract}

\maketitle

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
We need some set theory every now and then. We use Zermelo-Fraenkel set theory
with the axiom of choice as described in \cite{Kunen} and \cite{Jech}. Since
we are talking about potentially large objects (categories and categories of
categories) we should be carefull.

\section{Everything is a set}
\label{section-sets-everything}

\noindent
Most mathematiciens think of set theory as providing the basic
foundations for mathematics. So how does this really work?
For example, how do we translate the sentence
``$X$ is a scheme'' into set theory? Well, we just unravel the
definitions: A scheme is a locally ringed space such that every
point has an open neighbourhood which is an affine scheme. 
A locally ringed space is a ringed space such that every stalk
of the structure sheaf is a local ring. A ringed space is
a pair $(X, \mathcal{O}_X)$ consisting of a topological space
$X$ and a sheaf of rings $\mathcal{O}_X$ on it. A topological
space is a pair $(X, \tau)$ consisiting of a set
$X$ and a set of subsets $\tau \subset \mathcal{P}(X)$ 
satisfying the axions of a topology. And so on and
so forth.

\medskip\noindent
So how, given a set $S$ would we recognize whether it is a scheme?
The first thing we look for is whether the set $S$ is an ordered pair.
This is defined (see \cite{Jech}, page 7) as saying that $S$
has the form $(a,b) := \{\{a\},\{a,b\}\}$ for some sets $a, b$. If this is
the case, then we would take a look to see whether $a$ is an
ordered pair $(c,d)$. If so we would check whether 
$d \subset \mathcal{P}(c)$, and if so whether $d$ forms the collection
of sets for a topology on the set $c$. And so on and so forth.

\medskip\noindent
So even though it would take a considerable amount of work to write
a complete formula $\phi(x)$ with one free variable $x$ in set theory 
that expresses the notion ``$x$ is a scheme'', it is not difficult to do.
The same thing should be true for any mathematical object.

\section{Classes}
\label{section-classes}

\noindent
Informally we use the notion of a {\it class}. Given a formula
$\phi(x,p_1,\ldots,p_n)$ we call
$$
C = \{x : \phi(x,p_1,\ldots,p_n)\}
$$
a {\it class}. A class is easier to manipulate than the formula
that defines it but it is not strictly speaking a mathematical
object. For example, if $R$ is a ring then we may
consider the class of all $R$-modules (since after all we
may translate the sentence ``$M$ is an $R$-module''
into a formula in set theory which then defines a class).
A {\it proper class} is a class which is not a set.

\medskip\noindent
In this way we may consider the category of $R$-modules
which is a ``big'' category, in other words it has a
proper class of objects. Similarly we may consider
the ``big'' category of schemes, the ``big'' category
of rings, etc.

\section{The hierarchy of sets}
\label{section-sets-hierarchy}

\noindent
A set $T$ is {\it transitive} if $x\in T$ implies $x\subset T$.
A set $\alpha$ is an {\it ordinal} if it is transitive and well-ordered
by $\in$. In this case we define $\alpha + 1 = \alpha \cup \{\alpha\}$,
which is another ordinal called the {\it successor} of $\alpha$.
An ordinal $\alpha$ is called a {\it successor ordinal} if 
there exists an ordinal $\beta$ such that $\alpha = \beta + 1$.
If $\alpha$ is not a successor ordinal, then $\alpha$ is called
a {\it limit ordinal} and we have
$$
\alpha 
=
\bigcup\nolimits_{\gamma \in \alpha} \gamma
=
\sup \{\beta \mid \beta < \alpha \}
$$

\medskip\noindent
We define, by transfinite induction, $V_0 = \emptyset$,
$V_{\alpha + 1} = P(V_\alpha)$, and for a limit ordinal $\alpha$,
$$
V_\alpha = \bigcup\nolimits_{\beta < \alpha} V_\beta.
$$

\begin{lemma}
\label{axiom-regularity}
(See \cite{Jech}, Lemma 6.3.)
Every set is an element of $V_\alpha$ for some ordinal $\alpha$.
\end{lemma}

\noindent
In \cite[Chapter III]{Kunen} it is explained that this lemma is
more or less the same as the axiom of foundation.

\section{Reflection principle}
\label{section-reflection-principle}

\noindent
Some of this material is in the chapter of \cite{Kunen} called
``Easy consistency proofs''.

\medskip\noindent
Let $\phi(x_1,\ldots,x_n)$ be a formula of set theory.
Let us use the convention that this notation implies that
all the free variables in $\phi$ occur among $x_1, \ldots, x_n$.
Let $M$ be a set\footnote{The relativization of $\phi$ can be defined
more generally when $M$ is a class}.
The formula $\phi^M(x_1, \ldots, x_n)$ is the
formula obtained from $\phi(x_1, \ldots, x_n)$ by replacing all the
$\forall x$ and $\exists x$ by $\forall x\in M$ and $\exists x\in M$.
So the formula
$\phi(x_1,x_2) = \exists x (x\in x_1 \wedge x\in x_2)$
is turned  into
$\phi^M(x_1,x_2) = \exists x \in M (x\in x_1 \wedge x\in x_2)$.
The formula $\phi^M$ is called the {\it relativization of $\phi$
to $M$}.

\begin{theorem}
\label{theorem-reflection-principle}
See \cite[Theorem 12.14]{Jech} or \cite[Theorem 7.4]{Kunen}.
Suppose given $\phi_1(x_1, \ldots, x_n), \ldots, \phi_m(x_1, \ldots, x_n)$
a {\bf finite} collection of
formulas of set theory. Let $M_0$ be a set.
There exists a set $M$ such that
$M_0 \subset M$ and
$\forall x_1, \ldots, x_n \in M$, we have
$$
\forall i = 1, \ldots, m,\  
\phi_i^{M}(x_1,\ldots,x_n)
\Leftrightarrow
\forall i = 1, \ldots, m,\  
\phi_i(x_1,\ldots,x_n).
$$
In fact we may take $M = V_\alpha$ for some limit ordinal $\alpha$.
\end{theorem}

\noindent
We view this theorem as saying the following: Given any
$x_1, \ldots, x_n \in M$ the formulas hold with the bound variables ranging
through all sets if and only if they hold for the bound variables ranging
through elements of $V_\alpha$. This theorem is a meta-theorem, since
it deals with the formulas of set theory directly.
It actually says that the existence of $M = V_\alpha$ with the property
above is provable in ZFC given any formulas $\phi_1, \ldots, \phi_m$.

\section{Fibre products of schemes}
\label{section-fibre-product-schemes}

\noindent
We will discuss how to apply this to produce, given an initial
set of schemes, a ``small'' category of schemes closed under
fibre products (in a suitable strong sense). This discussion will
apply much more generally to other ``big'' categories so we are
a bit more careful here than is really needed for the case of the
category of schemes. For an ordinal
$\alpha$ we denote $\textit{Sch}_\alpha$ the subcategory
of the ``big'' category $\textit{Sch}$ of all schemes, whose
objects and morphisms are elements of $V_\alpha$.

\medskip\noindent
Consider the following statement: ``Let $X$ be a scheme.''
As discussed in Section \ref{section-sets-everything}
there is a set theoretic formula expressing this.
Say it is $\phi_{scheme}(X)$.
This has one free variable, namely $X$, and probably
a whole bunch of bound variables. Similarly, let us denote
$\varphi_{mor}(f, X, Y)$ the set theoretic formula
which expresses that $f$ is a morphism of schemes
from $X$ to $Y$. We also can encode the statement
``$A$ is the set of morphisms between the schemes $X$ and $Y$''.
Formally, the corresponding set theoretic formula would look
like
$$
\phi_{set-mor}(A, X, Y) = 
\phi_{scheme}(X) \wedge \phi_{scheme}(Y) \wedge
(\forall f (f \in A \leftrightarrow \phi_{mor}(f, X, Y)))
$$
Clearly, this formula has free variables $X$, $Y$, $A$ and bound variable
$f$ and a whole bunch of other bound variables. Let
$\phi_{mor-set-exists}(X, Y)$
be the settheoretic formula expressing the mathematical sentence
``Let $X$, $Y$ be schemes. There exists a set $A$ such that
$\phi_{set-mor}(A, X, Y)$''. In other words,
$\phi_{mor-set-exists}(X, Y) = \exists A, \phi_{set-mor}(A, X, Y)$.

\medskip\noindent
Consider the following sentence: ``The scheme $T$ together
with the morphisms of schemes $p : T \to X$, and $q : T \to Y$ is a
fibre product of the morphisms of schemes $f : X \to S$ and
$g : Y \to S$.'' Let us write this sentence symbollically as
\begin{eqnarray*}
\text{Let } Z, X, Y, S \text{ be schemes}, \\
\text{let } p, q, f, g \text{ be morphisms of schemes} \\
p : Z \to X, q : Z \to Y, f : X \to S, g : Y \to S \\
\forall\ T \text{ scheme }
\text{Mor}(T, Z) \cong
\text{Mor}(T,X) \times_{\text{Mor}(T,S)} \text{Mor}(T, Y)
\end{eqnarray*}
Let $\phi_{prod}(Z, X, Y, S, p, q, f, g)$ denote a formula of set
theory which is a translation of the above. The free variables of
$\phi_{prod}$ are $Z, X, Y, S, p, q, f, g$ as indicated.
There is a bound variable $T$ (and lots of others).

\medskip\noindent
Consider the following sentence: ``For every pair of morphisms of
schemes $f : X \to S$ and $g : Y \to S$ with the same target scheme $S$
there exists a fibre product $(Z, p, q)$ of $f$ and $g$.''
By Schemes, Lemma \ref{schemes-lemma-fibre-products}
we know this sentence is true. The corresponding set theory
sentence looks like
\begin{eqnarray*}
\text{Let } X,Y,S \text{ be schemes}, \\
\forall f : X \to S, \forall g : Y \to S \text{ morphisms} \\
\exists\ Z\ \text{scheme},
\exists\ p : Z \to X, \exists q : Z \to Y \text{ morphisms}, \\
f \circ p = g \circ q\text{ and }
\forall\ T \text{ scheme} \\
\text{Mor}(T, Z) \cong \text{Mor}(T,X)
\times_{\text{Mor}(T,S)} \text{Mor}(T, Y)
\end{eqnarray*}
The free variables in this formula are $X$, $Y$, $S$.
We denote the corresponding set theory formula by
$\phi_{fib-prods-exist}(X, Y, S)$.

\medskip\noindent
Choose an initial set of schemes $\mathcal{C}_0$.
Apply the reflection theorem with $M_0 = \mathcal{C}_0$
and the sentences
$\phi_{scheme}(X)$,
$\phi_{mor}(f, X, Y)$,
$\phi_{set-mor}(A, X, Y)$,
$\phi_{mor-set-exists}(X, Y)$,
$\phi_{prod}(Z, X, Y, S, p, q, f, g)$,
and
$\phi_{fib-prods-exist}(X, Y, S)$. The theorem implies
there exists a limit ordinal $\alpha$ such that
whenever we choose $X, Y, A, Z, S, p, q, f, g$ in
$V_\alpha$ then the assertions $\phi_{scheme}^{V_\alpha}(X)$, etc
hold if and only if the assertions $\phi_{scheme}(X)$, etc hold.
We work out formula by formula the significance.
\begin{enumerate}
\item For the formula $\phi_{scheme}$ this means that for
all $X \in V_\alpha$ to check that $X$ is a scheme,
it suffices to check that $\phi_{scheme}^{V_\alpha}(X)$ holds.
\item For the formula $\phi_{mor}$ it similarly states that
given $f, X, Y \in V_\alpha$ to see $f$ is a morphism
between $X$ and $Y$ we check whether
$\phi_{mor}^{V_\alpha}(f, X, Y)$ holds.
\item For the formula $\phi_{set-mor}$ it implies that given $X$, $Y$ and
$A$ in $V_\alpha$ we have that $A$ is the set of all morphisms of schemes
from $X$ to $Y$ if and only if $A$ is the set of morphisms of schemes
$f : X \to Y$ with $f \in V_\alpha$!
\item The formula $\phi_{mor-set-exists}(X, Y)$ is true, no matter
what $X$ and $Y$ we choose.
Hence for all $X, Y$ in $\textit{Sch}_\alpha$ the
formula $\phi_{mor-set-exists}^{V_\alpha}(X, Y)$ is true.
Thus, still given $X, Y$ in $\textit{Sch}_\alpha$
there is a set $A$ in $V_\alpha$ whose elements are the morphisms
of schemes between $X$ and $Y$ in $V_\alpha$.
\item Combining the two points just preceding
this means that, given $X, Y$ in $\textit{Sch}_\alpha$, the set
$\text{Mor}_{\textit{Sch}}(X, Y)$ is an element of $V_\alpha$
as well. In other words the embedding
$\textit{Sch}_\alpha \subset \textit{Sch}$ is fully faithful.
\item Let $Z, X, Y, S, p, q, f, g \in V_\alpha$.
The equivalence of $\phi_{prod}(Z, X, Y, S, p, q, f, g)$
and $\phi_{prod}^{V_\alpha}(Z, X, Y, S, p, q, f, g)$ means that
$Z$ is a fibre product of $X$ and $Y$ over $S$ if and only if
it is a fibre product in the category $\textit{Sch}_\alpha$.
\item The formula $\phi_{fib-prods-exist}(X, Y, S)$ is true
for any triple of schemes $X, Y, S$, see Schemes,
Lemma \ref{schemes-lemma-fibre-products}. Hence we see that if
we choose $X, Y, S$ in $\textit{Sch}_\alpha$ then for any
morphisms of $X$ and $Y$ to $S$ there exists a fibre product
in $\textit{Sch}_\alpha$.
\item Finally, combining the preceding two points we see that
$\textit{Sch}_\alpha$ has fibre products and the embedding
$\textit{Sch}_\alpha \subset \textit{Sch}$ commutes with
taking fibre products.
\end{enumerate}
Summarizing we see the following: Given an initial set
of schemes $\mathcal{C}_0$ we can find a limit ordinal
$\alpha$ such that
\begin{enumerate}
\item $\mathcal{C}_0 \subset \textit{Sch}_\alpha$,
\item $\textit{Sch}_\alpha \subset \textit{Sch}$ fully faithful, and
\item fibre products exist in $\textit{Sch}_\alpha$ and satisfy
the universal property of fibre products in the class of {\it all} schemes.
\end{enumerate}

\medskip\noindent
Suppose we have are given a ``big'' category which has fibre products.
Clearly exactly the same reasoning applies, and we can always
find arbitrarily large ``small'' subcategories having fibre
products.

\section{Injective modules}
\label{section-injective-modules}

\noindent
Let $R$ be a ring and let $M$ be an $R$-module.
Consider the sentence: ``The $R$-module $M$ is injective.''
This can be formulated symbolically as follows
\begin{eqnarray*}
\text{Let }M \text{ be an $R$-module},\\
\forall\ X,Y\ \text{$R$-modules},\\
\forall\ j : X\to Y\ \text{injective $R$-module map},\\
\forall\ x : X\to M\ \text{$R$-module map},\\
\exists\ y : Y\to M\ \text{$R$-module map}\\
y \circ j = x
\end{eqnarray*}
Note that this formula does have a free variable (namely $M$).
Let $\mathcal{A}_0$ denote an initial set of $R$-modules.
(For example we could choose $\mathcal{A}_0$ to be the set
consisting of all cokernels of maps of free modules -- this
clearly is a set.)
The reflection principle says that we can find a set
of $R$-modules $\mathcal{A}$ (which we think of as a full subcategory
of the category of $R$-modules) containing the given set $\mathcal{A}_0$
such that $M \in \mathcal{A}$ is an injective
object in the category $\mathcal{A}$ if and only if
it is injective as an $R$-module. 

\section{Categories of modules}
\label{section-categories-modules}

\noindent
We continue with the discussion above.
Consider the assertion: ``Given a category $\mathcal{I}$
and a functor $F$ from $\mathcal{I}$ to $R$-modules,
denoted $i \mapsto M_i = F(i)$. Both the limit $\lim_{i\in \mathcal{I}} M_i$
and the colimit $\text{colim}_{i \in \mathcal{I}} M_i$ exist.'' 
This we can turn into a set theoretic formula with free
variables for $I$ and $F$. Next pick some ordinal $\alpha$.
Using the reflection principle
we can find a category of $R$-modules
in which all limits and colimits whose index category 
have cardinality at most that of $\alpha$ exist and
are equal to the corresponding limits in the ``big''
category of all $R$-modules.

\section{Sets with group action}
\label{section-sets-with-group-action}

\noindent
Let $G$ be a group and let $\mathcal{S}$ be a 
set of $G$-sets. For any ordinal $\alpha$ we denote
$G\textit{-Sets}_\alpha$ the subcategory of $G$-sets
whose objects and morphisms are in $V_\alpha$.
We claim there exists a limit ordinal $\alpha$ such that
\begin{enumerate}
\item $\mathcal{S} \subset \text{Ob}(G\textit{-Sets}_\alpha)$,
\item the embedding $G\textit{-Sets}_\alpha \subset G\textit{-Sets}$
is fully faithful,
\item fibred product exist in $G\textit{-Sets}_\alpha$
and are the same as in $G\textit{-Sets}$,
\item given $U$ in $G\textit{-Sets}_\alpha$, and any monomorphism
$V \to U$ in $G\textit{-Sets}$ there exists a
$V' \in \text{Ob}(G\textit{-Sets})$ isomorphic to $V$,
\item given $U$ in $G\textit{-Sets}_\alpha$, and any epimorphism
$U \to V$ in $G\textit{-Sets}$ there exists a
$V' \in \text{Ob}(G\textit{-Sets})$ isomorphic to $V$, and
\item the left $G$-set corresponding to $G$ is an object of
$G\textit{-Sets}_\alpha$.
\end{enumerate}
We are going to produce $\alpha$ by applying the reflection
principle, with a suitable finite list of set theoretic formulas
for each property. Properties (1) and (6) are clear.
We have already discussed how to formulate set
theoretic formulas that produce $\alpha$ having property (2), (3)
see Section \ref{section-fibre-product-schemes}. In order to 
get property (4) consider the sentence: ``Let $U$ be a $G$-set
and let $Q$ be a set. The elements of $Q$ are epimorphisms
$f : U \to V_f$, and for every epimorphism $U \to V$
there exists some $f \in Q$ such that $V \cong V_f$.''
Write this as $\phi_{set-epis}(U, Q)$. Consider also
the formula $\phi_{set-epis-exists}(U) = \exists Q, \phi_{set-epis}(U, Q)$.
We add these two to the list of formulas when applying the
reflection theorem. Exactly as in Section \ref{section-fibre-product-schemes}
one can argue that in this case, given $U$ in $G\textit{-Sets}_\alpha$
and $Q \in V_\alpha$ we have that $Q$ is an exhaustive list of
isomorphism types of targets of epimorphisms if and only if it is
an exhaustive list inside $V_\alpha$. Moreover, the truth of
$\phi_{set-epis-exists}(U)$ for any $U$ implies that for
any $U$ in $G\textit{-Sets}_\alpha$ there exists a 
$Q \in V_\alpha$ which is such an exhaustive list.
Thus the reflection theorem will assure that
the formula above (together with the others) produces an $\alpha$
with property (5). Similarly for property (4).

\section{Coverings of a site}
\label{section-coverings-site}

\noindent
Suppose that $\mathcal{C}$ is a category and
that $\text{Cov}(\mathcal{C})$ is a proper class of coverings
satisfying properties (1), (2) and (3) of Sites,
Definition \ref{sites-definition-site}.
In this section we show how to replace $\text{Cov}(\mathcal{C})$
by $\text{Cov}(\mathcal{C}) \cap V_\alpha$ to get a site
with a set of coverings.

\medskip\noindent
Let us temporarily introduce the following notion.
Two families of morphisms $\{\varphi_i : U_i \to U\}_{i\in I}$, and
$\{\psi_j : W_j \to U\}_{j\in J}$ with the same target of $\mathcal{C}$ are
called {\it combinatorially equivalent} if there exist maps
$\alpha : I \to J$ and $\beta : J\to I$ such that
$\varphi_i = \psi_{\alpha(i)}$ and $\psi_j = \varphi_{\beta(j)}$.
This defines an equivalence relation on families of morphisms
having a fixed target.
We will show the reflection principle implies that there is a limit ordinal
$\alpha$ such that
\begin{enumerate}
\item the set of coverings
$\text{Cov}(\mathcal{C}) \cap V_\alpha$ satisfies
(1), (2) and (3) of Sites, Definition \ref{sites-definition-site}
as well, and
\item Every covering in $\text{Cov}(\mathcal{C})$
is combinatorially equivalent
to a covering in $\text{Cov}(\mathcal{C}) \cap V_\alpha$.
\end{enumerate}
Clearly, for such $\alpha$ a presheaf is a sheaf for $\text{Cov}(\mathcal{C})$
if and only if it is a sheaf for $\text{Cov}(\mathcal{C}) \cap V_\alpha$.

\medskip\noindent
To prove this, we first consider the set $\mathcal{S}$ of all sets of maps
with common target. In other words, an element of
$\mathcal{S}$ is a subset $T$ of the set of morphisms 
$\text{Arrows}(\mathcal{C})$ of $\mathcal{C}$ such that all
elements of $T$ have the same target. Next, we define
$\mathcal{S}_\tau \subset \mathcal{S}$ to be the subset of those
$T$ which are combinatorially equivalent to some covering
$\xi = \{\varphi_i : U_i \to U\}_{i\in I} \in \text{Cov}(\mathcal{C})$.
In other words, $T \in \mathcal{S}_\tau$ if and only if $T$
is the image of the map $supp_\xi : I \to \text{Arrows}(\mathcal{C})$,
$i\mapsto \varphi_i$ for some covering
$\xi = \{\varphi_i : U_i \to U\}_{i\in I}$
of $\text{Cov}(\mathcal{C})$. Thus $\mathcal{S}_\tau$
is a set. Consider the set theoretical formula: ``Given $T \in \mathcal{S}$
then $T\in \mathcal{S}_\tau$ if and only if there exists
a covering $\xi$ in $\text{Cov}(\mathcal{C})$ such that
$T$ is the image of $supp_\xi$.'' By construction of $\mathcal{S}_\tau$
this formula holds. As a first application of the
reflection principle we find an limit ordinal $\alpha_0$ such that
this formula holds in $V_{\alpha_0}$. At this point already every
covering in $\text{Cov}(\mathcal{C})$ is combinatorially equivalent
to a covering in $\text{Cov}(\mathcal{C}) \cap V_{\alpha_0}$.

\medskip\noindent
The second and final step is to rewrite properties (1), (2) and (3) of
Sites, Definition \ref{sites-definition-site} as set theoretic formulas.
This is similar to the arguments in the sections above and is
left to the reader. Apply the reflection
principle Theorem \ref{theorem-reflection-principle} using these formulas
with the initial set $T$ of the statement of the theorem being equal to
$V_{\alpha_0}$.


\input{chapters}

\bibliography{my}
\bibliographystyle{alpha}

\end{document}
