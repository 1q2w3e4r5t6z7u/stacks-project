\input{preamble}

% OK, start here.
%
\begin{document}

\title{Adequate Modules; UNDER CONSTRUCTION}


\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Introduction}
\label{section-introduction}

\noindent
For any scheme $X$ the category $\textit{QCoh}(\mathcal{O}_X)$
of quasi-coherent modules is abelian and a Serre subcategory
of the abelian category of all $\mathcal{O}_X$-modules. The same
thing works for the catetegory of quasi-coherent modules on
an algebraic space $X$ viewed as a subcategory of the category
of all $\mathcal{O}_X$-modules on the small \'etale site of $X$.
Moreover, for a quasi-compact and quasi-separated morphism
$f : X \to Y$ the pushforward $f_*$ and higher direct images
preserve quasi-coherency.

\medskip\noindent
Next, let $X$ be a scheme and let $\mathcal{O}$ be the structure
sheaf on one of the big sites of $X$, say, the big fppf site.
The category of quasi-coherent $\mathcal{O}$-modules is abelian
(in fact it is equivalent to the category of usual quasi-coherent
$\mathcal{O}_X$-modules on the scheme $X$ we mentioned above)
but its imbedding into $\textit{Mod}(\mathcal{O})$ is not exact.
An example is the map of quasi-coherent modules
$$
\mathcal{O}_{\mathbf{A}^1_k}
\longrightarrow
\mathcal{O}_{\mathbf{A}^1_k}
$$
on $\mathbf{A}^1_k = \text{Spec}(k[x])$ given by multiplication by $x$.
In the abelian category of quasi-coherent sheaves this map is injective,
whereas in the abelian category of all $\mathcal{O}$-modules on the
big site of $\mathbf{A}^1_k$ this map has a nontrivial kernel as we
see by evaluating on sections over $\text{Spec}(k[x]/(x)) = \text{Spec}(k)$.
Moreover, for a quasi-compact and quasi-separated morphism
$f : X \to Y$ the functor $f_{big, *}$ does not preserve quasi-coherency.

\medskip\noindent
In this chapter we introduce a larger category of modules, closely related
to quasi-coherent modules, which ``fixes'' the two problems mentioned above.





\section{Conventions}
\label{section-conventions}

\noindent
In this chapter we fix
$\tau \in \{Zar, \acute{e}tale, smooth, syntomic, fppf\}$
and we fix a big $\tau$-site $\textit{Sch}_\tau$ as in
Topologies, Section \ref{topologies-section-procedure}.
All schemes will be objects of $\textit{Sch}_\tau$.
In particular, given a scheme $S$ we obtain sites
$(\textit{Aff}/S)_\tau \subset (\textit{Sch}/S)_\tau$.
The structure sheaf $\mathcal{O}$ on these sites is defined by
the rule $\mathcal{O}(T) = \Gamma(T, \mathcal{O}_T)$.

\medskip\noindent
All rings $A$ will be such that $\text{Spec}(A)$ is (isomorphic to) an
object of $\textit{Sch}_\tau$. Given a ring $A$ we denote
$\textit{Alg}_A$ the category of $A$-algebras whose objects are the 
$A$-algebras $B$ of the form $B = \Gamma(U, \mathcal{O}_U)$
where $S$ is an affine object of $\textit{Sch}_\tau$. Thus given an
affine scheme $S = \text{Spec}(A)$ the functor
$$
(\textit{Aff}/S)_\tau \longrightarrow \textit{Alg}_A,
\quad
U \longmapsto \mathcal{O}(U)
$$
is an equivalence.





\section{Adequate functors}
\label{section-quasi-coherent}

\noindent
In this section we discuss a topic closely related to
direct images of quasi-coherent sheaves. Most of this material
was taken from the paper \cite{Jaffe}.

\begin{definition}
\label{definition-module-valued-functor}
Let $A$ be a ring. A {\it module-valued functor} is a functor
$F : \textit{Alg}_A \to \textit{Ab}$ such that
\begin{enumerate}
\item for every object $B$ of $\textit{Alg}_A$ the group
$F(B)$ is endowed with the structure of a $B$-module, and
\item for any morphism $B \to B'$ of $\textit{Alg}_A$ the map
$F(B) \to F(B')$ is $B$-linear.
\end{enumerate}
A {\it morphism of module-valued functors} is a transformation of
functors $\varphi : F \to G$ such that $F(B) \to G(B)$ is $B$-linear
for all $B \in \text{Ob}(\textit{Alg}_A)$.
\end{definition}

\noindent
Let $S = \text{Spec}(A)$ be an affine scheme.
The category of module-valued functors on $\textit{Alg}_A$ is
equivalent to the category
$\textit{PMod}((\textit{Aff}/S)_\tau, \mathcal{O})$
of presheaves of $\mathcal{O}$-modules. The equivalence is given
by the rule which assigns to the module-valued functor $F$ the
presheaf $\mathcal{F}$ defined by the rule
$\mathcal{F}(U) = F(\mathcal{O}(U))$.
This is clear from the equivalence
$(\textit{Aff}/S)_\tau \to \textit{Alg}_A$, $U \mapsto \mathcal{O}(U)$
given in Section \ref{section-conventions}.
The quasi-inverse sets $F(B) = \mathcal{F}(\text{Spec}(B))$.

\medskip\noindent
An important special case of a module-valued functor comes about as follows.
Let $M$ be an $A$-module. Then we will denote $\underline{M}$ the
module-valued functor $B \mapsto M \otimes_A B$ (with obvious $B$-module
structure). Note that if $M \to N$ is a map of $A$-modules then there is an
associated morphism $\underline{M} \to \underline{N}$ of module-valued
functors. Conversely, any morphism of module-valued functors
$\underline{M} \to \underline{N}$ comes from an $A$-module map $M \to N$
as the reader can see by evaluating on $B = A$. In other words
$\textit{Mod}_A$ is a full
subcategory of the category of module-valued functors on $\textit{Alg}_A$.

\medskip\noindent
Given and $A$-module map $\varphi : M \to N$ then
$\text{Coker}(\underline{M} \to \underline{N}) =
\underline{Q}$ where $Q = \text{Coker}(M \to N)$ because $\otimes$
is right exact. But this isn't the case
for the kernel in general: for example an injective map of
$A$-modules need not be injective after base change. Thus the following
definition makes sense.

\begin{definition}
\label{definition-adequate-functor}
Let $A$ be a ring. A module-valued functor $F$ on $\textit{Alg}_A$ is
called
\begin{enumerate}
\item {\it adequate} if there exists a
map of $A$-modules $M \to N$ such that $F$ is isomorphic to
$\text{Ker}(\underline{M} \to \underline{N})$.
\item {\it linearly adequate} if $F$ is isomorphic to the
kernel of a map $\underline{A^{\oplus n}} \to \underline{A^{\oplus m}}$.
\end{enumerate}
\end{definition}

\noindent
Note that $F$ is adequate if and only if there exists an
exact sequence $0 \to F \to \underline{M} \to \underline{N}$ and
$F$ is linearly adequate if and only if there exists an exact sequence
$0 \to F \to \underline{A^{\oplus n}} \to \underline{A^{\oplus m}}$.

\medskip\noindent
Let $A$ be a ring. In this section we will show the category of adequate
functors on $\textit{Alg}_A$ is abelian
(Lemmas \ref{lemma-cokernel-adequate} and \ref{lemma-kernel-adequate})
and has a set of generators
(Lemma \ref{lemma-adequate-surjection-from-linear}).
We will also see that it is a Serre subcategory of the category
of all module-valued functors on $\textit{Alg}_A$
(Lemma \ref{lemma-extension-adequate})
and that it has arbitrary colimits
(Lemma \ref{lemma-colimit-adequate}).

\begin{lemma}
\label{lemma-adequate-finite-presentation}
Let $A$ be a ring.
Let $F$ be an adequate functor on $\textit{Alg}_A$.
If $B = \text{colim}\ B_i$ is a filtered
colimit of $A$-algebras, then $F(B) = \text{colim}\ F(B_i)$.
\end{lemma}

\begin{proof}
This holds because for any $A$-module $M$ we have
$M \otimes_A B = \text{colim}\ M \otimes_A B_i$ (see
Algebra, Lemma \ref{algebra-lemma-tensor-products-commute-with-limits})
and because filtered colimits commute with exact sequences, see
Algebra, Lemma \ref{algebra-lemma-directed-colimit-exact}.
\end{proof}

\begin{remark}
\label{remark-settheoretic}
Consider the category $\textit{Alg}_{fp, A}$ whose objects are $A$-algebras
$B$ of the form $B = A[x_1, \ldots, x_n]/(f_1, \ldots, f_m)$ and whose
morphisms are $A$-algebra maps. Every $A$-algebra $B$ is a filtered colimit
of finitely presented $A$-algebra, i.e., a filtered colimit of objects of
$\textit{Alg}_{fp, A}$. By
Lemma \ref{lemma-adequate-finite-presentation}
we conclude every adequate functor $F$ is determined by its restriction to
$\textit{Alg}_{fp, A}$. For some questions we can therefore restrict to
functors on $\textit{Alg}_{fp, A}$. For example, the category of adequate
functors does not depend on the choice of the big $\tau$-site
chosen in
Section \ref{section-conventions}.
\end{remark}

\begin{lemma}
\label{lemma-adequate-flat}
Let $A$ be a ring.
Let $F$ be an adequate functor on $\textit{Alg}_A$.
If $B \to B'$ is flat, then $F(B) \otimes_B B' \to F(B')$
is an isomorphism.
\end{lemma}

\begin{proof}
Choose an exact sequence $0 \to F \to \underline{M} \to \underline{N}$.
This gives the diagram
$$
\xymatrix{
0 \ar[r] & F(B) \otimes_B B' \ar[r] \ar[d] &
(M \otimes_A B)\otimes_B B' \ar[r] \ar[d] &
(N \otimes_A B)\otimes_B B' \ar[d] \\
0 \ar[r] & F(B') \ar[r] &
M \otimes_A B' \ar[r] &
N \otimes_A B'
}
$$
where the rows are exact (the top one because $B \to B'$ is flat).
Since the right two vertical arrows are isomorphisms, so is the
left one.
\end{proof}

\begin{lemma}
\label{lemma-adequate-surjection-from-linear}
Let $A$ be a ring.
Let $F$ be an adequate functor on $\textit{Alg}_A$. Then there exists a
surjection $L \to F$ with $L$ a direct sum of linearly adequate functors.
\end{lemma}

\begin{proof}
Choose an exact sequence $0 \to F \to \underline{M} \to \underline{N}$
where $\underline{M} \to \underline{N}$ is given by
$\varphi : M \to N$. By
Lemma \ref{lemma-adequate-finite-presentation}
it suffices to construct $L \to F$ such that $L(B) \to F(B)$ is surjective
for every finitely presented $A$-algebra $B$. Hence it suffices to construct,
given a finitely presented $A$-algebra $B$ and an element $\xi \in F(B)$
a map $L \to F$ with $L$ linearly adequate such that $\xi$ is in the image
of $L(B) \to F(B)$.
(Because there is a set worth of such pairs $(B, \xi)$ up to isomorphism.)

\medskip\noindent
To do this write $\sum_{i = 1, \ldots, n} m_i \otimes b_i$ the image of
$\xi$ in $\underline{M}(B) = M \otimes_A B$. We know that
$\sum \varphi(m_i) \otimes b_i = 0$ in $N \otimes_A B$.
As $N$ is a filtered colimit of finitely presented $A$-modules, we can
find a finitely presented $A$-module $N'$, a commutative diagram
of $A$-modules
$$
\xymatrix{
A^{\oplus n} \ar[r] \ar[d]_{m_1, \ldots, m_n} & N' \ar[d] \\
M \ar[r] & N
}
$$
such that $(b_1, \ldots, b_n)$ maps to zero in $N' \otimes_A B$.
Choose a presentation $A^{\oplus l} \to A^{\oplus k} \to N' \to 0$.
Choose a lift $A^{\oplus n} \to A^{\oplus k}$ of the map
$A^{\oplus n} \to N'$ of the diagram. Then we see that there exist
$(c_1, \ldots, c_l) \in B^{\oplus l}$ such that
$(b_1, \ldots, b_n, c_1, \ldots, c_l)$ maps to zero in $B^{\oplus k}$
under the map $B^{\oplus n} \oplus B^{\oplus l} \to B^{\oplus k}$.
Consider the commutative diagram
$$
\xymatrix{
A^{\oplus n} \oplus A^{\oplus l} \ar[r] \ar[d] & A^{\oplus k} \ar[d] \\
M \ar[r] & N
}
$$
where the left vertical arrow is zero on the summand $A^{\oplus l}$.
Then we see that $L$ equal to the kernel of $\underline{A^{\oplus n + l}}
\to \underline{A^{\oplus k}}$ works because the element
$(b_1, \ldots, b_n, c_1, \ldots, c_l) \in L(B)$ maps to $\xi$.
\end{proof}

\noindent
Consider a graded $A$-algebra $B = \bigoplus_{d \geq 0} B_d$. Then there are
two $A$-algebra maps $p, a : B \to B[t, t^{-1}]$, namely $p : b \mapsto b$ and
$a : b \mapsto t^{\deg(b)} b$ where $b$ is homogeneous. If $F$ is a
module-valued functor on $\textit{Alg}_A$, then we define
\begin{equation}
\label{equation-weight-k}
F(B)^{(k)} = \{\xi \in F(B) \mid t^k F(p)(\xi) = F(a)(\xi)\}.
\end{equation}
For functors which behave well with respect to flat ring extensions
this gives a direct sum decompostion. This amounts to the fact that
representations of $\mathbf{G}_m$ are completely reducible.

\begin{lemma}
\label{lemma-flat-functor-split}
Let $A$ be a ring.
Let $F$ be a module-valued functor on $\textit{Alg}_A$.
Assume that for $B \to B'$ flat the map
$F(B) \otimes_B B' \to F(B')$ is an isomorphism.
Let $B$ be a graded $A$-algebra. Then
\begin{enumerate}
\item $F(B) = \bigoplus_{k \in \mathbf{Z}} F(B)^{(k)}$, and
\item the map $B \to B_0 \to B$ induces map $F(B) \to F(B)$
whose image is contained in $F(B)^{(0)}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $x \in F(B)$. The map $p : B \to B[t, t^{-1}]$ is free
hence we know that
$$
F(B[t, t^{-1}]) =
\bigoplus\nolimits_{k \in \mathbf{Z}} F(p)(F(B)) \cdot t^k =
\bigoplus\nolimits_{k \in \mathbf{Z}} F(B) \cdot t^k
$$
as indicated we drop the $F(p)$ in the rest of the proof.
Write $F(a)(x) = \sum t^k x_k$ for some $x_k \in F(B)$.
Denote $\epsilon : B[t, t^{-1}] \to B$
the $B$-algebra map $t \mapsto 1$. Note that the compositions
$\epsilon \circ p, \epsilon \circ a : B \to B[t, t^{-1}] \to B$ are
the identity. Hence we see that
$$
x = F(\epsilon)(F(a)(x)) = F(\epsilon)(\sum t^k x_k) = \sum x_k.
$$
On the other hand, we claim that $x_k \in F(B)^{(k)}$. Namely, consider
the commutative diagram
$$
\xymatrix{
B \ar[r]_a \ar[d]_{a'} &
B[t, t^{-1}] \ar[d]^f \\
B[s, s^{-1}] \ar[r]^-g &
B[t, s, t^{-1}, s^{-1}]
}
$$
where $a'(b) = s^{\deg(b)}b$, $f(b) = b$, $f(t) = st$ and
$g(b) = t^{\deg(b)}b$ and $g(s) = s$. Then
$$
F(g)(F(a'))(x) = F(g)(\sum s^k x_k) =
\sum s^k F(a)(x_k)
$$
and going the other way we see
$$
F(f)(F(a))(x) = F(f)(\sum t^k x_k) = \sum (st)^k x_k.
$$
Since $B \to B[s, t, s^{-1}, t^{-1}]$ is free we see that
$F(B[t, s, t^{-1}, s^{-1}]) =
\bigoplus_{k, l \in \mathbf{Z}} F(B) \cdot t^ks^l$ and
comparing coefficients in the expressions above we find
$F(a)(x_k) = t^k x_k$ as desired.

\medskip\noindent
Finally, the image of $F(B_0) \to F(B)$ is contained in $F(B)^{(0)}$
because $B_0 \to B \xrightarrow{a} B[t, t^{-1}]$ is equal to
$B_0 \to B \xrightarrow{p} B[t, t^{-1}]$.
\end{proof}

\noindent
As a particular case of
Lemma \ref{lemma-flat-functor-split}
note that
$$
\underline{M}(B)^{(k)} = M \otimes_A B_k
$$
where $B_k$ is the degree $k$ part of the graded $A$-algebra $B$.

\begin{lemma}
\label{lemma-lift-map}
Let $A$ be a ring. Given a solid diagram
$$
\xymatrix{
0 \ar[r] &
L \ar[d]_\varphi \ar[r] &
\underline{A^{\oplus n}} \ar[r] \ar@{..>}[ld] &
\underline{A^{\oplus m}} \\
& \underline{M}
}
$$
of module-valued functors on $\textit{Alg}_A$
with exact row there exists a dotted arrow making the diagram commute.
\end{lemma}

\begin{proof}
Suppose that the map $A^{\oplus n} \to A^{\oplus m}$ is given by the
$m \times n$-matrix $(a_{ij})$. Consider the ring
$B = A[x_1, \ldots, x_n]/(\sum a_{ij}x_j)$. The element
$(x_1, \ldots, x_n) \in \underline{A^{\oplus n}}(B)$ maps to zero in
$\underline{A^{\oplus m}}(B)$ hence is the image of a unique element
$\xi \in L(B)$. Note that $\xi$ has the following universal property:
for any $A$-algebra $C$ and any $\xi' \in L(C)$ there exists an $A$-algebra
map $B \to C$ such that $\xi$ maps to $\xi'$ via the map $L(B) \to L(C)$.

\medskip\noindent
Note that $B$ is a graded $A$-algebra, hence we can use
Lemmas \ref{lemma-flat-functor-split} and \ref{lemma-adequate-flat}
to decompose the values of our functors on $B$ into graded pieces.
Note that $\xi \in L(B)^{(1)}$ as $(x_1, \ldots, x_n)$ is an element
of degree one in $\underline{A^{\oplus n}}(B)$. Hence we see that
$\varphi(\xi) \in \underline{M}(B)^{(1)} = M \otimes_A B_1$.
Since $B_1$ is generated by $x_1, \ldots, x_n$ as an $A$-module we
can write $\varphi(\xi) = \sum m_i \otimes x_i$. Consider the map
$A^{\oplus n} \to M$ which maps the $i$th basis vector to $m_i$.
By construction the associated map
$\underline{A^{\oplus n}} \to \underline{M}$
maps the element $\xi$ to $\varphi(\xi)$. It follows from the
universal property mentioned above that the diagram commutes.
\end{proof}

\begin{lemma}
\label{lemma-cokernel-into-module}
Let $A$ be a ring.
Let $\varphi : F \to \underline{M}$ be a map of module-valued functors
on $\textit{Alg}_A$ with $F$ adequate.
Then $\text{Coker}(\varphi)$ is adequate.
\end{lemma}

\begin{proof}
By
Lemma \ref{lemma-adequate-surjection-from-linear}
we may assume that $F = \bigoplus L_i$ is a direct sum of linearly adequate
functors. Choose exact sequences
$0 \to L_i \to \underline{A^{\oplus n_i}} \to \underline{A^{\oplus m_i}}$.
For each $i$ choose a map $A^{\oplus n_i} \to M$ as in
Lemma \ref{lemma-lift-map}.
Consider the diagram
$$
\xymatrix{
0 \ar[r] &
\bigoplus L_i  \ar[r] \ar[d] &
\bigoplus \underline{A^{\oplus n_i}} \ar[r] \ar[ld] &
\bigoplus \underline{A^{\oplus m_i}} \\
& \underline{M}
}
$$
Consider the $A$-modules
$$
Q =
\text{Coker}(\bigoplus A^{\oplus n_i} \to M \oplus \bigoplus A^{\oplus m_i})
\quad\text{and}\quad
P = \text{Coker}(\bigoplus A^{\oplus n_i} \to \bigoplus A^{\oplus m_i}).
$$
Then we see that $\text{Coker}(\varphi)$ is isomorphic to the
kernel of $\underline{Q} \to \underline{P}$.
\end{proof}

\begin{lemma}
\label{lemma-cokernel-adequate}
Let $A$ be a ring.
Let $\varphi : F \to G$ be a map of adequate functors on $\textit{Alg}_A$.
Then $\text{Coker}(\varphi)$ is adequate.
\end{lemma}

\begin{proof}
Choose an injection $G \to \underline{M}$.
Then we have an injection $G/F \to \underline{M}/F$. By
Lemma \ref{lemma-cokernel-into-module}
we see that $\underline{M}/F$ is adequate, hence we can find an injection
$\underline{M}/F \to \underline{N}$.
Composing we obtain an injection $G/F \to \underline{N}$. By
Lemma \ref{lemma-cokernel-into-module}
the cokernel of the induced map $G \to \underline{N}$ is adequate
hence we can find an injection $\underline{N}/G \to \underline{K}$.
Then $0 \to G/F \to \underline{N} \to \underline{K}$ is exact and
we win.
\end{proof}

\begin{lemma}
\label{lemma-kernel-adequate}
Let $A$ be a ring.
Let $\varphi : F \to G$ be a map of adequate functors on $\textit{Alg}_A$.
Then $\text{Ker}(\varphi)$ is adequate.
\end{lemma}

\begin{proof}
Choose an injection $F \to \underline{M}$ and an injection
$G \to \underline{N}$. Denote $F \to \underline{M \oplus N}$
the diagonal map so that
$$
\xymatrix{
F \ar[d] \ar[r] & G \ar[d] \\
\underline{M \oplus N} \ar[r] & \underline{N}
}
$$
commutes. By
Lemma \ref{lemma-cokernel-adequate}
we can find a module map $M \oplus N \to K$ such that
$F$ is the kernel of $\underline{M \oplus N} \to \underline{K}$.
Then $\text{Ker}(\varphi)$ is the kernel of
$\underline{M \oplus N} \to \underline{K \oplus N}$.
\end{proof}

\begin{lemma}
\label{lemma-colimit-adequate}
Let $A$ be a ring.
An arbitrary direct sum of adequate functors on $\textit{Alg}_A$
is adequate. A colimit of adequate functors is adequate.
\end{lemma}

\begin{proof}
The statement on direct sums is immediate.
A general colimit can be written as a kernel of a map between
direct sums, see
Categories, Lemma \ref{categories-lemma-colimits-coproducts-coequalizers}.
Hence this follows from
Lemma \ref{lemma-kernel-adequate}.
\end{proof}

\begin{lemma}
\label{lemma-flat-linear-functor}
Let $A$ be a ring.
Let $F, G$ be module-valued functors on $\textit{Alg}_A$.
Let $\varphi : F \to G$ be a transformation of functors. Assume
\begin{enumerate}
\item $\varphi$ is additive,
\item for every $A$-algebra $B$ and $\xi \in F(B)$ and unit
$u \in B^*$ we have $\varphi(u\xi) = u\varphi(\xi)$ in $G(B)$, and
\item for any flat ring map $B \to B'$ we have
$G(B) \otimes_B B' = G(B')$.
\end{enumerate}
Then $\varphi$ is a morphism of module-valued functors.
\end{lemma}

\begin{proof}
Let $B$ be an $A$-algebra, $\xi \in F(B)$, and $b \in B$. We have to show
that $\varphi(b \xi) = b \varphi(\xi)$. Consider the ring map
$$
B \to B' = B[x, y, x^{-1}, y^{-1}]/(x + y - b).
$$
This ring map is faithfully flat, hence $G(B) \subset G(B')$. On the
other hand
$$
\varphi(b\xi) = \varphi((x + y)\xi) =
\varphi(x\xi) + \varphi(y\xi) = x\varphi(\xi) + y\varphi(\xi)
= (x + y)\varphi(\xi) = b\varphi(\xi)
$$
because $x, y$ are units in $B'$. Hence we win.
\end{proof}

\begin{lemma}
\label{lemma-extension-adequate-key}
Let $A$ be a ring.
Let $0 \to \underline{M} \to G \to L \to 0$ be a short exact sequence
of module-valued functors on $\textit{Alg}_A$ with $L$ linearly adequate.
Then $G$ is adequate.
\end{lemma}

\begin{proof}
We first point out that for any flat $A$-algebra map
$B \to B'$ the map $G(B) \otimes_B B' \to G(B')$ is an isomorphism.
Namely, this holds for $\underline{M}$ and $L$, see
Lemma \ref{lemma-adequate-flat}
and hence follows for $G$ by the five lemma. In particular, by
Lemma \ref{lemma-flat-functor-split}
we see that $G(B) = \bigoplus_{k \in \mathbf{Z}} G(B)^{(k)}$
for any graded $A$-algebra $B$.

\medskip\noindent
Choose an exact sequence
$0 \to L \to \underline{A^{\oplus n}} \to \underline{A^{\oplus m}}$.
Suppose that the map $A^{\oplus n} \to A^{\oplus m}$ is given by the
$m \times n$-matrix $(a_{ij})$. Consider the graded $A$-algebra
$B = A[x_1, \ldots, x_n]/(\sum a_{ij}x_j)$. The element
$(x_1, \ldots, x_n) \in \underline{A^{\oplus n}}(B)$ maps to zero in
$\underline{A^{\oplus m}}(B)$ hence is the image of a unique element
$\xi \in L(B)$. Observe that $\xi \in L(B)^{(1)}$. The map
$$
\text{Hom}_A(B, C) \longrightarrow L(C),\quad
f \longmapsto L(f)(\xi)
$$
defines an isomorphism of functors. The reason is that $f$ is
determined by the images $c_i = f(x_i) \in C$ which have to
satisfy the relations $\sum a_{ij}c_j = 0$. And $L(C)$ is the
set of $n$-tuples $(c_1, \ldots, c_n)$ satisfying the relations
$\sum a_{ij} c_j = 0$.

\medskip\noindent
Since the value of each of the functors $\underline{M}$, $G$, $L$
on $B$ is a direct sum of its weight spaces (by the lemma mentioned
above) exactness of $0 \to \underline{M} \to G \to L \to 0$ implies
the sequence $0 \to \underline{M}(B)^{(1)} \to G(B)^{(1)} \to L(B)^{(1)} \to 0$
is exact. Thus we may choose an element $\theta \in G(B)^{(1)}$ mapping
to $\xi$.

\medskip\noindent
Consider the graded $A$-algebra
$$
C = A[x_1, \ldots, x_n, y_1, \ldots, y_n]/
(\sum a_{ij}x_j, \sum a_{ij}y_j)
$$
There are three graded $A$-algebra homomorphisms $p_1, p_2, m : B \to C$
defined by the rules
$$
p_1(x_i) = x_i,\quad
p_1(x_i) = y_i,\quad
m(x_i) = x_i + y_i.
$$
We will show that the element
$$
\tau = G(m)(\theta) - G(p_1)(\theta) - G(p_2)(\theta) \in G(C)
$$
is zero. First, $\tau$ maps to zero in $L(C)$ by a direct calculation.
Hence $\tau$ is an element of $\underline{M}(C)$.
Moreover, since $m$, $p_1$, $p_2$ are graded algebra maps we see
that $\tau \in G(C)^{(1)}$ and since $\underline{M} \subset G$
we conclude
$$
\tau \in \underline{M}(C)^{(1)} = M \otimes_A C_1.
$$
We may write uniquely
$\tau = \underline{M}(p_1)(\tau_1) + \underline{M}(p_2)(\tau_2)$ with
$\tau_i \in M \otimes_A B_1 = \underline{M}(B)^{(1)}$ because
$C_1 = p_1(B_1) \oplus p_2(B_1)$.
Consider the ring map $q_1 : C \to B$ defined by $x_i \mapsto x_i$ and
$y_i \mapsto 0$. Then
$\underline{M}(q_1)(\tau) =
\underline{M}(q_1)(\underline{M}(p_1)(\tau_1) + \underline{M}(p_2)(\tau_2)) =
\tau_1$.
On the other hand, because
$q_1 \circ m = q_1 \circ p_1$ we see that
$G(q_1)(\tau) = - G(q_1 \circ p_2)(\tau)$. Since $q_1 \circ p_2$ factors as
$B \to A \to B$ we see that $G(q_1 \circ p_2)(\tau)$ is in
$G(B)^{(0)}$, see
Lemma \ref{lemma-flat-functor-split}.
Hence $\tau_1 = 0$ because it is in
$G(B)^{(0)} \cap \underline{M}(B)^{(1)} \subset
G(B)^{(0)} \cap G(B)^{(1)} = 0$.
Similarly $\tau_2 = 0$, whence $\tau = 0$.

\medskip\noindent
Since $\theta \in G(B)$ we obtain a transformation of functors
$$
\psi : L(-) = \text{Hom}_A(B, - ) \longrightarrow G(-)
$$
by mapping $f : B \to C$ to $G(f)(\theta)$. Since $\theta$ is a lift of
$\xi$ the map $\psi$ is a right inverse of $G \to L$. In terms of
$\psi$ the statements proved above have the following meaning:
$\tau = 0$ means that $\psi$ is additive and
$\theta \in G(B)^{(1)}$ implies that for any $A$-algebra $D$ we have
$\psi(ul) = u\psi(l)$ in $G(D)$ for $l \in L(D)$ and $u \in D^*$ a unit.
This implies that $\psi$ is a morphism of module-valued functors, see
Lemma \ref{lemma-flat-linear-functor}.
Clearly this implies that $G \cong \underline{M} \oplus L$ and we win.
\end{proof}

\begin{remark}
\label{remark-linearly-adequate}
Let $A$ be a ring.
The proof of
Lemma \ref{lemma-extension-adequate-key}
shows that any extension $0 \to \underline{M} \to E \to L \to 0$
of module-valued functors on $\textit{Alg}_A$
with $L$ linearly adequate splits. It uses only the following properties
of the module-valued functor $F = \underline{M}$:
\begin{enumerate}
\item $F(B) \otimes_B B' \to F(B')$ is an isomorphism
for a flat ring map $B \to B'$, and
\item 
$F(C)^{(1)} = F(p_1)(F(B)^{(1)}) \oplus F(p_2)(F(B)^{(1)})$
where $B = A[x_1, \ldots, x_n]/(\sum a_{ij}x_j)$ and
$C = A[x_1, \ldots, x_n, y_1, \ldots, y_n]/
(\sum a_{ij}x_j, \sum a_{ij}y_j)$.
\end{enumerate}
These two properties hold for any adequate functor $F$; details omitted.
Hence we see that $L$ is a projective object of the abelian category of
adequate functors.
\end{remark}

\begin{lemma}
\label{lemma-extension-adequate}
Let $A$ be a ring.
Let $0 \to F \to G \to H \to 0$ be a short exact sequence of
module-valued functors on $\textit{Alg}_A$.
If $F$ and $H$ are adequate, so is $G$.
\end{lemma}

\begin{proof}
Choose an exact sequence $0 \to F \to \underline{M} \to \underline{N}$.
If we can show that $(\underline{M} \oplus G)/F$ is adequate, then
$G$ is the kernel of the map of adequate functors
$(\underline{M} \oplus G)/F \to \underline{N}$, hence
adequate by
Lemma \ref{lemma-kernel-adequate}.
Thus we may assume $F = \underline{M}$.

\medskip\noindent
We can choose a surjection $L \to H$ where $L$ is a direct sum of
linearly adequate functors, see
Lemma \ref{lemma-adequate-surjection-from-linear}.
If we can show that the pullback $G \times_H L$ is adequate, then
$G$ is the cokernel of the map $\text{Ker}(L \to H) \to G \times_H L$
hence adequate by
Lemma \ref{lemma-cokernel-adequate}.
Thus we may assume that $H = \bigoplus L_i$ is a direct sum of
linearly adequate functors. By
Lemma \ref{lemma-extension-adequate-key}
each of the pullbacks $G \times_H L_i$ is adequate. By
Lemma \ref{lemma-colimit-adequate}
we see that $\bigoplus G \times_H L_i$ is adequate.
Then $G$ is the cokernel of
$$
\bigoplus\nolimits_{i \not = i'} F \longrightarrow
\bigoplus G \times_H L_i
$$
where $\xi$ in the summand $(i, i')$ maps to
$(0, \ldots, 0, \xi, 0, \ldots, 0,-\xi,0,\ldots, 0)$
with nonzero entries in the summands $i$ and $i'$.
Thus $G$ is adequate by
Lemma \ref{lemma-cokernel-adequate}.
\end{proof}

\begin{lemma}
\label{lemma-base-change-adequate}
Let $A \to A'$ be a ring map. If $F$ is an adequate functor on
$\textit{Alg}_A$, then its restriction $F'$ to
$\textit{Alg}_{A'}$ is adequate too.
\end{lemma}

\begin{proof}
Choose an exact sequence $0 \to F \to \underline{M} \to \underline{N}$.
Then $F'(B') = F(B') = \text{Ker}(M \otimes_A B' \to N \otimes_A B')$.
Since $M \otimes_A B' = M \otimes_A A' \otimes_{A'} B'$ and similarly
for $N$ we see that $F'$ is the kernel of
$\underline{M \otimes_A A'} \to \underline{N \otimes_A A'}$.
\end{proof}

\begin{lemma}
\label{lemma-pushforward-adequate}
Let $A \to A'$ be a ring map. If $F'$ is an adequate functor on
$\textit{Alg}_{A'}$, then the module-valued functor
$F : B \mapsto F'(A' \otimes_A B)$ on $\textit{Alg}_A$ is adequate too.
\end{lemma}

\begin{proof}
Choose an exact sequence $0 \to F' \to \underline{M'} \to \underline{N'}$.
Then
\begin{align*}
F(B) & = F'(A' \otimes_A B) \\
& = \text{Ker}(M' \otimes_{A'} (
A' \otimes_A B) \to N' \otimes_{A'} (A' \otimes_A B)) \\
& = \text{Ker}(M' \otimes_A B \to N' \otimes_A B)
\end{align*}
Thus $F$ is the kernel of
$\underline{M} \to \underline{N}$
where $M = M'$ and $N = N'$ viewed as $A$-modules.
\end{proof}

\begin{lemma}
\label{lemma-adequate-product}
Let $A = A_1 \times \ldots \times A_n$ be a product of rings.
An adequate functor over $A$ is the same thing as a sequence
$F_1, \ldots, F_n$ of adequate functors $F_i$ over $A_i$.
\end{lemma}

\begin{proof}
This is true because an $A$-algebra $B$ is canonically a product
$B_1 \times \ldots \times B_n$ and the same thing holds for $A$-modules.
Setting $F(B) = \coprod F_i(B_i)$ gives the correspondence.
Details omitted.
\end{proof}

\begin{lemma}
\label{lemma-adjoint}
Let $A$ be a ring.
For every module-valued functor $F$ on $\textit{Alg}_A$
there exists a morphism $Q \to F$ of module-valued functors on
$\textit{Alg}_A$ such that (1) $Q$ is adequate and (2) for every
adequate functor $G$ the map $\text{Hom}(G, Q) \to \text{Hom}(G, F)$
is a bijection.
\end{lemma}

\begin{proof}
Choose a set $\{L_i\}_{i \in I}$ of linearly adequate functors such that
every linearly adequate functor is isomorphic to one of the $L_i$.
This is possible. Suppose that we can find $Q \to F$ with (1) and
(2)' or every $i \in I$ the map $\text{Hom}(L_i, Q) \to \text{Hom}(L_i, F)$
is a bijection. Then (2) holds. Namely, combining
Lemmas \ref{lemma-adequate-surjection-from-linear} and
\ref{lemma-kernel-adequate}
we see that every adequate functor $G$ sits in an exact sequence
$$
K \to L \to G \to 0
$$
with $K$ and $L$ direct sums of linearly adequate functors. Hence (2)'
implies that
$\text{Hom}(L, Q) \to \text{Hom}(L, F)$
and
$\text{Hom}(K, Q) \to \text{Hom}(K, F)$
are bijections, whence the same thing for $G$.

\medskip\noindent
Consider the category $\mathcal{I}$ whose objects are pairs
$(i, \varphi)$ where $i \in I$ and $\varphi : L_i \to F$ is a morphism.
A morphism $(i, \varphi) \to (i', \varphi')$ is a map
$\psi : L_i \to L_{i'}$ such that $\varphi' \circ \psi = \varphi$.
Set
$$
Q = \text{colim}_{(i, \varphi) \in \text{Ob}(\mathcal{I})}\ L_i
$$
There is a natural map $Q \to F$, by
Lemma \ref{lemma-colimit-adequate}
it is adequate, and by construction it has property (2)'.
\end{proof}

\begin{lemma}
\label{lemma-adequate-descent}
Let $A \to A'$ be a ring map and let $F$ be a module-valued functor on
$\textit{Alg}_A$ such that
\begin{enumerate}
\item the restriction $F'$ of $F$ to the category of $A'$-algebras is
adequate, and
\item for any $A$-algebra $B$ the sequence
$$
0 \to F(B) \to F(B \otimes_A A') \to F(B \otimes_A A' \otimes_A A')
$$
is exact.
\end{enumerate}
Then $F$ is adequate.
\end{lemma}

\begin{proof}
The functors $B \to F(B \otimes_A A')$ and
$B \mapsto F(B \otimes_A A' \otimes_A A')$ are adequate, see
Lemmas \ref{lemma-pushforward-adequate} and
\ref{lemma-base-change-adequate}.
Hence $F$ as a kernel of a map of adequate functors is adequate, see
Lemma \ref{lemma-kernel-adequate}.
\end{proof}









\section{Adequate modules}
\label{section-adequate}

\noindent
In
Descent, Section \ref{descent-section-quasi-coherent-sheaves}
we have seen that quasi-coherent modules on a scheme $S$
are the same as quasi-coherent modules on any of the big
sites $(\textit{Sch}/S)_\tau$ associated to $S$. We have seen that there
are two issues with this identification:
\begin{enumerate}
\item $\textit{QCoh}(\mathcal{O}_S) \to
\textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O})$,
$\mathcal{F} \mapsto \mathcal{F}^a$ is not exact in general, and
\item given a quasi-compact and quasi-separated morphism $f : X \to S$
the functor $f_*$ does not preserve quasi-coherent sheaves on the
big sites in general.
\end{enumerate}
Part (1) means that we cannot define a triangulated subcategory
of $D(\mathcal{O})$ consisting of complexes whose cohomology sheaves
are quasi-coherent. Part (2) means that $Rf_*\mathcal{F}$ isn't a
complex with quasi-coherent cohomology sheaves even when $\mathcal{F}$
is quasi-coherent and $f$ is quasi-compact and quasi-separated.
Moreover, the examples given in the proofs of
Descent, Lemma
\ref{descent-lemma-equivalence-quasi-coherent-limits}
and
Descent, Proposition
\ref{descent-proposition-equivalence-quasi-coherent-functorial}
are not of a pathological nature.

\medskip\noindent
In this section we discuss a slightly larger category
of $\mathcal{O}$-modules on $(\textit{Sch}/S)_\tau$ with contains the
quasi-coherent modules, is abelian, and is preserved under $f_*$ when
$f$ is quasi-compact and quasi-separated.
To do this, suppose that $S$ is a scheme. Let $\mathcal{F}$ be a presheaf
of $\mathcal{O}$-modules on $(\textit{Sch}/S)_\tau$.
For any affine object $U = \text{Spec}(A)$ of $(\textit{Sch}/S)_\tau$
we can restrict $\mathcal{F}$ to $(\textit{Aff}/U)_\tau$ to get
a presheaf of $\mathcal{O}$-modules on this site. The corresponding
module-valued functor, see
Section \ref{section-quasi-coherent},
will be denoted
$$
F = F_{\mathcal{F}, A} :
\textit{Alg}_A \longrightarrow \textit{Ab},
\quad
B \longmapsto \mathcal{F}(\text{Spec}(B))
$$
The assignment $\mathcal{F} \mapsto F_{\mathcal{F}, A}$ is an exact
functor of abelian categories.

\begin{definition}
\label{definition-adequate}
A sheaf of $\mathcal{O}$-modules $\mathcal{F}$ on $(\textit{Sch}/S)_\tau$ is
{\it adequate} if there exists a $\tau$-covering
$\{\text{Spec}(A_i) \to S\}_{i \in I}$ such that $F_{\mathcal{F}, A_i}$ is
adequate for all $i \in I$.
The category of adequate $\mathcal{O}$-modules on $(\textit{Sch}/S)_\tau$
is denoted $\textit{Adeq}(\mathcal{O}_S)$.
\end{definition}

\noindent
We will see below that the category of adequate $\mathcal{O}$-modules
is independent of the chosen topology $\tau$, hence the notation makes sense.

\begin{lemma}
\label{lemma-adequate-local}
Let $\mathcal{F}$ be an adequate $\mathcal{O}$-module on
$(\textit{Sch}/S)_\tau$. For any affine scheme $\text{Spec}(A)$ over $S$
the functor $F_{\mathcal{F}, A}$ is adequate.
\end{lemma}

\begin{proof}
Let $\{\text{Spec}(A_i) \to S\}_{i \in I}$ be a $\tau$-covering
such that $F_{\mathcal{F}, A_i}$ is adequate for all $i \in I$.
We can find a standard affine $\tau$-covering
$\{\text{Spec}(A'_j) \to \text{Spec}(A)\}_{j = 1, \ldots, m}$
such that $\text{Spec}(A'_j) \to \text{Spec}(A) \to S$ factors
through $\text{Spec}(A_{i(j)})$ for some $i(j) \in I$. Then we see that
$F_{\mathcal{F}, A'_j}$ is the restriction of
$F_{\mathcal{F}, A_{i(j)}}$ to the category of $A'_j$-algebras.
Hence $F_{\mathcal{F}, A'_j}$ is adequate by
Lemma \ref{lemma-base-change-adequate}.
By
Lemma \ref{lemma-adequate-product}
the sequence
$F_{\mathcal{F}, A'_j}$ corresponds to an adequate ``product'' functor
$F'$ over $A' = A'_1 \times \ldots \times A'_m$. As $\mathcal{F}$ is a
sheaf (for the Zariski topology) this product functor $F'$ is equal
to $F_{\mathcal{F}, A'}$, i.e., is the restriction of $F$ to $A'$-algebras.
Finally,  $\{\text{Spec}(A') \to \text{Spec}(A)\}$ is a $\tau$-covering.
It follows from
Lemma \ref{lemma-adequate-descent}
that $F_{\mathcal{F}, A}$ is adequate.
\end{proof}

\begin{lemma}
\label{lemma-pullback-adequate}
Let $f : T \to S$ be a morphism of schemes.
The pullback $f^*\mathcal{F}$ of an adequate $\mathcal{O}_S$-module
$\mathcal{F}$ on $(\textit{Sch}/S)_\tau$ is an adequate
$\mathcal{O}_T$-module on $(\textit{Sch}/T)_\tau$.
\end{lemma}

\begin{proof}
The pullback map
$f^* : \textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O}) \to
\textit{Mod}((\textit{Sch}/T)_\tau, \mathcal{O})$
is given by restriction, i.e., $f^*\mathcal{F}(V) = \mathcal{F}(V)$
for any scheme $V$ over $T$. Hence this lemma follows immediately from
Lemma \ref{lemma-adequate-local}
and the definition.
\end{proof}

\noindent
Here is a characterization of the category of adequate $\mathcal{O}$-modules.
To understand the significance, consider a map $\mathcal{G} \to \mathcal{H}$
of quasi-coherent $\mathcal{O}_S$-modules on a scheme $S$.
The cokernel of the associated map $\mathcal{G}^a \to \mathcal{H}^a$
of $\mathcal{O}$-modules is quasi-coherent because it is equal to
$(\mathcal{H}/\mathcal{G})^a$. But the kernel of
$\mathcal{G}^a \to \mathcal{H}^a$ in general isn't
quasi-coherent. However, it is adequate.

\begin{lemma}
\label{lemma-adequate-characterize}
Let $S$ be a scheme. Let $\mathcal{F}$ be an $\mathcal{O}$-module on
$(\textit{Sch}/S)_\tau$. The following are equivalent
\begin{enumerate}
\item $\mathcal{F}$ is adequate,
\item there exists an affine open covering $S = \bigcup S_i$ and
maps of quasi-coherent $\mathcal{O}_{S_i}$-modules
$\mathcal{G}_i \to \mathcal{H}_i$
such that $\mathcal{F}|_{(\textit{Sch}/S_i)_\tau}$ is the
kernel of $\mathcal{G}_i^a \to \mathcal{H}_i^a$
\item there exists a $\tau$-covering $\{S_i \to S\}_{i \in I}$ and
maps of $\mathcal{O}_{S_i}$-quasi-coherent modules
$\mathcal{G}_i \to \mathcal{H}_i$
such that $\mathcal{F}|_{(\textit{Sch}/S_i)_\tau}$ is the
kernel of $\mathcal{G}_i^a \to \mathcal{H}_i^a$,
\item there exists a $\tau$-covering $\{f_i : S_i \to S\}_{i \in I}$
such that each $f_i^*\mathcal{F}$ is adequate,
\item for any affine scheme $U$ over $S$ the restriction
$\mathcal{F}|_{(\textit{Sch}/U)_\tau}$ is the kernel
of a map $\mathcal{G}^a \to \mathcal{H}^a$ of quasi-coherent
$\mathcal{O}_U$-modules.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $U = \text{Spec}(A)$ be an affine scheme over $S$.
Set $F = F_{\mathcal{F}, A}$. By definition, the functor
$F$ is adequate if and only if there exists a map of $A$-modules
$M \to N$ such that $F(B) = \text{Ker}(M \otimes_A B \to N \otimes_A B)$.
Combining with
Lemma \ref{lemma-adequate-local}
we see that (1) and (5) are equivalent.

\medskip\noindent
It is clear that (5) implies (2) and (2) implies (3).
If (3) holds then we can refine the covering
$\{S_i \to S\}$ such that each $S_i = \text{Spec}(A_i)$ is affine.
Then we see, by the prelimiary remarks of the proof, that
$F_{\mathcal{F}, A_i}$ is adequate. Thus $\mathcal{F}$
is adequate by definition. Hence (3) implies (1).

\medskip\noindent
Finally, (4) is equivalent to (1) using
Lemma \ref{lemma-pullback-adequate}
for one direction and that
a composition of $\tau$-coverings is a $\tau$-covering for the other.
\end{proof}

\noindent
Just like is true for quasi-coherent sheaves the category of
adequate modules is independent of the topology.

\begin{lemma}
\label{lemma-adequate-fpqc}
Let $\mathcal{F}$ be an adequate $\mathcal{O}$-module on
$(\textit{Sch}/S)_\tau$. For any surjective flat morphism
$\text{Spec}(B) \to \text{Spec}(A)$ of affines over $S$
the extended {\v C}ech complex
$$
0 \to \mathcal{F}(\text{Spec}(A)) \to
\mathcal{F}(\text{Spec}(B)) \to
\mathcal{F}(\text{Spec}(B \otimes_A B)) \to \ldots
$$
is exact. In particular $\mathcal{F}$ satisfies the sheaf condition
for fpqc coverings, and is a sheaf of $\mathcal{O}$-modules
on $(\textit{Sch}/S)_{fppf}$.
\end{lemma}

\begin{proof}
With $A \to B$ as in the lemma let $F = F_{\mathcal{F}, A}$. This functor
is adequate by
Lemma \ref{lemma-adequate-local}.
By
Lemma \ref{lemma-adequate-flat}
since $A \to B$, $A \to B \otimes_A B$, etc are flat we see that
$F(B) = F(A) \otimes_A B$,
$F(B \otimes_A B) = F(A) \otimes_A B \otimes_A B$, etc.
Exactness follows from
Descent, Lemma \ref{descent-lemma-ff-exact}.

\medskip\noindent
Thus $\mathcal{F}$ satisfies the sheaf condition for
$\tau$-coverings (in particular Zariski coverings) and any faithfully
flat covering of an affine by an affine. Arguing as in the proofs of
Descent, Lemma \ref{descent-lemma-standard-fpqc-covering}
and
Descent, Proposition \ref{descent-proposition-fpqc-descent-quasi-coherent}
we conclude that $\mathcal{F}$ satisfies the sheaf condition for all
fpqc coverings (made out of objects of $(\textit{Sch}/S)_\tau$).
Details omitted.
\end{proof}

\begin{lemma}
\label{lemma-same-cohomology-adequate}
Let $S$ be a scheme. Let $\mathcal{F}$ be an adequate
$\mathcal{O}$-module on $(\textit{Sch}/S)_\tau$.
\begin{enumerate}
\item The restriction $\mathcal{F}|_{S_{Zar}}$ is a quasi-coherent
$\mathcal{O}_S$-module on the scheme $S$.
\item The restriction $\mathcal{F}|_{S_{\acute{e}tale}}$ is the
quasi-coherent module associated to $\mathcal{F}|_{S_{Zar}}$.
\item For any affine scheme $U$ over $S$ we have $H^q(U, \mathcal{F}) = 0$
for all $q > 0$.
\item There is a canonical isomorphism
$$
H^q(S, \mathcal{F}|_{S_{Zar}}) =
H^q((\textit{Sch}/S)_\tau, \mathcal{F}).
$$
\end{enumerate}
\end{lemma}

\begin{proof}
By
Lemma \ref{lemma-adequate-flat}
and
Lemma \ref{lemma-adequate-local}
we see that for any flat morphism of affines $U \to V$ over $S$
we have
$\mathcal{F}(U) = \mathcal{F}(V) \otimes_{\mathcal{O}(V)} \mathcal{O}(U)$.
This works in particular if $U \subset V \subset S$ are affine opens of
$S$, hence $\mathcal{F}|_{S_{Zar}}$ is quasi-coherent.
Thus (1) holds.

\medskip\noindent
Let $S' \to S$ be an \'etale morphism of schemes.
Then for $U \subset S'$ affine open mapping into an affine open
$V \subset S$ we see that
$\mathcal{F}(U) = \mathcal{F}(V) \otimes_{\mathcal{O}(V)} \mathcal{O}(U)$
because $U \to V$ is \'etale, hence flat. Therefore
$\mathcal{F}|_{S'_{Zar}}$ is the pullback of $\mathcal{F}|_{S_{Zar}}$.
This proves (2).

\medskip\noindent
We are going to apply
Cohomology on Sites,
Lemma \ref{sites-cohomology-lemma-cech-vanish-collection}
to the site $(\textit{Sch}/S)_\tau$ with
$\mathcal{B}$ the set of affine schemes over $S$ and
$\text{Cov}$ the set of standard affine $\tau$-coverings.
Assumption (3) of the lemma is satisfied by
Descent, Lemma \ref{descent-lemma-standard-covering-Cech}
and
Lemma \ref{lemma-adequate-fpqc}
for the case of a covering by a single affine.
Hence we conclude that $H^p(U, \mathcal{F}) = 0$ for every
affine scheme $U$ over $S$. This proves (3).
In exactly the same way as in the proof of
Descent, Proposition \ref{descent-proposition-same-cohomology-quasi-coherent}
this implies the equality of cohomologies (4).
\end{proof}

\begin{remark}
\label{remark-compare}
Let $S$ be a scheme. We have functors
$u : \textit{QCoh}(\mathcal{O}_S) \to \textit{Adeq}(\mathcal{O}_S)$
and
$v : \textit{Adeq}(\mathcal{O}_S) \to \textit{QCoh}(\mathcal{O}_S)$.
Namely, the functor $u : \mathcal{F} \mapsto \mathcal{F}^a$
comes from taking the associated $\mathcal{O}$-module which is
adequate by
Lemma \ref{lemma-adequate-characterize}.
Conversely, the functor $v$ comes from restriction
$v : \mathcal{G} \mapsto \mathcal{G}|_{S_{Zar}}$, see
Lemma \ref{lemma-same-cohomology-adequate}.
Since $\mathcal{F}^a$ can be described as the pullback of
$\mathcal{F}$ under a morphism of ringed topoi
$((\textit{Sch}/S)_\tau, \mathcal{O}) \to (S_{Zar}, \mathcal{O}_S)$, see
Descent, Remark \ref{descent-remark-change-topologies-ringed-sites}
and since restriction is the pushforward we see that $u$ and $v$
are adjoint as follows
$$
\textit{Hom}_{\mathcal{O}_S}(\mathcal{F}, v\mathcal{G})
=
\textit{Hom}_{\mathcal{O}}(u\mathcal{F}, \mathcal{G})
$$
where $\mathcal{O}$ denotes the structure sheaf on the big site.
It is immediate from the description that the adjunction mapping
$\mathcal{F} \to vu\mathcal{F}$ is an isomorphism for all quasi-coherent
sheaves.
\end{remark}

\begin{lemma}
\label{lemma-sheafification-adequate}
Let $S$ be a scheme. Let $\mathcal{F}$ be a presheaf of $\mathcal{O}$-modules
on $(\textit{Sch}/S)_\tau$. If for every affine scheme
$\text{Spec}(A)$ over $S$ the functor $F_{\mathcal{F}, A}$ is
adequate, then the sheafification of $\mathcal{F}$ is an adequate
$\mathcal{O}$-module.
\end{lemma}

\begin{proof}
Let $U = \text{Spec}(A)$ be an affine scheme over $S$.
Set $F = F_{\mathcal{F}, A}$.
The sheafification $\mathcal{F}^\# = (\mathcal{F}^+)^+$, see
Sites, Section \ref{sites-section-sheafification}.
By construction
$$
(\mathcal{F})^+(U) =
\text{colim}_{\mathcal{U}}\ \check{H}^0(\mathcal{U}, \mathcal{F})
$$
where the colimit is over coverings in the site $(\textit{Sch}/S)_\tau$.
Since $U$ is affine it suffices to take the limit over standard
affine $\tau$-coverings
$\mathcal{U} = \{U_i \to U\}_{i \in I} =
\{\text{Spec}(A_i) \to \text{Spec}(A)\}_{i \in I}$ of $U$.
Since each $A \to A_i$ and $A \to A_i \otimes_A A_j$ is flat we see that
$$
\check{H}^0(\mathcal{U}, \mathcal{F}) =
\text{Ker}(\prod F(A) \otimes_A A_i \to \prod F(A) \otimes_A A_i \otimes_A A_j)
$$
by
Lemma \ref{lemma-adequate-flat}.
Since $A \to \prod A_i$ is faithfully flat we see that this always
is canonically isomorphic to $F(A)$ by
Descent, Lemma \ref{descent-lemma-ff-exact}.
Thus the presheaf $(\mathcal{F})^+$ has the same value as
$\mathcal{F}$ on all affine schemes over $S$. Repeating the argument
once more we deduce the same thing for $\mathcal{F}^\# = ((\mathcal{F})^+)^+$.
Thus $F_{\mathcal{F}, A} = F_{\mathcal{F}^\#, A}$ and we conclude
that $\mathcal{F}^\#$ is adequate.
\end{proof}

\begin{lemma}
\label{lemma-abelian-adequate}
Let $S$ be a scheme.
\begin{enumerate}
\item The category $\textit{Adeq}(\mathcal{O}_S)$ is abelian.
\item The functor
$\textit{Adeq}(\mathcal{O}_S) \to
\textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O})$
is exact.
\item If $0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$
is a short exact sequence of $\mathcal{O}$-modules and
$\mathcal{F}_1$ and $\mathcal{F}_3$ are adequate, then
$\mathcal{F}_2$ is adequate.
\item The category $\textit{Adeq}(\mathcal{O}_S)$ has colimits and
$\textit{Adeq}(\mathcal{O}_S) \to
\textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O})$
commutes with them.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $\varphi : \mathcal{F} \to \mathcal{G}$ be a map of adequate
$\mathcal{O}$-modules. To prove (1) and (2) it suffices to show that
$\mathcal{K} = \text{Ker}(\varphi)$ and
$\mathcal{Q} = \text{Coker}(\varphi)$ computed in
$\textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O})$ are adequate.
Let $U = \text{Spec}(A)$ be an affine scheme over $S$.
Let $F = F_{\mathcal{F}, A}$ and $G = F_{\mathcal{G}, A}$.
By
Lemmas \ref{lemma-kernel-adequate} and
\ref{lemma-cokernel-adequate}
the kernel $K$ and cokernel $Q$ of the induced map
$F \to G$ are adequate functors.
Because the kernel is computed on the level of presheaves, we see
that $K = F_{\mathcal{K}, A}$ and we conclude $\mathcal{K}$ is adequate.
To prove the result for the cokernel, denote $\mathcal{Q}'$ the presheaf
cokernel of $\varphi$. Then $Q = F_{\mathcal{Q}', A}$ and
$\mathcal{Q} = (\mathcal{Q}')^\#$. Hence $\mathcal{Q}$
is adequate by
Lemma \ref{lemma-sheafification-adequate}.

\medskip\noindent
Let $0 \to \mathcal{F}_1 \to \mathcal{F}_2 \to \mathcal{F}_3 \to 0$
is a short exact sequence of $\mathcal{O}$-modules and
$\mathcal{F}_1$ and $\mathcal{F}_3$ are adequate. 
Let $U = \text{Spec}(A)$ be an affine scheme over $S$.
Let $F_i = F_{\mathcal{F}_i, A}$. The sequence of functors
$$
0 \to F_1 \to F_2 \to F_3 \to 0
$$
is exact, because for $V = \text{Spec}(B)$ affine over $U$ we have
$H^1(V, \mathcal{F}_1) = 0$ by
Lemma \ref{lemma-same-cohomology-adequate}.
Since $F_1$ and $F_3$ are adequate functors by
Lemma \ref{lemma-adequate-local}
we see that $F_2$ is adequate by
Lemma \ref{lemma-extension-adequate}.
Thus $\mathcal{F}_2$ is adequate.

\medskip\noindent
Let $\mathcal{I} \to \textit{Adeq}(\mathcal{O}_S)$, $i \mapsto \mathcal{F}_i$
be a diagram. Denote $\mathcal{F} = \text{colim}_i\ \mathcal{F}_i$
the colimit computed in
$\textit{Mod}((\textit{Sch}/S)_\tau, \mathcal{O})$.
To prove (4) it suffices to show that $\mathcal{F}$ is adequate.
Let $\mathcal{F}' = \text{colim}_i\ \mathcal{F}_i$ be the colimit computed
in presheaves of $\mathcal{O}$-modules. Then
$\mathcal{F} = (\mathcal{F}')^\#$.
Let $U = \text{Spec}(A)$ be an affine scheme over $S$.
Let $F_i = F_{\mathcal{F}_i, A}$. By
Lemma \ref{lemma-colimit-adequate}
the functor $\text{colim}_i\ F_i = F_{\mathcal{F}', A}$ is adequate.
Lemma \ref{lemma-sheafification-adequate}
shows that $\mathcal{F}$ is adequate.
\end{proof}

\noindent
The following lemma tells us that the total direct image
$Rf_*\mathcal{F}$ of an adequate module under a quasi-compact and
quasi-separated morphism is a complex whose cohomology sheaves
are adequate.

\begin{lemma}
\label{lemma-direct-image-adequate}
Let $f : T \to S$ be a quasi-compact and quasi-separated morphism
of schemes. For any adequate $\mathcal{O}_T$-module on
$(\textit{Sch}/T)_\tau$ the pushforward
$f_*\mathcal{F}$ and the higher direct images $R^if_*\mathcal{F}$
are adequate $\mathcal{O}_S$-modules on $(\textit{Sch}/S)_\tau$.
\end{lemma}

\begin{proof}
First we explain how to compute the higher direct images.
Choose an injective resolution $\mathcal{F} \to \mathcal{I}^\bullet$.
Then $R^if_*\mathcal{F}$ is the $i$th cohomology sheaf of the
complex $f_*\mathcal{I}^\bullet$.
Hence $R^if_*\mathcal{F}$ is the sheaf associated to the presheaf
which associates to an object $U/S$ of $(\textit{Sch}/S)_\tau$
the module
\begin{align*}
\frac{\text{Ker}(f_*\mathcal{I}^i(U) \to f_*\mathcal{I}^{i + 1}(U))}
{\text{Im}(f_*\mathcal{I}^{i - 1}(U) \to f_*\mathcal{I}^i(U))}
& =
\frac{\text{Ker}(\mathcal{I}^i(U \times_S T) \to
\mathcal{I}^{i + 1}(U \times_S T))}
{\text{Im}(\mathcal{I}^{i - 1}(U \times_S T) \to \mathcal{I}^i(U \times_S T))}
\\
& =
H^i(U \times_S T, \mathcal{F}) \\
& = H^i((\textit{Sch}/U \times_S T)_\tau,
\mathcal{F}|_{(\textit{Sch}/U \times_S T)_\tau}) \\
& = H^i(U \times_S T, \mathcal{F}|_{(U \times_S T)_{Zar}})
\end{align*}
The first equality by
Topologies, Lemma \ref{topologies-lemma-morphism-big-fppf}
(and its analogues for other topologies),
the second equality by definition of cohomology of $\mathcal{F}$
over an object of $(\textit{Sch}/T)_\tau$,
the third equality by
Cohomology on Sites, Lemma \ref{sites-cohomology-lemma-cohomology-of-open},
and the last equality by
Lemma \ref{lemma-same-cohomology-adequate}.
Thus by
Lemma \ref{lemma-sheafification-adequate}
it suffices to prove the claim stated in the following paragraph.

\medskip\noindent
Let $A$ be a ring. Let $T$ be a scheme quasi-compact and quasi-separated
over $A$. Let $\mathcal{F}$ be an adequate $\mathcal{O}_T$-module on
$(\textit{Sch}/T)_\tau$. For an $A$-algebra $B$ set
$T_B = T \times_{\text{Spec}(A)} \text{Spec}(B)$ and denote
$\mathcal{F}_B = \mathcal{F}|_{(T_B)_{Zar}}$ the restriction of
$\mathcal{F}$ to the small Zariski site of $T_B$.
(Recall that this is a ``usual'' quasi-coherent sheaf on the scheme
$T_B$, see
Lemma \ref{lemma-same-cohomology-adequate}.)
Claim: The functor
$$
B \longmapsto H^q(T_B, \mathcal{F}_B)
$$
is adequate. We will prove the lemma by the usual
procedure of cutting $T$ into pieces.

\medskip\noindent
Case I: $T$ is affine. In this case the schemes $T_B$ are all affine
and $H^q(T_B, \mathcal{F}_B) = 0$ for all $q \geq 1$.
The functor $B \mapsto H^0(T_B, \mathcal{F}_B)$ is adequate by
Lemma \ref{lemma-pushforward-adequate}.

\medskip\noindent
Case II: $T$ is separated. Let $n$ be the minimal number of affines needed
to cover $T$. We argue by induction on $n$. The base case is Case I.
Choose an affine open covering $T = V_1 \cup \ldots \cup V_n$.
Set $V = V_1 \cup \ldots \cup V_{n - 1}$ and $U = V_n$. Observe that
$$
U \cap V = (V_1 \cap V_n) \cup \ldots \cup (V_{n - 1} \cap V_n)
$$
is also a union of $n - 1$ affine opens as $T$ is separated, see
Schemes, Lemma \ref{schemes-lemma-characterize-separated}.
Note that for each $B$ the base changes $U_B$, $V_B$ and
$(U \cap V)_B = U_B \cap V_B$ behave in the same way. Hence we see that
for each $B$ we have a long exact sequence
$$
0 \to
H^0(T_B, \mathcal{F}_B) \to
H^0(U_B, \mathcal{F}_B) \oplus H^0(V_B, \mathcal{F}_B) \to
H^0((U \cap V)_B, \mathcal{F}_B) \to
H^1(T_B, \mathcal{F}_B) \to \ldots
$$
functorial in $B$, see
Cohomology, Lemma \ref{cohomology-lemma-mayer-vietoris}.
By induction hypothesis the functors
$B \mapsto H^q(U_B, \mathcal{F}_B)$,
$B \mapsto H^q(V_B, \mathcal{F}_B)$, and
$B \mapsto H^q((U \cap V)_B, \mathcal{F}_B)$
are adequate. Using
Lemmas \ref{lemma-kernel-adequate} and
\ref{lemma-cokernel-adequate}
we see that our functor $B \mapsto H^q(T_B, \mathcal{F}_B)$ sits in the
middle of a short exact sequence whose outer terms are adequate.
Thus the claim follows from
Lemma \ref{lemma-extension-adequate}.

\medskip\noindent
Case III: General quasi-compact and quasi-separated case.
The proof is again by induction on the number $n$ of affines needed to
cover $T$. The base case $n = 1$ is Case I. 
Choose an affine open covering $T = V_1 \cup \ldots \cup V_n$.
Set $V = V_1 \cup \ldots \cup V_{n - 1}$ and $U = V_n$. Note that
since $T$ is quasi-separated $U \cap V$ is a quasi-compact open of an
affine scheme, hence Case II applies to it. The rest of the argument
proceeds in exactly the same manner as in the paragraph above and is
omitted.
\end{proof}







\section{Parasitic adequate modules}
\label{section-parasitic}

\noindent
In this section we start comparing adequate modules and quasi-coherent
modules on a scheme $S$. Recall that there are functors
$u : \textit{QCoh}(\mathcal{O}_S) \to \textit{Adeq}(\mathcal{O}_S)$
and
$v : \textit{Adeq}(\mathcal{O}_S) \to \textit{QCoh}(\mathcal{O}_S)$
satisfying the adjunction
$$
\textit{Hom}_{\textit{QCoh}(\mathcal{O}_S)}(\mathcal{F}, v\mathcal{G})
=
\textit{Hom}_{\textit{Adeq}(\mathcal{O}_S)}(u\mathcal{F}, \mathcal{G})
$$
and such that $\mathcal{F} \to vu\mathcal{F}$ is an isomorphism for
every quasi-coherent sheaf $\mathcal{F}$, see
Remark \ref{remark-compare}.
Hence $u$ is a fully faithfull embedding and we can identify
$\textit{QCoh}(\mathcal{O}_S)$ with a full subcategory of
$\textit{Adeq}(\mathcal{O}_S)$.
The functor $v$ is exact but $u$ is not left exact in general.
The kernel of $v$ is the subcategory of parasitic adequate modules.

\begin{definition}
\label{definition-parasitic}
Let $S$ be a scheme. A sheaf of $\mathcal{O}$-modules $\mathcal{F}$
on $(\textit{Sch}/S)_\tau$ is called {\it parasitic}\footnote{This may
be nonstandard notation.} if for
every $\tau$-covering $\{U_i \to S\}_{i \in I}$ we have
$\mathcal{F}(U_i) = 0$ for all $i$.
\end{definition}

\noindent
If $\tau = fppf$ this means that $\mathcal{F}|_{U_{Zar}} = 0$ whenever
$U \to S$ is flat and locally of finite presentation; similar for
the other cases. For adequate modules the notion does not depend
on the chosen topology.

\begin{lemma}
\label{lemma-parasitic-adequate}
Let $S$ be a scheme.
Let $\mathcal{F}$ be an adequate $\mathcal{O}$-module on
$(\textit{Sch}/S)_\tau$. The following are equivalent:
\begin{enumerate}
\item $v\mathcal{F} = 0$,
\item $\mathcal{F}$ is parasitic,
\item $\mathcal{F}(U) = 0$ for all $U \subset S$ open, and
\item there exists an affine open covering $S = \bigcup U_i$
such that $\mathcal{F}(U_i) = 0$ for all $i$.
\end{enumerate}
\end{lemma}

\begin{proof}
The implications (2) $\Rightarrow$ (3) $\Rightarrow$ (4) are immediate
from the definitions. Assume (4). Suppose that $S = \bigcup U_i$ is an
affine open covering such that $\mathcal{F}(U_i) = 0$ for all $i$. Let
$\{V_j \to S\}$ be a $\tau$-covering of $S$. We are going to show that
$\mathcal{F}(V_j) = 0$ for all $j$, so that (2) holds. To do this we may
refine $\{V_j \to S\}$ and assume that each $V_j$ is affine and maps into
some $U_i$. As the morphism $V_j \to S$ is flat (by the definition of a
$\tau$-covering), also $V_j \to U_i$ is flat. Hence the corresponding ring
map $A_i = \mathcal{O}(U_i) \to \mathcal{O}(V_j) = B_j$ is flat. Thus by
Lemma \ref{lemma-adequate-local}
and
Lemma \ref{lemma-adequate-flat}
we see that $\mathcal{F}(U_i) \otimes_{A_i} B_j \to \mathcal{F}(V_j)$
is an isomorphism. Hence $\mathcal{F}(V_j) = 0$.

\medskip\noindent
This proves the equivalence of (2), (3), and (4). As (1) is equivalent
to (3) (see
Remark \ref{remark-compare})
we conclude that all four conditions are equivalent.
\end{proof}

\noindent
Let $S$ be a scheme.
The subcategory of parasitic adequate modules is a Serre subcategory of
$\textit{Adeq}(\mathcal{O}_S)$. The quotient is the category of
quasi-coherent modules.

\begin{lemma}
\label{lemma-adequate-by-parasitic}
Let $S$ be a scheme. The subcategory
$\mathcal{C} \subset \textit{Adeq}(\mathcal{O}_S)$ of parasitic adequate
modules is a Serre subcategory. Moreover, the functor $v$ induces
an equivalence of categories
$$
\textit{Adeq}(\mathcal{O}_S) / \mathcal{C} = \textit{QCoh}(\mathcal{O}_S).
$$
\end{lemma}

\begin{proof}
The category $\mathcal{C}$ is the kernel of the exact functor
$v : \textit{Adeq}(\mathcal{O}_S) \to \textit{QCoh}(\mathcal{O}_S)$, see
Lemma \ref{lemma-parasitic-adequate}.
Hence it is a Serre subcategory by
Homology, Lemma \ref{homology-lemma-kernel-exact-functor}.
By
Homology, Lemma \ref{homology-lemma-serre-subcategory-is-kernel}
we obtain an induced exact functor
$\overline{v} :
\textit{Adeq}(\mathcal{O}_S) / \mathcal{C}
\to
\textit{QCoh}(\mathcal{O}_S)$.
Because $u$ is a right inverse to $v$ we see right away that
$\overline{v}$ is essentially surjective.
We see that $\overline{v}$ is faithful by
Homology, Lemma \ref{homology-lemma-quotient-by-kernel-exact-functor}.
Because $u$ is a right inverse to $v$ we finally conclude that
$\overline{v}$ is fully faithful.
\end{proof}

\begin{lemma}
\label{lemma-direct-image-parasitic-adequate}
Let $f : T \to S$ be a quasi-compact and quasi-separated morphism
of schemes. For any parasitic adequate $\mathcal{O}_T$-module on
$(\textit{Sch}/T)_\tau$ the pushforward
$f_*\mathcal{F}$ and the higher direct images $R^if_*\mathcal{F}$
are parasitic adequate $\mathcal{O}_S$-modules on $(\textit{Sch}/S)_\tau$.
\end{lemma}

\begin{proof}
We have already seen in
Lemma \ref{lemma-direct-image-adequate}
that these higher direct images are adequate.
Hence it suffices to show that
$(R^if_*\mathcal{F})(U_i) = 0$ for any $\tau$-covering
$\{U_i \to S\}$ open. As explained in the proof of
Lemma \ref{lemma-direct-image-adequate}
the sheaf $R^if_*\mathcal{F}$ is the sheaf associated to
the presheaf
$$
U \longmapsto 
H^i(U \times_S T, \mathcal{F}|_{(U \times_S T)_{Zar}})
$$
on $(\textit{Sch}/S)_\tau$. Hence it suffices to show that
$H^i(U \times_S T, \mathcal{F}|_{(U \times_S T)_{Zar}})$ is zero
whenever $U \to S$ is an open immersion, \'etale, smooth, synomtic, or
flat and locally of finite presentation (depending on whether
$\tau$ is $Zar$, $\acute{e}tale$, $smooth$, $syntomic$, or $fppf$).
Because $\mathcal{F}$ is parasitic on $T$ by definition the restriction
$\mathcal{F}|_{(U \times_S T)_{Zar}}$ is zero and we win.
\end{proof}











\section{Derived categories of adequate modules}
\label{section-comparison}


\noindent
Let $S$ be a scheme. We continue the discussion started in
Section \ref{section-parasitic}.
The exact functor $v$ induces a functor
$$
D(\textit{Adeq}(\mathcal{O}_S))
\longrightarrow
D(\textit{QCoh}(\mathcal{O}_S))
$$
and similarly for bounded versions.

\begin{lemma}
\label{lemma-quotient-easy}
Let $S$ be a scheme. Let
$\mathcal{C} \subset \textit{Adeq}(\mathcal{O}_S)$ denote the
full subcategory consisting of parasitic adequate modules.
Then
$$
D(\textit{Adeq}(\mathcal{O}_S))/D_\mathcal{C}(\textit{Adeq}(\mathcal{O}_S))
= D(\textit{QCoh}(\mathcal{O}_S))
$$
and similarly for the bounded versions.
\end{lemma}

\begin{proof}
Follows immediately from
Derived Categories, Lemma \ref{derived-lemma-quotient-by-serre-easy}.
\end{proof}

\noindent
Next, we look for a description the other way around by looking at
the functors
$$
K^+(\textit{QCoh}(\mathcal{O}_S))
\longrightarrow
K^+(\textit{Adeq}(\mathcal{O}_S))
\longrightarrow
D^+(\textit{Adeq}(\mathcal{O}_S))
\longrightarrow
D^+(\textit{QCoh}(\mathcal{O}_S)).
$$
In some cases the derived category of adequate modules is a localization
of the homotopy category of complexes of quasi-coherent modules at
universal quasi-isomorphisms. Let $S$ be a scheme. A map of complexes
$\varphi : \mathcal{F}^\bullet \to \mathcal{G}^\bullet$
of quasi-coherent $\mathcal{O}_S$-modules is said to be a
{\it universal quasi-isomorphism} if for every morphism of schemes
$f : T \to S$ the pullback $f^*\varphi$ is a quasi-isomorphism.

\begin{lemma}
\label{lemma-describe-Dplus-adequate}
Let $U = \text{Spec}(A)$ be an affine scheme.
The derived category $D^+(\textit{Adeq}(\mathcal{O}_U))$ is the localization
of $K^+(\textit{QCoh}(\mathcal{O}_U))$ at the multiplicative subset of
universal quasi-isomorphisms.
\end{lemma}

\begin{proof}
(Sketch.) If $\varphi : \mathcal{F}^\bullet \to \mathcal{G}^\bullet$
is a morphism of complexes of quasi-coherent
$\mathcal{O}_U$-modules, then $u\varphi : u\mathcal{F}^\bullet \to
u\mathcal{G}^\bullet$ is a quasi-isomorphism if and only if $\varphi$ is
a universal quasi-isomorphism. Hence the collection $S$
of universal quasi-isomorphisms is a saturated multiplicative
system compatible with the triangulated structure by
Derived Categories, Lemma \ref{derived-lemma-triangle-functor-localize}.
Hence $S^{-1}K^+(\textit{QCoh}(\mathcal{O}_U))$ exists and is a
triangulated category, see
Derived Categories, Proposition
\ref{derived-proposition-construct-localization}.
We obtain a canonical functor
$can : S^{-1}K^+(\textit{QCoh}(\mathcal{O}_U)) \to
D^{+}(\textit{Adeq}(\mathcal{O}_U))$ by
Derived Categories, Lemma \ref{derived-lemma-universal-property-localization}.

\medskip\noindent
Note that, almost by definition, every adequate module on $U$ has an
embedding into a quasi-coherent sheaf, see
Lemma \ref{lemma-adequate-characterize}. Hence by
Derived Categories, Lemma \ref{derived-lemma-subcategory-right-resolution}
every bounded below complex of adequate modules is quasi-isomorphic
to a bounded below complex of quasi-coherent modules. This proves that
$can$ is essentially surjective.

\medskip\noindent
Similarly, suppose that $\mathcal{F}^\bullet$ and $\mathcal{G}^\bullet$
are bounded below complexes of quasi-coherent $\mathcal{O}_U$-modules.
A morphism in $D^+(\textit{Adeq}(\mathcal{O}_U))$ between these
consists of a pair $f : u\mathcal{F}^\bullet \to \mathcal{H}^\bullet$
and $s : u\mathcal{G}^\bullet \to \mathcal{H}^\bullet$ where $s$
is a quasi-isomorphism. Pick a quasi-isomorphism
$s' : \mathcal{H}^\bullet \to u\mathcal{E}^\bullet$. Then we see that
$s' \circ f : \mathcal{F} \to \mathcal{E}^\bullet$ and the
universal quasi-isomorphism
$s' \circ s : \mathcal{G}^\bullet \to \mathcal{E}^\bullet$ give 
a morphism in $S^{-1}K^{+}(\textit{QCoh}(\mathcal{O}_U))$ mapping
to the given morphism. This proves the "fully" part of full faithfulness.
Faithfulness is proved similarly.
\end{proof}

\noindent
Next, we briefly discuss the relationship between adequate
modules and all modules on the big fppf site of an affine scheme.
First we prove the following lemma.

\begin{lemma}
\label{lemma-right-adjoint-adequate}
Let $U = \text{Spec}(A)$ be an affine scheme.
The inclusion
$\textit{Adeq}(\mathcal{O}_U) \to
\textit{Mod}((\textit{Sch}/U)_\tau, \mathcal{O})$
has a right adjoint $Q$. Moreover, the adjunction mapping
$Q(\mathcal{F}) \to \mathcal{F}$ is an isomorphism for every adequate module
$\mathcal{F}$.
\end{lemma}

\begin{proof}
By
Topologies, Lemma \ref{topologies-lemma-affine-big-site-fppf}
(and similarly for the other topologies)
we may work with $\mathcal{O}$-modules on $(\textit{Aff}/U)_\tau$.
If we can show that the inclusion
$\textit{Adeq}(\mathcal{O}_U) \to
\textit{PMod}((\textit{Aff}/U)_\tau, \mathcal{O})$
into presheaves of $\mathcal{O}$-modules has an adjoint then we win.
Now a presheaf of $\mathcal{O}$-modules on $(\textit{Aff}/U)_\tau$
is exactly a functor as discussed in
Section \ref{section-quasi-coherent}
and among these the adequate functors exactly correspond to the
adequate modules (by definition).
Hence the lemma follows from
Lemma \ref{lemma-adjoint}.
\end{proof}

\noindent
The functor $Q$ from the lemma above
is a right adjoint it is left exact. Since the inclusion
functor is exact, see
Lemma \ref{lemma-abelian-adequate}
we conclude that $Q$ transforms injectives into injectives, and that
the category $\textit{Adeq}(\mathcal{O}_U)$ has enough injectives, see
Homology, Lemma \ref{homology-lemma-adjoint-enough-injectives}
and
Injectives, Theorem \ref{injectives-theorem-sheaves-modules-injectives}.
The following lemma will be improved on later (insert future reference here).

\begin{lemma}
\label{lemma-RQ-zero}
Let $U = \text{Spec}(A)$ be an affine scheme.
Let $0 \to \mathcal{F} \to \mathcal{G} \to \mathcal{H} \to 0$
be an exact sequence of $\mathcal{O}$-modules on
$(\textit{Sch}/U)_\tau$ with $\mathcal{F}$ adequate. Then
$0 \to Q(\mathcal{F}) \to Q(\mathcal{G}) \to Q(\mathcal{H}) \to 0$
is exact.
\end{lemma}

\begin{proof}
Recall that $Q(\mathcal{F}) = \mathcal{F}$. Consider the pullback
$$
0 \to \mathcal{F} \to \mathcal{E} \to Q(\mathcal{H}) \to 0
$$
of the given exact sequence by the adjunction map
$Q(\mathcal{H}) \to \mathcal{H}$. By
Lemma \ref{lemma-abelian-adequate}
the module $\mathcal{E}$ is adequate. It follows in a straightforward
manner that $\mathcal{E} = Q(\mathcal{G})$.
\end{proof}

\noindent
The lemma above means that $R^1Q(\mathcal{F})$ is zero for every
adequate module as one discovers upon embedding $\mathcal{F}$ into
an injective $\mathcal{O}$-module and applying the long exact sequence
involving the right derived functors of $Q$. However, it doesn't
immediately imply the same thing for $R^iQ(\mathcal{F})$, $i \geq 2$!

\begin{lemma}
\label{lemma-right-adjoint-adequate-compute}
Let $U = \text{Spec}(A)$ be an affine scheme. Let $\mathcal{I}$ be an
injective object of $\textit{Mod}((\textit{Sch}/U)_\tau, \mathcal{O})$.
Then $Q(\mathcal{I})$ is isomorphic to the
quasi-coherent sheaf associated to the $A$-module $\Gamma(U, \mathcal{I})$.
\end{lemma}

\begin{proof}
Denote $\Gamma(U, \mathcal{I})^a$ the quasi-coherent $\mathcal{O}$-module
on $(\textit{Sch}/U)_\tau$ associated to $\mathcal{F}$.
By the universal property of $Q$ there exists a commutative diagram
$$
\xymatrix{
\Gamma(U, \mathcal{I})^a \ar[rr]_\alpha \ar[rd] & &
Q(\mathcal{I}) \ar[ld] \\
& \mathcal{I}
}
$$
Let $\varphi : \mathcal{F} \to \mathcal{I}$ be a morphism of
$\mathcal{O}$-modules with $\mathcal{F}$ adequate. By definition there is an
embedding $\mathcal{F} \subset \mathcal{G}$ with $\mathcal{G}$
quasi-coherent. Because $\mathcal{I}$ is an injective $\mathcal{O}$-module,
there exists a map $\psi : \mathcal{G} \to \mathcal{I}$ extending
$\varphi$. By the universal property of $\widetilde{\ }$, see
Schemes, Lemma \ref{schemes-lemma-compare-constructions},
there exists a map
$\tilde\psi : \mathcal{G} \to \Gamma(U, \mathcal{I})^a$
factoring $\psi$. The restriction $\tilde\psi|_{\mathcal{F}}$ gives
a map $\mathcal{F} \to \Gamma(U, \mathcal{I})^a$ over
$\mathcal{I}$. If we apply this reasoning to $Q(\mathcal{I}) \to \mathcal{I}$
we find a map $\beta : Q(\mathcal{I}) \to \Gamma(U, \mathcal{I})^a$
over $\mathcal{I}$. The universal property of $Q(\mathcal{I}) \to \mathcal{I}$
implies that $\alpha \circ \beta = \text{id}_{Q(\mathcal{I})}$.
Thus
$$
\Gamma(U, \mathcal{I})^a =
\beta(Q(\mathcal{I})) \oplus \text{Ker}(\alpha).
$$
By
Descent, Lemma \ref{descent-lemma-equivalence-quasi-coherent-limits}
we find that $Q(\mathcal{I})$ and $\text{Ker}(\alpha)$ are quasi-coherent
as the cokernel of a map
$\Gamma(U, \mathcal{I})^a \to \Gamma(U, \mathcal{I})^a$.
Since $\Gamma(U, \text{Ker}(\alpha)) = 0$ by the commutativity of the
first diagram we conclude that $\text{Ker}(\alpha) = 0$.
\end{proof}

\noindent
By the discussion in
Section \ref{section-adequate}
the embedding
$\textit{Adeq}(\mathcal{O}_U) \subset
\textit{Mod}((\textit{Sch}/U)_\tau, \mathcal{O})$
exhibits $\textit{Adeq}(\mathcal{O}_U)$ as a Serre subcategory of
the category of all $\mathcal{O}$-modules. Denote
$$
D_{\textit{Adeq}}(\mathcal{O}) \subset
D(\mathcal{O}) = D(\textit{Mod}((\textit{Sch}/U)_\tau, \mathcal{O}))
$$
the subcategory of complexes whose cohomology sheaves are adequate, see
Derived Categories, Section \ref{derived-section-triangulated-sub}.
Thus we obtain a canonical functor
$$
D(\textit{Adeq}(\mathcal{O}_U))
\longrightarrow
D_{\textit{Adeq}}(\mathcal{O})
$$
see
Derived Categories, Equation (\ref{derived-equation-compare}).
We think the bounded below version
\begin{equation}
\label{equation-compare-bounded-adequate}
D^+(\textit{Adeq}(\mathcal{O}_U))
\longrightarrow
D^+_{\textit{Adeq}}(\mathcal{O})
\end{equation}
is an equivalence. Namely, a quasi-inverse to
(\ref{equation-compare-bounded-adequate}) should be the right derived
functor $RQ$. To show this works, we have to show that
$R^iQ(\mathcal{F}) = 0$ for all $i > 0$ and all adequate module
$\mathcal{F}$. To be continued...










\input{chapters}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
